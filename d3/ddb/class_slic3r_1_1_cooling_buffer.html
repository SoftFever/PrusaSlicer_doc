<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: Slic3r::CoolingBuffer Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d3/ddb/class_slic3r_1_1_cooling_buffer.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d6/d52/class_slic3r_1_1_cooling_buffer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::CoolingBuffer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../">src/libslic3r/GCode/CoolingBuffer.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::CoolingBuffer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d6/d8d/class_slic3r_1_1_cooling_buffer__coll__graph.svg" width="596" height="348"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af79601fb79aecb7f2d657a2921545242"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#af79601fb79aecb7f2d657a2921545242">CoolingBuffer</a> (<a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;gcodegen)</td></tr>
<tr class="separator:af79601fb79aecb7f2d657a2921545242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cb99a8e449d284c4b76b1ef6c3ab6df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a9cb99a8e449d284c4b76b1ef6c3ab6df">reset</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> &amp;position)</td></tr>
<tr class="separator:a9cb99a8e449d284c4b76b1ef6c3ab6df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18a9e8f3e8078621f09f7d3c8691d35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad18a9e8f3e8078621f09f7d3c8691d35">set_current_extruder</a> (unsigned int extruder_id)</td></tr>
<tr class="separator:ad18a9e8f3e8078621f09f7d3c8691d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3313bc5271e4cc935b529572e0cac6e3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3313bc5271e4cc935b529572e0cac6e3">process_layer</a> (std::string &amp;&amp;gcode, size_t layer_id, bool flush)</td></tr>
<tr class="separator:a3313bc5271e4cc935b529572e0cac6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ef6e7c60242abe39bf380d55a1f26b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a38ef6e7c60242abe39bf380d55a1f26b">process_layer</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;gcode, size_t layer_id, bool flush)</td></tr>
<tr class="separator:a38ef6e7c60242abe39bf380d55a1f26b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a07b3bb46704ba94699e78cdc560deef8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a07b3bb46704ba94699e78cdc560deef8">operator=</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a> &amp;)=delete</td></tr>
<tr class="separator:a07b3bb46704ba94699e78cdc560deef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad65e3b942d606c994b626d0818f46e10"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad65e3b942d606c994b626d0818f46e10">parse_layer_gcode</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;gcode, std::vector&lt; float &gt; &amp;current_pos) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad65e3b942d606c994b626d0818f46e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039c2dcd08f3d002182b4d009caafd7c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a039c2dcd08f3d002182b4d009caafd7c">calculate_layer_slowdown</a> (std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; &amp;per_extruder_adjustments)</td></tr>
<tr class="separator:a039c2dcd08f3d002182b4d009caafd7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d6ecc9309d2fa4f3962bc4715b73fc"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad6d6ecc9309d2fa4f3962bc4715b73fc">apply_layer_cooldown</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;gcode, size_t layer_id, float layer_time, std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; &amp;per_extruder_adjustments)</td></tr>
<tr class="separator:ad6d6ecc9309d2fa4f3962bc4715b73fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ace03e18b93c1e6ef690fe4d171bc3e11"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a></td></tr>
<tr class="separator:ace03e18b93c1e6ef690fe4d171bc3e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5d76a211c23bf0db73c90ef41e6886"><td class="memItemLeft" align="right" valign="top">std::vector&lt; char &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a2b5d76a211c23bf0db73c90ef41e6886">m_axis</a></td></tr>
<tr class="separator:a2b5d76a211c23bf0db73c90ef41e6886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54a957a8014098e34682fc52e8fcdbd4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a></td></tr>
<tr class="separator:a54a957a8014098e34682fc52e8fcdbd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6a8b43f1a4e019265862ae709eb57b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a></td></tr>
<tr class="separator:ab6a8b43f1a4e019265862ae709eb57b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f70d25be0e9b27329aec4f3489d20f7"><td class="memItemLeft" align="right" valign="top">std::vector&lt; unsigned int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a></td></tr>
<tr class="separator:a1f70d25be0e9b27329aec4f3489d20f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad867e6e51db8529b95dd20f565e524"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">m_num_extruders</a> { 0 }</td></tr>
<tr class="separator:aaad867e6e51db8529b95dd20f565e524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31140eda5547d15e3b78e43f576768f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a></td></tr>
<tr class="separator:a31140eda5547d15e3b78e43f576768f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab506fd68632cff030b041c5cd6de8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> PrintConfig &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a></td></tr>
<tr class="separator:a1ab506fd68632cff030b041c5cd6de8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73dca3613882898f631e407325cfa742"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a></td></tr>
<tr class="separator:a73dca3613882898f631e407325cfa742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82fae524c24635ded4fdeb6457b5260e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a82fae524c24635ded4fdeb6457b5260e">m_cooling_logic_proportional</a> = false</td></tr>
<tr class="separator:a82fae524c24635ded4fdeb6457b5260e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af79601fb79aecb7f2d657a2921545242" name="af79601fb79aecb7f2d657a2921545242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af79601fb79aecb7f2d657a2921545242">&#9670;&#160;</a></span>CoolingBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Slic3r::CoolingBuffer::CoolingBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;&#160;</td>
          <td class="paramname"><em>gcodegen</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   22</span>                                            : <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>(gcodegen.config()), <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a>(gcodegen.writer().toolchange_prefix()), <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a>(0)</div>
<div class="line"><span class="lineno">   23</span>{</div>
<div class="line"><span class="lineno">   24</span>    this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a9cb99a8e449d284c4b76b1ef6c3ab6df">reset</a>(gcodegen.writer().get_position());</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>    <span class="keyword">const</span> std::vector&lt;Extruder&gt; &amp;extruders = gcodegen.writer().extruders();</div>
<div class="line"><span class="lineno">   27</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>.reserve(extruders.size());</div>
<div class="line"><span class="lineno">   28</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> Extruder &amp;ex : extruders) {</div>
<div class="line"><span class="lineno">   29</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">m_num_extruders</a> = std::max(ex.id() + 1, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">m_num_extruders</a>);</div>
<div class="line"><span class="lineno">   30</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>.emplace_back(ex.id());</div>
<div class="line"><span class="lineno">   31</span>    }</div>
<div class="line"><span class="lineno">   32</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a1ab506fd68632cff030b041c5cd6de8d"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">Slic3r::CoolingBuffer::m_config</a></div><div class="ttdeci">const PrintConfig &amp; m_config</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:56</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a1f70d25be0e9b27329aec4f3489d20f7"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">Slic3r::CoolingBuffer::m_extruder_ids</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; m_extruder_ids</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:50</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a31140eda5547d15e3b78e43f576768f0"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">Slic3r::CoolingBuffer::m_toolchange_prefix</a></div><div class="ttdeci">const std::string m_toolchange_prefix</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:53</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a73dca3613882898f631e407325cfa742"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">Slic3r::CoolingBuffer::m_current_extruder</a></div><div class="ttdeci">unsigned int m_current_extruder</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:57</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a9cb99a8e449d284c4b76b1ef6c3ab6df"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a9cb99a8e449d284c4b76b1ef6c3ab6df">Slic3r::CoolingBuffer::reset</a></div><div class="ttdeci">void reset(const Vec3d &amp;position)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:34</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_aaad867e6e51db8529b95dd20f565e524"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">Slic3r::CoolingBuffer::m_num_extruders</a></div><div class="ttdeci">unsigned int m_num_extruders</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:52</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00034">Slic3r::GCodeWriter::extruders()</a>, <a class="el" href="../../#l00075">Slic3r::GCodeWriter::get_position()</a>, <a class="el" href="../../#l00050">m_extruder_ids</a>, <a class="el" href="../../#l00052">m_num_extruders</a>, <a class="el" href="../../#l00034">reset()</a>, and <a class="el" href="../../#l00174">Slic3r::GCode::writer()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_af79601fb79aecb7f2d657a2921545242_cgraph.svg" width="344" height="232"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad6d6ecc9309d2fa4f3962bc4715b73fc" name="ad6d6ecc9309d2fa4f3962bc4715b73fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6d6ecc9309d2fa4f3962bc4715b73fc">&#9670;&#160;</a></span>apply_layer_cooldown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::CoolingBuffer::apply_layer_cooldown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>gcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>layer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>layer_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>per_extruder_adjustments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  734</span>{</div>
<div class="line"><span class="lineno">  735</span>    <span class="comment">// First sort the adjustment lines by of multiple extruders by their position in the source G-code.</span></div>
<div class="line"><span class="lineno">  736</span>    std::vector&lt;const CoolingLine*&gt; lines;</div>
<div class="line"><span class="lineno">  737</span>    {</div>
<div class="line"><span class="lineno">  738</span>        <span class="keywordtype">size_t</span> n_lines = 0;</div>
<div class="line"><span class="lineno">  739</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> PerExtruderAdjustments &amp;adj : per_extruder_adjustments)</div>
<div class="line"><span class="lineno">  740</span>            n_lines += adj.lines.<a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">size</a>();</div>
<div class="line"><span class="lineno">  741</span>        lines.reserve(n_lines);</div>
<div class="line"><span class="lineno">  742</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> PerExtruderAdjustments &amp;adj : per_extruder_adjustments)</div>
<div class="line"><span class="lineno">  743</span>            for (<a class="code hl_define" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> CoolingLine &amp;line : adj.lines)</div>
<div class="line"><span class="lineno">  744</span>                lines.emplace_back(&amp;line);</div>
<div class="line"><span class="lineno">  745</span>        std::sort(lines.begin(), lines.end(), [](<span class="keyword">const</span> CoolingLine *ln1, <span class="keyword">const</span> CoolingLine *ln2) { return ln1-&gt;line_start &lt; ln2-&gt;line_start; } );</div>
<div class="line"><span class="lineno">  746</span>    }</div>
<div class="line"><span class="lineno">  747</span>    <span class="comment">// Second generate the adjusted G-code.</span></div>
<div class="line"><span class="lineno">  748</span>    std::string new_gcode;</div>
<div class="line"><span class="lineno">  749</span>    new_gcode.reserve(<a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.size() * 2);</div>
<div class="line"><span class="lineno">  750</span>    <span class="keywordtype">bool</span> bridge_fan_control = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  751</span>    <span class="keywordtype">int</span>  bridge_fan_speed   = 0;</div>
<div class="line"><span class="lineno">  752</span>    <span class="keyword">auto</span> change_extruder_set_fan = [<span class="keyword">this</span>, layer_id, layer_time, &amp;new_gcode, &amp;bridge_fan_control, &amp;bridge_fan_speed]() {</div>
<div class="line"><span class="lineno">  753</span><span class="preprocessor">#define EXTRUDER_CONFIG(OPT) m_config.OPT.get_at(m_current_extruder)</span></div>
<div class="line"><span class="lineno">  754</span>        <span class="keywordtype">int</span> min_fan_speed = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(min_fan_speed);</div>
<div class="line"><span class="lineno">  755</span>        <span class="keywordtype">int</span> fan_speed_new = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(fan_always_on) ? min_fan_speed : 0;</div>
<div class="line"><span class="lineno">  756</span>        std::pair&lt;int, int&gt; custom_fan_speed_limits{fan_speed_new, 100 };</div>
<div class="line"><span class="lineno">  757</span>        <span class="keywordtype">int</span> disable_fan_first_layers = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(disable_fan_first_layers);</div>
<div class="line"><span class="lineno">  758</span>        <span class="comment">// Is the fan speed ramp enabled?</span></div>
<div class="line"><span class="lineno">  759</span>        <span class="keywordtype">int</span> full_fan_speed_layer = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(full_fan_speed_layer);</div>
<div class="line"><span class="lineno">  760</span>        <span class="keywordflow">if</span> (disable_fan_first_layers &lt;= 0 &amp;&amp; full_fan_speed_layer &gt; 0) {</div>
<div class="line"><span class="lineno">  761</span>            <span class="comment">// When ramping up fan speed from disable_fan_first_layers to full_fan_speed_layer, force disable_fan_first_layers above zero,</span></div>
<div class="line"><span class="lineno">  762</span>            <span class="comment">// so there will be a zero fan speed at least at the 1st layer.</span></div>
<div class="line"><span class="lineno">  763</span>            disable_fan_first_layers = 1;</div>
<div class="line"><span class="lineno">  764</span>        }</div>
<div class="line"><span class="lineno">  765</span>        <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(layer_id) &gt;= disable_fan_first_layers) {</div>
<div class="line"><span class="lineno">  766</span>            <span class="keywordtype">int</span>   max_fan_speed             = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(max_fan_speed);</div>
<div class="line"><span class="lineno">  767</span>            <span class="keywordtype">float</span> slowdown_below_layer_time = float(<a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(slowdown_below_layer_time));</div>
<div class="line"><span class="lineno">  768</span>            <span class="keywordtype">float</span> fan_below_layer_time      = float(<a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(fan_below_layer_time));</div>
<div class="line"><span class="lineno">  769</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(cooling)) {</div>
<div class="line"><span class="lineno">  770</span>                <span class="keywordflow">if</span> (layer_time &lt; slowdown_below_layer_time) {</div>
<div class="line"><span class="lineno">  771</span>                    <span class="comment">// Layer time very short. Enable the fan to a full throttle.</span></div>
<div class="line"><span class="lineno">  772</span>                    fan_speed_new = max_fan_speed;</div>
<div class="line"><span class="lineno">  773</span>                    custom_fan_speed_limits.first = fan_speed_new;</div>
<div class="line"><span class="lineno">  774</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (layer_time &lt; fan_below_layer_time) {</div>
<div class="line"><span class="lineno">  775</span>                    <span class="comment">// Layer time quite short. Enable the fan proportionally according to the current layer time.</span></div>
<div class="line"><span class="lineno">  776</span>                    assert(layer_time &gt;= slowdown_below_layer_time);</div>
<div class="line"><span class="lineno">  777</span>                    <span class="keywordtype">double</span> t = (layer_time - slowdown_below_layer_time) / (fan_below_layer_time - slowdown_below_layer_time);</div>
<div class="line"><span class="lineno">  778</span>                    fan_speed_new = int(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a3230e10964844c34fb73eaccc84dc8a7">floor</a>(t * min_fan_speed + (1. - t) * max_fan_speed) + 0.5);</div>
<div class="line"><span class="lineno">  779</span>                    custom_fan_speed_limits.first = fan_speed_new;</div>
<div class="line"><span class="lineno">  780</span>                }</div>
<div class="line"><span class="lineno">  781</span>            }</div>
<div class="line"><span class="lineno">  782</span>            bridge_fan_speed   = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(bridge_fan_speed);</div>
<div class="line"><span class="lineno">  783</span>            <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(layer_id) &gt;= disable_fan_first_layers &amp;&amp; <span class="keywordtype">int</span>(layer_id) + 1 &lt; full_fan_speed_layer) {</div>
<div class="line"><span class="lineno">  784</span>                <span class="comment">// Ramp up the fan speed from disable_fan_first_layers to full_fan_speed_layer.</span></div>
<div class="line"><span class="lineno">  785</span>                <span class="keywordtype">float</span> factor = float(<span class="keywordtype">int</span>(layer_id + 1) - disable_fan_first_layers) / float(full_fan_speed_layer - disable_fan_first_layers);</div>
<div class="line"><span class="lineno">  786</span>                fan_speed_new    = std::clamp(<span class="keywordtype">int</span>(<span class="keywordtype">float</span>(fan_speed_new) * factor + 0.5f), 0, 255);</div>
<div class="line"><span class="lineno">  787</span>                bridge_fan_speed = std::clamp(<span class="keywordtype">int</span>(<span class="keywordtype">float</span>(bridge_fan_speed) * factor + 0.5f), 0, 255);</div>
<div class="line"><span class="lineno">  788</span>                custom_fan_speed_limits.second = fan_speed_new;</div>
<div class="line"><span class="lineno">  789</span>            }</div>
<div class="line"><span class="lineno">  790</span><span class="preprocessor">#undef EXTRUDER_CONFIG</span></div>
<div class="line"><span class="lineno">  791</span>            bridge_fan_control = bridge_fan_speed &gt; fan_speed_new;</div>
<div class="line"><span class="lineno">  792</span>        } <span class="keywordflow">else</span> { <span class="comment">// fan disabled</span></div>
<div class="line"><span class="lineno">  793</span>            bridge_fan_control = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  794</span>            bridge_fan_speed   = 0;</div>
<div class="line"><span class="lineno">  795</span>            fan_speed_new      = 0;</div>
<div class="line"><span class="lineno">  796</span>            custom_fan_speed_limits.second = 0;</div>
<div class="line"><span class="lineno">  797</span>        }</div>
<div class="line"><span class="lineno">  798</span>        <span class="keywordflow">if</span> (fan_speed_new != <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a>) {</div>
<div class="line"><span class="lineno">  799</span>            <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a> = fan_speed_new;</div>
<div class="line"><span class="lineno">  800</span>            new_gcode  += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a946bdda91a72351f512fbfd97f42563d">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_comments, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a>);</div>
<div class="line"><span class="lineno">  801</span>        }</div>
<div class="line"><span class="lineno">  802</span>        custom_fan_speed_limits.first = std::min(custom_fan_speed_limits.first, custom_fan_speed_limits.second);</div>
<div class="line"><span class="lineno">  803</span>        <span class="keywordflow">return</span> custom_fan_speed_limits;</div>
<div class="line"><span class="lineno">  804</span>    };</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>         *<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>               = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str();</div>
<div class="line"><span class="lineno">  807</span>    <span class="keywordtype">int</span>                 current_feedrate  = 0;</div>
<div class="line"><span class="lineno">  808</span>    std::pair&lt;int,int&gt; fan_speed_limits = change_extruder_set_fan();</div>
<div class="line"><span class="lineno">  809</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> CoolingLine *line : lines) {</div>
<div class="line"><span class="lineno">  810</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *line_start  = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str() + line-&gt;line_start;</div>
<div class="line"><span class="lineno">  811</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *line_end    = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str() + line-&gt;line_end;</div>
<div class="line"><span class="lineno">  812</span>        <span class="keywordflow">if</span> (line_start &gt; pos)</div>
<div class="line"><span class="lineno">  813</span>            new_gcode.append(pos, line_start - pos);</div>
<div class="line"><span class="lineno">  814</span>        <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb7a2ab368edd5078cd74b1ffb5b61a0">CoolingLine::TYPE_SET_TOOL</a>) {</div>
<div class="line"><span class="lineno">  815</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_extruder = 0;</div>
<div class="line"><span class="lineno">  816</span>            <span class="keyword">auto</span> res = std::from_chars(line_start + <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a>.size(), line_end, new_extruder);</div>
<div class="line"><span class="lineno">  817</span>            <span class="keywordflow">if</span> (res.ec != std::errc::invalid_argument &amp;&amp; new_extruder != <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a>) {</div>
<div class="line"><span class="lineno">  818</span>                <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a> = new_extruder;</div>
<div class="line"><span class="lineno">  819</span>                fan_speed_limits = change_extruder_set_fan();</div>
<div class="line"><span class="lineno">  820</span>            }</div>
<div class="line"><span class="lineno">  821</span>            new_gcode.append(line_start, line_end - line_start);</div>
<div class="line"><span class="lineno">  822</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a7edf59bc8072d3a4a94347887c8229e4">CoolingLine::TYPE_SET_FAN_SPEED</a>) {</div>
<div class="line"><span class="lineno">  823</span>            <span class="keywordtype">int</span> new_speed = std::clamp(line-&gt;fan_speed, fan_speed_limits.first, fan_speed_limits.second);</div>
<div class="line"><span class="lineno">  824</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a> != new_speed) {</div>
<div class="line"><span class="lineno">  825</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a946bdda91a72351f512fbfd97f42563d">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_comments, new_speed);</div>
<div class="line"><span class="lineno">  826</span>                <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a> = new_speed;</div>
<div class="line"><span class="lineno">  827</span>            }</div>
<div class="line"><span class="lineno">  828</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8ae544e7d68f9a03b24507b0488d69170a">CoolingLine::TYPE_RESET_FAN_SPEED</a>){</div>
<div class="line"><span class="lineno">  829</span>            fan_speed_limits = change_extruder_set_fan();</div>
<div class="line"><span class="lineno">  830</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a5919142af7753e0be05cb164e74f8fae">CoolingLine::TYPE_BRIDGE_FAN_START</a>) {</div>
<div class="line"><span class="lineno">  831</span>            <span class="keywordflow">if</span> (bridge_fan_control)</div>
<div class="line"><span class="lineno">  832</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a946bdda91a72351f512fbfd97f42563d">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_comments, bridge_fan_speed);</div>
<div class="line"><span class="lineno">  833</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a740568ca5e627348f0a5723aa5fe79c2">CoolingLine::TYPE_BRIDGE_FAN_END</a>) {</div>
<div class="line"><span class="lineno">  834</span>            <span class="keywordflow">if</span> (bridge_fan_control)</div>
<div class="line"><span class="lineno">  835</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a946bdda91a72351f512fbfd97f42563d">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_comments, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a>);</div>
<div class="line"><span class="lineno">  836</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a91eba6bbac191e1e9ecbbf7c97d158c9">CoolingLine::TYPE_EXTRUDE_END</a>) {</div>
<div class="line"><span class="lineno">  837</span>            <span class="comment">// Just remove this comment.</span></div>
<div class="line"><span class="lineno">  838</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; (<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8ac93d50e1b2ca17a82f3fa19b4a17e85c">CoolingLine::TYPE_ADJUSTABLE_EMPTY</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6">CoolingLine::TYPE_HAS_F</a>)) {</div>
<div class="line"><span class="lineno">  839</span>            <span class="comment">// Find the start of a comment, or roll to the end of line.</span></div>
<div class="line"><span class="lineno">  840</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> = line_start;</div>
<div class="line"><span class="lineno">  841</span>            <span class="keywordflow">for</span> (; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> &lt; line_end &amp;&amp; *<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> != <span class="charliteral">&#39;;&#39;</span>; ++ <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>);</div>
<div class="line"><span class="lineno">  842</span>            <span class="comment">// Find the &#39;F&#39; word.</span></div>
<div class="line"><span class="lineno">  843</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *fpos            = strstr(line_start + 2, <span class="stringliteral">&quot; F&quot;</span>) + 2;</div>
<div class="line"><span class="lineno">  844</span>            <span class="keywordtype">int</span>         new_feedrate    = current_feedrate;</div>
<div class="line"><span class="lineno">  845</span>            <span class="comment">// Modify the F word of the current G-code line.</span></div>
<div class="line"><span class="lineno">  846</span>            <span class="keywordtype">bool</span>        modify          = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  847</span>            <span class="comment">// Remove the F word from the current G-code line.</span></div>
<div class="line"><span class="lineno">  848</span>            <span class="keywordtype">bool</span>        remove          = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  849</span>            assert(fpos != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  850</span>            <span class="keywordflow">if</span> (line-&gt;slowdown)</div>
<div class="line"><span class="lineno">  851</span>                new_feedrate = int(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a3230e10964844c34fb73eaccc84dc8a7">floor</a>(60. * line-&gt;feedrate + 0.5));</div>
<div class="line"><span class="lineno">  852</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  853</span>                <span class="comment">//auto res = </span></div>
<div class="line"><span class="lineno">  854</span>                    std::from_chars(fpos, line_end, new_feedrate);</div>
<div class="line"><span class="lineno">  855</span>            <span class="keywordflow">if</span> (new_feedrate == current_feedrate) {</div>
<div class="line"><span class="lineno">  856</span>                <span class="comment">// No need to change the F value.</span></div>
<div class="line"><span class="lineno">  857</span>                <span class="keywordflow">if</span> ((line-&gt;type &amp; (<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8ac93d50e1b2ca17a82f3fa19b4a17e85c">CoolingLine::TYPE_ADJUSTABLE_EMPTY</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a>)) || line-&gt;length == 0.)</div>
<div class="line"><span class="lineno">  858</span>                    <span class="comment">// Feedrate does not change and this line does not move the print head. Skip the complete G-code line including the G-code comment.</span></div>
<div class="line"><span class="lineno">  859</span>                    <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> = line_end;</div>
<div class="line"><span class="lineno">  860</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  861</span>                    <span class="comment">// Remove the feedrate from the G0/G1 line. The G-code line may become empty!</span></div>
<div class="line"><span class="lineno">  862</span>                    remove = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  863</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;slowdown) {</div>
<div class="line"><span class="lineno">  864</span>                <span class="comment">// The F value will be overwritten.</span></div>
<div class="line"><span class="lineno">  865</span>                modify = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  866</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  867</span>                <span class="comment">// The F value is different from current_feedrate, but not slowed down, thus the G-code line will not be modified.</span></div>
<div class="line"><span class="lineno">  868</span>                <span class="comment">// Emit the line without the comment.</span></div>
<div class="line"><span class="lineno">  869</span>                new_gcode.append(line_start, end - line_start);</div>
<div class="line"><span class="lineno">  870</span>                current_feedrate = new_feedrate;</div>
<div class="line"><span class="lineno">  871</span>            }</div>
<div class="line"><span class="lineno">  872</span>            <span class="keywordflow">if</span> (modify || remove) {</div>
<div class="line"><span class="lineno">  873</span>                <span class="keywordflow">if</span> (modify) {</div>
<div class="line"><span class="lineno">  874</span>                    <span class="comment">// Replace the feedrate.</span></div>
<div class="line"><span class="lineno">  875</span>                    new_gcode.append(line_start, fpos - line_start);</div>
<div class="line"><span class="lineno">  876</span>                    current_feedrate = new_feedrate;</div>
<div class="line"><span class="lineno">  877</span>                    <span class="keywordtype">char</span> buf[64];</div>
<div class="line"><span class="lineno">  878</span>                    sprintf(buf, <span class="stringliteral">&quot;%d&quot;</span>, <span class="keywordtype">int</span>(current_feedrate));</div>
<div class="line"><span class="lineno">  879</span>                    new_gcode += buf;</div>
<div class="line"><span class="lineno">  880</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  881</span>                    <span class="comment">// Remove the feedrate word.</span></div>
<div class="line"><span class="lineno">  882</span>                    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> = fpos;</div>
<div class="line"><span class="lineno">  883</span>                    <span class="comment">// Roll the pointer before the &#39;F&#39; word.</span></div>
<div class="line"><span class="lineno">  884</span>                    <span class="keywordflow">for</span> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> -= 2; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> &gt; line_start &amp;&amp; (*<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> == <span class="charliteral">&#39; &#39;</span> || *<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> == <span class="charliteral">&#39;\t&#39;</span>); -- <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno">  885</span>                    <span class="comment">// Append up to the F word, without the trailing whitespace.</span></div>
<div class="line"><span class="lineno">  886</span>                    new_gcode.append(line_start, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> - line_start + 1);</div>
<div class="line"><span class="lineno">  887</span>                }</div>
<div class="line"><span class="lineno">  888</span>                <span class="comment">// Skip the non-whitespaces of the F parameter up the comment or end of line.</span></div>
<div class="line"><span class="lineno">  889</span>                <span class="keywordflow">for</span> (; fpos != <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> &amp;&amp; *fpos != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *fpos != <span class="charliteral">&#39;;&#39;</span> &amp;&amp; *fpos != <span class="charliteral">&#39;\n&#39;</span>; ++ fpos);</div>
<div class="line"><span class="lineno">  890</span>                <span class="comment">// Append the rest of the line without the comment.</span></div>
<div class="line"><span class="lineno">  891</span>                <span class="keywordflow">if</span> (remove &amp;&amp; (fpos == end || *fpos == <span class="charliteral">&#39;\n&#39;</span>) &amp;&amp; (new_gcode == <span class="stringliteral">&quot;G1&quot;</span> || boost::ends_with(new_gcode, <span class="stringliteral">&quot;\nG1&quot;</span>))) {</div>
<div class="line"><span class="lineno">  892</span>                    <span class="comment">// The G-code line only contained the F word, now it is empty. Remove it completely including the comments.</span></div>
<div class="line"><span class="lineno">  893</span>                    new_gcode.resize(new_gcode.size() - 2);</div>
<div class="line"><span class="lineno">  894</span>                    <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> = line_end;</div>
<div class="line"><span class="lineno">  895</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  896</span>                    <span class="comment">// The G-code line may not be empty yet. Emit the rest of it.</span></div>
<div class="line"><span class="lineno">  897</span>                    new_gcode.append(fpos, end - fpos);</div>
<div class="line"><span class="lineno">  898</span>                }</div>
<div class="line"><span class="lineno">  899</span>            }</div>
<div class="line"><span class="lineno">  900</span>            <span class="comment">// Process the rest of the line.</span></div>
<div class="line"><span class="lineno">  901</span>            <span class="keywordflow">if</span> (end &lt; line_end) {</div>
<div class="line"><span class="lineno">  902</span>                <span class="keywordflow">if</span> (line-&gt;type &amp; (<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8ac93d50e1b2ca17a82f3fa19b4a17e85c">CoolingLine::TYPE_ADJUSTABLE_EMPTY</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a>)) {</div>
<div class="line"><span class="lineno">  903</span>                    <span class="comment">// Process comments, remove &quot;;_EXTRUDE_SET_SPEED&quot;, &quot;;_EXTERNAL_PERIMETER&quot;, &quot;;_WIPE&quot;</span></div>
<div class="line"><span class="lineno">  904</span>                    std::string <a class="code hl_define" href="../../d8/d33/lexer_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>(end, line_end);</div>
<div class="line"><span class="lineno">  905</span>                    boost::replace_all(<a class="code hl_define" href="../../d8/d33/lexer_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>, <span class="stringliteral">&quot;;_EXTRUDE_SET_SPEED&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  906</span>                    <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a>)</div>
<div class="line"><span class="lineno">  907</span>                        boost::replace_all(<a class="code hl_define" href="../../d8/d33/lexer_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>, <span class="stringliteral">&quot;;_EXTERNAL_PERIMETER&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  908</span>                    <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a>)</div>
<div class="line"><span class="lineno">  909</span>                        boost::replace_all(<a class="code hl_define" href="../../d8/d33/lexer_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>, <span class="stringliteral">&quot;;_WIPE&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  910</span>                    new_gcode += <a class="code hl_define" href="../../d8/d33/lexer_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>;</div>
<div class="line"><span class="lineno">  911</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  912</span>                    <span class="comment">// Just attach the rest of the source line.</span></div>
<div class="line"><span class="lineno">  913</span>                    new_gcode.append(end, line_end - end);</div>
<div class="line"><span class="lineno">  914</span>                }</div>
<div class="line"><span class="lineno">  915</span>            }</div>
<div class="line"><span class="lineno">  916</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  917</span>            new_gcode.append(line_start, line_end - line_start);</div>
<div class="line"><span class="lineno">  918</span>        }</div>
<div class="line"><span class="lineno">  919</span>        <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a> = line_end;</div>
<div class="line"><span class="lineno">  920</span>    }</div>
<div class="line"><span class="lineno">  921</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *gcode_end = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str() + <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.size();</div>
<div class="line"><span class="lineno">  922</span>    <span class="keywordflow">if</span> (pos &lt; gcode_end)</div>
<div class="line"><span class="lineno">  923</span>        new_gcode.append(pos, gcode_end - pos);</div>
<div class="line"><span class="lineno">  924</span> </div>
<div class="line"><span class="lineno">  925</span>    <span class="comment">// There should be no empty G1 lines emitted.</span></div>
<div class="line"><span class="lineno">  926</span>    assert(new_gcode.find(<span class="stringliteral">&quot;G1\n&quot;</span>) == std::string::npos);</div>
<div class="line"><span class="lineno">  927</span>    <span class="keywordflow">return</span> new_gcode;</div>
<div class="line"><span class="lineno">  928</span>}</div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a3230e10964844c34fb73eaccc84dc8a7"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a3230e10964844c34fb73eaccc84dc8a7">floor</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const FloorReturnType floor() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:388</div></div>
<div class="ttc" id="a_g_code_8cpp_html_a2dec0e9fe2fb1c9e3862bc3fd4b2d911"><div class="ttname"><a href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a></div><div class="ttdeci">#define EXTRUDER_CONFIG(OPT)</div><div class="ttdef"><b>Definition</b> GCode.cpp:434</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_ab6a8b43f1a4e019265862ae709eb57b6"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">Slic3r::CoolingBuffer::m_fan_speed</a></div><div class="ttdeci">int m_fan_speed</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:47</div></div>
<div class="ttc" id="aclass_slic3r_1_1_g_code_writer_html_a946bdda91a72351f512fbfd97f42563d"><div class="ttname"><a href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a946bdda91a72351f512fbfd97f42563d">Slic3r::GCodeWriter::set_fan</a></div><div class="ttdeci">static std::string set_fan(const GCodeFlavor gcode_flavor, bool gcode_comments, unsigned int speed)</div><div class="ttdef"><b>Definition</b> GCodeWriter.cpp:503</div></div>
<div class="ttc" id="agetopt_8c_html_a2c212835823e3c54a8ab6d95c652660e"><div class="ttname"><a href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></div><div class="ttdeci">#define const</div><div class="ttdef"><b>Definition</b> getopt.c:38</div></div>
<div class="ttc" id="alexer_8c_html_a43be22b7a1b528eaf759e034ec581543"><div class="ttname"><a href="../../d8/d33/lexer_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a></div><div class="ttdeci">#define comment</div><div class="ttdef"><b>Definition</b> lexer.c:1004</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">Slic3r::Utils::TimeFormat::gcode</a></div><div class="ttdeci">@ gcode</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a2d49c0885f5562f98fbb19cbe6590d11"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">Slic3r::sla::pos</a></div><div class="ttdeci">Vec3d pos(const Pt &amp;p)</div><div class="ttdef"><b>Definition</b> ReprojectPointsOnMesh.hpp:14</div></div>
<div class="ttc" id="anamespace_slic3r_html_a92b2e5013291a55201abda7303b67baf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">Slic3r::f</a></div><div class="ttdeci">static double f(double x, double z_sin, double z_cos, bool vertical, bool flip)</div><div class="ttdef"><b>Definition</b> FillGyroid.cpp:12</div></div>
<div class="ttc" id="anamespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail_html_a876af6f91231ae4e7e7316f5402682dc"><div class="ttname"><a href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">TCB_SPAN_NAMESPACE_NAME::detail::size</a></div><div class="ttdeci">constexpr auto size(const C &amp;c) -&gt; decltype(c.size())</div><div class="ttdef"><b>Definition</b> span.hpp:183</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_ac9b51e95f63e38d00e5fc46bb96927c3"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">libnest2d::shapelike::end</a></div><div class="ttdeci">S::iterator end(S &amp;sh, const PathTag &amp;)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:620</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">Slic3r::CoolingLine::TYPE_ADJUSTABLE</a></div><div class="ttdeci">@ TYPE_ADJUSTABLE</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:53</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">Slic3r::CoolingLine::TYPE_WIPE</a></div><div class="ttdeci">@ TYPE_WIPE</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:57</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a5919142af7753e0be05cb164e74f8fae"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a5919142af7753e0be05cb164e74f8fae">Slic3r::CoolingLine::TYPE_BRIDGE_FAN_START</a></div><div class="ttdeci">@ TYPE_BRIDGE_FAN_START</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:49</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6">Slic3r::CoolingLine::TYPE_HAS_F</a></div><div class="ttdeci">@ TYPE_HAS_F</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:56</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a740568ca5e627348f0a5723aa5fe79c2"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a740568ca5e627348f0a5723aa5fe79c2">Slic3r::CoolingLine::TYPE_BRIDGE_FAN_END</a></div><div class="ttdeci">@ TYPE_BRIDGE_FAN_END</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:50</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a7edf59bc8072d3a4a94347887c8229e4"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a7edf59bc8072d3a4a94347887c8229e4">Slic3r::CoolingLine::TYPE_SET_FAN_SPEED</a></div><div class="ttdeci">@ TYPE_SET_FAN_SPEED</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:64</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a91eba6bbac191e1e9ecbbf7c97d158c9"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a91eba6bbac191e1e9ecbbf7c97d158c9">Slic3r::CoolingLine::TYPE_EXTRUDE_END</a></div><div class="ttdeci">@ TYPE_EXTRUDE_END</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:48</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">Slic3r::CoolingLine::TYPE_EXTERNAL_PERIMETER</a></div><div class="ttdeci">@ TYPE_EXTERNAL_PERIMETER</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:54</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8ac93d50e1b2ca17a82f3fa19b4a17e85c"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8ac93d50e1b2ca17a82f3fa19b4a17e85c">Slic3r::CoolingLine::TYPE_ADJUSTABLE_EMPTY</a></div><div class="ttdeci">@ TYPE_ADJUSTABLE_EMPTY</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:62</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8adb7a2ab368edd5078cd74b1ffb5b61a0"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb7a2ab368edd5078cd74b1ffb5b61a0">Slic3r::CoolingLine::TYPE_SET_TOOL</a></div><div class="ttdeci">@ TYPE_SET_TOOL</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:47</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8ae544e7d68f9a03b24507b0488d69170a"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8ae544e7d68f9a03b24507b0488d69170a">Slic3r::CoolingLine::TYPE_RESET_FAN_SPEED</a></div><div class="ttdeci">@ TYPE_RESET_FAN_SPEED</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:65</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01004">comment</a>, <a class="el" href="../../#l00434">EXTRUDER_CONFIG</a>, <a class="el" href="../../#l00012">Slic3r::f()</a>, <a class="el" href="../../#l00388">floor()</a>, <a class="el" href="../../#l00056">m_config</a>, <a class="el" href="../../#l00057">m_current_extruder</a>, <a class="el" href="../../#l00047">m_fan_speed</a>, <a class="el" href="../../#l00053">m_toolchange_prefix</a>, <a class="el" href="../../#l00503">Slic3r::GCodeWriter::set_fan()</a>, <a class="el" href="../../#l00053">Slic3r::CoolingLine::TYPE_ADJUSTABLE</a>, <a class="el" href="../../#l00062">Slic3r::CoolingLine::TYPE_ADJUSTABLE_EMPTY</a>, <a class="el" href="../../#l00050">Slic3r::CoolingLine::TYPE_BRIDGE_FAN_END</a>, <a class="el" href="../../#l00049">Slic3r::CoolingLine::TYPE_BRIDGE_FAN_START</a>, <a class="el" href="../../#l00054">Slic3r::CoolingLine::TYPE_EXTERNAL_PERIMETER</a>, <a class="el" href="../../#l00048">Slic3r::CoolingLine::TYPE_EXTRUDE_END</a>, <a class="el" href="../../#l00056">Slic3r::CoolingLine::TYPE_HAS_F</a>, <a class="el" href="../../#l00065">Slic3r::CoolingLine::TYPE_RESET_FAN_SPEED</a>, <a class="el" href="../../#l00064">Slic3r::CoolingLine::TYPE_SET_FAN_SPEED</a>, <a class="el" href="../../#l00047">Slic3r::CoolingLine::TYPE_SET_TOOL</a>, and <a class="el" href="../../#l00057">Slic3r::CoolingLine::TYPE_WIPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00305">process_layer()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_ad6d6ecc9309d2fa4f3962bc4715b73fc_cgraph.svg" width="538" height="283"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_ad6d6ecc9309d2fa4f3962bc4715b73fc_icgraph.svg" width="547" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a039c2dcd08f3d002182b4d009caafd7c" name="a039c2dcd08f3d002182b4d009caafd7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a039c2dcd08f3d002182b4d009caafd7c">&#9670;&#160;</a></span>calculate_layer_slowdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float Slic3r::CoolingBuffer::calculate_layer_slowdown </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>per_extruder_adjustments</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  665</span>{</div>
<div class="line"><span class="lineno">  666</span>    <span class="comment">// Sort the extruders by an increasing slowdown_below_layer_time.</span></div>
<div class="line"><span class="lineno">  667</span>    <span class="comment">// The layers with a lower slowdown_below_layer_time are slowed down</span></div>
<div class="line"><span class="lineno">  668</span>    <span class="comment">// together with all the other layers with slowdown_below_layer_time above.</span></div>
<div class="line"><span class="lineno">  669</span>    std::vector&lt;PerExtruderAdjustments*&gt; by_slowdown_time;</div>
<div class="line"><span class="lineno">  670</span>    by_slowdown_time.reserve(per_extruder_adjustments.size());</div>
<div class="line"><span class="lineno">  671</span>    <span class="comment">// Only insert entries, which are adjustable (have cooling enabled and non-zero stretchable time).</span></div>
<div class="line"><span class="lineno">  672</span>    <span class="comment">// Collect total print time of non-adjustable extruders.</span></div>
<div class="line"><span class="lineno">  673</span>    <span class="keywordtype">float</span> elapsed_time_total0 = 0.f;</div>
<div class="line"><span class="lineno">  674</span>    <span class="keywordflow">for</span> (PerExtruderAdjustments &amp;adj : per_extruder_adjustments) {</div>
<div class="line"><span class="lineno">  675</span>        <span class="comment">// Curren total time for this extruder.</span></div>
<div class="line"><span class="lineno">  676</span>        adj.time_total  = adj.elapsed_time_total();</div>
<div class="line"><span class="lineno">  677</span>        <span class="comment">// Maximum time for this extruder, when all extrusion moves are slowed down to min_extrusion_speed.</span></div>
<div class="line"><span class="lineno">  678</span>        adj.time_maximum = adj.maximum_time_after_slowdown(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  679</span>        <span class="keywordflow">if</span> (adj.cooling_slow_down_enabled &amp;&amp; adj.lines.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  680</span>            by_slowdown_time.emplace_back(&amp;adj);</div>
<div class="line"><span class="lineno">  681</span>            <span class="keywordflow">if</span> (! <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a82fae524c24635ded4fdeb6457b5260e">m_cooling_logic_proportional</a>)</div>
<div class="line"><span class="lineno">  682</span>                <span class="comment">// sorts the lines, also sets adj.time_non_adjustable</span></div>
<div class="line"><span class="lineno">  683</span>                adj.sort_lines_by_decreasing_feedrate();</div>
<div class="line"><span class="lineno">  684</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  685</span>            elapsed_time_total0 += adj.elapsed_time_total();</div>
<div class="line"><span class="lineno">  686</span>    }</div>
<div class="line"><span class="lineno">  687</span>    std::sort(by_slowdown_time.begin(), by_slowdown_time.end(),</div>
<div class="line"><span class="lineno">  688</span>        [](<span class="keyword">const</span> PerExtruderAdjustments *adj1, <span class="keyword">const</span> PerExtruderAdjustments *adj2)</div>
<div class="line"><span class="lineno">  689</span>            { return adj1-&gt;slowdown_below_layer_time &lt; adj2-&gt;slowdown_below_layer_time; });</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> cur_begin = by_slowdown_time.begin(); cur_begin != by_slowdown_time.end(); ++ cur_begin) {</div>
<div class="line"><span class="lineno">  692</span>        PerExtruderAdjustments &amp;adj = *(*cur_begin);</div>
<div class="line"><span class="lineno">  693</span>        <span class="comment">// Calculate the current adjusted elapsed_time_total over the non-finalized extruders.</span></div>
<div class="line"><span class="lineno">  694</span>        <span class="keywordtype">float</span> total = elapsed_time_total0;</div>
<div class="line"><span class="lineno">  695</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = cur_begin; it != by_slowdown_time.end(); ++ it)</div>
<div class="line"><span class="lineno">  696</span>            total += (*it)-&gt;time_total;</div>
<div class="line"><span class="lineno">  697</span>        <span class="keywordtype">float</span> slowdown_below_layer_time = adj.slowdown_below_layer_time * 1.001f;</div>
<div class="line"><span class="lineno">  698</span>        <span class="keywordflow">if</span> (total &gt; slowdown_below_layer_time) {</div>
<div class="line"><span class="lineno">  699</span>            <span class="comment">// The current total time is above the minimum threshold of the rest of the extruders, don&#39;t adjust anything.</span></div>
<div class="line"><span class="lineno">  700</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  701</span>            <span class="comment">// Adjust this and all the following (higher m_config.slowdown_below_layer_time) extruders.</span></div>
<div class="line"><span class="lineno">  702</span>            <span class="comment">// Sum maximum slow down time as if everything was slowed down including the external perimeters.</span></div>
<div class="line"><span class="lineno">  703</span>            <span class="keywordtype">float</span> max_time = elapsed_time_total0;</div>
<div class="line"><span class="lineno">  704</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = cur_begin; it != by_slowdown_time.end(); ++ it)</div>
<div class="line"><span class="lineno">  705</span>                max_time += (*it)-&gt;time_maximum;</div>
<div class="line"><span class="lineno">  706</span>            <span class="keywordflow">if</span> (max_time &gt; slowdown_below_layer_time) {</div>
<div class="line"><span class="lineno">  707</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a82fae524c24635ded4fdeb6457b5260e">m_cooling_logic_proportional</a>)</div>
<div class="line"><span class="lineno">  708</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a4e2a15aca9d41ccd405cbbcff08e4c62">extruder_range_slow_down_proportional</a>(cur_begin, by_slowdown_time.end(), elapsed_time_total0, total, slowdown_below_layer_time);</div>
<div class="line"><span class="lineno">  709</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  710</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#afcf089e9b7f7cb598c4ee7b3dde781c6">extruder_range_slow_down_non_proportional</a>(cur_begin, by_slowdown_time.end(), slowdown_below_layer_time - total);</div>
<div class="line"><span class="lineno">  711</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  712</span>                <span class="comment">// Slow down to maximum possible.</span></div>
<div class="line"><span class="lineno">  713</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = cur_begin; it != by_slowdown_time.end(); ++ it)</div>
<div class="line"><span class="lineno">  714</span>                    (*it)-&gt;slowdown_to_minimum_feedrate(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  715</span>            }</div>
<div class="line"><span class="lineno">  716</span>        }</div>
<div class="line"><span class="lineno">  717</span>        elapsed_time_total0 += adj.elapsed_time_total();</div>
<div class="line"><span class="lineno">  718</span>    }</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>    <span class="keywordflow">return</span> elapsed_time_total0;</div>
<div class="line"><span class="lineno">  721</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a82fae524c24635ded4fdeb6457b5260e"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a82fae524c24635ded4fdeb6457b5260e">Slic3r::CoolingBuffer::m_cooling_logic_proportional</a></div><div class="ttdeci">bool m_cooling_logic_proportional</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:60</div></div>
<div class="ttc" id="anamespace_slic3r_html_a4e2a15aca9d41ccd405cbbcff08e4c62"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a4e2a15aca9d41ccd405cbbcff08e4c62">Slic3r::extruder_range_slow_down_proportional</a></div><div class="ttdeci">static float extruder_range_slow_down_proportional(std::vector&lt; PerExtruderAdjustments * &gt;::iterator it_begin, std::vector&lt; PerExtruderAdjustments * &gt;::iterator it_end, float elapsed_time_total0, float elapsed_time_before_slowdown, float slowdown_below_layer_time)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:529</div></div>
<div class="ttc" id="anamespace_slic3r_html_afcf089e9b7f7cb598c4ee7b3dde781c6"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#afcf089e9b7f7cb598c4ee7b3dde781c6">Slic3r::extruder_range_slow_down_non_proportional</a></div><div class="ttdeci">static void extruder_range_slow_down_non_proportional(std::vector&lt; PerExtruderAdjustments * &gt;::iterator it_begin, std::vector&lt; PerExtruderAdjustments * &gt;::iterator it_end, float time_stretch)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:585</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00105">Slic3r::PerExtruderAdjustments::elapsed_time_total()</a>, <a class="el" href="../../#l00585">Slic3r::extruder_range_slow_down_non_proportional()</a>, <a class="el" href="../../#l00529">Slic3r::extruder_range_slow_down_proportional()</a>, <a class="el" href="../../#l00060">m_cooling_logic_proportional</a>, <a class="el" href="../../#l00227">Slic3r::PerExtruderAdjustments::slowdown_below_layer_time</a>, and <a class="el" href="../../#l00239">Slic3r::PerExtruderAdjustments::time_total</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00305">process_layer()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a039c2dcd08f3d002182b4d009caafd7c_cgraph.svg" width="650" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a039c2dcd08f3d002182b4d009caafd7c_icgraph.svg" width="571" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a07b3bb46704ba94699e78cdc560deef8" name="a07b3bb46704ba94699e78cdc560deef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b3bb46704ba94699e78cdc560deef8">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a> &amp; Slic3r::CoolingBuffer::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad65e3b942d606c994b626d0818f46e10" name="ad65e3b942d606c994b626d0818f46e10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad65e3b942d606c994b626d0818f46e10">&#9670;&#160;</a></span>parse_layer_gcode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; Slic3r::CoolingBuffer::parse_layer_gcode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>gcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; float &gt; &amp;&#160;</td>
          <td class="paramname"><em>current_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  328</span>{</div>
<div class="line"><span class="lineno">  329</span>    std::vector&lt;PerExtruderAdjustments&gt; per_extruder_adjustments(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>.size());</div>
<div class="line"><span class="lineno">  330</span>    std::vector&lt;size_t&gt;                 map_extruder_to_per_extruder_adjustment(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">m_num_extruders</a>, 0);</div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>.size(); ++ i) {</div>
<div class="line"><span class="lineno">  332</span>        PerExtruderAdjustments &amp;adj         = per_extruder_adjustments[i];</div>
<div class="line"><span class="lineno">  333</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>            extruder_id = <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>[i];</div>
<div class="line"><span class="lineno">  334</span>        adj.extruder_id               = extruder_id;</div>
<div class="line"><span class="lineno">  335</span>        adj.cooling_slow_down_enabled = <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.cooling.get_at(extruder_id);</div>
<div class="line"><span class="lineno">  336</span>        adj.slowdown_below_layer_time = float(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.slowdown_below_layer_time.get_at(extruder_id));</div>
<div class="line"><span class="lineno">  337</span>        adj.min_print_speed           = float(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.min_print_speed.get_at(extruder_id));</div>
<div class="line"><span class="lineno">  338</span>        map_extruder_to_per_extruder_adjustment[extruder_id] = i;</div>
<div class="line"><span class="lineno">  339</span>    }</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>      current_extruder  = <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a>;</div>
<div class="line"><span class="lineno">  342</span>    PerExtruderAdjustments *adjustment  = &amp;per_extruder_adjustments[map_extruder_to_per_extruder_adjustment[current_extruder]];</div>
<div class="line"><span class="lineno">  343</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>       *line_start = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str();</div>
<div class="line"><span class="lineno">  344</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>       *line_end   = line_start;</div>
<div class="line"><span class="lineno">  345</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a224be02ba3fa920d8fa3fbdd85fcf282">extrusion_axis</a> = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a69983d55baf2fe6be53467c6c829bd90">get_extrusion_axis</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>)[0];</div>
<div class="line"><span class="lineno">  346</span>    <span class="comment">// Index of an existing CoolingLine of the current adjustment, which holds the feedrate setting command</span></div>
<div class="line"><span class="lineno">  347</span>    <span class="comment">// for a sequence of extrusion moves.</span></div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordtype">size_t</span>            active_speed_modifier = size_t(-1);</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>    std::vector&lt;float&gt; new_pos;</div>
<div class="line"><span class="lineno">  351</span>    <span class="keywordflow">for</span> (; *line_start != 0; line_start = line_end) </div>
<div class="line"><span class="lineno">  352</span>    {</div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordflow">while</span> (*line_end != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; *line_end != 0)</div>
<div class="line"><span class="lineno">  354</span>            ++ line_end;</div>
<div class="line"><span class="lineno">  355</span>        <span class="comment">// sline will not contain the trailing &#39;\n&#39;.</span></div>
<div class="line"><span class="lineno">  356</span>        std::string_view sline(line_start, line_end - line_start);</div>
<div class="line"><span class="lineno">  357</span>        <span class="comment">// CoolingLine will contain the trailing &#39;\n&#39;.</span></div>
<div class="line"><span class="lineno">  358</span>        <span class="keywordflow">if</span> (*line_end == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">  359</span>            ++ line_end;</div>
<div class="line"><span class="lineno">  360</span>        CoolingLine line(0, line_start - <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str(), line_end - <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str());</div>
<div class="line"><span class="lineno">  361</span>        <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G0 &quot;</span>))</div>
<div class="line"><span class="lineno">  362</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a86302893b07ce0f16510bddaeac92c4b">CoolingLine::TYPE_G0</a>;</div>
<div class="line"><span class="lineno">  363</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G1 &quot;</span>))</div>
<div class="line"><span class="lineno">  364</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8abcc58fa48d00152becc69653669cd714">CoolingLine::TYPE_G1</a>;</div>
<div class="line"><span class="lineno">  365</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G92 &quot;</span>))</div>
<div class="line"><span class="lineno">  366</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704">CoolingLine::TYPE_G92</a>;</div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">if</span> (line.type) {</div>
<div class="line"><span class="lineno">  368</span>            <span class="comment">// G0, G1 or G92</span></div>
<div class="line"><span class="lineno">  369</span>            <span class="comment">// Parse the G-code line.</span></div>
<div class="line"><span class="lineno">  370</span>            new_pos = current_pos;</div>
<div class="line"><span class="lineno">  371</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> c = sline.begin() + 3;;) {</div>
<div class="line"><span class="lineno">  372</span>                <span class="comment">// Skip whitespaces.</span></div>
<div class="line"><span class="lineno">  373</span>                <span class="keywordflow">for</span> (; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> != sline.end() &amp;&amp; (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="charliteral">&#39; &#39;</span> || *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="charliteral">&#39;\t&#39;</span>); ++ <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>);</div>
<div class="line"><span class="lineno">  374</span>                <span class="keywordflow">if</span> (c == sline.end() || *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="charliteral">&#39;;&#39;</span>)</div>
<div class="line"><span class="lineno">  375</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>                <span class="comment">// Parse the axis.</span></div>
<div class="line"><span class="lineno">  378</span>                <span class="keywordtype">size_t</span> axis = (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &gt;= <span class="charliteral">&#39;X&#39;</span> &amp;&amp; *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &lt;= <span class="charliteral">&#39;Z&#39;</span>) ? (*c - <span class="charliteral">&#39;X&#39;</span>) :</div>
<div class="line"><span class="lineno">  379</span>                              (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a224be02ba3fa920d8fa3fbdd85fcf282">extrusion_axis</a>) ? 3 : (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="stringliteral">&#39;F&#39;</span>) ? 4 : size_t(-1);</div>
<div class="line"><span class="lineno">  380</span>                <span class="keywordflow">if</span> (axis != <span class="keywordtype">size_t</span>(-1)) {</div>
<div class="line"><span class="lineno">  381</span>                    <span class="comment">//auto [pend, ec] = </span></div>
<div class="line"><span class="lineno">  382</span>                        <a class="code hl_function" href="../../d2/db8/namespacefast__float.html#a08d95610bd95d46b636c86c9980ab1a9">fast_float::from_chars</a>(&amp;*(++ c), sline.data() + sline.size(), new_pos[axis]);</div>
<div class="line"><span class="lineno">  383</span>                    <span class="keywordflow">if</span> (axis == 4) {</div>
<div class="line"><span class="lineno">  384</span>                        <span class="comment">// Convert mm/min to mm/sec.</span></div>
<div class="line"><span class="lineno">  385</span>                        new_pos[4] /= 60.f;</div>
<div class="line"><span class="lineno">  386</span>                        <span class="keywordflow">if</span> ((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704">CoolingLine::TYPE_G92</a>) == 0)</div>
<div class="line"><span class="lineno">  387</span>                            <span class="comment">// This is G0 or G1 line and it sets the feedrate. This mark is used for reducing the duplicate F calls.</span></div>
<div class="line"><span class="lineno">  388</span>                            line.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6">CoolingLine::TYPE_HAS_F</a>;</div>
<div class="line"><span class="lineno">  389</span>                    }</div>
<div class="line"><span class="lineno">  390</span>                }</div>
<div class="line"><span class="lineno">  391</span>                <span class="comment">// Skip this word.</span></div>
<div class="line"><span class="lineno">  392</span>                <span class="keywordflow">for</span> (; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> != sline.end() &amp;&amp; *c != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *c != <span class="charliteral">&#39;\t&#39;</span>; ++ <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>);</div>
<div class="line"><span class="lineno">  393</span>            }</div>
<div class="line"><span class="lineno">  394</span>            <span class="keywordtype">bool</span> external_perimeter = boost::contains(sline, <span class="stringliteral">&quot;;_EXTERNAL_PERIMETER&quot;</span>);</div>
<div class="line"><span class="lineno">  395</span>            <span class="keywordtype">bool</span> wipe               = boost::contains(sline, <span class="stringliteral">&quot;;_WIPE&quot;</span>);</div>
<div class="line"><span class="lineno">  396</span>            <span class="keywordflow">if</span> (external_perimeter)</div>
<div class="line"><span class="lineno">  397</span>                line.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a>;</div>
<div class="line"><span class="lineno">  398</span>            <span class="keywordflow">if</span> (wipe)</div>
<div class="line"><span class="lineno">  399</span>                line.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a>;</div>
<div class="line"><span class="lineno">  400</span>            <span class="keywordflow">if</span> (boost::contains(sline, <span class="stringliteral">&quot;;_EXTRUDE_SET_SPEED&quot;</span>) &amp;&amp; ! wipe) {</div>
<div class="line"><span class="lineno">  401</span>                line.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a>;</div>
<div class="line"><span class="lineno">  402</span>                active_speed_modifier = adjustment-&gt;lines.size();</div>
<div class="line"><span class="lineno">  403</span>            }</div>
<div class="line"><span class="lineno">  404</span>            <span class="keywordflow">if</span> ((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704">CoolingLine::TYPE_G92</a>) == 0) {</div>
<div class="line"><span class="lineno">  405</span>                <span class="comment">// G0 or G1. Calculate the duration.</span></div>
<div class="line"><span class="lineno">  406</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.use_relative_e_distances.value)</div>
<div class="line"><span class="lineno">  407</span>                    <span class="comment">// Reset extruder accumulator.</span></div>
<div class="line"><span class="lineno">  408</span>                    current_pos[3] = 0.f;</div>
<div class="line"><span class="lineno">  409</span>                <span class="keywordtype">float</span> dif[4];</div>
<div class="line"><span class="lineno">  410</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 4; ++ i)</div>
<div class="line"><span class="lineno">  411</span>                    dif[i] = new_pos[i] - current_pos[i];</div>
<div class="line"><span class="lineno">  412</span>                <span class="keywordtype">float</span> dxy2 = dif[0] * dif[0] + dif[1] * dif[1];</div>
<div class="line"><span class="lineno">  413</span>                <span class="keywordtype">float</span> dxyz2 = dxy2 + dif[2] * dif[2];</div>
<div class="line"><span class="lineno">  414</span>                <span class="keywordflow">if</span> (dxyz2 &gt; 0.f) {</div>
<div class="line"><span class="lineno">  415</span>                    <span class="comment">// Movement in xyz, calculate time from the xyz Euclidian distance.</span></div>
<div class="line"><span class="lineno">  416</span>                    line.length = <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a656b9217a2fcb6de59dc8d1eb3079cc7">sqrt</a>(dxyz2);</div>
<div class="line"><span class="lineno">  417</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (std::abs(dif[3]) &gt; 0.f) {</div>
<div class="line"><span class="lineno">  418</span>                    <span class="comment">// Movement in the extruder axis.</span></div>
<div class="line"><span class="lineno">  419</span>                    line.length = std::abs(dif[3]);</div>
<div class="line"><span class="lineno">  420</span>                }</div>
<div class="line"><span class="lineno">  421</span>                line.feedrate = new_pos[4];</div>
<div class="line"><span class="lineno">  422</span>                assert((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a>) == 0 || line.feedrate &gt; 0.f);</div>
<div class="line"><span class="lineno">  423</span>                <span class="keywordflow">if</span> (line.length &gt; 0) {</div>
<div class="line"><span class="lineno">  424</span>                    assert(line.feedrate &gt; 0);</div>
<div class="line"><span class="lineno">  425</span>                    line.time = line.length / line.feedrate;</div>
<div class="line"><span class="lineno">  426</span>                    assert(line.time &gt; 0);</div>
<div class="line"><span class="lineno">  427</span>                }</div>
<div class="line"><span class="lineno">  428</span>                line.time_max = line.time;</div>
<div class="line"><span class="lineno">  429</span>                <span class="keywordflow">if</span> ((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a>) || active_speed_modifier != <span class="keywordtype">size_t</span>(-1)) {</div>
<div class="line"><span class="lineno">  430</span>                    assert(adjustment-&gt;min_print_speed &gt;= 0);</div>
<div class="line"><span class="lineno">  431</span>                    line.time_max = (adjustment-&gt;min_print_speed == 0.f) ? FLT_MAX : <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a92e6345ca905d3483422361cf8c991b6">max</a>(line.time, line.<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1eea52f5cabe9f6172fcec07fb0fed76">length</a> / adjustment-&gt;min_print_speed);</div>
<div class="line"><span class="lineno">  432</span>                }</div>
<div class="line"><span class="lineno">  433</span>                <span class="keywordflow">if</span> (active_speed_modifier &lt; adjustment-&gt;lines.size() &amp;&amp; (line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8abcc58fa48d00152becc69653669cd714">CoolingLine::TYPE_G1</a>)) {</div>
<div class="line"><span class="lineno">  434</span>                    <span class="comment">// Inside the &quot;;_EXTRUDE_SET_SPEED&quot; blocks, there must not be a G1 Fxx entry.</span></div>
<div class="line"><span class="lineno">  435</span>                    assert((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6">CoolingLine::TYPE_HAS_F</a>) == 0);</div>
<div class="line"><span class="lineno">  436</span>                    CoolingLine &amp;sm = adjustment-&gt;lines[active_speed_modifier];</div>
<div class="line"><span class="lineno">  437</span>                    assert(sm.feedrate &gt; 0.f);</div>
<div class="line"><span class="lineno">  438</span>                    sm.length   += line.length;</div>
<div class="line"><span class="lineno">  439</span>                    sm.time     += line.time;</div>
<div class="line"><span class="lineno">  440</span>                    <span class="keywordflow">if</span> (sm.time_max != FLT_MAX) {</div>
<div class="line"><span class="lineno">  441</span>                        <span class="keywordflow">if</span> (line.time_max == FLT_MAX)</div>
<div class="line"><span class="lineno">  442</span>                            sm.time_max = FLT_MAX;</div>
<div class="line"><span class="lineno">  443</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  444</span>                            sm.time_max += line.time_max;</div>
<div class="line"><span class="lineno">  445</span>                    }</div>
<div class="line"><span class="lineno">  446</span>                    <span class="comment">// Don&#39;t store this line.</span></div>
<div class="line"><span class="lineno">  447</span>                    line.type = 0;</div>
<div class="line"><span class="lineno">  448</span>                }</div>
<div class="line"><span class="lineno">  449</span>            }</div>
<div class="line"><span class="lineno">  450</span>            current_pos = std::move(new_pos);</div>
<div class="line"><span class="lineno">  451</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_EXTRUDE_END&quot;</span>)) {</div>
<div class="line"><span class="lineno">  452</span>            <span class="comment">// Closing a block of non-zero length extrusion moves.</span></div>
<div class="line"><span class="lineno">  453</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a91eba6bbac191e1e9ecbbf7c97d158c9">CoolingLine::TYPE_EXTRUDE_END</a>;</div>
<div class="line"><span class="lineno">  454</span>            <span class="keywordflow">if</span> (active_speed_modifier != <span class="keywordtype">size_t</span>(-1)) {</div>
<div class="line"><span class="lineno">  455</span>                assert(active_speed_modifier &lt; adjustment-&gt;lines.size());</div>
<div class="line"><span class="lineno">  456</span>                CoolingLine &amp;sm = adjustment-&gt;lines[active_speed_modifier];</div>
<div class="line"><span class="lineno">  457</span>                <span class="comment">// There should be at least some extrusion move inside the adjustment block.</span></div>
<div class="line"><span class="lineno">  458</span>                <span class="comment">// However if the block has no extrusion (which is wrong), fix it for the cooling buffer to work.</span></div>
<div class="line"><span class="lineno">  459</span>                assert(sm.length &gt; 0);</div>
<div class="line"><span class="lineno">  460</span>                assert(sm.time &gt; 0);</div>
<div class="line"><span class="lineno">  461</span>                <span class="keywordflow">if</span> (sm.time &lt;= 0) {</div>
<div class="line"><span class="lineno">  462</span>                    <span class="comment">// Likely a zero length extrusion, it should not be emitted, however the zero extrusions should not confuse firmware either.</span></div>
<div class="line"><span class="lineno">  463</span>                    <span class="comment">// Prohibit time adjustment of a block of zero length extrusions by the cooling buffer.</span></div>
<div class="line"><span class="lineno">  464</span>                    sm.type &amp;= ~CoolingLine::TYPE_ADJUSTABLE;</div>
<div class="line"><span class="lineno">  465</span>                    <span class="comment">// But the start / end comment shall be removed.</span></div>
<div class="line"><span class="lineno">  466</span>                    sm.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8ac93d50e1b2ca17a82f3fa19b4a17e85c">CoolingLine::TYPE_ADJUSTABLE_EMPTY</a>;</div>
<div class="line"><span class="lineno">  467</span>                }</div>
<div class="line"><span class="lineno">  468</span>            }</div>
<div class="line"><span class="lineno">  469</span>            active_speed_modifier = size_t(-1);</div>
<div class="line"><span class="lineno">  470</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a>)) {</div>
<div class="line"><span class="lineno">  471</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_extruder = 0;</div>
<div class="line"><span class="lineno">  472</span>            <span class="keyword">auto</span> res = std::from_chars(sline.data() + <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a>.size(), sline.data() + sline.size(), new_extruder);</div>
<div class="line"><span class="lineno">  473</span>            <span class="keywordflow">if</span> (res.ec != std::errc::invalid_argument) {</div>
<div class="line"><span class="lineno">  474</span>                <span class="comment">// Only change extruder in case the number is meaningful. User could provide an out-of-range index through custom gcodes - those shall be ignored.</span></div>
<div class="line"><span class="lineno">  475</span>                <span class="keywordflow">if</span> (new_extruder &lt; map_extruder_to_per_extruder_adjustment.size()) {</div>
<div class="line"><span class="lineno">  476</span>                    <span class="keywordflow">if</span> (new_extruder != current_extruder) {</div>
<div class="line"><span class="lineno">  477</span>                        <span class="comment">// Switch the tool.</span></div>
<div class="line"><span class="lineno">  478</span>                        line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb7a2ab368edd5078cd74b1ffb5b61a0">CoolingLine::TYPE_SET_TOOL</a>;</div>
<div class="line"><span class="lineno">  479</span>                        current_extruder = new_extruder;</div>
<div class="line"><span class="lineno">  480</span>                        adjustment         = &amp;per_extruder_adjustments[map_extruder_to_per_extruder_adjustment[current_extruder]];</div>
<div class="line"><span class="lineno">  481</span>                    }</div>
<div class="line"><span class="lineno">  482</span>                }</div>
<div class="line"><span class="lineno">  483</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  484</span>                    <span class="comment">// Only log the error in case of MM printer. Single extruder printers likely ignore any T anyway.</span></div>
<div class="line"><span class="lineno">  485</span>                    <span class="keywordflow">if</span> (map_extruder_to_per_extruder_adjustment.size() &gt; 1)</div>
<div class="line"><span class="lineno">  486</span>                        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;CoolingBuffer encountered an invalid toolchange, maybe from a custom gcode: &quot;</span> &lt;&lt; sline;</div>
<div class="line"><span class="lineno">  487</span>                }</div>
<div class="line"><span class="lineno">  488</span>            }</div>
<div class="line"><span class="lineno">  489</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_BRIDGE_FAN_START&quot;</span>)) {</div>
<div class="line"><span class="lineno">  490</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a5919142af7753e0be05cb164e74f8fae">CoolingLine::TYPE_BRIDGE_FAN_START</a>;</div>
<div class="line"><span class="lineno">  491</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_BRIDGE_FAN_END&quot;</span>)) {</div>
<div class="line"><span class="lineno">  492</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a740568ca5e627348f0a5723aa5fe79c2">CoolingLine::TYPE_BRIDGE_FAN_END</a>;</div>
<div class="line"><span class="lineno">  493</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G4 &quot;</span>)) {</div>
<div class="line"><span class="lineno">  494</span>            <span class="comment">// Parse the wait time.</span></div>
<div class="line"><span class="lineno">  495</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3a38181f98654e9bea75b1e4bde91c56">CoolingLine::TYPE_G4</a>;</div>
<div class="line"><span class="lineno">  496</span>            <span class="keywordtype">size_t</span> pos_S = sline.find(<span class="charliteral">&#39;S&#39;</span>, 3);</div>
<div class="line"><span class="lineno">  497</span>            <span class="keywordtype">size_t</span> pos_P = sline.find(<span class="charliteral">&#39;P&#39;</span>, 3);</div>
<div class="line"><span class="lineno">  498</span>            <span class="keywordtype">bool</span>   has_S = pos_S &gt; 0;</div>
<div class="line"><span class="lineno">  499</span>            <span class="keywordtype">bool</span>   has_P = pos_P &gt; 0;</div>
<div class="line"><span class="lineno">  500</span>            <span class="keywordflow">if</span> (has_S || has_P) {</div>
<div class="line"><span class="lineno">  501</span>                <span class="comment">//auto [pend, ec] = </span></div>
<div class="line"><span class="lineno">  502</span>                    <a class="code hl_function" href="../../d2/db8/namespacefast__float.html#a08d95610bd95d46b636c86c9980ab1a9">fast_float::from_chars</a>(sline.data() + (has_S ? pos_S : pos_P) + 1, sline.<a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#ada90c89c458a0d53c483e767de7b7701">data</a>() + sline.<a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">size</a>(), line.time);</div>
<div class="line"><span class="lineno">  503</span>                <span class="keywordflow">if</span> (has_P)</div>
<div class="line"><span class="lineno">  504</span>                    line.time *= 0.001f;</div>
<div class="line"><span class="lineno">  505</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  506</span>                line.time = 0;</div>
<div class="line"><span class="lineno">  507</span>            line.time_max = line.time;</div>
<div class="line"><span class="lineno">  508</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::contains(sline, <span class="stringliteral">&quot;;_SET_FAN_SPEED&quot;</span>)) {</div>
<div class="line"><span class="lineno">  509</span>            <span class="keyword">auto</span> speed_start = sline.find_last_of(<span class="charliteral">&#39;D&#39;</span>);</div>
<div class="line"><span class="lineno">  510</span>            <span class="keywordtype">int</span>  speed       = 0;</div>
<div class="line"><span class="lineno">  511</span>            <span class="keywordflow">for</span> (<span class="keywordtype">char</span> num : sline.substr(speed_start + 1)) {</div>
<div class="line"><span class="lineno">  512</span>                speed = speed * 10 + (num - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><span class="lineno">  513</span>            }</div>
<div class="line"><span class="lineno">  514</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a7edf59bc8072d3a4a94347887c8229e4">CoolingLine::TYPE_SET_FAN_SPEED</a>;</div>
<div class="line"><span class="lineno">  515</span>            line.fan_speed = speed;</div>
<div class="line"><span class="lineno">  516</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::contains(sline, <span class="stringliteral">&quot;;_RESET_FAN_SPEED&quot;</span>)) {</div>
<div class="line"><span class="lineno">  517</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8ae544e7d68f9a03b24507b0488d69170a">CoolingLine::TYPE_RESET_FAN_SPEED</a>;</div>
<div class="line"><span class="lineno">  518</span>        }</div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>        <span class="keywordflow">if</span> (line.type != 0)</div>
<div class="line"><span class="lineno">  521</span>            adjustment-&gt;lines.emplace_back(std::move(line));</div>
<div class="line"><span class="lineno">  522</span>    }</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>    <span class="keywordflow">return</span> per_extruder_adjustments;</div>
<div class="line"><span class="lineno">  525</span>}</div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a656b9217a2fcb6de59dc8d1eb3079cc7"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a656b9217a2fcb6de59dc8d1eb3079cc7">sqrt</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const SqrtReturnType sqrt() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:152</div></div>
<div class="ttc" id="anamespace_eigen_1_1half__impl_html_a92e6345ca905d3483422361cf8c991b6"><div class="ttname"><a href="../../d6/d88/namespace_eigen_1_1half__impl.html#a92e6345ca905d3483422361cf8c991b6">Eigen::half_impl::max</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC half() max(const half &amp;a, const half &amp;b)</div><div class="ttdef"><b>Definition</b> Half.h:516</div></div>
<div class="ttc" id="anamespace_slic3r_html_a1eea52f5cabe9f6172fcec07fb0fed76"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1eea52f5cabe9f6172fcec07fb0fed76">Slic3r::length</a></div><div class="ttdeci">double length(const Points &amp;pts)</div><div class="ttdef"><b>Definition</b> MultiPoint.hpp:116</div></div>
<div class="ttc" id="anamespace_slic3r_html_a224be02ba3fa920d8fa3fbdd85fcf282"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a224be02ba3fa920d8fa3fbdd85fcf282">Slic3r::extrusion_axis</a></div><div class="ttdeci">extrusion_axis((ConfigOptionFloats, extrusion_multiplier))((ConfigOptionFloats</div></div>
<div class="ttc" id="anamespace_slic3r_html_a69983d55baf2fe6be53467c6c829bd90"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a69983d55baf2fe6be53467c6c829bd90">Slic3r::get_extrusion_axis</a></div><div class="ttdeci">static template_custom_gcode std::string get_extrusion_axis(const GCodeConfig &amp;cfg)</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:739</div></div>
<div class="ttc" id="anamespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail_html_ada90c89c458a0d53c483e767de7b7701"><div class="ttname"><a href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#ada90c89c458a0d53c483e767de7b7701">TCB_SPAN_NAMESPACE_NAME::detail::data</a></div><div class="ttdeci">constexpr auto data(C &amp;c) -&gt; decltype(c.data())</div><div class="ttdef"><b>Definition</b> span.hpp:195</div></div>
<div class="ttc" id="anamespacefast__float_html_a08d95610bd95d46b636c86c9980ab1a9"><div class="ttname"><a href="../../d2/db8/namespacefast__float.html#a08d95610bd95d46b636c86c9980ab1a9">fast_float::from_chars</a></div><div class="ttdeci">from_chars_result from_chars(const char *first, const char *last, T &amp;value, chars_format fmt=chars_format::general) noexcept</div><div class="ttdef"><b>Definition</b> fast_float.h:2401</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">marchsq::__impl::SquareTag::c</a></div><div class="ttdeci">@ c</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a3a38181f98654e9bea75b1e4bde91c56"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3a38181f98654e9bea75b1e4bde91c56">Slic3r::CoolingLine::TYPE_G4</a></div><div class="ttdeci">@ TYPE_G4</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:58</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704">Slic3r::CoolingLine::TYPE_G92</a></div><div class="ttdeci">@ TYPE_G92</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:59</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a86302893b07ce0f16510bddaeac92c4b"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a86302893b07ce0f16510bddaeac92c4b">Slic3r::CoolingLine::TYPE_G0</a></div><div class="ttdeci">@ TYPE_G0</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:51</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8abcc58fa48d00152becc69653669cd714"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8abcc58fa48d00152becc69653669cd714">Slic3r::CoolingLine::TYPE_G1</a></div><div class="ttdeci">@ TYPE_G1</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:52</div></div>
<div class="ttc" id="atga_8cpp_html_adbb625a19574e9e39e1d07df31b00b06"><div class="ttname"><a href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a></div><div class="ttdeci">static char error[256]</div><div class="ttdef"><b>Definition</b> tga.cpp:50</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00225">Slic3r::PerExtruderAdjustments::cooling_slow_down_enabled</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00223">Slic3r::PerExtruderAdjustments::extruder_id</a>, <a class="el" href="../../de/db8/namespace_slic3r.html#a224be02ba3fa920d8fa3fbdd85fcf282">Slic3r::extrusion_axis()</a>, <a class="el" href="../../#l00096">Slic3r::CoolingLine::fan_speed</a>, <a class="el" href="../../#l00090">Slic3r::CoolingLine::feedrate</a>, <a class="el" href="../../#l02401">fast_float::from_chars()</a>, <a class="el" href="../../#l00739">Slic3r::get_extrusion_axis()</a>, <a class="el" href="../../#l00088">Slic3r::CoolingLine::length</a>, <a class="el" href="../../#l00232">Slic3r::PerExtruderAdjustments::lines</a>, <a class="el" href="../../#l00056">m_config</a>, <a class="el" href="../../#l00057">m_current_extruder</a>, <a class="el" href="../../#l00050">m_extruder_ids</a>, <a class="el" href="../../#l00052">m_num_extruders</a>, <a class="el" href="../../#l00053">m_toolchange_prefix</a>, <a class="el" href="../../#l00229">Slic3r::PerExtruderAdjustments::min_print_speed</a>, <a class="el" href="../../#l00227">Slic3r::PerExtruderAdjustments::slowdown_below_layer_time</a>, <a class="el" href="../../#l00152">sqrt()</a>, <a class="el" href="../../#l00092">Slic3r::CoolingLine::time</a>, <a class="el" href="../../#l00094">Slic3r::CoolingLine::time_max</a>, <a class="el" href="../../#l00082">Slic3r::CoolingLine::type</a>, <a class="el" href="../../#l00053">Slic3r::CoolingLine::TYPE_ADJUSTABLE</a>, <a class="el" href="../../#l00062">Slic3r::CoolingLine::TYPE_ADJUSTABLE_EMPTY</a>, <a class="el" href="../../#l00050">Slic3r::CoolingLine::TYPE_BRIDGE_FAN_END</a>, <a class="el" href="../../#l00049">Slic3r::CoolingLine::TYPE_BRIDGE_FAN_START</a>, <a class="el" href="../../#l00054">Slic3r::CoolingLine::TYPE_EXTERNAL_PERIMETER</a>, <a class="el" href="../../#l00048">Slic3r::CoolingLine::TYPE_EXTRUDE_END</a>, <a class="el" href="../../#l00051">Slic3r::CoolingLine::TYPE_G0</a>, <a class="el" href="../../#l00052">Slic3r::CoolingLine::TYPE_G1</a>, <a class="el" href="../../#l00058">Slic3r::CoolingLine::TYPE_G4</a>, <a class="el" href="../../#l00059">Slic3r::CoolingLine::TYPE_G92</a>, <a class="el" href="../../#l00056">Slic3r::CoolingLine::TYPE_HAS_F</a>, <a class="el" href="../../#l00065">Slic3r::CoolingLine::TYPE_RESET_FAN_SPEED</a>, <a class="el" href="../../#l00064">Slic3r::CoolingLine::TYPE_SET_FAN_SPEED</a>, <a class="el" href="../../#l00047">Slic3r::CoolingLine::TYPE_SET_TOOL</a>, and <a class="el" href="../../#l00057">Slic3r::CoolingLine::TYPE_WIPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00305">process_layer()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_ad65e3b942d606c994b626d0818f46e10_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_ad65e3b942d606c994b626d0818f46e10_icgraph.svg" width="531" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a38ef6e7c60242abe39bf380d55a1f26b" name="a38ef6e7c60242abe39bf380d55a1f26b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38ef6e7c60242abe39bf380d55a1f26b">&#9670;&#160;</a></span>process_layer() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::CoolingBuffer::process_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>gcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>layer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   30</span>        { <span class="keywordflow">return</span> this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3313bc5271e4cc935b529572e0cac6e3">process_layer</a>(std::string(gcode), layer_id, flush); }</div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a3313bc5271e4cc935b529572e0cac6e3"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3313bc5271e4cc935b529572e0cac6e3">Slic3r::CoolingBuffer::process_layer</a></div><div class="ttdeci">std::string process_layer(std::string &amp;&amp;gcode, size_t layer_id, bool flush)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:305</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00305">process_layer()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a38ef6e7c60242abe39bf380d55a1f26b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a3313bc5271e4cc935b529572e0cac6e3" name="a3313bc5271e4cc935b529572e0cac6e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3313bc5271e4cc935b529572e0cac6e3">&#9670;&#160;</a></span>process_layer() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::CoolingBuffer::process_layer </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&amp;&#160;</td>
          <td class="paramname"><em>gcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>layer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  306</span>{</div>
<div class="line"><span class="lineno">  307</span>    <span class="comment">// Cache the input G-code.</span></div>
<div class="line"><span class="lineno">  308</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a>.empty())</div>
<div class="line"><span class="lineno">  309</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a> = std::move(gcode);</div>
<div class="line"><span class="lineno">  310</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  311</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a> += <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>    std::string out;</div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordflow">if</span> (flush) {</div>
<div class="line"><span class="lineno">  315</span>        <span class="comment">// This is either an object layer or the very last print layer. Calculate cool down over the collected support layers</span></div>
<div class="line"><span class="lineno">  316</span>        <span class="comment">// and one object layer.</span></div>
<div class="line"><span class="lineno">  317</span>        std::vector&lt;PerExtruderAdjustments&gt; per_extruder_adjustments = this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad65e3b942d606c994b626d0818f46e10">parse_layer_gcode</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a>, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>);</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordtype">float</span> layer_time_stretched = this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a039c2dcd08f3d002182b4d009caafd7c">calculate_layer_slowdown</a>(per_extruder_adjustments);</div>
<div class="line"><span class="lineno">  319</span>        out = this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad6d6ecc9309d2fa4f3962bc4715b73fc">apply_layer_cooldown</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a>, layer_id, layer_time_stretched, per_extruder_adjustments);</div>
<div class="line"><span class="lineno">  320</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a>.clear();</div>
<div class="line"><span class="lineno">  321</span>    }</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  323</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a039c2dcd08f3d002182b4d009caafd7c"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a039c2dcd08f3d002182b4d009caafd7c">Slic3r::CoolingBuffer::calculate_layer_slowdown</a></div><div class="ttdeci">float calculate_layer_slowdown(std::vector&lt; PerExtruderAdjustments &gt; &amp;per_extruder_adjustments)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:664</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a54a957a8014098e34682fc52e8fcdbd4"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">Slic3r::CoolingBuffer::m_current_pos</a></div><div class="ttdeci">std::vector&lt; float &gt; m_current_pos</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:45</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_ace03e18b93c1e6ef690fe4d171bc3e11"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">Slic3r::CoolingBuffer::m_gcode</a></div><div class="ttdeci">std::string m_gcode</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:41</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_ad65e3b942d606c994b626d0818f46e10"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad65e3b942d606c994b626d0818f46e10">Slic3r::CoolingBuffer::parse_layer_gcode</a></div><div class="ttdeci">std::vector&lt; PerExtruderAdjustments &gt; parse_layer_gcode(const std::string &amp;gcode, std::vector&lt; float &gt; &amp;current_pos) const</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:327</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_ad6d6ecc9309d2fa4f3962bc4715b73fc"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad6d6ecc9309d2fa4f3962bc4715b73fc">Slic3r::CoolingBuffer::apply_layer_cooldown</a></div><div class="ttdeci">std::string apply_layer_cooldown(const std::string &amp;gcode, size_t layer_id, float layer_time, std::vector&lt; PerExtruderAdjustments &gt; &amp;per_extruder_adjustments)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:725</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00725">apply_layer_cooldown()</a>, <a class="el" href="../../#l00664">calculate_layer_slowdown()</a>, <a class="el" href="../../#l00045">m_current_pos</a>, <a class="el" href="../../#l00041">m_gcode</a>, and <a class="el" href="../../#l00327">parse_layer_gcode()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00029">process_layer()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a3313bc5271e4cc935b529572e0cac6e3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a3313bc5271e4cc935b529572e0cac6e3_icgraph.svg" width="342" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9cb99a8e449d284c4b76b1ef6c3ab6df" name="a9cb99a8e449d284c4b76b1ef6c3ab6df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cb99a8e449d284c4b76b1ef6c3ab6df">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::CoolingBuffer::reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>position</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   35</span>{</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>.assign(5, 0.f);</div>
<div class="line"><span class="lineno">   37</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>[0] = float(position.x());</div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>[1] = float(position.y());</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>[2] = float(position.z());</div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>[4] = float(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.travel_speed.value);</div>
<div class="line"><span class="lineno">   41</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a> = -1;</div>
<div class="line"><span class="lineno">   42</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00056">m_config</a>, <a class="el" href="../../#l00045">m_current_pos</a>, and <a class="el" href="../../#l00047">m_fan_speed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00022">CoolingBuffer()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a9cb99a8e449d284c4b76b1ef6c3ab6df_icgraph.svg" width="342" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad18a9e8f3e8078621f09f7d3c8691d35" name="ad18a9e8f3e8078621f09f7d3c8691d35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad18a9e8f3e8078621f09f7d3c8691d35">&#9670;&#160;</a></span>set_current_extruder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::CoolingBuffer::set_current_extruder </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>extruder_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   27</span>{ <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a> = extruder_id; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00057">m_current_extruder</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2b5d76a211c23bf0db73c90ef41e6886" name="a2b5d76a211c23bf0db73c90ef41e6886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5d76a211c23bf0db73c90ef41e6886">&#9670;&#160;</a></span>m_axis</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;char&gt; Slic3r::CoolingBuffer::m_axis</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1ab506fd68632cff030b041c5cd6de8d" name="a1ab506fd68632cff030b041c5cd6de8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab506fd68632cff030b041c5cd6de8d">&#9670;&#160;</a></span>m_config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> PrintConfig&amp; Slic3r::CoolingBuffer::m_config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00725">apply_layer_cooldown()</a>, <a class="el" href="../../#l00327">parse_layer_gcode()</a>, and <a class="el" href="../../#l00034">reset()</a>.</p>

</div>
</div>
<a id="a82fae524c24635ded4fdeb6457b5260e" name="a82fae524c24635ded4fdeb6457b5260e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82fae524c24635ded4fdeb6457b5260e">&#9670;&#160;</a></span>m_cooling_logic_proportional</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::CoolingBuffer::m_cooling_logic_proportional = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00664">calculate_layer_slowdown()</a>.</p>

</div>
</div>
<a id="a73dca3613882898f631e407325cfa742" name="a73dca3613882898f631e407325cfa742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73dca3613882898f631e407325cfa742">&#9670;&#160;</a></span>m_current_extruder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Slic3r::CoolingBuffer::m_current_extruder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00725">apply_layer_cooldown()</a>, <a class="el" href="../../#l00327">parse_layer_gcode()</a>, and <a class="el" href="../../#l00027">set_current_extruder()</a>.</p>

</div>
</div>
<a id="a54a957a8014098e34682fc52e8fcdbd4" name="a54a957a8014098e34682fc52e8fcdbd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54a957a8014098e34682fc52e8fcdbd4">&#9670;&#160;</a></span>m_current_pos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;float&gt; Slic3r::CoolingBuffer::m_current_pos</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00305">process_layer()</a>, and <a class="el" href="../../#l00034">reset()</a>.</p>

</div>
</div>
<a id="a1f70d25be0e9b27329aec4f3489d20f7" name="a1f70d25be0e9b27329aec4f3489d20f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f70d25be0e9b27329aec4f3489d20f7">&#9670;&#160;</a></span>m_extruder_ids</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;unsigned int&gt; Slic3r::CoolingBuffer::m_extruder_ids</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00022">CoolingBuffer()</a>, and <a class="el" href="../../#l00327">parse_layer_gcode()</a>.</p>

</div>
</div>
<a id="ab6a8b43f1a4e019265862ae709eb57b6" name="ab6a8b43f1a4e019265862ae709eb57b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a8b43f1a4e019265862ae709eb57b6">&#9670;&#160;</a></span>m_fan_speed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Slic3r::CoolingBuffer::m_fan_speed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00725">apply_layer_cooldown()</a>, and <a class="el" href="../../#l00034">reset()</a>.</p>

</div>
</div>
<a id="ace03e18b93c1e6ef690fe4d171bc3e11" name="ace03e18b93c1e6ef690fe4d171bc3e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace03e18b93c1e6ef690fe4d171bc3e11">&#9670;&#160;</a></span>m_gcode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::CoolingBuffer::m_gcode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00305">process_layer()</a>.</p>

</div>
</div>
<a id="aaad867e6e51db8529b95dd20f565e524" name="aaad867e6e51db8529b95dd20f565e524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaad867e6e51db8529b95dd20f565e524">&#9670;&#160;</a></span>m_num_extruders</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Slic3r::CoolingBuffer::m_num_extruders { 0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00022">CoolingBuffer()</a>, and <a class="el" href="../../#l00327">parse_layer_gcode()</a>.</p>

</div>
</div>
<a id="a31140eda5547d15e3b78e43f576768f0" name="a31140eda5547d15e3b78e43f576768f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31140eda5547d15e3b78e43f576768f0">&#9670;&#160;</a></span>m_toolchange_prefix</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string Slic3r::CoolingBuffer::m_toolchange_prefix</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00725">apply_layer_cooldown()</a>, and <a class="el" href="../../#l00327">parse_layer_gcode()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/libslic3r/GCode/<a class="el" href="../../">CoolingBuffer.hpp</a></li>
<li>src/libslic3r/GCode/<a class="el" href="../../">CoolingBuffer.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
