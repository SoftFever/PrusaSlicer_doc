<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: src/avrdude/fileio.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d8/dec/fileio_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">fileio.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../">ac_cfg.h</a>&quot;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../">avrdude.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../">libavrdude.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for fileio.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d1/de1/fileio_8c__incl.svg" width="100%" height="438"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:da/dc7/structihexrec"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#da/dc7/structihexrec">ihexrec</a></td></tr>
<tr class="separator:da/dc7/structihexrec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad06d1b4a2ad5f90b7f434dc328adc91a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#ad06d1b4a2ad5f90b7f434dc328adc91a">IHEX_MAXDATA</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:ad06d1b4a2ad5f90b7f434dc328adc91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a3b394b8602092d58347b791158062"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a>&#160;&#160;&#160;256  /* max line length for ASCII format <a class="el" href="../../d8/d33/lexer_8c.html#a171692544b8e065853e387755849a433">input</a> files */</td></tr>
<tr class="separator:a09a3b394b8602092d58347b791158062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fdaa3fa63f2ac3dee55cecc106cadf2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a5fdaa3fa63f2ac3dee55cecc106cadf2">MAX_MODE_LEN</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a5fdaa3fa63f2ac3dee55cecc106cadf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aab6c87a7e3d974322d64f8ecc4087ab4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#aab6c87a7e3d974322d64f8ecc4087ab4">b2ihex</a> (unsigned char *inbuf, int bufsize, int recsize, int startaddr, char *outfile, FILE *outf)</td></tr>
<tr class="separator:aab6c87a7e3d974322d64f8ecc4087ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a079a49e546cd59ff6838f4b9b9198edc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a079a49e546cd59ff6838f4b9b9198edc">ihex2b</a> (char *<a class="el" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>, FILE *inf, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *mem, int bufsize, unsigned int fileoffset)</td></tr>
<tr class="separator:a079a49e546cd59ff6838f4b9b9198edc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b67600ab9953c93406df18716fa64e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a11b67600ab9953c93406df18716fa64e">b2srec</a> (unsigned char *inbuf, int bufsize, int recsize, int startaddr, char *outfile, FILE *outf)</td></tr>
<tr class="separator:a11b67600ab9953c93406df18716fa64e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b9629bed1b701a32a5bd062aa44548"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a34b9629bed1b701a32a5bd062aa44548">srec2b</a> (char *<a class="el" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>, FILE *inf, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *mem, int bufsize, unsigned int fileoffset)</td></tr>
<tr class="separator:a34b9629bed1b701a32a5bd062aa44548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a661a66898a3367613ae262361bd30fed"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a661a66898a3367613ae262361bd30fed">ihex_readrec</a> (struct <a class="el" href="../../d8/dec/fileio_8c.html#da/dc7/structihexrec">ihexrec</a> *ihex, char *rec)</td></tr>
<tr class="separator:a661a66898a3367613ae262361bd30fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8cb5b1fced677ce16f5f8716a01ebde"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#aa8cb5b1fced677ce16f5f8716a01ebde">srec_readrec</a> (struct <a class="el" href="../../d8/dec/fileio_8c.html#da/dc7/structihexrec">ihexrec</a> *srec, char *rec)</td></tr>
<tr class="separator:aa8cb5b1fced677ce16f5f8716a01ebde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80ec1b0e4c4ab64579cbaf87a4497a52"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a80ec1b0e4c4ab64579cbaf87a4497a52">fileio_rbin</a> (struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *fio, char *filename, FILE *f, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *mem, int size)</td></tr>
<tr class="separator:a80ec1b0e4c4ab64579cbaf87a4497a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71183387d89bc838be342d3713d8347"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#ab71183387d89bc838be342d3713d8347">fileio_ihex</a> (struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *fio, char *filename, FILE *f, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *mem, int size)</td></tr>
<tr class="separator:ab71183387d89bc838be342d3713d8347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af113fb8c17f1afea96cb4172116e8b1b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#af113fb8c17f1afea96cb4172116e8b1b">fileio_srec</a> (struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *fio, char *filename, FILE *f, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *mem, int size)</td></tr>
<tr class="separator:af113fb8c17f1afea96cb4172116e8b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21771f44991561b4679cecd0870d5798"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a21771f44991561b4679cecd0870d5798">fileio_num</a> (struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *fio, char *filename, FILE *f, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *mem, int size, <a class="el" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6a">FILEFMT</a> fmt)</td></tr>
<tr class="separator:a21771f44991561b4679cecd0870d5798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1fb4f2bc3ebed99ca905ec1a9baf7e3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#ad1fb4f2bc3ebed99ca905ec1a9baf7e3">fmt_autodetect</a> (char *fname, unsigned section)</td></tr>
<tr class="separator:ad1fb4f2bc3ebed99ca905ec1a9baf7e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f7c202e2da66fa4ef84f09ebee9d6f"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a79f7c202e2da66fa4ef84f09ebee9d6f">fopen_utf8</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *filename, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *mode)</td></tr>
<tr class="separator:a79f7c202e2da66fa4ef84f09ebee9d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22977a4f4e10b78f2d5b7590861bbfae"><td class="memItemLeft" align="right" valign="top">static FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a22977a4f4e10b78f2d5b7590861bbfae">fopen_and_seek</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *filename, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *mode, unsigned section)</td></tr>
<tr class="separator:a22977a4f4e10b78f2d5b7590861bbfae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3465b29d63a2971224eb7d6a63e00632"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a3465b29d63a2971224eb7d6a63e00632">fmtstr</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6a">FILEFMT</a> format)</td></tr>
<tr class="separator:a3465b29d63a2971224eb7d6a63e00632"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac901e72dcce821f43e90a44676b8f70e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#ac901e72dcce821f43e90a44676b8f70e">itoa_simple</a> (int n, char *buf, int base)</td></tr>
<tr class="separator:ac901e72dcce821f43e90a44676b8f70e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b0511bda45cf58950801f0a816043ea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a1b0511bda45cf58950801f0a816043ea">fileio_imm</a> (struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *fio, char *filename, FILE *f, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *mem, int size)</td></tr>
<tr class="separator:a1b0511bda45cf58950801f0a816043ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c4b09b06be3444ea87053f10e2c5a74"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a6c4b09b06be3444ea87053f10e2c5a74">fileio_setparms</a> (int op, struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *fp, struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d7/d8f/structavrpart">avrpart</a> *p, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *m)</td></tr>
<tr class="separator:a6c4b09b06be3444ea87053f10e2c5a74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52584bb5c2e5bb8c1f52118131006dbb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dec/fileio_8c.html#a52584bb5c2e5bb8c1f52118131006dbb">fileio</a> (int op, char *filename, <a class="el" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6a">FILEFMT</a> format, struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d7/d8f/structavrpart">avrpart</a> *p, char *memtype, int size, unsigned section)</td></tr>
<tr class="separator:a52584bb5c2e5bb8c1f52118131006dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="da/dc7/structihexrec" id="da/dc7/structihexrec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#da/dc7/structihexrec">&#9670;&#160;</a></span>ihexrec</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct ihexrec</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a8bbad404fcbc3fbac634e63fb5a3a648" name="a8bbad404fcbc3fbac634e63fb5a3a648"></a>unsigned char</td>
<td class="fieldname">
cksum</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a91cf4d872d2dc7bc4abbfaab72e79f2f" name="a91cf4d872d2dc7bc4abbfaab72e79f2f"></a>unsigned char</td>
<td class="fieldname">
data[<a class="el" href="../../d8/dec/fileio_8c.html#ad06d1b4a2ad5f90b7f434dc328adc91a">IHEX_MAXDATA</a>]</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a9c19e232017d9c436d54267b2f1258f6" name="a9c19e232017d9c436d54267b2f1258f6"></a>unsigned int</td>
<td class="fieldname">
loadofs</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a4a00cec813ba8a40bbcaa18b8ff258e2" name="a4a00cec813ba8a40bbcaa18b8ff258e2"></a>unsigned char</td>
<td class="fieldname">
reclen</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aae5f14a03e58a1637c30a265fa7199d7" name="aae5f14a03e58a1637c30a265fa7199d7"></a>unsigned char</td>
<td class="fieldname">
rectyp</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad06d1b4a2ad5f90b7f434dc328adc91a" name="ad06d1b4a2ad5f90b7f434dc328adc91a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad06d1b4a2ad5f90b7f434dc328adc91a">&#9670;&#160;</a></span>IHEX_MAXDATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IHEX_MAXDATA&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a09a3b394b8602092d58347b791158062" name="a09a3b394b8602092d58347b791158062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a3b394b8602092d58347b791158062">&#9670;&#160;</a></span>MAX_LINE_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_LINE_LEN&#160;&#160;&#160;256  /* max line length for ASCII format <a class="el" href="../../d8/d33/lexer_8c.html#a171692544b8e065853e387755849a433">input</a> files */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5fdaa3fa63f2ac3dee55cecc106cadf2" name="a5fdaa3fa63f2ac3dee55cecc106cadf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fdaa3fa63f2ac3dee55cecc106cadf2">&#9670;&#160;</a></span>MAX_MODE_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_MODE_LEN&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aab6c87a7e3d974322d64f8ecc4087ab4" name="aab6c87a7e3d974322d64f8ecc4087ab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab6c87a7e3d974322d64f8ecc4087ab4">&#9670;&#160;</a></span>b2ihex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int b2ihex </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>inbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>recsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>startaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>outf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  183</span>{</div>
<div class="line"><span class="lineno">  184</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * buf;</div>
<div class="line"><span class="lineno">  185</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextaddr;</div>
<div class="line"><span class="lineno">  186</span>  <span class="keywordtype">int</span> n, nbytes, n_64k;</div>
<div class="line"><span class="lineno">  187</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  188</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cksum;</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>  <span class="keywordflow">if</span> (recsize &gt; 255) {</div>
<div class="line"><span class="lineno">  191</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: recsize=%d, must be &lt; 256\n&quot;</span>,</div>
<div class="line"><span class="lineno">  192</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, recsize);</div>
<div class="line"><span class="lineno">  193</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  194</span>  }</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>  n_64k    = 0;</div>
<div class="line"><span class="lineno">  197</span>  nextaddr = startaddr;</div>
<div class="line"><span class="lineno">  198</span>  buf      = inbuf;</div>
<div class="line"><span class="lineno">  199</span>  nbytes   = 0;</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>  <span class="keywordflow">while</span> (bufsize) {</div>
<div class="line"><span class="lineno">  202</span>    n = recsize;</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">if</span> (n &gt; bufsize)</div>
<div class="line"><span class="lineno">  204</span>      n = bufsize;</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">if</span> ((nextaddr + n) &gt; 0x10000)</div>
<div class="line"><span class="lineno">  207</span>      n = 0x10000 - nextaddr;</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">if</span> (n) {</div>
<div class="line"><span class="lineno">  210</span>      cksum = 0;</div>
<div class="line"><span class="lineno">  211</span>      fprintf(outf, <span class="stringliteral">&quot;:%02X%04X00&quot;</span>, n, nextaddr);</div>
<div class="line"><span class="lineno">  212</span>      cksum += n + ((nextaddr &gt;&gt; 8) &amp; 0x0ff) + (nextaddr &amp; 0x0ff);</div>
<div class="line"><span class="lineno">  213</span>      <span class="keywordflow">for</span> (i=0; i&lt;n; i++) {</div>
<div class="line"><span class="lineno">  214</span>        fprintf(outf, <span class="stringliteral">&quot;%02X&quot;</span>, buf[i]);</div>
<div class="line"><span class="lineno">  215</span>        cksum += buf[i];</div>
<div class="line"><span class="lineno">  216</span>      }</div>
<div class="line"><span class="lineno">  217</span>      cksum = -cksum;</div>
<div class="line"><span class="lineno">  218</span>      fprintf(outf, <span class="stringliteral">&quot;%02X\n&quot;</span>, cksum);</div>
<div class="line"><span class="lineno">  219</span>      </div>
<div class="line"><span class="lineno">  220</span>      nextaddr += n;</div>
<div class="line"><span class="lineno">  221</span>      nbytes   += n;</div>
<div class="line"><span class="lineno">  222</span>    }</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">if</span> (nextaddr &gt;= 0x10000) {</div>
<div class="line"><span class="lineno">  225</span>      <span class="keywordtype">int</span> lo, hi;</div>
<div class="line"><span class="lineno">  226</span>      <span class="comment">/* output an extended address record */</span></div>
<div class="line"><span class="lineno">  227</span>      n_64k++;</div>
<div class="line"><span class="lineno">  228</span>      lo = n_64k &amp; 0xff;</div>
<div class="line"><span class="lineno">  229</span>      hi = (n_64k &gt;&gt; 8) &amp; 0xff;</div>
<div class="line"><span class="lineno">  230</span>      cksum = 0;</div>
<div class="line"><span class="lineno">  231</span>      fprintf(outf, <span class="stringliteral">&quot;:02000004%02X%02X&quot;</span>, hi, lo);</div>
<div class="line"><span class="lineno">  232</span>      cksum += 2 + 0 + 4 + hi + lo;</div>
<div class="line"><span class="lineno">  233</span>      cksum = -cksum;</div>
<div class="line"><span class="lineno">  234</span>      fprintf(outf, <span class="stringliteral">&quot;%02X\n&quot;</span>, cksum);</div>
<div class="line"><span class="lineno">  235</span>      nextaddr = 0;</div>
<div class="line"><span class="lineno">  236</span>    }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>    <span class="comment">/* advance to next &#39;recsize&#39; bytes */</span></div>
<div class="line"><span class="lineno">  239</span>    buf += n;</div>
<div class="line"><span class="lineno">  240</span>    bufsize -= n;</div>
<div class="line"><span class="lineno">  241</span>  }</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>  <span class="comment">/*-----------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  244</span><span class="comment">    add the end of record data line</span></div>
<div class="line"><span class="lineno">  245</span><span class="comment">    -----------------------------------------------------------------*/</span></div>
<div class="line"><span class="lineno">  246</span>  cksum = 0;</div>
<div class="line"><span class="lineno">  247</span>  n = 0;</div>
<div class="line"><span class="lineno">  248</span>  nextaddr = 0;</div>
<div class="line"><span class="lineno">  249</span>  fprintf(outf, <span class="stringliteral">&quot;:%02X%04X01&quot;</span>, n, nextaddr);</div>
<div class="line"><span class="lineno">  250</span>  cksum += n + ((nextaddr &gt;&gt; 8) &amp; 0x0ff) + (nextaddr &amp; 0x0ff) + 1;</div>
<div class="line"><span class="lineno">  251</span>  cksum = -cksum;</div>
<div class="line"><span class="lineno">  252</span>  fprintf(outf, <span class="stringliteral">&quot;%02X\n&quot;</span>, cksum);</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>  <span class="keywordflow">return</span> nbytes;</div>
<div class="line"><span class="lineno">  255</span>}</div>
<div class="ttc" id="aavrdude_8h_html_a1ddcc97224a95cec04b38b0ac866fa19"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a></div><div class="ttdeci">#define MSG_INFO</div><div class="ttdef"><b>Definition</b> avrdude.h:51</div></div>
<div class="ttc" id="aavrdude_8h_html_ab9e1449fd00c98428516f0b41eddcb10"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a></div><div class="ttdeci">char * progname</div><div class="ttdef"><b>Definition</b> main.c:61</div></div>
<div class="ttc" id="aavrdude_8h_html_ae3011b9c6440c863e64eed3fed5106e3"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a></div><div class="ttdeci">int avrdude_message(const int msglvl, const char *format,...)</div><div class="ttdef"><b>Definition</b> main.c:93</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, and <a class="el" href="../../#l00061">progname</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01217">fileio_ihex()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_aab6c87a7e3d974322d64f8ecc4087ab4_cgraph.svg" width="246" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_aab6c87a7e3d974322d64f8ecc4087ab4_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a11b67600ab9953c93406df18716fa64e" name="a11b67600ab9953c93406df18716fa64e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11b67600ab9953c93406df18716fa64e">&#9670;&#160;</a></span>b2srec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int b2srec </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>inbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>recsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>startaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>outf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  453</span>{</div>
<div class="line"><span class="lineno">  454</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * buf;</div>
<div class="line"><span class="lineno">  455</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextaddr;</div>
<div class="line"><span class="lineno">  456</span>  <span class="keywordtype">int</span> n, nbytes, addr_width;</div>
<div class="line"><span class="lineno">  457</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  458</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cksum;</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>  <span class="keywordtype">char</span> * tmpl=0;</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>  <span class="keywordflow">if</span> (recsize &gt; 255) {</div>
<div class="line"><span class="lineno">  463</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: recsize=%d, must be &lt; 256\n&quot;</span>,</div>
<div class="line"><span class="lineno">  464</span>            <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, recsize);</div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  466</span>  }</div>
<div class="line"><span class="lineno">  467</span>  </div>
<div class="line"><span class="lineno">  468</span>  nextaddr = startaddr;</div>
<div class="line"><span class="lineno">  469</span>  buf = inbuf;</div>
<div class="line"><span class="lineno">  470</span>  nbytes = 0;    </div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>  addr_width = 0;</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>  <span class="keywordflow">while</span> (bufsize) {</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>    n = recsize;</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>    <span class="keywordflow">if</span> (n &gt; bufsize) </div>
<div class="line"><span class="lineno">  479</span>      n = bufsize;</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>    <span class="keywordflow">if</span> (n) {</div>
<div class="line"><span class="lineno">  482</span>      cksum = 0;</div>
<div class="line"><span class="lineno">  483</span>      <span class="keywordflow">if</span> (nextaddr + n &lt;= 0xffff) {</div>
<div class="line"><span class="lineno">  484</span>        addr_width = 2;</div>
<div class="line"><span class="lineno">  485</span>        tmpl=<span class="stringliteral">&quot;S1%02X%04X&quot;</span>;</div>
<div class="line"><span class="lineno">  486</span>      }</div>
<div class="line"><span class="lineno">  487</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextaddr + n &lt;= 0xffffff) {</div>
<div class="line"><span class="lineno">  488</span>        addr_width = 3;</div>
<div class="line"><span class="lineno">  489</span>        tmpl=<span class="stringliteral">&quot;S2%02X%06X&quot;</span>;</div>
<div class="line"><span class="lineno">  490</span>      }</div>
<div class="line"><span class="lineno">  491</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextaddr + n &lt;= 0xffffffff) {</div>
<div class="line"><span class="lineno">  492</span>        addr_width = 4;</div>
<div class="line"><span class="lineno">  493</span>        tmpl=<span class="stringliteral">&quot;S3%02X%08X&quot;</span>;</div>
<div class="line"><span class="lineno">  494</span>      }</div>
<div class="line"><span class="lineno">  495</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  496</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: address=%d, out of range\n&quot;</span>,</div>
<div class="line"><span class="lineno">  497</span>                <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, nextaddr);</div>
<div class="line"><span class="lineno">  498</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  499</span>      }</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>      fprintf(outf, tmpl, n + addr_width + 1, nextaddr);</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>      cksum += n + addr_width + 1;</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>      <span class="keywordflow">for</span> (i = addr_width; i&gt;0; i--) {</div>
<div class="line"><span class="lineno">  506</span>        cksum += (nextaddr &gt;&gt; (i-1) * 8) &amp; 0xff;</div>
<div class="line"><span class="lineno">  507</span>      }</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = nextaddr; i &lt; nextaddr + n; i++) {</div>
<div class="line"><span class="lineno">  510</span>        fprintf(outf, <span class="stringliteral">&quot;%02X&quot;</span>, buf[i]);</div>
<div class="line"><span class="lineno">  511</span>        cksum += buf[i];</div>
<div class="line"><span class="lineno">  512</span>      }</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>      cksum = 0xff - cksum;</div>
<div class="line"><span class="lineno">  515</span>      fprintf(outf, <span class="stringliteral">&quot;%02X\n&quot;</span>, cksum);</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>      nextaddr += n;</div>
<div class="line"><span class="lineno">  518</span>      nbytes +=n;</div>
<div class="line"><span class="lineno">  519</span>    }</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    <span class="comment">/* advance to next &#39;recsize&#39; bytes */</span></div>
<div class="line"><span class="lineno">  522</span>    bufsize -= n;</div>
<div class="line"><span class="lineno">  523</span>  }</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>  <span class="comment">/*-----------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  526</span><span class="comment">    add the end of record data line</span></div>
<div class="line"><span class="lineno">  527</span><span class="comment">    -----------------------------------------------------------------*/</span></div>
<div class="line"><span class="lineno">  528</span>  cksum = 0;</div>
<div class="line"><span class="lineno">  529</span>  n = 0;</div>
<div class="line"><span class="lineno">  530</span>  nextaddr = 0;</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>  <span class="keywordflow">if</span> (startaddr &lt;= 0xffff) {</div>
<div class="line"><span class="lineno">  533</span>    addr_width = 2;</div>
<div class="line"><span class="lineno">  534</span>    tmpl=<span class="stringliteral">&quot;S9%02X%04X&quot;</span>;</div>
<div class="line"><span class="lineno">  535</span>  }</div>
<div class="line"><span class="lineno">  536</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (startaddr &lt;= 0xffffff) {</div>
<div class="line"><span class="lineno">  537</span>    addr_width = 3;</div>
<div class="line"><span class="lineno">  538</span>    tmpl=<span class="stringliteral">&quot;S9%02X%06X&quot;</span>;</div>
<div class="line"><span class="lineno">  539</span>  }</div>
<div class="line"><span class="lineno">  540</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (startaddr &lt;= 0xffffffff) {</div>
<div class="line"><span class="lineno">  541</span>    addr_width = 4;</div>
<div class="line"><span class="lineno">  542</span>    tmpl=<span class="stringliteral">&quot;S9%02X%08X&quot;</span>;</div>
<div class="line"><span class="lineno">  543</span>  }</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>  fprintf(outf, tmpl, n + addr_width + 1, nextaddr);</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>  cksum += n + addr_width +1;</div>
<div class="line"><span class="lineno">  548</span>  <span class="keywordflow">for</span> (i=addr_width; i&gt;0; i--) </div>
<div class="line"><span class="lineno">  549</span>    cksum += (nextaddr &gt;&gt; (i - 1) * 8) &amp; 0xff;</div>
<div class="line"><span class="lineno">  550</span>  cksum = 0xff - cksum;</div>
<div class="line"><span class="lineno">  551</span>  fprintf(outf, <span class="stringliteral">&quot;%02X\n&quot;</span>, cksum);</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>  <span class="keywordflow">return</span> nbytes; </div>
<div class="line"><span class="lineno">  554</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00059">ihexrec::cksum</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, and <a class="el" href="../../#l00061">progname</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01247">fileio_srec()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a11b67600ab9953c93406df18716fa64e_cgraph.svg" width="247" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a11b67600ab9953c93406df18716fa64e_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a52584bb5c2e5bb8c1f52118131006dbb" name="a52584bb5c2e5bb8c1f52118131006dbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52584bb5c2e5bb8c1f52118131006dbb">&#9670;&#160;</a></span>fileio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileio </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6a">FILEFMT</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d7/d8f/structavrpart">avrpart</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>memtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>section</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1514</span>{</div>
<div class="line"><span class="lineno"> 1515</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno"> 1516</span>  FILE * f;</div>
<div class="line"><span class="lineno"> 1517</span>  <span class="keywordtype">char</span> * fname;</div>
<div class="line"><span class="lineno"> 1518</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> fio;</div>
<div class="line"><span class="lineno"> 1519</span>  <a class="code hl_struct" href="../../d2/d68/libavrdude_8h.html#d5/dbe/structavrmem">AVRMEM</a> * mem;</div>
<div class="line"><span class="lineno"> 1520</span>  <span class="keywordtype">int</span> using_stdio;</div>
<div class="line"><span class="lineno"> 1521</span> </div>
<div class="line"><span class="lineno"> 1522</span>  mem = <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a>(p, memtype);</div>
<div class="line"><span class="lineno"> 1523</span>  <span class="keywordflow">if</span> (mem == NULL) {</div>
<div class="line"><span class="lineno"> 1524</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;fileio(): memory type \&quot;%s\&quot; not configured for device \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1525</span>                    memtype, p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a8a1a31ff99738c37d5a3b15712261ead">desc</a>);</div>
<div class="line"><span class="lineno"> 1526</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1527</span>  }</div>
<div class="line"><span class="lineno"> 1528</span> </div>
<div class="line"><span class="lineno"> 1529</span>  rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a6c4b09b06be3444ea87053f10e2c5a74">fileio_setparms</a>(<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>, &amp;fio, p, mem);</div>
<div class="line"><span class="lineno"> 1530</span>  <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><span class="lineno"> 1531</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1532</span> </div>
<div class="line"><span class="lineno"> 1533</span>  <span class="keywordflow">if</span> (fio.op == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>)</div>
<div class="line"><span class="lineno"> 1534</span>    <a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">size</a> = mem-&gt;size;</div>
<div class="line"><span class="lineno"> 1535</span> </div>
<div class="line"><span class="lineno"> 1536</span>  <span class="keywordflow">if</span> (fio.op == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>) {</div>
<div class="line"><span class="lineno"> 1537</span>    <span class="comment">/* 0xff fill unspecified memory */</span></div>
<div class="line"><span class="lineno"> 1538</span>    memset(mem-&gt;buf, 0xff, size);</div>
<div class="line"><span class="lineno"> 1539</span>  }</div>
<div class="line"><span class="lineno"> 1540</span>  memset(mem-&gt;tags, 0, size);</div>
<div class="line"><span class="lineno"> 1541</span> </div>
<div class="line"><span class="lineno"> 1542</span>  using_stdio = 0;</div>
<div class="line"><span class="lineno"> 1543</span> </div>
<div class="line"><span class="lineno"> 1544</span>  <span class="keywordflow">if</span> (strcmp(filename, <span class="stringliteral">&quot;-&quot;</span>)==0) {</div>
<div class="line"><span class="lineno"> 1545</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1546</span>    <span class="comment">// Note: we don&#39;t want to read stdin or write to stdout as part of Slic3r</span></div>
<div class="line"><span class="lineno"> 1547</span>    <span class="comment">// if (fio.op == FIO_READ) {</span></div>
<div class="line"><span class="lineno"> 1548</span>    <span class="comment">//   fname = &quot;&lt;stdin&gt;&quot;;</span></div>
<div class="line"><span class="lineno"> 1549</span>    <span class="comment">//   f = stdin;</span></div>
<div class="line"><span class="lineno"> 1550</span>    <span class="comment">// }</span></div>
<div class="line"><span class="lineno"> 1551</span>    <span class="comment">// else {</span></div>
<div class="line"><span class="lineno"> 1552</span>    <span class="comment">//   fname = &quot;&lt;stdout&gt;&quot;;</span></div>
<div class="line"><span class="lineno"> 1553</span>    <span class="comment">//   f = stdout;</span></div>
<div class="line"><span class="lineno"> 1554</span>    <span class="comment">// }</span></div>
<div class="line"><span class="lineno"> 1555</span>    <span class="comment">// using_stdio = 1;</span></div>
<div class="line"><span class="lineno"> 1556</span>  }</div>
<div class="line"><span class="lineno"> 1557</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1558</span>    fname = filename;</div>
<div class="line"><span class="lineno"> 1559</span>    f = NULL;</div>
<div class="line"><span class="lineno"> 1560</span>  }</div>
<div class="line"><span class="lineno"> 1561</span> </div>
<div class="line"><span class="lineno"> 1562</span>  <span class="keywordflow">if</span> (format == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa26f2822cba431b559ab85de29bd30706">FMT_AUTO</a>) {</div>
<div class="line"><span class="lineno"> 1563</span>    <span class="keywordtype">int</span> format_detect;</div>
<div class="line"><span class="lineno"> 1564</span> </div>
<div class="line"><span class="lineno"> 1565</span>    <span class="keywordflow">if</span> (using_stdio) {</div>
<div class="line"><span class="lineno"> 1566</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: can&#39;t auto detect file format when using stdin/out.\n&quot;</span></div>
<div class="line"><span class="lineno"> 1567</span>                      <span class="stringliteral">&quot;%s  Please specify a file format and try again.\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1568</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#a8f715f1196bcbb57c451c85f1e6f2b57">progbuf</a>);</div>
<div class="line"><span class="lineno"> 1569</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1570</span>    }</div>
<div class="line"><span class="lineno"> 1571</span> </div>
<div class="line"><span class="lineno"> 1572</span>    format_detect = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#ad1fb4f2bc3ebed99ca905ec1a9baf7e3">fmt_autodetect</a>(fname, section);</div>
<div class="line"><span class="lineno"> 1573</span>    <span class="keywordflow">if</span> (format_detect &lt; 0) {</div>
<div class="line"><span class="lineno"> 1574</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: can&#39;t determine file format for %s, specify explicitly\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1575</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fname);</div>
<div class="line"><span class="lineno"> 1576</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1577</span>    }</div>
<div class="line"><span class="lineno"> 1578</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a> = format_detect;</div>
<div class="line"><span class="lineno"> 1579</span> </div>
<div class="line"><span class="lineno"> 1580</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/daf/avrdude_8h.html#afe33d420e205f0ec3c527152fe5ec45a">quell_progress</a> &lt; 2) {</div>
<div class="line"><span class="lineno"> 1581</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: %s file %s auto detected as %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1582</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio.iodesc, fname, <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a3465b29d63a2971224eb7d6a63e00632">fmtstr</a>(format));</div>
<div class="line"><span class="lineno"> 1583</span>    }</div>
<div class="line"><span class="lineno"> 1584</span>  }</div>
<div class="line"><span class="lineno"> 1585</span> </div>
<div class="line"><span class="lineno"> 1586</span><span class="preprocessor">#if defined(WIN32NATIVE)</span></div>
<div class="line"><span class="lineno"> 1587</span>  <span class="comment">/* Open Raw Binary and ELF format in binary mode on Windows.*/</span></div>
<div class="line"><span class="lineno"> 1588</span>  <span class="keywordflow">if</span>(format == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa27d1752a5ccca21871da90457b1c3e78">FMT_RBIN</a> || format == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac210b6268248e4e592d8659cee6b6ca2">FMT_ELF</a>)</div>
<div class="line"><span class="lineno"> 1589</span>  {</div>
<div class="line"><span class="lineno"> 1590</span>      <span class="keywordflow">if</span>(fio.op == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>)</div>
<div class="line"><span class="lineno"> 1591</span>      {</div>
<div class="line"><span class="lineno"> 1592</span>          fio.mode = <span class="stringliteral">&quot;rb&quot;</span>;</div>
<div class="line"><span class="lineno"> 1593</span>      }</div>
<div class="line"><span class="lineno"> 1594</span>      <span class="keywordflow">if</span>(fio.op == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a>)</div>
<div class="line"><span class="lineno"> 1595</span>      {</div>
<div class="line"><span class="lineno"> 1596</span>          fio.mode = <span class="stringliteral">&quot;wb&quot;</span>;</div>
<div class="line"><span class="lineno"> 1597</span>      }</div>
<div class="line"><span class="lineno"> 1598</span>  }</div>
<div class="line"><span class="lineno"> 1599</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1600</span> </div>
<div class="line"><span class="lineno"> 1601</span>  <span class="keywordflow">if</span> (format != <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac7aa7bbc307de503cb59fd387f248689">FMT_IMM</a>) {</div>
<div class="line"><span class="lineno"> 1602</span>    <span class="keywordflow">if</span> (!using_stdio) {</div>
<div class="line"><span class="lineno"> 1603</span>      f = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a22977a4f4e10b78f2d5b7590861bbfae">fopen_and_seek</a>(fname, fio.mode, section);</div>
<div class="line"><span class="lineno"> 1604</span>      <span class="keywordflow">if</span> (f == NULL) {</div>
<div class="line"><span class="lineno"> 1605</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: can&#39;t open %s file %s: %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1606</span>                <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio.iodesc, fname, strerror(errno));</div>
<div class="line"><span class="lineno"> 1607</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1608</span>      }</div>
<div class="line"><span class="lineno"> 1609</span>    }</div>
<div class="line"><span class="lineno"> 1610</span>  }</div>
<div class="line"><span class="lineno"> 1611</span> </div>
<div class="line"><span class="lineno"> 1612</span>  <span class="keywordflow">switch</span> (format) {</div>
<div class="line"><span class="lineno"> 1613</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aaaec8c544b8c90424dc9f753d997211af">FMT_IHEX</a>:</div>
<div class="line"><span class="lineno"> 1614</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#ab71183387d89bc838be342d3713d8347">fileio_ihex</a>(&amp;fio, fname, f, mem, size);</div>
<div class="line"><span class="lineno"> 1615</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1616</span> </div>
<div class="line"><span class="lineno"> 1617</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aafcdce4cb351f158c8c9828a94b2c3b68">FMT_SREC</a>:</div>
<div class="line"><span class="lineno"> 1618</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#af113fb8c17f1afea96cb4172116e8b1b">fileio_srec</a>(&amp;fio, fname, f, mem, size);</div>
<div class="line"><span class="lineno"> 1619</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1620</span> </div>
<div class="line"><span class="lineno"> 1621</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa27d1752a5ccca21871da90457b1c3e78">FMT_RBIN</a>:</div>
<div class="line"><span class="lineno"> 1622</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a80ec1b0e4c4ab64579cbaf87a4497a52">fileio_rbin</a>(&amp;fio, fname, f, mem, size);</div>
<div class="line"><span class="lineno"> 1623</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1624</span> </div>
<div class="line"><span class="lineno"> 1625</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac210b6268248e4e592d8659cee6b6ca2">FMT_ELF</a>:</div>
<div class="line"><span class="lineno"> 1626</span><span class="preprocessor">#ifdef HAVE_LIBELF</span></div>
<div class="line"><span class="lineno"> 1627</span>      rc = fileio_elf(&amp;fio, fname, f, mem, p, size);</div>
<div class="line"><span class="lineno"> 1628</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1629</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: can&#39;t handle ELF file %s, &quot;</span></div>
<div class="line"><span class="lineno"> 1630</span>                      <span class="stringliteral">&quot;ELF file support was not compiled in\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1631</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fname);</div>
<div class="line"><span class="lineno"> 1632</span>      rc = -1;</div>
<div class="line"><span class="lineno"> 1633</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1634</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1635</span> </div>
<div class="line"><span class="lineno"> 1636</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac7aa7bbc307de503cb59fd387f248689">FMT_IMM</a>:</div>
<div class="line"><span class="lineno"> 1637</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a1b0511bda45cf58950801f0a816043ea">fileio_imm</a>(&amp;fio, fname, f, mem, size);</div>
<div class="line"><span class="lineno"> 1638</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1639</span> </div>
<div class="line"><span class="lineno"> 1640</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa5f76279292ac2d174b6d039c9b648aed">FMT_HEX</a>:</div>
<div class="line"><span class="lineno"> 1641</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aae57ce93c0682d65a74ebe5337fa41204">FMT_DEC</a>:</div>
<div class="line"><span class="lineno"> 1642</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa9471b8b06599678c1fb406b4e6afbc83">FMT_OCT</a>:</div>
<div class="line"><span class="lineno"> 1643</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa65eb0d051cdb3841f83885e2cba3e435">FMT_BIN</a>:</div>
<div class="line"><span class="lineno"> 1644</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a21771f44991561b4679cecd0870d5798">fileio_num</a>(&amp;fio, fname, f, mem, size, format);</div>
<div class="line"><span class="lineno"> 1645</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1646</span> </div>
<div class="line"><span class="lineno"> 1647</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1648</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: invalid %s file format: %d\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1649</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio.iodesc, format);</div>
<div class="line"><span class="lineno"> 1650</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1651</span>  }</div>
<div class="line"><span class="lineno"> 1652</span> </div>
<div class="line"><span class="lineno"> 1653</span>  <span class="keywordflow">if</span> (rc &gt; 0) {</div>
<div class="line"><span class="lineno"> 1654</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a> == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>) &amp;&amp; (<a class="code hl_define" href="../../da/d6f/unistd_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(mem-&gt;desc, <span class="stringliteral">&quot;flash&quot;</span>) == 0 ||</div>
<div class="line"><span class="lineno"> 1655</span>                             <a class="code hl_define" href="../../da/d6f/unistd_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(mem-&gt;desc, <span class="stringliteral">&quot;application&quot;</span>) == 0 ||</div>
<div class="line"><span class="lineno"> 1656</span>                             <a class="code hl_define" href="../../da/d6f/unistd_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(mem-&gt;desc, <span class="stringliteral">&quot;apptable&quot;</span>) == 0 ||</div>
<div class="line"><span class="lineno"> 1657</span>                             <a class="code hl_define" href="../../da/d6f/unistd_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(mem-&gt;desc, <span class="stringliteral">&quot;boot&quot;</span>) == 0)) {</div>
<div class="line"><span class="lineno"> 1658</span>      <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1659</span><span class="comment">       * if we are reading flash, just mark the size as being the</span></div>
<div class="line"><span class="lineno"> 1660</span><span class="comment">       * highest non-0xff byte</span></div>
<div class="line"><span class="lineno"> 1661</span><span class="comment">       */</span></div>
<div class="line"><span class="lineno"> 1662</span>      rc = <a class="code hl_function" href="../../d1/d26/avr_8c.html#a485c8097195007dda46204da97b3af9c">avr_mem_hiaddr</a>(mem);</div>
<div class="line"><span class="lineno"> 1663</span>    }</div>
<div class="line"><span class="lineno"> 1664</span>  }</div>
<div class="line"><span class="lineno"> 1665</span>  <span class="keywordflow">if</span> (format != <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac7aa7bbc307de503cb59fd387f248689">FMT_IMM</a> &amp;&amp; !using_stdio) {</div>
<div class="line"><span class="lineno"> 1666</span>    fclose(f);</div>
<div class="line"><span class="lineno"> 1667</span>  }</div>
<div class="line"><span class="lineno"> 1668</span> </div>
<div class="line"><span class="lineno"> 1669</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1670</span>}</div>
<div class="ttc" id="aavr_8c_html_a485c8097195007dda46204da97b3af9c"><div class="ttname"><a href="../../d1/d26/avr_8c.html#a485c8097195007dda46204da97b3af9c">avr_mem_hiaddr</a></div><div class="ttdeci">int avr_mem_hiaddr(AVRMEM *mem)</div><div class="ttdef"><b>Definition</b> avr.c:284</div></div>
<div class="ttc" id="aavrdude_8h_html_a8f715f1196bcbb57c451c85f1e6f2b57"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#a8f715f1196bcbb57c451c85f1e6f2b57">progbuf</a></div><div class="ttdeci">char progbuf[]</div><div class="ttdef"><b>Definition</b> main.c:62</div></div>
<div class="ttc" id="aavrdude_8h_html_afe33d420e205f0ec3c527152fe5ec45a"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#afe33d420e205f0ec3c527152fe5ec45a">quell_progress</a></div><div class="ttdeci">int quell_progress</div><div class="ttdef"><b>Definition</b> main.c:199</div></div>
<div class="ttc" id="aavrpart_8c_html_ac270cad9c51ac6da0bb27ee27620f524"><div class="ttname"><a href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a></div><div class="ttdeci">AVRMEM * avr_locate_mem(AVRPART *p, char *desc)</div><div class="ttdef"><b>Definition</b> avrpart.c:354</div></div>
<div class="ttc" id="afileio_8c_html_a1b0511bda45cf58950801f0a816043ea"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a1b0511bda45cf58950801f0a816043ea">fileio_imm</a></div><div class="ttdeci">static int fileio_imm(struct fioparms *fio, char *filename, FILE *f, AVRMEM *mem, int size)</div><div class="ttdef"><b>Definition</b> fileio.c:1171</div></div>
<div class="ttc" id="afileio_8c_html_a21771f44991561b4679cecd0870d5798"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a21771f44991561b4679cecd0870d5798">fileio_num</a></div><div class="ttdeci">static int fileio_num(struct fioparms *fio, char *filename, FILE *f, AVRMEM *mem, int size, FILEFMT fmt)</div><div class="ttdef"><b>Definition</b> fileio.c:1308</div></div>
<div class="ttc" id="afileio_8c_html_a22977a4f4e10b78f2d5b7590861bbfae"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a22977a4f4e10b78f2d5b7590861bbfae">fopen_and_seek</a></div><div class="ttdeci">static FILE * fopen_and_seek(const char *filename, const char *mode, unsigned section)</div><div class="ttdef"><b>Definition</b> fileio.c:124</div></div>
<div class="ttc" id="afileio_8c_html_a3465b29d63a2971224eb7d6a63e00632"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a3465b29d63a2971224eb7d6a63e00632">fmtstr</a></div><div class="ttdeci">char * fmtstr(FILEFMT format)</div><div class="ttdef"><b>Definition</b> fileio.c:166</div></div>
<div class="ttc" id="afileio_8c_html_a6c4b09b06be3444ea87053f10e2c5a74"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a6c4b09b06be3444ea87053f10e2c5a74">fileio_setparms</a></div><div class="ttdeci">int fileio_setparms(int op, struct fioparms *fp, struct avrpart *p, AVRMEM *m)</div><div class="ttdef"><b>Definition</b> fileio.c:1380</div></div>
<div class="ttc" id="afileio_8c_html_a80ec1b0e4c4ab64579cbaf87a4497a52"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a80ec1b0e4c4ab64579cbaf87a4497a52">fileio_rbin</a></div><div class="ttdeci">static int fileio_rbin(struct fioparms *fio, char *filename, FILE *f, AVRMEM *mem, int size)</div><div class="ttdef"><b>Definition</b> fileio.c:1139</div></div>
<div class="ttc" id="afileio_8c_html_ab71183387d89bc838be342d3713d8347"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#ab71183387d89bc838be342d3713d8347">fileio_ihex</a></div><div class="ttdeci">static int fileio_ihex(struct fioparms *fio, char *filename, FILE *f, AVRMEM *mem, int size)</div><div class="ttdef"><b>Definition</b> fileio.c:1217</div></div>
<div class="ttc" id="afileio_8c_html_ad1fb4f2bc3ebed99ca905ec1a9baf7e3"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#ad1fb4f2bc3ebed99ca905ec1a9baf7e3">fmt_autodetect</a></div><div class="ttdeci">static int fmt_autodetect(char *fname, unsigned section)</div><div class="ttdef"><b>Definition</b> fileio.c:1425</div></div>
<div class="ttc" id="afileio_8c_html_af113fb8c17f1afea96cb4172116e8b1b"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#af113fb8c17f1afea96cb4172116e8b1b">fileio_srec</a></div><div class="ttdeci">static int fileio_srec(struct fioparms *fio, char *filename, FILE *f, AVRMEM *mem, int size)</div><div class="ttdef"><b>Definition</b> fileio.c:1247</div></div>
<div class="ttc" id="alibavrdude_8h_html_a1d36912c8be50f0133cedc21171ef2a0"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">fioparms::op</a></div><div class="ttdeci">int op</div><div class="ttdef"><b>Definition</b> libavrdude.h:800</div></div>
<div class="ttc" id="alibavrdude_8h_html_a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a></div><div class="ttdeci">@ FIO_WRITE</div><div class="ttdef"><b>Definition</b> libavrdude.h:810</div></div>
<div class="ttc" id="alibavrdude_8h_html_a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a></div><div class="ttdeci">@ FIO_READ</div><div class="ttdef"><b>Definition</b> libavrdude.h:809</div></div>
<div class="ttc" id="alibavrdude_8h_html_a8a1a31ff99738c37d5a3b15712261ead"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a8a1a31ff99738c37d5a3b15712261ead">avrpart::desc</a></div><div class="ttdeci">char desc[AVR_DESCLEN]</div><div class="ttdef"><b>Definition</b> libavrdude.h:218</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa26f2822cba431b559ab85de29bd30706"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa26f2822cba431b559ab85de29bd30706">FMT_AUTO</a></div><div class="ttdeci">@ FMT_AUTO</div><div class="ttdef"><b>Definition</b> libavrdude.h:787</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa27d1752a5ccca21871da90457b1c3e78"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa27d1752a5ccca21871da90457b1c3e78">FMT_RBIN</a></div><div class="ttdeci">@ FMT_RBIN</div><div class="ttdef"><b>Definition</b> libavrdude.h:790</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa5f76279292ac2d174b6d039c9b648aed"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa5f76279292ac2d174b6d039c9b648aed">FMT_HEX</a></div><div class="ttdeci">@ FMT_HEX</div><div class="ttdef"><b>Definition</b> libavrdude.h:792</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa65eb0d051cdb3841f83885e2cba3e435"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa65eb0d051cdb3841f83885e2cba3e435">FMT_BIN</a></div><div class="ttdeci">@ FMT_BIN</div><div class="ttdef"><b>Definition</b> libavrdude.h:795</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa9471b8b06599678c1fb406b4e6afbc83"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa9471b8b06599678c1fb406b4e6afbc83">FMT_OCT</a></div><div class="ttdeci">@ FMT_OCT</div><div class="ttdef"><b>Definition</b> libavrdude.h:794</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aaaec8c544b8c90424dc9f753d997211af"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aaaec8c544b8c90424dc9f753d997211af">FMT_IHEX</a></div><div class="ttdeci">@ FMT_IHEX</div><div class="ttdef"><b>Definition</b> libavrdude.h:789</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac210b6268248e4e592d8659cee6b6ca2"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac210b6268248e4e592d8659cee6b6ca2">FMT_ELF</a></div><div class="ttdeci">@ FMT_ELF</div><div class="ttdef"><b>Definition</b> libavrdude.h:796</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac7aa7bbc307de503cb59fd387f248689"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac7aa7bbc307de503cb59fd387f248689">FMT_IMM</a></div><div class="ttdeci">@ FMT_IMM</div><div class="ttdef"><b>Definition</b> libavrdude.h:791</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aae57ce93c0682d65a74ebe5337fa41204"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aae57ce93c0682d65a74ebe5337fa41204">FMT_DEC</a></div><div class="ttdeci">@ FMT_DEC</div><div class="ttdef"><b>Definition</b> libavrdude.h:793</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad7ff7ab00ee7fa5051eab7bb0f6f3b6aafcdce4cb351f158c8c9828a94b2c3b68"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aafcdce4cb351f158c8c9828a94b2c3b68">FMT_SREC</a></div><div class="ttdeci">@ FMT_SREC</div><div class="ttdef"><b>Definition</b> libavrdude.h:788</div></div>
<div class="ttc" id="alibavrdude_8h_html_d5/d56/structfioparms"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a></div><div class="ttdef"><b>Definition</b> libavrdude.h:799</div></div>
<div class="ttc" id="alibavrdude_8h_html_d5/dbe/structavrmem"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#d5/dbe/structavrmem">avrmem</a></div><div class="ttdef"><b>Definition</b> libavrdude.h:283</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab28c13d286b2d1767d7c63b020ebd042"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">Slic3r::format</a></div><div class="ttdeci">std::string format(const char *fmt, TArgs &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> format.hpp:44</div></div>
<div class="ttc" id="anamespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail_html_a876af6f91231ae4e7e7316f5402682dc"><div class="ttname"><a href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">TCB_SPAN_NAMESPACE_NAME::detail::size</a></div><div class="ttdeci">constexpr auto size(const C &amp;c) -&gt; decltype(c.size())</div><div class="ttdef"><b>Definition</b> span.hpp:183</div></div>
<div class="ttc" id="aunistd_8h_html_ac99ec3f1036620727a68aa8c25a8963c"><div class="ttname"><a href="../../da/d6f/unistd_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a></div><div class="ttdeci">#define strcasecmp</div><div class="ttdef"><b>Definition</b> unistd.h:52</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00354">avr_locate_mem()</a>, <a class="el" href="../../#l00284">avr_mem_hiaddr()</a>, <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00218">avrpart::desc</a>, <a class="el" href="../../#l01217">fileio_ihex()</a>, <a class="el" href="../../#l01171">fileio_imm()</a>, <a class="el" href="../../#l01308">fileio_num()</a>, <a class="el" href="../../#l01139">fileio_rbin()</a>, <a class="el" href="../../#l01380">fileio_setparms()</a>, <a class="el" href="../../#l01247">fileio_srec()</a>, <a class="el" href="../../#l00809">FIO_READ</a>, <a class="el" href="../../#l00810">FIO_WRITE</a>, <a class="el" href="../../#l00787">FMT_AUTO</a>, <a class="el" href="../../#l01425">fmt_autodetect()</a>, <a class="el" href="../../#l00795">FMT_BIN</a>, <a class="el" href="../../#l00793">FMT_DEC</a>, <a class="el" href="../../#l00796">FMT_ELF</a>, <a class="el" href="../../#l00792">FMT_HEX</a>, <a class="el" href="../../#l00789">FMT_IHEX</a>, <a class="el" href="../../#l00791">FMT_IMM</a>, <a class="el" href="../../#l00794">FMT_OCT</a>, <a class="el" href="../../#l00790">FMT_RBIN</a>, <a class="el" href="../../#l00788">FMT_SREC</a>, <a class="el" href="../../#l00166">fmtstr()</a>, <a class="el" href="../../#l00124">fopen_and_seek()</a>, <a class="el" href="../../#l00802">fioparms::iodesc</a>, <a class="el" href="../../#l00801">fioparms::mode</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00800">fioparms::op</a>, <a class="el" href="../../#l00062">progbuf</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00199">quell_progress</a>, and <a class="el" href="../../#l00052">strcasecmp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00237">do_op()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a52584bb5c2e5bb8c1f52118131006dbb_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a52584bb5c2e5bb8c1f52118131006dbb_icgraph.svg" width="504" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab71183387d89bc838be342d3713d8347" name="ab71183387d89bc838be342d3713d8347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab71183387d89bc838be342d3713d8347">&#9670;&#160;</a></span>fileio_ihex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fileio_ihex </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *&#160;</td>
          <td class="paramname"><em>fio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1219</span>{</div>
<div class="line"><span class="lineno"> 1220</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno"> 1221</span> </div>
<div class="line"><span class="lineno"> 1222</span>  <span class="keywordflow">switch</span> (fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>) {</div>
<div class="line"><span class="lineno"> 1223</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a>:</div>
<div class="line"><span class="lineno"> 1224</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#aab6c87a7e3d974322d64f8ecc4087ab4">b2ihex</a>(mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>, size, 32, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a810fb59c24b8da10afb094e1329e1b3c">fileoffset</a>, filename, f);</div>
<div class="line"><span class="lineno"> 1225</span>      <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno"> 1226</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1227</span>      }</div>
<div class="line"><span class="lineno"> 1228</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1229</span> </div>
<div class="line"><span class="lineno"> 1230</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>:</div>
<div class="line"><span class="lineno"> 1231</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a079a49e546cd59ff6838f4b9b9198edc">ihex2b</a>(filename, f, mem, size, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a810fb59c24b8da10afb094e1329e1b3c">fileoffset</a>);</div>
<div class="line"><span class="lineno"> 1232</span>      <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><span class="lineno"> 1233</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1234</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1237</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: invalid Intex Hex file I/O operation=%d\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1238</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>);</div>
<div class="line"><span class="lineno"> 1239</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1240</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1241</span>  }</div>
<div class="line"><span class="lineno"> 1242</span> </div>
<div class="line"><span class="lineno"> 1243</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1244</span>}</div>
<div class="ttc" id="afileio_8c_html_a079a49e546cd59ff6838f4b9b9198edc"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a079a49e546cd59ff6838f4b9b9198edc">ihex2b</a></div><div class="ttdeci">static int ihex2b(char *infile, FILE *inf, AVRMEM *mem, int bufsize, unsigned int fileoffset)</div><div class="ttdef"><b>Definition</b> fileio.c:346</div></div>
<div class="ttc" id="afileio_8c_html_aab6c87a7e3d974322d64f8ecc4087ab4"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#aab6c87a7e3d974322d64f8ecc4087ab4">b2ihex</a></div><div class="ttdeci">static int b2ihex(unsigned char *inbuf, int bufsize, int recsize, int startaddr, char *outfile, FILE *outf)</div><div class="ttdef"><b>Definition</b> fileio.c:180</div></div>
<div class="ttc" id="alibavrdude_8h_html_a810fb59c24b8da10afb094e1329e1b3c"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a810fb59c24b8da10afb094e1329e1b3c">fioparms::fileoffset</a></div><div class="ttdeci">unsigned int fileoffset</div><div class="ttdef"><b>Definition</b> libavrdude.h:805</div></div>
<div class="ttc" id="alibavrdude_8h_html_a982cb446f63a0bc5d6c04fbadb5b498a"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">avrmem::buf</a></div><div class="ttdeci">unsigned char * buf</div><div class="ttdef"><b>Definition</b> libavrdude.h:304</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00180">b2ihex()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00805">fioparms::fileoffset</a>, <a class="el" href="../../#l00809">FIO_READ</a>, <a class="el" href="../../#l00810">FIO_WRITE</a>, <a class="el" href="../../#l00346">ihex2b()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00800">fioparms::op</a>, and <a class="el" href="../../#l00061">progname</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_ab71183387d89bc838be342d3713d8347_cgraph.svg" width="374" height="102"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_ab71183387d89bc838be342d3713d8347_icgraph.svg" width="632" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1b0511bda45cf58950801f0a816043ea" name="a1b0511bda45cf58950801f0a816043ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b0511bda45cf58950801f0a816043ea">&#9670;&#160;</a></span>fileio_imm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fileio_imm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *&#160;</td>
          <td class="paramname"><em>fio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1173</span>{</div>
<div class="line"><span class="lineno"> 1174</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno"> 1175</span>  <span class="keywordtype">char</span> * e, * p;</div>
<div class="line"><span class="lineno"> 1176</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>;</div>
<div class="line"><span class="lineno"> 1177</span>  <span class="keywordtype">int</span> loc;</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>  <span class="keywordflow">switch</span> (fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>) {</div>
<div class="line"><span class="lineno"> 1180</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>:</div>
<div class="line"><span class="lineno"> 1181</span>      loc = 0;</div>
<div class="line"><span class="lineno"> 1182</span>      p = strtok(filename, <span class="stringliteral">&quot; ,&quot;</span>);</div>
<div class="line"><span class="lineno"> 1183</span>      <span class="keywordflow">while</span> (p != NULL &amp;&amp; loc &lt; size) {</div>
<div class="line"><span class="lineno"> 1184</span>        <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a> = strtoul(p, &amp;e, 0);</div>
<div class="line"><span class="lineno"> 1185</span>  <span class="comment">/* check for binary formated (0b10101001) strings */</span></div>
<div class="line"><span class="lineno"> 1186</span>  <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a> = (strncmp (p, <span class="stringliteral">&quot;0b&quot;</span>, 2))?</div>
<div class="line"><span class="lineno"> 1187</span>      strtoul (p, &amp;e, 0):</div>
<div class="line"><span class="lineno"> 1188</span>      strtoul (p + 2, &amp;e, 2);</div>
<div class="line"><span class="lineno"> 1189</span>        <span class="keywordflow">if</span> (*e != 0) {</div>
<div class="line"><span class="lineno"> 1190</span>          <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: invalid byte value (%s) specified for immediate mode\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1191</span>                          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, p);</div>
<div class="line"><span class="lineno"> 1192</span>          <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1193</span>        }</div>
<div class="line"><span class="lineno"> 1194</span>        mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>[loc] = (char)b;</div>
<div class="line"><span class="lineno"> 1195</span>        mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a5b99d763eddc55ddc4c180be7bcb6e75">tags</a>[loc++] = <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a2ca938c48a2d9e1e0acfd596f5ed081f">TAG_ALLOCATED</a>;</div>
<div class="line"><span class="lineno"> 1196</span>        p = strtok(NULL, <span class="stringliteral">&quot; ,&quot;</span>);</div>
<div class="line"><span class="lineno"> 1197</span>        rc = loc;</div>
<div class="line"><span class="lineno"> 1198</span>      }</div>
<div class="line"><span class="lineno"> 1199</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1200</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1201</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: fileio: invalid operation=%d\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1202</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>);</div>
<div class="line"><span class="lineno"> 1203</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1204</span>  }</div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>  <span class="keywordflow">if</span> (rc &lt; 0 || (fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a> == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a> &amp;&amp; rc &lt; size)) {</div>
<div class="line"><span class="lineno"> 1207</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: %s error %s %s: %s; %s %d of the expected %d bytes\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1208</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a95b643777d80e1685cd81454efc843c2">iodesc</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a452d691d77d17339970d3476b3243b8c">dir</a>, filename, strerror(errno),</div>
<div class="line"><span class="lineno"> 1209</span>                    fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a4ebedd2dbf1bbe6759cff1a1440c7aa5">rw</a>, rc, size);</div>
<div class="line"><span class="lineno"> 1210</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1211</span>  }</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1214</span>}</div>
<div class="ttc" id="alibavrdude_8h_html_a2ca938c48a2d9e1e0acfd596f5ed081f"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a2ca938c48a2d9e1e0acfd596f5ed081f">TAG_ALLOCATED</a></div><div class="ttdeci">#define TAG_ALLOCATED</div><div class="ttdef"><b>Definition</b> libavrdude.h:215</div></div>
<div class="ttc" id="alibavrdude_8h_html_a452d691d77d17339970d3476b3243b8c"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a452d691d77d17339970d3476b3243b8c">fioparms::dir</a></div><div class="ttdeci">char * dir</div><div class="ttdef"><b>Definition</b> libavrdude.h:803</div></div>
<div class="ttc" id="alibavrdude_8h_html_a4ebedd2dbf1bbe6759cff1a1440c7aa5"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a4ebedd2dbf1bbe6759cff1a1440c7aa5">fioparms::rw</a></div><div class="ttdeci">char * rw</div><div class="ttdef"><b>Definition</b> libavrdude.h:804</div></div>
<div class="ttc" id="alibavrdude_8h_html_a5b99d763eddc55ddc4c180be7bcb6e75"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a5b99d763eddc55ddc4c180be7bcb6e75">avrmem::tags</a></div><div class="ttdeci">unsigned char * tags</div><div class="ttdef"><b>Definition</b> libavrdude.h:305</div></div>
<div class="ttc" id="alibavrdude_8h_html_a95b643777d80e1685cd81454efc843c2"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a95b643777d80e1685cd81454efc843c2">fioparms::iodesc</a></div><div class="ttdeci">char * iodesc</div><div class="ttdef"><b>Definition</b> libavrdude.h:802</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">marchsq::__impl::SquareTag::b</a></div><div class="ttdeci">@ b</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00803">fioparms::dir</a>, <a class="el" href="../../#l00809">FIO_READ</a>, <a class="el" href="../../#l00810">FIO_WRITE</a>, <a class="el" href="../../#l00802">fioparms::iodesc</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00800">fioparms::op</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00804">fioparms::rw</a>, <a class="el" href="../../#l00215">TAG_ALLOCATED</a>, and <a class="el" href="../../#l00305">avrmem::tags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a1b0511bda45cf58950801f0a816043ea_cgraph.svg" width="267" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a1b0511bda45cf58950801f0a816043ea_icgraph.svg" width="632" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a21771f44991561b4679cecd0870d5798" name="a21771f44991561b4679cecd0870d5798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21771f44991561b4679cecd0870d5798">&#9670;&#160;</a></span>fileio_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fileio_num </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *&#160;</td>
          <td class="paramname"><em>fio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6a">FILEFMT</a>&#160;</td>
          <td class="paramname"><em>fmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1311</span>{</div>
<div class="line"><span class="lineno"> 1312</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *prefix;</div>
<div class="line"><span class="lineno"> 1313</span>  <span class="keywordtype">char</span> cbuf[20];</div>
<div class="line"><span class="lineno"> 1314</span>  <span class="keywordtype">int</span> base, i, num;</div>
<div class="line"><span class="lineno"> 1315</span> </div>
<div class="line"><span class="lineno"> 1316</span>  <span class="keywordflow">switch</span> (fmt) {</div>
<div class="line"><span class="lineno"> 1317</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa5f76279292ac2d174b6d039c9b648aed">FMT_HEX</a>:</div>
<div class="line"><span class="lineno"> 1318</span>      prefix = <span class="stringliteral">&quot;0x&quot;</span>;</div>
<div class="line"><span class="lineno"> 1319</span>      base = 16;</div>
<div class="line"><span class="lineno"> 1320</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1321</span> </div>
<div class="line"><span class="lineno"> 1322</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1323</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aae57ce93c0682d65a74ebe5337fa41204">FMT_DEC</a>:</div>
<div class="line"><span class="lineno"> 1324</span>      prefix = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1325</span>      base = 10;</div>
<div class="line"><span class="lineno"> 1326</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1327</span> </div>
<div class="line"><span class="lineno"> 1328</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa9471b8b06599678c1fb406b4e6afbc83">FMT_OCT</a>:</div>
<div class="line"><span class="lineno"> 1329</span>      prefix = <span class="stringliteral">&quot;0&quot;</span>;</div>
<div class="line"><span class="lineno"> 1330</span>      base = 8;</div>
<div class="line"><span class="lineno"> 1331</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1332</span> </div>
<div class="line"><span class="lineno"> 1333</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa65eb0d051cdb3841f83885e2cba3e435">FMT_BIN</a>:</div>
<div class="line"><span class="lineno"> 1334</span>      prefix = <span class="stringliteral">&quot;0b&quot;</span>;</div>
<div class="line"><span class="lineno"> 1335</span>      base = 2;</div>
<div class="line"><span class="lineno"> 1336</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>  }</div>
<div class="line"><span class="lineno"> 1339</span> </div>
<div class="line"><span class="lineno"> 1340</span>  <span class="keywordflow">switch</span> (fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>) {</div>
<div class="line"><span class="lineno"> 1341</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a>:</div>
<div class="line"><span class="lineno"> 1342</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1343</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1344</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: fileio: invalid operation=%d\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1345</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>);</div>
<div class="line"><span class="lineno"> 1346</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1347</span>  }</div>
<div class="line"><span class="lineno"> 1348</span> </div>
<div class="line"><span class="lineno"> 1349</span>  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">size</a>; i++) {</div>
<div class="line"><span class="lineno"> 1350</span>    <span class="keywordflow">if</span> (i &gt; 0) {</div>
<div class="line"><span class="lineno"> 1351</span>      <span class="keywordflow">if</span> (putc(<span class="charliteral">&#39;,&#39;</span>, f) == EOF)</div>
<div class="line"><span class="lineno"> 1352</span>  <span class="keywordflow">goto</span> writeerr;</div>
<div class="line"><span class="lineno"> 1353</span>    }</div>
<div class="line"><span class="lineno"> 1354</span>    num = (<span class="keywordtype">unsigned</span> int)(mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>[i]);</div>
<div class="line"><span class="lineno"> 1355</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1356</span><span class="comment">     * For a base of 8 and a value &lt; 8 to convert, don&#39;t write the</span></div>
<div class="line"><span class="lineno"> 1357</span><span class="comment">     * prefix.  The conversion will be indistinguishable from a</span></div>
<div class="line"><span class="lineno"> 1358</span><span class="comment">     * decimal one then.</span></div>
<div class="line"><span class="lineno"> 1359</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1360</span>    <span class="keywordflow">if</span> (prefix[0] != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; !(base == 8 &amp;&amp; num &lt; 8)) {</div>
<div class="line"><span class="lineno"> 1361</span>      <span class="keywordflow">if</span> (fputs(prefix, f) == EOF)</div>
<div class="line"><span class="lineno"> 1362</span>  <span class="keywordflow">goto</span> writeerr;</div>
<div class="line"><span class="lineno"> 1363</span>    }</div>
<div class="line"><span class="lineno"> 1364</span>    <a class="code hl_function" href="../../d8/dec/fileio_8c.html#ac901e72dcce821f43e90a44676b8f70e">itoa_simple</a>(num, cbuf, base);</div>
<div class="line"><span class="lineno"> 1365</span>    <span class="keywordflow">if</span> (fputs(cbuf, f) == EOF)</div>
<div class="line"><span class="lineno"> 1366</span>      <span class="keywordflow">goto</span> writeerr;</div>
<div class="line"><span class="lineno"> 1367</span>  }</div>
<div class="line"><span class="lineno"> 1368</span>  <span class="keywordflow">if</span> (putc(<span class="charliteral">&#39;\n&#39;</span>, f) == EOF)</div>
<div class="line"><span class="lineno"> 1369</span>    <span class="keywordflow">goto</span> writeerr;</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1372</span> </div>
<div class="line"><span class="lineno"> 1373</span> writeerr:</div>
<div class="line"><span class="lineno"> 1374</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: error writing to %s: %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1375</span>    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, filename, strerror(errno));</div>
<div class="line"><span class="lineno"> 1376</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1377</span>}</div>
<div class="ttc" id="afileio_8c_html_ac901e72dcce821f43e90a44676b8f70e"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#ac901e72dcce821f43e90a44676b8f70e">itoa_simple</a></div><div class="ttdeci">static char * itoa_simple(int n, char *buf, int base)</div><div class="ttdef"><b>Definition</b> fileio.c:1103</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00810">FIO_WRITE</a>, <a class="el" href="../../#l00795">FMT_BIN</a>, <a class="el" href="../../#l00793">FMT_DEC</a>, <a class="el" href="../../#l00792">FMT_HEX</a>, <a class="el" href="../../#l00794">FMT_OCT</a>, <a class="el" href="../../#l01103">itoa_simple()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00800">fioparms::op</a>, and <a class="el" href="../../#l00061">progname</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a21771f44991561b4679cecd0870d5798_cgraph.svg" width="267" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a21771f44991561b4679cecd0870d5798_icgraph.svg" width="632" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a80ec1b0e4c4ab64579cbaf87a4497a52" name="a80ec1b0e4c4ab64579cbaf87a4497a52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80ec1b0e4c4ab64579cbaf87a4497a52">&#9670;&#160;</a></span>fileio_rbin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fileio_rbin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *&#160;</td>
          <td class="paramname"><em>fio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1141</span>{</div>
<div class="line"><span class="lineno"> 1142</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno"> 1143</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buf = mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>;</div>
<div class="line"><span class="lineno"> 1144</span> </div>
<div class="line"><span class="lineno"> 1145</span>  <span class="keywordflow">switch</span> (fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>) {</div>
<div class="line"><span class="lineno"> 1146</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>:</div>
<div class="line"><span class="lineno"> 1147</span>      rc = (int)fread(buf, 1, size, f);</div>
<div class="line"><span class="lineno"> 1148</span>      <span class="keywordflow">if</span> (rc &gt; 0)</div>
<div class="line"><span class="lineno"> 1149</span>        memset(mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a5b99d763eddc55ddc4c180be7bcb6e75">tags</a>, <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a2ca938c48a2d9e1e0acfd596f5ed081f">TAG_ALLOCATED</a>, rc);</div>
<div class="line"><span class="lineno"> 1150</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1151</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a>:</div>
<div class="line"><span class="lineno"> 1152</span>      rc = (int)fwrite(buf, 1, size, f);</div>
<div class="line"><span class="lineno"> 1153</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1154</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1155</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: fileio: invalid operation=%d\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1156</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>);</div>
<div class="line"><span class="lineno"> 1157</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1158</span>  }</div>
<div class="line"><span class="lineno"> 1159</span> </div>
<div class="line"><span class="lineno"> 1160</span>  <span class="keywordflow">if</span> (rc &lt; 0 || (fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a> == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a> &amp;&amp; rc &lt; size)) {</div>
<div class="line"><span class="lineno"> 1161</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: %s error %s %s: %s; %s %d of the expected %d bytes\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1162</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a95b643777d80e1685cd81454efc843c2">iodesc</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a452d691d77d17339970d3476b3243b8c">dir</a>, filename, strerror(errno),</div>
<div class="line"><span class="lineno"> 1163</span>                    fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a4ebedd2dbf1bbe6759cff1a1440c7aa5">rw</a>, rc, size);</div>
<div class="line"><span class="lineno"> 1164</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1165</span>  }</div>
<div class="line"><span class="lineno"> 1166</span> </div>
<div class="line"><span class="lineno"> 1167</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1168</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00803">fioparms::dir</a>, <a class="el" href="../../#l00809">FIO_READ</a>, <a class="el" href="../../#l00810">FIO_WRITE</a>, <a class="el" href="../../#l00802">fioparms::iodesc</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00800">fioparms::op</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00804">fioparms::rw</a>, <a class="el" href="../../#l00215">TAG_ALLOCATED</a>, and <a class="el" href="../../#l00305">avrmem::tags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a80ec1b0e4c4ab64579cbaf87a4497a52_cgraph.svg" width="263" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a80ec1b0e4c4ab64579cbaf87a4497a52_icgraph.svg" width="628" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6c4b09b06be3444ea87053f10e2c5a74" name="a6c4b09b06be3444ea87053f10e2c5a74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c4b09b06be3444ea87053f10e2c5a74">&#9670;&#160;</a></span>fileio_setparms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileio_setparms </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d7/d8f/structavrpart">avrpart</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1382</span>{</div>
<div class="line"><span class="lineno"> 1383</span>  fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a> = op;</div>
<div class="line"><span class="lineno"> 1384</span> </div>
<div class="line"><span class="lineno"> 1385</span>  <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><span class="lineno"> 1386</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>:</div>
<div class="line"><span class="lineno"> 1387</span>      fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a259e700a26ec56e89274c3b94a1a72f1">mode</a>   = <span class="stringliteral">&quot;r&quot;</span>;</div>
<div class="line"><span class="lineno"> 1388</span>      fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a95b643777d80e1685cd81454efc843c2">iodesc</a> = <span class="stringliteral">&quot;input&quot;</span>;</div>
<div class="line"><span class="lineno"> 1389</span>      fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a452d691d77d17339970d3476b3243b8c">dir</a>    = <span class="stringliteral">&quot;from&quot;</span>;</div>
<div class="line"><span class="lineno"> 1390</span>      fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a4ebedd2dbf1bbe6759cff1a1440c7aa5">rw</a>     = <span class="stringliteral">&quot;read&quot;</span>;</div>
<div class="line"><span class="lineno"> 1391</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a>:</div>
<div class="line"><span class="lineno"> 1394</span>      fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a259e700a26ec56e89274c3b94a1a72f1">mode</a>   = <span class="stringliteral">&quot;w&quot;</span>;</div>
<div class="line"><span class="lineno"> 1395</span>      fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a95b643777d80e1685cd81454efc843c2">iodesc</a> = <span class="stringliteral">&quot;output&quot;</span>;</div>
<div class="line"><span class="lineno"> 1396</span>      fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a452d691d77d17339970d3476b3243b8c">dir</a>    = <span class="stringliteral">&quot;to&quot;</span>;</div>
<div class="line"><span class="lineno"> 1397</span>      fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a4ebedd2dbf1bbe6759cff1a1440c7aa5">rw</a>     = <span class="stringliteral">&quot;wrote&quot;</span>;</div>
<div class="line"><span class="lineno"> 1398</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1399</span> </div>
<div class="line"><span class="lineno"> 1400</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1401</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: invalid I/O operation %d\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1402</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, op);</div>
<div class="line"><span class="lineno"> 1403</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1404</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1405</span>  }</div>
<div class="line"><span class="lineno"> 1406</span> </div>
<div class="line"><span class="lineno"> 1407</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1408</span><span class="comment">   * AVR32 devices maintain their load offset within the file itself,</span></div>
<div class="line"><span class="lineno"> 1409</span><span class="comment">   * but AVRDUDE maintains all memory images 0-based.</span></div>
<div class="line"><span class="lineno"> 1410</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno"> 1411</span>  <span class="keywordflow">if</span> ((p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#ae9622e4b2cb8e28cee9a0f7dca9baa92">flags</a> &amp; <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a65e7df1ab4c34e1658c2308d5299c29f">AVRPART_AVR32</a>) != 0)</div>
<div class="line"><span class="lineno"> 1412</span>  {</div>
<div class="line"><span class="lineno"> 1413</span>    fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a810fb59c24b8da10afb094e1329e1b3c">fileoffset</a> = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a7c9d56fb994e9e076cb9fa66176c50a2">offset</a>;</div>
<div class="line"><span class="lineno"> 1414</span>  }</div>
<div class="line"><span class="lineno"> 1415</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1416</span>  {</div>
<div class="line"><span class="lineno"> 1417</span>    fp-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a810fb59c24b8da10afb094e1329e1b3c">fileoffset</a> = 0;</div>
<div class="line"><span class="lineno"> 1418</span>  }</div>
<div class="line"><span class="lineno"> 1419</span> </div>
<div class="line"><span class="lineno"> 1420</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1421</span>}</div>
<div class="ttc" id="alibavrdude_8h_html_a259e700a26ec56e89274c3b94a1a72f1"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a259e700a26ec56e89274c3b94a1a72f1">fioparms::mode</a></div><div class="ttdeci">char * mode</div><div class="ttdef"><b>Definition</b> libavrdude.h:801</div></div>
<div class="ttc" id="alibavrdude_8h_html_a65e7df1ab4c34e1658c2308d5299c29f"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a65e7df1ab4c34e1658c2308d5299c29f">AVRPART_AVR32</a></div><div class="ttdeci">#define AVRPART_AVR32</div><div class="ttdef"><b>Definition</b> libavrdude.h:203</div></div>
<div class="ttc" id="alibavrdude_8h_html_a7c9d56fb994e9e076cb9fa66176c50a2"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a7c9d56fb994e9e076cb9fa66176c50a2">avrmem::offset</a></div><div class="ttdeci">unsigned int offset</div><div class="ttdef"><b>Definition</b> libavrdude.h:289</div></div>
<div class="ttc" id="alibavrdude_8h_html_ae9622e4b2cb8e28cee9a0f7dca9baa92"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ae9622e4b2cb8e28cee9a0f7dca9baa92">avrpart::flags</a></div><div class="ttdeci">unsigned flags</div><div class="ttdef"><b>Definition</b> libavrdude.h:230</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00203">AVRPART_AVR32</a>, <a class="el" href="../../#l00803">fioparms::dir</a>, <a class="el" href="../../#l00805">fioparms::fileoffset</a>, <a class="el" href="../../#l00809">FIO_READ</a>, <a class="el" href="../../#l00810">FIO_WRITE</a>, <a class="el" href="../../#l00230">avrpart::flags</a>, <a class="el" href="../../#l00802">fioparms::iodesc</a>, <a class="el" href="../../#l00801">fioparms::mode</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00289">avrmem::offset</a>, <a class="el" href="../../#l00800">fioparms::op</a>, <a class="el" href="../../#l00061">progname</a>, and <a class="el" href="../../#l00804">fioparms::rw</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a6c4b09b06be3444ea87053f10e2c5a74_cgraph.svg" width="296" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a6c4b09b06be3444ea87053f10e2c5a74_icgraph.svg" width="662" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af113fb8c17f1afea96cb4172116e8b1b" name="af113fb8c17f1afea96cb4172116e8b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af113fb8c17f1afea96cb4172116e8b1b">&#9670;&#160;</a></span>fileio_srec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fileio_srec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d68/libavrdude_8h.html#d5/d56/structfioparms">fioparms</a> *&#160;</td>
          <td class="paramname"><em>fio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1249</span>{</div>
<div class="line"><span class="lineno"> 1250</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno"> 1251</span> </div>
<div class="line"><span class="lineno"> 1252</span>  <span class="keywordflow">switch</span> (fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>) {</div>
<div class="line"><span class="lineno"> 1253</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388a462b50a1cb87bd29bbdd02ba4640633c">FIO_WRITE</a>:</div>
<div class="line"><span class="lineno"> 1254</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a11b67600ab9953c93406df18716fa64e">b2srec</a>(mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>, size, 32, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a810fb59c24b8da10afb094e1329e1b3c">fileoffset</a>, filename, f);</div>
<div class="line"><span class="lineno"> 1255</span>      <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno"> 1256</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1257</span>      }</div>
<div class="line"><span class="lineno"> 1258</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1259</span> </div>
<div class="line"><span class="lineno"> 1260</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a385c44f6fb256e5716a2302a5b940388ac15cbb3a5cad099d083c457ddf43c666">FIO_READ</a>:</div>
<div class="line"><span class="lineno"> 1261</span>      rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a34b9629bed1b701a32a5bd062aa44548">srec2b</a>(filename, f, mem, size, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a810fb59c24b8da10afb094e1329e1b3c">fileoffset</a>);</div>
<div class="line"><span class="lineno"> 1262</span>      <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><span class="lineno"> 1263</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1264</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1265</span> </div>
<div class="line"><span class="lineno"> 1266</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1267</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: invalid Motorola S-Records file I/O &quot;</span></div>
<div class="line"><span class="lineno"> 1268</span>              <span class="stringliteral">&quot;operation=%d\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1269</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fio-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a1d36912c8be50f0133cedc21171ef2a0">op</a>);</div>
<div class="line"><span class="lineno"> 1270</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1271</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1272</span>  }</div>
<div class="line"><span class="lineno"> 1273</span> </div>
<div class="line"><span class="lineno"> 1274</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1275</span>}</div>
<div class="ttc" id="afileio_8c_html_a11b67600ab9953c93406df18716fa64e"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a11b67600ab9953c93406df18716fa64e">b2srec</a></div><div class="ttdeci">static int b2srec(unsigned char *inbuf, int bufsize, int recsize, int startaddr, char *outfile, FILE *outf)</div><div class="ttdef"><b>Definition</b> fileio.c:450</div></div>
<div class="ttc" id="afileio_8c_html_a34b9629bed1b701a32a5bd062aa44548"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a34b9629bed1b701a32a5bd062aa44548">srec2b</a></div><div class="ttdeci">static int srec2b(char *infile, FILE *inf, AVRMEM *mem, int bufsize, unsigned int fileoffset)</div><div class="ttdef"><b>Definition</b> fileio.c:633</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00450">b2srec()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00805">fioparms::fileoffset</a>, <a class="el" href="../../#l00809">FIO_READ</a>, <a class="el" href="../../#l00810">FIO_WRITE</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00800">fioparms::op</a>, <a class="el" href="../../#l00061">progname</a>, and <a class="el" href="../../#l00633">srec2b()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_af113fb8c17f1afea96cb4172116e8b1b_cgraph.svg" width="375" height="102"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_af113fb8c17f1afea96cb4172116e8b1b_icgraph.svg" width="632" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad1fb4f2bc3ebed99ca905ec1a9baf7e3" name="ad1fb4f2bc3ebed99ca905ec1a9baf7e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1fb4f2bc3ebed99ca905ec1a9baf7e3">&#9670;&#160;</a></span>fmt_autodetect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fmt_autodetect </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>section</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1426</span>{</div>
<div class="line"><span class="lineno"> 1427</span>  FILE * f;</div>
<div class="line"><span class="lineno"> 1428</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[<a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a>];</div>
<div class="line"><span class="lineno"> 1429</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 1430</span>  <span class="keywordtype">int</span> len;</div>
<div class="line"><span class="lineno"> 1431</span>  <span class="keywordtype">int</span> found;</div>
<div class="line"><span class="lineno"> 1432</span>  <span class="keywordtype">int</span> first = 1;</div>
<div class="line"><span class="lineno"> 1433</span> </div>
<div class="line"><span class="lineno"> 1434</span><span class="preprocessor">#if defined(WIN32NATIVE)</span></div>
<div class="line"><span class="lineno"> 1435</span>  f = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a22977a4f4e10b78f2d5b7590861bbfae">fopen_and_seek</a>(fname, <span class="stringliteral">&quot;r&quot;</span>, section);</div>
<div class="line"><span class="lineno"> 1436</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1437</span>  f = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a22977a4f4e10b78f2d5b7590861bbfae">fopen_and_seek</a>(fname, <span class="stringliteral">&quot;rb&quot;</span>, section);</div>
<div class="line"><span class="lineno"> 1438</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1439</span> </div>
<div class="line"><span class="lineno"> 1440</span>  <span class="keywordflow">if</span> (f == NULL) {</div>
<div class="line"><span class="lineno"> 1441</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: error opening %s: %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1442</span>            <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fname, strerror(errno));</div>
<div class="line"><span class="lineno"> 1443</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1444</span>  }</div>
<div class="line"><span class="lineno"> 1445</span> </div>
<div class="line"><span class="lineno"> 1446</span>  <span class="keywordflow">while</span> (fgets((<span class="keywordtype">char</span> *)buf, <a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a>, f)!=NULL) {</div>
<div class="line"><span class="lineno"> 1447</span>    <span class="comment">/* check for ELF file */</span></div>
<div class="line"><span class="lineno"> 1448</span>    <span class="keywordflow">if</span> (first &amp;&amp;</div>
<div class="line"><span class="lineno"> 1449</span>        (buf[0] == 0177 &amp;&amp; buf[1] == <span class="charliteral">&#39;E&#39;</span> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1450</span>         buf[2] == <span class="charliteral">&#39;L&#39;</span> &amp;&amp; buf[3] == <span class="charliteral">&#39;F&#39;</span>)) {</div>
<div class="line"><span class="lineno"> 1451</span>      fclose(f);</div>
<div class="line"><span class="lineno"> 1452</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac210b6268248e4e592d8659cee6b6ca2">FMT_ELF</a>;</div>
<div class="line"><span class="lineno"> 1453</span>    }</div>
<div class="line"><span class="lineno"> 1454</span> </div>
<div class="line"><span class="lineno"> 1455</span>    buf[<a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a>-1] = 0;</div>
<div class="line"><span class="lineno"> 1456</span>    len = (int)strlen((<span class="keywordtype">char</span> *)buf);</div>
<div class="line"><span class="lineno"> 1457</span>    <span class="keywordflow">if</span> (buf[len-1] == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno"> 1458</span>      buf[--len] = 0;</div>
<div class="line"><span class="lineno"> 1459</span> </div>
<div class="line"><span class="lineno"> 1460</span>    <span class="comment">/* check for binary data */</span></div>
<div class="line"><span class="lineno"> 1461</span>    found = 0;</div>
<div class="line"><span class="lineno"> 1462</span>    <span class="keywordflow">for</span> (i=0; i&lt;len; i++) {</div>
<div class="line"><span class="lineno"> 1463</span>      <span class="keywordflow">if</span> (buf[i] &gt; 127) {</div>
<div class="line"><span class="lineno"> 1464</span>        found = 1;</div>
<div class="line"><span class="lineno"> 1465</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1466</span>      }</div>
<div class="line"><span class="lineno"> 1467</span>    }</div>
<div class="line"><span class="lineno"> 1468</span>    <span class="keywordflow">if</span> (found) {</div>
<div class="line"><span class="lineno"> 1469</span>      fclose(f);</div>
<div class="line"><span class="lineno"> 1470</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa27d1752a5ccca21871da90457b1c3e78">FMT_RBIN</a>;</div>
<div class="line"><span class="lineno"> 1471</span>    }</div>
<div class="line"><span class="lineno"> 1472</span> </div>
<div class="line"><span class="lineno"> 1473</span>    <span class="comment">/* check for lines that look like intel hex */</span></div>
<div class="line"><span class="lineno"> 1474</span>    <span class="keywordflow">if</span> ((buf[0] == <span class="charliteral">&#39;:&#39;</span>) &amp;&amp; (len &gt;= 11)) {</div>
<div class="line"><span class="lineno"> 1475</span>      found = 1;</div>
<div class="line"><span class="lineno"> 1476</span>      <span class="keywordflow">for</span> (i=1; i&lt;len; i++) {</div>
<div class="line"><span class="lineno"> 1477</span>        <span class="keywordflow">if</span> (!isxdigit(buf[1])) {</div>
<div class="line"><span class="lineno"> 1478</span>          found = 0;</div>
<div class="line"><span class="lineno"> 1479</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1480</span>        }</div>
<div class="line"><span class="lineno"> 1481</span>      }</div>
<div class="line"><span class="lineno"> 1482</span>      <span class="keywordflow">if</span> (found) {</div>
<div class="line"><span class="lineno"> 1483</span>        fclose(f);</div>
<div class="line"><span class="lineno"> 1484</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aaaec8c544b8c90424dc9f753d997211af">FMT_IHEX</a>;</div>
<div class="line"><span class="lineno"> 1485</span>      }</div>
<div class="line"><span class="lineno"> 1486</span>    }</div>
<div class="line"><span class="lineno"> 1487</span> </div>
<div class="line"><span class="lineno"> 1488</span>    <span class="comment">/* check for lines that look like motorola s-record */</span></div>
<div class="line"><span class="lineno"> 1489</span>    <span class="keywordflow">if</span> ((buf[0] == <span class="charliteral">&#39;S&#39;</span>) &amp;&amp; (len &gt;= 10) &amp;&amp; isdigit(buf[1])) {</div>
<div class="line"><span class="lineno"> 1490</span>      found = 1;</div>
<div class="line"><span class="lineno"> 1491</span>      <span class="keywordflow">for</span> (i=1; i&lt;len; i++) {</div>
<div class="line"><span class="lineno"> 1492</span>        <span class="keywordflow">if</span> (!isxdigit(buf[1])) {</div>
<div class="line"><span class="lineno"> 1493</span>          found = 0;</div>
<div class="line"><span class="lineno"> 1494</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1495</span>        }</div>
<div class="line"><span class="lineno"> 1496</span>      }</div>
<div class="line"><span class="lineno"> 1497</span>      <span class="keywordflow">if</span> (found) {</div>
<div class="line"><span class="lineno"> 1498</span>        fclose(f);</div>
<div class="line"><span class="lineno"> 1499</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aafcdce4cb351f158c8c9828a94b2c3b68">FMT_SREC</a>;</div>
<div class="line"><span class="lineno"> 1500</span>      }</div>
<div class="line"><span class="lineno"> 1501</span>    }</div>
<div class="line"><span class="lineno"> 1502</span> </div>
<div class="line"><span class="lineno"> 1503</span>    first = 0;</div>
<div class="line"><span class="lineno"> 1504</span>  }</div>
<div class="line"><span class="lineno"> 1505</span> </div>
<div class="line"><span class="lineno"> 1506</span>  fclose(f);</div>
<div class="line"><span class="lineno"> 1507</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1508</span>}</div>
<div class="ttc" id="afileio_8c_html_a09a3b394b8602092d58347b791158062"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a></div><div class="ttdeci">#define MAX_LINE_LEN</div><div class="ttdef"><b>Definition</b> fileio.c:49</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00796">FMT_ELF</a>, <a class="el" href="../../#l00789">FMT_IHEX</a>, <a class="el" href="../../#l00790">FMT_RBIN</a>, <a class="el" href="../../#l00788">FMT_SREC</a>, <a class="el" href="../../#l00124">fopen_and_seek()</a>, <a class="el" href="../../#l00049">MAX_LINE_LEN</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, and <a class="el" href="../../#l00061">progname</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_ad1fb4f2bc3ebed99ca905ec1a9baf7e3_cgraph.svg" width="426" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_ad1fb4f2bc3ebed99ca905ec1a9baf7e3_icgraph.svg" width="660" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3465b29d63a2971224eb7d6a63e00632" name="a3465b29d63a2971224eb7d6a63e00632"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3465b29d63a2971224eb7d6a63e00632">&#9670;&#160;</a></span>fmtstr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * fmtstr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6a">FILEFMT</a>&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  167</span>{</div>
<div class="line"><span class="lineno">  168</span>  <span class="keywordflow">switch</span> (format) {</div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa26f2822cba431b559ab85de29bd30706">FMT_AUTO</a> : <span class="keywordflow">return</span> <span class="stringliteral">&quot;auto-detect&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aafcdce4cb351f158c8c9828a94b2c3b68">FMT_SREC</a> : <span class="keywordflow">return</span> <span class="stringliteral">&quot;Motorola S-Record&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aaaec8c544b8c90424dc9f753d997211af">FMT_IHEX</a> : <span class="keywordflow">return</span> <span class="stringliteral">&quot;Intel Hex&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aa27d1752a5ccca21871da90457b1c3e78">FMT_RBIN</a> : <span class="keywordflow">return</span> <span class="stringliteral">&quot;raw binary&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#ad7ff7ab00ee7fa5051eab7bb0f6f3b6aac210b6268248e4e592d8659cee6b6ca2">FMT_ELF</a>  : <span class="keywordflow">return</span> <span class="stringliteral">&quot;ELF&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  174</span>    default       : <span class="keywordflow">return</span> <span class="stringliteral">&quot;invalid format&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  175</span>  };</div>
<div class="line"><span class="lineno">  176</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00787">FMT_AUTO</a>, <a class="el" href="../../#l00796">FMT_ELF</a>, <a class="el" href="../../#l00789">FMT_IHEX</a>, <a class="el" href="../../#l00790">FMT_RBIN</a>, and <a class="el" href="../../#l00788">FMT_SREC</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>, <a class="el" href="../../#l00163">Slic3r::Utils::anonymous_namespace{Time.cpp}::process_format()</a>, <a class="el" href="../../#l00224">Slic3r::Utils::str2time()</a>, and <a class="el" href="../../#l00189">Slic3r::Utils::time2str()</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a3465b29d63a2971224eb7d6a63e00632_icgraph.svg" width="100%" height="535"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a22977a4f4e10b78f2d5b7590861bbfae" name="a22977a4f4e10b78f2d5b7590861bbfae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22977a4f4e10b78f2d5b7590861bbfae">&#9670;&#160;</a></span>fopen_and_seek()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static FILE * fopen_and_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>section</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  125</span>{</div>
<div class="line"><span class="lineno">  126</span>  FILE *file = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a79f7c202e2da66fa4ef84f09ebee9d6f">fopen_utf8</a>(filename, mode);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>  <span class="keywordflow">if</span> (file == NULL) {</div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  130</span>  }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>  <span class="comment">// Seek to the specified &#39;section&#39;</span></div>
<div class="line"><span class="lineno">  133</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *hex_terminator = <span class="stringliteral">&quot;:00000001FF\r&quot;</span>;</div>
<div class="line"><span class="lineno">  134</span>  <span class="keywordtype">unsigned</span> terms_seen = 0;</div>
<div class="line"><span class="lineno">  135</span>  <span class="keywordtype">char</span> buffer[<a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a> + 1];</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>  <span class="keywordflow">while</span> (terms_seen &lt; section &amp;&amp; fgets(buffer, <a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a>, file) != NULL) {</div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordtype">size_t</span> len = strlen(buffer);</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">if</span> (buffer[len - 1] == <span class="charliteral">&#39;\n&#39;</span>) {</div>
<div class="line"><span class="lineno">  141</span>      len--;</div>
<div class="line"><span class="lineno">  142</span>      buffer[len] = 0;</div>
<div class="line"><span class="lineno">  143</span>    }</div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">if</span> (buffer[len - 1] != <span class="charliteral">&#39;\r&#39;</span>) {</div>
<div class="line"><span class="lineno">  145</span>      buffer[len] = <span class="charliteral">&#39;\r&#39;</span>;</div>
<div class="line"><span class="lineno">  146</span>      len++;</div>
<div class="line"><span class="lineno">  147</span>      buffer[len] = 0;</div>
<div class="line"><span class="lineno">  148</span>    }</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">if</span> (strcmp(buffer, hex_terminator) == 0) {</div>
<div class="line"><span class="lineno">  151</span>      <span class="comment">// Found a section terminator</span></div>
<div class="line"><span class="lineno">  152</span>      terms_seen++;</div>
<div class="line"><span class="lineno">  153</span>    }</div>
<div class="line"><span class="lineno">  154</span>  }</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>  <span class="keywordflow">if</span> (feof(file)) {</div>
<div class="line"><span class="lineno">  157</span>    <span class="comment">// Section not found</span></div>
<div class="line"><span class="lineno">  158</span>    fclose(file);</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  160</span>  }</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>  <span class="keywordflow">return</span> file;</div>
<div class="line"><span class="lineno">  163</span>}</div>
<div class="ttc" id="afileio_8c_html_a79f7c202e2da66fa4ef84f09ebee9d6f"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a79f7c202e2da66fa4ef84f09ebee9d6f">fopen_utf8</a></div><div class="ttdeci">FILE * fopen_utf8(const char *filename, const char *mode)</div><div class="ttdef"><b>Definition</b> fileio.c:108</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00108">fopen_utf8()</a>, and <a class="el" href="../../#l00049">MAX_LINE_LEN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01512">fileio()</a>, and <a class="el" href="../../#l01425">fmt_autodetect()</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a22977a4f4e10b78f2d5b7590861bbfae_cgraph.svg" width="258" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a22977a4f4e10b78f2d5b7590861bbfae_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a79f7c202e2da66fa4ef84f09ebee9d6f" name="a79f7c202e2da66fa4ef84f09ebee9d6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79f7c202e2da66fa4ef84f09ebee9d6f">&#9670;&#160;</a></span>fopen_utf8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE * fopen_utf8 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  109</span>{</div>
<div class="line"><span class="lineno">  110</span>  <span class="comment">// On Windows we need to convert the filename to UTF-16</span></div>
<div class="line"><span class="lineno">  111</span><span class="preprocessor">#if defined(WIN32NATIVE)</span></div>
<div class="line"><span class="lineno">  112</span>  <span class="keyword">static</span> <span class="keywordtype">wchar_t</span> fname_buffer[<a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div>
<div class="line"><span class="lineno">  113</span>  <span class="keyword">static</span> <span class="keywordtype">wchar_t</span> mode_buffer[<a class="code hl_define" href="../../d8/dec/fileio_8c.html#a5fdaa3fa63f2ac3dee55cecc106cadf2">MAX_MODE_LEN</a>];</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>  <span class="keywordflow">if</span> (MultiByteToWideChar(CP_UTF8, 0, filename, -1, fname_buffer, <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>) == 0) { <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  116</span>  <span class="keywordflow">if</span> (MultiByteToWideChar(CP_UTF8, 0, mode, -1, mode_buffer, <a class="code hl_define" href="../../d8/dec/fileio_8c.html#a5fdaa3fa63f2ac3dee55cecc106cadf2">MAX_MODE_LEN</a>) == 0) { <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>  <span class="keywordflow">return</span> _wfopen(fname_buffer, mode_buffer);</div>
<div class="line"><span class="lineno">  119</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  120</span>  <span class="keywordflow">return</span> fopen(filename, mode);</div>
<div class="line"><span class="lineno">  121</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  122</span>}</div>
<div class="ttc" id="afileio_8c_html_a5fdaa3fa63f2ac3dee55cecc106cadf2"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a5fdaa3fa63f2ac3dee55cecc106cadf2">MAX_MODE_LEN</a></div><div class="ttdeci">#define MAX_MODE_LEN</div><div class="ttdef"><b>Definition</b> fileio.c:51</div></div>
<div class="ttc" id="alibavrdude_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition</b> libavrdude.h:51</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00051">MAX_MODE_LEN</a>, and <a class="el" href="../../#l00051">PATH_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00124">fopen_and_seek()</a>, and <a class="el" href="../../#l00325">read_config()</a>.</p>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a79f7c202e2da66fa4ef84f09ebee9d6f_icgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a079a49e546cd59ff6838f4b9b9198edc" name="a079a49e546cd59ff6838f4b9b9198edc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a079a49e546cd59ff6838f4b9b9198edc">&#9670;&#160;</a></span>ihex2b()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ihex2b </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>infile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>inf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>fileoffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  348</span>{</div>
<div class="line"><span class="lineno">  349</span>  <span class="keywordtype">char</span> buffer [ <a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a> ];</div>
<div class="line"><span class="lineno">  350</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextaddr, baseaddr, maxaddr;</div>
<div class="line"><span class="lineno">  351</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  352</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>;</div>
<div class="line"><span class="lineno">  353</span>  <span class="keywordtype">int</span> len;</div>
<div class="line"><span class="lineno">  354</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/dec/fileio_8c.html#da/dc7/structihexrec">ihexrec</a> ihex;</div>
<div class="line"><span class="lineno">  355</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>  <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>   = 0;</div>
<div class="line"><span class="lineno">  358</span>  baseaddr = 0;</div>
<div class="line"><span class="lineno">  359</span>  maxaddr  = 0;</div>
<div class="line"><span class="lineno">  360</span>  nextaddr = 0;</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>  <span class="keywordflow">while</span> (fgets((<span class="keywordtype">char</span> *)buffer,<a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a>,inf)!=NULL) {</div>
<div class="line"><span class="lineno">  363</span>    <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>++;</div>
<div class="line"><span class="lineno">  364</span>    len = (int)strlen(buffer);</div>
<div class="line"><span class="lineno">  365</span>    <span class="keywordflow">if</span> (buffer[len-1] == <span class="charliteral">&#39;\n&#39;</span>) </div>
<div class="line"><span class="lineno">  366</span>      buffer[--len] = 0;</div>
<div class="line"><span class="lineno">  367</span>    <span class="keywordflow">if</span> (buffer[0] != <span class="charliteral">&#39;:&#39;</span>)</div>
<div class="line"><span class="lineno">  368</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  369</span>    rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#a661a66898a3367613ae262361bd30fed">ihex_readrec</a>(&amp;ihex, buffer);</div>
<div class="line"><span class="lineno">  370</span>    <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  371</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: invalid record at line %d of \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  372</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  373</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  374</span>    }</div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc != ihex.cksum) {</div>
<div class="line"><span class="lineno">  376</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: checksum mismatch at line %d of \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  377</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  378</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: checksum=0x%02x, computed checksum=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  379</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, ihex.cksum, rc);</div>
<div class="line"><span class="lineno">  380</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  381</span>    }</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>    <span class="keywordflow">switch</span> (ihex.rectyp) {</div>
<div class="line"><span class="lineno">  384</span>      <span class="keywordflow">case</span> 0: <span class="comment">/* data record */</span></div>
<div class="line"><span class="lineno">  385</span>        <span class="keywordflow">if</span> (fileoffset != 0 &amp;&amp; baseaddr &lt; fileoffset) {</div>
<div class="line"><span class="lineno">  386</span>          <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: address 0x%04x out of range (below fileoffset 0x%x) at line %d of %s\n&quot;</span>,</div>
<div class="line"><span class="lineno">  387</span>                          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, baseaddr, fileoffset, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  388</span>          <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  389</span>        }</div>
<div class="line"><span class="lineno">  390</span>        nextaddr = ihex.loadofs + baseaddr - fileoffset;</div>
<div class="line"><span class="lineno">  391</span>        <span class="keywordflow">if</span> (nextaddr + ihex.reclen &gt; (<span class="keywordtype">unsigned</span>)bufsize) {</div>
<div class="line"><span class="lineno">  392</span>          <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: address 0x%04x out of range at line %d of %s\n&quot;</span>,</div>
<div class="line"><span class="lineno">  393</span>                          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, nextaddr+ihex.reclen, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  394</span>          <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  395</span>        }</div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">for</span> (i=0; i&lt;ihex.reclen; i++) {</div>
<div class="line"><span class="lineno">  397</span>          mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>[nextaddr+i] = ihex.data[i];</div>
<div class="line"><span class="lineno">  398</span>          mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a5b99d763eddc55ddc4c180be7bcb6e75">tags</a>[nextaddr+i] = <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a2ca938c48a2d9e1e0acfd596f5ed081f">TAG_ALLOCATED</a>;</div>
<div class="line"><span class="lineno">  399</span>        }</div>
<div class="line"><span class="lineno">  400</span>        <span class="keywordflow">if</span> (nextaddr+ihex.reclen &gt; maxaddr)</div>
<div class="line"><span class="lineno">  401</span>          maxaddr = nextaddr+ihex.reclen;</div>
<div class="line"><span class="lineno">  402</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>      <span class="keywordflow">case</span> 1: <span class="comment">/* end of file record */</span></div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordflow">return</span> maxaddr;</div>
<div class="line"><span class="lineno">  406</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>      <span class="keywordflow">case</span> 2: <span class="comment">/* extended segment address record */</span></div>
<div class="line"><span class="lineno">  409</span>        baseaddr = (ihex.data[0] &lt;&lt; 8 | ihex.data[1]) &lt;&lt; 4;</div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>      <span class="keywordflow">case</span> 3: <span class="comment">/* start segment address record */</span></div>
<div class="line"><span class="lineno">  413</span>        <span class="comment">/* we don&#39;t do anything with the start address */</span></div>
<div class="line"><span class="lineno">  414</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>      <span class="keywordflow">case</span> 4: <span class="comment">/* extended linear address record */</span></div>
<div class="line"><span class="lineno">  417</span>        baseaddr = (ihex.data[0] &lt;&lt; 8 | ihex.data[1]) &lt;&lt; 16;</div>
<div class="line"><span class="lineno">  418</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>      <span class="keywordflow">case</span> 5: <span class="comment">/* start linear address record */</span></div>
<div class="line"><span class="lineno">  421</span>        <span class="comment">/* we don&#39;t do anything with the start address */</span></div>
<div class="line"><span class="lineno">  422</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  425</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: don&#39;t know how to deal with rectype=%d &quot;</span></div>
<div class="line"><span class="lineno">  426</span>                        <span class="stringliteral">&quot;at line %d of %s\n&quot;</span>,</div>
<div class="line"><span class="lineno">  427</span>                        <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, ihex.rectyp, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  428</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  429</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  430</span>    }</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>  } <span class="comment">/* while */</span></div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>  <span class="keywordflow">if</span> (maxaddr == 0) {</div>
<div class="line"><span class="lineno">  435</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: No valid record found in Intel Hex &quot;</span></div>
<div class="line"><span class="lineno">  436</span>                    <span class="stringliteral">&quot;file \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  437</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  440</span>  }</div>
<div class="line"><span class="lineno">  441</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  442</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: WARNING: no end of file record found for Intel Hex &quot;</span></div>
<div class="line"><span class="lineno">  443</span>                    <span class="stringliteral">&quot;file \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  444</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>    <span class="keywordflow">return</span> maxaddr;</div>
<div class="line"><span class="lineno">  447</span>  }</div>
<div class="line"><span class="lineno">  448</span>}</div>
<div class="ttc" id="aconfig_8c_html_a44ce3ff5f72a9923a369520ad2513bf8"><div class="ttname"><a href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a></div><div class="ttdeci">const char * infile</div><div class="ttdef"><b>Definition</b> config.c:55</div></div>
<div class="ttc" id="aconfig_8c_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdef"><b>Definition</b> config.c:54</div></div>
<div class="ttc" id="afileio_8c_html_a661a66898a3367613ae262361bd30fed"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a661a66898a3367613ae262361bd30fed">ihex_readrec</a></div><div class="ttdeci">static int ihex_readrec(struct ihexrec *ihex, char *rec)</div><div class="ttdef"><b>Definition</b> fileio.c:258</div></div>
<div class="ttc" id="afileio_8c_html_da/dc7/structihexrec"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#da/dc7/structihexrec">ihexrec</a></div><div class="ttdef"><b>Definition</b> fileio.c:54</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00059">ihexrec::cksum</a>, <a class="el" href="../../#l00058">ihexrec::data</a>, <a class="el" href="../../#l00258">ihex_readrec()</a>, <a class="el" href="../../#l00055">infile</a>, <a class="el" href="../../#l00054">lineno</a>, <a class="el" href="../../#l00056">ihexrec::loadofs</a>, <a class="el" href="../../#l00049">MAX_LINE_LEN</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00055">ihexrec::reclen</a>, <a class="el" href="../../#l00057">ihexrec::rectyp</a>, <a class="el" href="../../#l00215">TAG_ALLOCATED</a>, and <a class="el" href="../../#l00305">avrmem::tags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01217">fileio_ihex()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a079a49e546cd59ff6838f4b9b9198edc_cgraph.svg" width="246" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a079a49e546cd59ff6838f4b9b9198edc_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a661a66898a3367613ae262361bd30fed" name="a661a66898a3367613ae262361bd30fed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a661a66898a3367613ae262361bd30fed">&#9670;&#160;</a></span>ihex_readrec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ihex_readrec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dec/fileio_8c.html#da/dc7/structihexrec">ihexrec</a> *&#160;</td>
          <td class="paramname"><em>ihex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>rec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  259</span>{</div>
<div class="line"><span class="lineno">  260</span>  <span class="keywordtype">int</span> i, j;</div>
<div class="line"><span class="lineno">  261</span>  <span class="keywordtype">char</span> buf[8];</div>
<div class="line"><span class="lineno">  262</span>  <span class="keywordtype">int</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>, len;</div>
<div class="line"><span class="lineno">  263</span>  <span class="keywordtype">char</span> * e;</div>
<div class="line"><span class="lineno">  264</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cksum;</div>
<div class="line"><span class="lineno">  265</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>  len    = (int)strlen(rec);</div>
<div class="line"><span class="lineno">  268</span>  <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a> = 1;</div>
<div class="line"><span class="lineno">  269</span>  cksum  = 0;</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>  <span class="comment">/* reclen */</span></div>
<div class="line"><span class="lineno">  272</span>  <span class="keywordflow">if</span> (offset + 2 &gt; len)</div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  274</span>  <span class="keywordflow">for</span> (i=0; i&lt;2; i++)</div>
<div class="line"><span class="lineno">  275</span>    buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  276</span>  buf[i] = 0;</div>
<div class="line"><span class="lineno">  277</span>  ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a4a00cec813ba8a40bbcaa18b8ff258e2">reclen</a> = (<span class="keywordtype">unsigned</span> char)strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordflow">if</span> (e == buf || *e != 0)</div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>  <span class="comment">/* load offset */</span></div>
<div class="line"><span class="lineno">  282</span>  <span class="keywordflow">if</span> (offset + 4 &gt; len)</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  284</span>  <span class="keywordflow">for</span> (i=0; i&lt;4; i++)</div>
<div class="line"><span class="lineno">  285</span>    buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  286</span>  buf[i] = 0;</div>
<div class="line"><span class="lineno">  287</span>  ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a9c19e232017d9c436d54267b2f1258f6">loadofs</a> = strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  288</span>  <span class="keywordflow">if</span> (e == buf || *e != 0)</div>
<div class="line"><span class="lineno">  289</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>  <span class="comment">/* record type */</span></div>
<div class="line"><span class="lineno">  292</span>  <span class="keywordflow">if</span> (offset + 2 &gt; len)</div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  294</span>  <span class="keywordflow">for</span> (i=0; i&lt;2; i++)</div>
<div class="line"><span class="lineno">  295</span>    buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  296</span>  buf[i] = 0;</div>
<div class="line"><span class="lineno">  297</span>  ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#aae5f14a03e58a1637c30a265fa7199d7">rectyp</a> = (<span class="keywordtype">unsigned</span> char)strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  298</span>  <span class="keywordflow">if</span> (e == buf || *e != 0)</div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>  cksum = ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a4a00cec813ba8a40bbcaa18b8ff258e2">reclen</a> + ((ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a9c19e232017d9c436d54267b2f1258f6">loadofs</a> &gt;&gt; 8) &amp; 0x0ff) + </div>
<div class="line"><span class="lineno">  302</span>    (ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a9c19e232017d9c436d54267b2f1258f6">loadofs</a> &amp; 0x0ff) + ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#aae5f14a03e58a1637c30a265fa7199d7">rectyp</a>;</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>  <span class="comment">/* data */</span></div>
<div class="line"><span class="lineno">  305</span>  <span class="keywordflow">for</span> (j=0; j&lt;ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a4a00cec813ba8a40bbcaa18b8ff258e2">reclen</a>; j++) {</div>
<div class="line"><span class="lineno">  306</span>    <span class="keywordflow">if</span> (offset + 2 &gt; len)</div>
<div class="line"><span class="lineno">  307</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  308</span>    <span class="keywordflow">for</span> (i=0; i&lt;2; i++)</div>
<div class="line"><span class="lineno">  309</span>      buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  310</span>    buf[i] = 0;</div>
<div class="line"><span class="lineno">  311</span>    ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a91cf4d872d2dc7bc4abbfaab72e79f2f">data</a>[j] = (char)strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">if</span> (e == buf || *e != 0)</div>
<div class="line"><span class="lineno">  313</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  314</span>    cksum += ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a91cf4d872d2dc7bc4abbfaab72e79f2f">data</a>[j];</div>
<div class="line"><span class="lineno">  315</span>  }</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>  <span class="comment">/* cksum */</span></div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordflow">if</span> (offset + 2 &gt; len)</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  320</span>  <span class="keywordflow">for</span> (i=0; i&lt;2; i++)</div>
<div class="line"><span class="lineno">  321</span>    buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  322</span>  buf[i] = 0;</div>
<div class="line"><span class="lineno">  323</span>  ihex-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a8bbad404fcbc3fbac634e63fb5a3a648">cksum</a> = (char)strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  324</span>  <span class="keywordflow">if</span> (e == buf || *e != 0)</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>  rc = -cksum &amp; 0x000000ff;</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  330</span>}</div>
<div class="ttc" id="afileio_8c_html_a4a00cec813ba8a40bbcaa18b8ff258e2"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a4a00cec813ba8a40bbcaa18b8ff258e2">ihexrec::reclen</a></div><div class="ttdeci">unsigned char reclen</div><div class="ttdef"><b>Definition</b> fileio.c:55</div></div>
<div class="ttc" id="afileio_8c_html_a8bbad404fcbc3fbac634e63fb5a3a648"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a8bbad404fcbc3fbac634e63fb5a3a648">ihexrec::cksum</a></div><div class="ttdeci">unsigned char cksum</div><div class="ttdef"><b>Definition</b> fileio.c:59</div></div>
<div class="ttc" id="afileio_8c_html_a91cf4d872d2dc7bc4abbfaab72e79f2f"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a91cf4d872d2dc7bc4abbfaab72e79f2f">ihexrec::data</a></div><div class="ttdeci">unsigned char data[IHEX_MAXDATA]</div><div class="ttdef"><b>Definition</b> fileio.c:58</div></div>
<div class="ttc" id="afileio_8c_html_a9c19e232017d9c436d54267b2f1258f6"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#a9c19e232017d9c436d54267b2f1258f6">ihexrec::loadofs</a></div><div class="ttdeci">unsigned int loadofs</div><div class="ttdef"><b>Definition</b> fileio.c:56</div></div>
<div class="ttc" id="afileio_8c_html_aae5f14a03e58a1637c30a265fa7199d7"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#aae5f14a03e58a1637c30a265fa7199d7">ihexrec::rectyp</a></div><div class="ttdeci">unsigned char rectyp</div><div class="ttdef"><b>Definition</b> fileio.c:57</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_ab29201ea713e88d9d709ae4fa8f2576f"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">libnest2d::shapelike::offset</a></div><div class="ttdeci">void offset(Slic3r::ExPolygon &amp;sh, coord_t distance, const PolygonTag &amp;)</div><div class="ttdef"><b>Definition</b> geometries.hpp:132</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00059">ihexrec::cksum</a>, <a class="el" href="../../#l00058">ihexrec::data</a>, <a class="el" href="../../#l00056">ihexrec::loadofs</a>, <a class="el" href="../../#l00055">ihexrec::reclen</a>, and <a class="el" href="../../#l00057">ihexrec::rectyp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00346">ihex2b()</a>.</p>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a661a66898a3367613ae262361bd30fed_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ac901e72dcce821f43e90a44676b8f70e" name="ac901e72dcce821f43e90a44676b8f70e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac901e72dcce821f43e90a44676b8f70e">&#9670;&#160;</a></span>itoa_simple()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * itoa_simple </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>base</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1104</span>{</div>
<div class="line"><span class="lineno"> 1105</span>  div_t q;</div>
<div class="line"><span class="lineno"> 1106</span>  <span class="keywordtype">char</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>, *cp, *cp2;</div>
<div class="line"><span class="lineno"> 1107</span> </div>
<div class="line"><span class="lineno"> 1108</span>  cp = buf;</div>
<div class="line"><span class="lineno"> 1109</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1110</span><span class="comment">   * Divide by base until the number disappeared, but ensure at least</span></div>
<div class="line"><span class="lineno"> 1111</span><span class="comment">   * one digit will be emitted.</span></div>
<div class="line"><span class="lineno"> 1112</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno"> 1113</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 1114</span>    q = div(n, base);</div>
<div class="line"><span class="lineno"> 1115</span>    n = q.quot;</div>
<div class="line"><span class="lineno"> 1116</span>    <span class="keywordflow">if</span> (q.rem &gt;= 10)</div>
<div class="line"><span class="lineno"> 1117</span>      <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> = q.rem - 10 + <span class="charliteral">&#39;a&#39;</span>;</div>
<div class="line"><span class="lineno"> 1118</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1119</span>      <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> = q.rem + <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1120</span>    *cp++ = <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>;</div>
<div class="line"><span class="lineno"> 1121</span>  } <span class="keywordflow">while</span> (q.quot != 0);</div>
<div class="line"><span class="lineno"> 1122</span> </div>
<div class="line"><span class="lineno"> 1123</span>  <span class="comment">/* Terminate the string. */</span></div>
<div class="line"><span class="lineno"> 1124</span>  *cp-- = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span>  <span class="comment">/* Now revert the result string. */</span></div>
<div class="line"><span class="lineno"> 1127</span>  cp2 = buf;</div>
<div class="line"><span class="lineno"> 1128</span>  <span class="keywordflow">while</span> (cp &gt; cp2) {</div>
<div class="line"><span class="lineno"> 1129</span>    <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> = *cp;</div>
<div class="line"><span class="lineno"> 1130</span>    *cp-- = *cp2;</div>
<div class="line"><span class="lineno"> 1131</span>    *cp2++ = <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>;</div>
<div class="line"><span class="lineno"> 1132</span>  }</div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>  <span class="keywordflow">return</span> buf;</div>
<div class="line"><span class="lineno"> 1135</span>}</div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">marchsq::__impl::SquareTag::c</a></div><div class="ttdeci">@ c</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l01308">fileio_num()</a>.</p>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_ac901e72dcce821f43e90a44676b8f70e_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a34b9629bed1b701a32a5bd062aa44548" name="a34b9629bed1b701a32a5bd062aa44548"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b9629bed1b701a32a5bd062aa44548">&#9670;&#160;</a></span>srec2b()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int srec2b </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>infile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>inf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>fileoffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  635</span>{</div>
<div class="line"><span class="lineno">  636</span>  <span class="keywordtype">char</span> buffer [ <a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a> ];</div>
<div class="line"><span class="lineno">  637</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextaddr, maxaddr;</div>
<div class="line"><span class="lineno">  638</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  639</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>;</div>
<div class="line"><span class="lineno">  640</span>  <span class="keywordtype">int</span> len;</div>
<div class="line"><span class="lineno">  641</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/dec/fileio_8c.html#da/dc7/structihexrec">ihexrec</a> srec;</div>
<div class="line"><span class="lineno">  642</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno">  643</span>  <span class="keywordtype">int</span> reccount;</div>
<div class="line"><span class="lineno">  644</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> datarec;</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>  <span class="keywordtype">char</span> * msg = 0;</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>  <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>   = 0;</div>
<div class="line"><span class="lineno">  649</span>  maxaddr  = 0;</div>
<div class="line"><span class="lineno">  650</span>  reccount = 0;</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>  <span class="keywordflow">while</span> (fgets((<span class="keywordtype">char</span> *)buffer,<a class="code hl_define" href="../../d8/dec/fileio_8c.html#a09a3b394b8602092d58347b791158062">MAX_LINE_LEN</a>,inf)!=NULL) {</div>
<div class="line"><span class="lineno">  653</span>    <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>++;</div>
<div class="line"><span class="lineno">  654</span>    len = (int)strlen(buffer);</div>
<div class="line"><span class="lineno">  655</span>    <span class="keywordflow">if</span> (buffer[len-1] == <span class="charliteral">&#39;\n&#39;</span>) </div>
<div class="line"><span class="lineno">  656</span>      buffer[--len] = 0;</div>
<div class="line"><span class="lineno">  657</span>    <span class="keywordflow">if</span> (buffer[0] != 0x53)</div>
<div class="line"><span class="lineno">  658</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  659</span>    rc = <a class="code hl_function" href="../../d8/dec/fileio_8c.html#aa8cb5b1fced677ce16f5f8716a01ebde">srec_readrec</a>(&amp;srec, buffer);</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>    <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  662</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: invalid record at line %d of \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  663</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  664</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  665</span>    }</div>
<div class="line"><span class="lineno">  666</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc != srec.cksum) {</div>
<div class="line"><span class="lineno">  667</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: checksum mismatch at line %d of \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  668</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  669</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: checksum=0x%02x, computed checksum=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  670</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, srec.cksum, rc);</div>
<div class="line"><span class="lineno">  671</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  672</span>    }</div>
<div class="line"><span class="lineno">  673</span> </div>
<div class="line"><span class="lineno">  674</span>    datarec=0; </div>
<div class="line"><span class="lineno">  675</span>    <span class="keywordflow">switch</span> (srec.rectyp) {</div>
<div class="line"><span class="lineno">  676</span>      <span class="keywordflow">case</span> 0x30: <span class="comment">/* S0 - header record*/</span></div>
<div class="line"><span class="lineno">  677</span>        <span class="comment">/* skip */</span></div>
<div class="line"><span class="lineno">  678</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  679</span> </div>
<div class="line"><span class="lineno">  680</span>      <span class="keywordflow">case</span> 0x31: <span class="comment">/* S1 - 16 bit address data record */</span></div>
<div class="line"><span class="lineno">  681</span>        datarec=1;</div>
<div class="line"><span class="lineno">  682</span>        msg=<span class="stringliteral">&quot;%s: ERROR: address 0x%04x out of range %sat line %d of %s\n&quot;</span>;</div>
<div class="line"><span class="lineno">  683</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  684</span> </div>
<div class="line"><span class="lineno">  685</span>      <span class="keywordflow">case</span> 0x32: <span class="comment">/* S2 - 24 bit address data record */</span></div>
<div class="line"><span class="lineno">  686</span>        datarec=1;</div>
<div class="line"><span class="lineno">  687</span>        msg=<span class="stringliteral">&quot;%s: ERROR: address 0x%06x out of range %sat line %d of %s\n&quot;</span>;</div>
<div class="line"><span class="lineno">  688</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span>      <span class="keywordflow">case</span> 0x33: <span class="comment">/* S3 - 32 bit address data record */</span></div>
<div class="line"><span class="lineno">  691</span>        datarec=1;</div>
<div class="line"><span class="lineno">  692</span>        msg=<span class="stringliteral">&quot;%s: ERROR: address 0x%08x out of range %sat line %d of %s\n&quot;</span>;</div>
<div class="line"><span class="lineno">  693</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>      <span class="keywordflow">case</span> 0x34: <span class="comment">/* S4 - symbol record (LSI extension) */</span></div>
<div class="line"><span class="lineno">  696</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: not supported record at line %d of %s\n&quot;</span>,</div>
<div class="line"><span class="lineno">  697</span>                        <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  698</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>      <span class="keywordflow">case</span> 0x35: <span class="comment">/* S5 - count of S1,S2 and S3 records previously tx&#39;d */</span></div>
<div class="line"><span class="lineno">  701</span>        <span class="keywordflow">if</span> (srec.loadofs != reccount){</div>
<div class="line"><span class="lineno">  702</span>          <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: count of transmitted data records mismatch &quot;</span></div>
<div class="line"><span class="lineno">  703</span>                          <span class="stringliteral">&quot;at line %d of \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  704</span>                          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  705</span>          <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: transmitted data records= %d, expected &quot;</span></div>
<div class="line"><span class="lineno">  706</span>                  <span class="stringliteral">&quot;value= %d\n&quot;</span>,</div>
<div class="line"><span class="lineno">  707</span>                  <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, reccount, srec.loadofs);</div>
<div class="line"><span class="lineno">  708</span>          <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  709</span>        }</div>
<div class="line"><span class="lineno">  710</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>      <span class="keywordflow">case</span> 0x37: <span class="comment">/* S7 Record - end record for 32 bit address data */</span></div>
<div class="line"><span class="lineno">  713</span>      <span class="keywordflow">case</span> 0x38: <span class="comment">/* S8 Record - end record for 24 bit address data */</span></div>
<div class="line"><span class="lineno">  714</span>      <span class="keywordflow">case</span> 0x39: <span class="comment">/* S9 Record - end record for 16 bit address data */</span></div>
<div class="line"><span class="lineno">  715</span>        <span class="keywordflow">return</span> maxaddr;</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  718</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: ERROR: don&#39;t know how to deal with rectype S%d &quot;</span></div>
<div class="line"><span class="lineno">  719</span>                        <span class="stringliteral">&quot;at line %d of %s\n&quot;</span>,</div>
<div class="line"><span class="lineno">  720</span>                        <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, srec.rectyp, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  721</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  722</span>    }</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>    <span class="keywordflow">if</span> (datarec == 1) {</div>
<div class="line"><span class="lineno">  725</span>      nextaddr = srec.loadofs;</div>
<div class="line"><span class="lineno">  726</span>      <span class="keywordflow">if</span> (nextaddr &lt; fileoffset) {</div>
<div class="line"><span class="lineno">  727</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, msg, <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, nextaddr,</div>
<div class="line"><span class="lineno">  728</span>                <span class="stringliteral">&quot;(below fileoffset) &quot;</span>,</div>
<div class="line"><span class="lineno">  729</span>                <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  730</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  731</span>      }</div>
<div class="line"><span class="lineno">  732</span>      nextaddr -= fileoffset;</div>
<div class="line"><span class="lineno">  733</span>      <span class="keywordflow">if</span> (nextaddr + srec.reclen &gt; (<span class="keywordtype">unsigned</span>)bufsize) {</div>
<div class="line"><span class="lineno">  734</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, msg, <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, nextaddr+srec.reclen, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  735</span>                <a class="code hl_variable" href="../../d3/d95/config_8c.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  736</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  737</span>      }</div>
<div class="line"><span class="lineno">  738</span>      <span class="keywordflow">for</span> (i=0; i&lt;srec.reclen; i++) {</div>
<div class="line"><span class="lineno">  739</span>        mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>[nextaddr+i] = srec.data[i];</div>
<div class="line"><span class="lineno">  740</span>        mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a5b99d763eddc55ddc4c180be7bcb6e75">tags</a>[nextaddr+i] = <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a2ca938c48a2d9e1e0acfd596f5ed081f">TAG_ALLOCATED</a>;</div>
<div class="line"><span class="lineno">  741</span>      }</div>
<div class="line"><span class="lineno">  742</span>      <span class="keywordflow">if</span> (nextaddr+srec.reclen &gt; maxaddr)</div>
<div class="line"><span class="lineno">  743</span>        maxaddr = nextaddr+srec.reclen;</div>
<div class="line"><span class="lineno">  744</span>      reccount++;</div>
<div class="line"><span class="lineno">  745</span>    }</div>
<div class="line"><span class="lineno">  746</span> </div>
<div class="line"><span class="lineno">  747</span>  }</div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: WARNING: no end of file record found for Motorola S-Records &quot;</span></div>
<div class="line"><span class="lineno">  750</span>                  <span class="stringliteral">&quot;file \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  751</span>                  <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d3/d95/config_8c.html#a44ce3ff5f72a9923a369520ad2513bf8">infile</a>);</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>  <span class="keywordflow">return</span> maxaddr;</div>
<div class="line"><span class="lineno">  754</span>}</div>
<div class="ttc" id="afileio_8c_html_aa8cb5b1fced677ce16f5f8716a01ebde"><div class="ttname"><a href="../../d8/dec/fileio_8c.html#aa8cb5b1fced677ce16f5f8716a01ebde">srec_readrec</a></div><div class="ttdeci">static int srec_readrec(struct ihexrec *srec, char *rec)</div><div class="ttdef"><b>Definition</b> fileio.c:557</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00059">ihexrec::cksum</a>, <a class="el" href="../../#l00058">ihexrec::data</a>, <a class="el" href="../../#l00055">infile</a>, <a class="el" href="../../#l00054">lineno</a>, <a class="el" href="../../#l00056">ihexrec::loadofs</a>, <a class="el" href="../../#l00049">MAX_LINE_LEN</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00055">ihexrec::reclen</a>, <a class="el" href="../../#l00057">ihexrec::rectyp</a>, <a class="el" href="../../#l00557">srec_readrec()</a>, <a class="el" href="../../#l00215">TAG_ALLOCATED</a>, and <a class="el" href="../../#l00305">avrmem::tags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01247">fileio_srec()</a>.</p>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a34b9629bed1b701a32a5bd062aa44548_cgraph.svg" width="247" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_a34b9629bed1b701a32a5bd062aa44548_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa8cb5b1fced677ce16f5f8716a01ebde" name="aa8cb5b1fced677ce16f5f8716a01ebde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8cb5b1fced677ce16f5f8716a01ebde">&#9670;&#160;</a></span>srec_readrec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int srec_readrec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dec/fileio_8c.html#da/dc7/structihexrec">ihexrec</a> *&#160;</td>
          <td class="paramname"><em>srec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>rec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  558</span>{</div>
<div class="line"><span class="lineno">  559</span>  <span class="keywordtype">int</span> i, j;</div>
<div class="line"><span class="lineno">  560</span>  <span class="keywordtype">char</span> buf[8];</div>
<div class="line"><span class="lineno">  561</span>  <span class="keywordtype">int</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>, len, addr_width;</div>
<div class="line"><span class="lineno">  562</span>  <span class="keywordtype">char</span> * e;</div>
<div class="line"><span class="lineno">  563</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cksum;</div>
<div class="line"><span class="lineno">  564</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>  len = (int)strlen(rec);</div>
<div class="line"><span class="lineno">  567</span>  <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a> = 1;</div>
<div class="line"><span class="lineno">  568</span>  cksum = 0;</div>
<div class="line"><span class="lineno">  569</span>  addr_width = 2;</div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>  <span class="comment">/* record type */</span></div>
<div class="line"><span class="lineno">  572</span>  <span class="keywordflow">if</span> (offset + 1 &gt; len) </div>
<div class="line"><span class="lineno">  573</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  574</span>  srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#aae5f14a03e58a1637c30a265fa7199d7">rectyp</a> = rec[<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>++];</div>
<div class="line"><span class="lineno">  575</span>  <span class="keywordflow">if</span> (srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#aae5f14a03e58a1637c30a265fa7199d7">rectyp</a> == 0x32 || srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#aae5f14a03e58a1637c30a265fa7199d7">rectyp</a> == 0x38) </div>
<div class="line"><span class="lineno">  576</span>    addr_width = 3; <span class="comment">/* S2,S8-record */</span></div>
<div class="line"><span class="lineno">  577</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#aae5f14a03e58a1637c30a265fa7199d7">rectyp</a> == 0x33 || srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#aae5f14a03e58a1637c30a265fa7199d7">rectyp</a> == 0x37) </div>
<div class="line"><span class="lineno">  578</span>    addr_width = 4; <span class="comment">/* S3,S7-record */</span></div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>  <span class="comment">/* reclen */</span></div>
<div class="line"><span class="lineno">  581</span>  <span class="keywordflow">if</span> (offset + 2 &gt; len) </div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  583</span>  <span class="keywordflow">for</span> (i=0; i&lt;2; i++) </div>
<div class="line"><span class="lineno">  584</span>    buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  585</span>  buf[i] = 0;</div>
<div class="line"><span class="lineno">  586</span>  srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a4a00cec813ba8a40bbcaa18b8ff258e2">reclen</a> = (char)strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  587</span>  cksum += srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a4a00cec813ba8a40bbcaa18b8ff258e2">reclen</a>;</div>
<div class="line"><span class="lineno">  588</span>  srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a4a00cec813ba8a40bbcaa18b8ff258e2">reclen</a> -= (addr_width+1);</div>
<div class="line"><span class="lineno">  589</span>  <span class="keywordflow">if</span> (e == buf || *e != 0) </div>
<div class="line"><span class="lineno">  590</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  591</span> </div>
<div class="line"><span class="lineno">  592</span>  <span class="comment">/* load offset */</span></div>
<div class="line"><span class="lineno">  593</span>  <span class="keywordflow">if</span> (offset + addr_width &gt; len) </div>
<div class="line"><span class="lineno">  594</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  595</span>  <span class="keywordflow">for</span> (i=0; i&lt;addr_width*2; i++) </div>
<div class="line"><span class="lineno">  596</span>    buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  597</span>  buf[i] = 0;</div>
<div class="line"><span class="lineno">  598</span>  srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a9c19e232017d9c436d54267b2f1258f6">loadofs</a> = strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  599</span>  <span class="keywordflow">if</span> (e == buf || *e != 0) </div>
<div class="line"><span class="lineno">  600</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>  <span class="keywordflow">for</span> (i=addr_width; i&gt;0; i--)</div>
<div class="line"><span class="lineno">  603</span>    cksum += (srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a9c19e232017d9c436d54267b2f1258f6">loadofs</a> &gt;&gt; (i - 1) * 8) &amp; 0xff;</div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span>  <span class="comment">/* data */</span></div>
<div class="line"><span class="lineno">  606</span>  <span class="keywordflow">for</span> (j=0; j&lt;srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a4a00cec813ba8a40bbcaa18b8ff258e2">reclen</a>; j++) {</div>
<div class="line"><span class="lineno">  607</span>    <span class="keywordflow">if</span> (offset+2  &gt; len) </div>
<div class="line"><span class="lineno">  608</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  609</span>    <span class="keywordflow">for</span> (i=0; i&lt;2; i++) </div>
<div class="line"><span class="lineno">  610</span>      buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  611</span>    buf[i] = 0;</div>
<div class="line"><span class="lineno">  612</span>    srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a91cf4d872d2dc7bc4abbfaab72e79f2f">data</a>[j] = (char)strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  613</span>    <span class="keywordflow">if</span> (e == buf || *e != 0) </div>
<div class="line"><span class="lineno">  614</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  615</span>    cksum += srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a91cf4d872d2dc7bc4abbfaab72e79f2f">data</a>[j];</div>
<div class="line"><span class="lineno">  616</span>  }</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>  <span class="comment">/* cksum */</span></div>
<div class="line"><span class="lineno">  619</span>  <span class="keywordflow">if</span> (offset + 2 &gt; len) </div>
<div class="line"><span class="lineno">  620</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  621</span>  <span class="keywordflow">for</span> (i=0; i&lt;2; i++) </div>
<div class="line"><span class="lineno">  622</span>    buf[i] = rec[offset++];</div>
<div class="line"><span class="lineno">  623</span>  buf[i] = 0;</div>
<div class="line"><span class="lineno">  624</span>  srec-&gt;<a class="code hl_variable" href="../../d8/dec/fileio_8c.html#a8bbad404fcbc3fbac634e63fb5a3a648">cksum</a> = (char)strtoul(buf, &amp;e, 16);</div>
<div class="line"><span class="lineno">  625</span>  <span class="keywordflow">if</span> (e == buf || *e != 0) </div>
<div class="line"><span class="lineno">  626</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>  rc = 0xff - cksum;</div>
<div class="line"><span class="lineno">  629</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  630</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00059">ihexrec::cksum</a>, <a class="el" href="../../#l00058">ihexrec::data</a>, <a class="el" href="../../#l00056">ihexrec::loadofs</a>, <a class="el" href="../../#l00055">ihexrec::reclen</a>, and <a class="el" href="../../#l00057">ihexrec::rectyp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00633">srec2b()</a>.</p>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/dec/fileio_8c_aa8cb5b1fced677ce16f5f8716a01ebde_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_3152723ac38ccb2051caa7ee1212accf.html">avrdude</a></li><li class="navelem"><a class="el" href="../../d8/dec/fileio_8c.html">fileio.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
