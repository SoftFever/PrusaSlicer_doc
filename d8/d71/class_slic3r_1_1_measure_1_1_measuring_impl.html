<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: Slic3r::Measure::MeasuringImpl Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d3/dfe/class_slic3r_1_1_measure_1_1_measuring_impl-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::Measure::MeasuringImpl Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::Measure::MeasuringImpl:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d1/d7d/class_slic3r_1_1_measure_1_1_measuring_impl__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:d1/d18/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#d1/d18/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data">PlaneData</a></td></tr>
<tr class="separator:d1/d18/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0a4728fa85de6ab84e6d5c7f265f7dd2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a0a4728fa85de6ab84e6d5c7f265f7dd2">MeasuringImpl</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;its)</td></tr>
<tr class="separator:a0a4728fa85de6ab84e6d5c7f265f7dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2bce2baa8075dfa14ac2ac7bfc0e807"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="../../d3/d11/class_slic3r_1_1_measure_1_1_surface_feature.html">SurfaceFeature</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#ae2bce2baa8075dfa14ac2ac7bfc0e807">get_feature</a> (size_t face_idx, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> &amp;point)</td></tr>
<tr class="separator:ae2bce2baa8075dfa14ac2ac7bfc0e807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad95ba14756eff1f52de33518d01cd732"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#ad95ba14756eff1f52de33518d01cd732">get_num_of_planes</a> () <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad95ba14756eff1f52de33518d01cd732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a655ee27b260792986b100a1b1286fa57"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a655ee27b260792986b100a1b1286fa57">get_plane_triangle_indices</a> (int idx) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a655ee27b260792986b100a1b1286fa57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa615c66ac91adef24d173a84b9f310aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../d3/d11/class_slic3r_1_1_measure_1_1_surface_feature.html">SurfaceFeature</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#aa615c66ac91adef24d173a84b9f310aa">get_plane_features</a> (unsigned int plane_id)</td></tr>
<tr class="separator:aa615c66ac91adef24d173a84b9f310aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10349273ee352ad6f830d983eb115fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html">TriangleMesh</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#ab10349273ee352ad6f830d983eb115fb">get_mesh</a> () <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab10349273ee352ad6f830d983eb115fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a2aefaad4287f2d0d2abe29ee06ba36eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a2aefaad4287f2d0d2abe29ee06ba36eb">update_planes</a> ()</td></tr>
<tr class="separator:a2aefaad4287f2d0d2abe29ee06ba36eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1965362c0ec3e9533c34493ba1eefaa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#af1965362c0ec3e9533c34493ba1eefaa">extract_features</a> (int plane_idx)</td></tr>
<tr class="separator:af1965362c0ec3e9533c34493ba1eefaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acbd493b37cb9d2338b1219699c2ac0f1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#d1/d18/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data">PlaneData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a></td></tr>
<tr class="separator:acbd493b37cb9d2338b1219699c2ac0f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d62a9a11c4d49e527c7086536a308d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a></td></tr>
<tr class="separator:a25d62a9a11c4d49e527c7086536a308d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29d730ceaf262c93d0bfbf894f00748e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html">TriangleMesh</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a29d730ceaf262c93d0bfbf894f00748e">m_mesh</a></td></tr>
<tr class="separator:a29d730ceaf262c93d0bfbf894f00748e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><hr/><h2 class="groupheader">Class Documentation</h2>
<a name="d1/d18/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data" id="d1/d18/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d1/d18/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data">&#9670;&#160;</a></span>Slic3r::Measure::MeasuringImpl::PlaneData</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct Slic3r::Measure::MeasuringImpl::PlaneData</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::Measure::MeasuringImpl::PlaneData:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/d1a/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data__coll__graph.svg" width="100%" height="542"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a3f210af99bf4cc37e0d9473eaf6c7471" name="a3f210af99bf4cc37e0d9473eaf6c7471"></a>float</td>
<td class="fieldname">
area</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5df6787e92367e51a148f7de12f02008" name="a5df6787e92367e51a148f7de12f02008"></a>vector&lt; vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> &gt; &gt;</td>
<td class="fieldname">
borders</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a98fe9cb9c896ccef1e8d4440d0e92504" name="a98fe9cb9c896ccef1e8d4440d0e92504"></a>vector&lt; int &gt;</td>
<td class="fieldname">
facets</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a6edd413252cfc068da2a6f6ef202f9ec" name="a6edd413252cfc068da2a6f6ef202f9ec"></a>bool</td>
<td class="fieldname">
features_extracted = false</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a99478985194cf7f77b5d313580234865" name="a99478985194cf7f77b5d313580234865"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a></td>
<td class="fieldname">
normal</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aa7085f5d79cd2ab8dcb30b9ac25d9954" name="aa7085f5d79cd2ab8dcb30b9ac25d9954"></a>vector&lt; <a class="el" href="../../d3/d11/class_slic3r_1_1_measure_1_1_surface_feature.html">SurfaceFeature</a> &gt;</td>
<td class="fieldname">
surface_features</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0a4728fa85de6ab84e6d5c7f265f7dd2" name="a0a4728fa85de6ab84e6d5c7f265f7dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a4728fa85de6ab84e6d5c7f265f7dd2">&#9670;&#160;</a></span>MeasuringImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Slic3r::Measure::MeasuringImpl::MeasuringImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;&#160;</td>
          <td class="paramname"><em>its</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   92</span>: <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a29d730ceaf262c93d0bfbf894f00748e">m_mesh</a>(its)</div>
<div class="line"><span class="lineno">   93</span>{</div>
<div class="line"><span class="lineno">   94</span>    <a class="code hl_function" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a2aefaad4287f2d0d2abe29ee06ba36eb">update_planes</a>();</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="comment">// Extracting features will be done as needed.</span></div>
<div class="line"><span class="lineno">   97</span>    <span class="comment">// To extract all planes at once, run the following:</span></div>
<div class="line"><span class="lineno">   98</span><span class="preprocessor">#if DEBUG_EXTRACT_ALL_FEATURES_AT_ONCE</span></div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;int(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.size()); ++i)</div>
<div class="line"><span class="lineno">  100</span>        <a class="code hl_function" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#af1965362c0ec3e9533c34493ba1eefaa">extract_features</a>(i);</div>
<div class="line"><span class="lineno">  101</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  102</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_measure_1_1_measuring_impl_html_a29d730ceaf262c93d0bfbf894f00748e"><div class="ttname"><a href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a29d730ceaf262c93d0bfbf894f00748e">Slic3r::Measure::MeasuringImpl::m_mesh</a></div><div class="ttdeci">TriangleMesh m_mesh</div><div class="ttdef"><b>Definition</b> Measure.cpp:83</div></div>
<div class="ttc" id="aclass_slic3r_1_1_measure_1_1_measuring_impl_html_a2aefaad4287f2d0d2abe29ee06ba36eb"><div class="ttname"><a href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a2aefaad4287f2d0d2abe29ee06ba36eb">Slic3r::Measure::MeasuringImpl::update_planes</a></div><div class="ttdeci">void update_planes()</div><div class="ttdef"><b>Definition</b> Measure.cpp:105</div></div>
<div class="ttc" id="aclass_slic3r_1_1_measure_1_1_measuring_impl_html_acbd493b37cb9d2338b1219699c2ac0f1"><div class="ttname"><a href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">Slic3r::Measure::MeasuringImpl::m_planes</a></div><div class="ttdeci">std::vector&lt; PlaneData &gt; m_planes</div><div class="ttdef"><b>Definition</b> Measure.cpp:81</div></div>
<div class="ttc" id="aclass_slic3r_1_1_measure_1_1_measuring_impl_html_af1965362c0ec3e9533c34493ba1eefaa"><div class="ttname"><a href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#af1965362c0ec3e9533c34493ba1eefaa">Slic3r::Measure::MeasuringImpl::extract_features</a></div><div class="ttdeci">void extract_features(int plane_idx)</div><div class="ttdef"><b>Definition</b> Measure.cpp:263</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00263">extract_features()</a>, <a class="el" href="../../#l00081">m_planes</a>, and <a class="el" href="../../#l00105">update_planes()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl_a0a4728fa85de6ab84e6d5c7f265f7dd2_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af1965362c0ec3e9533c34493ba1eefaa" name="af1965362c0ec3e9533c34493ba1eefaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1965362c0ec3e9533c34493ba1eefaa">&#9670;&#160;</a></span>extract_features()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::Measure::MeasuringImpl::extract_features </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>plane_idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  264</span>{</div>
<div class="line"><span class="lineno">  265</span>    assert(! <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_idx].features_extracted);</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    PlaneData&amp; plane = <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_idx];</div>
<div class="line"><span class="lineno">  268</span>    plane.surface_features.clear();</div>
<div class="line"><span class="lineno">  269</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a>&amp; <a class="code hl_function" href="../../dd/d3d/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03.html#a9702d7dc6b0a37966d1157909ff81294">normal</a> = plane.normal;</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    <a class="code hl_class" href="../../d5/d00/group___geometry___module.html#d3/d2e/class_eigen_1_1_quaternion">Eigen::Quaterniond</a> q;</div>
<div class="line"><span class="lineno">  272</span>    q.<a class="code hl_function" href="../../d5/d00/group___geometry___module.html#a61ce1b4b1faf6849c9663fd86e9b3a70">setFromTwoVectors</a>(plane.normal, Vec3d::UnitZ());</div>
<div class="line"><span class="lineno">  273</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> trafo = <a class="code hl_function" href="../../d5/d00/group___geometry___module.html#a41e2e58b09790eb8e3e220acceb7de1f">Transform3d::Identity</a>();</div>
<div class="line"><span class="lineno">  274</span>    trafo.rotate(q);</div>
<div class="line"><span class="lineno">  275</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> trafo_inv = trafo.<a class="code hl_function" href="../../d5/d00/group___geometry___module.html#a20ca137b84f18b9c41a0fef9c222e0da">inverse</a>();</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    std::vector&lt;double&gt; angles; <span class="comment">// placed in outer scope to prevent reallocations</span></div>
<div class="line"><span class="lineno">  278</span>    std::vector&lt;double&gt; lengths;</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::vector&lt;Vec3d&gt;&amp; border : plane.borders) {</div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordflow">if</span> (border.size() &lt;= 1)</div>
<div class="line"><span class="lineno">  282</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d9/d4c/bitbang_8c.html#a997358c3e5ab1070da66eb43ef43c389">done</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordflow">if</span> (border.size() &gt; 4) {</div>
<div class="line"><span class="lineno">  287</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; [center, radius, err] = <a class="code hl_function" href="../../d0/d61/namespace_slic3r_1_1_measure.html#a0aea5345972cfcfff4e16da5252934b6">get_center_and_radius</a>(border, trafo, trafo_inv);</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>            <span class="keywordflow">if</span> (err &lt; 0.05) {</div>
<div class="line"><span class="lineno">  290</span>                <span class="comment">// The whole border is one circle. Just add it into the list of features</span></div>
<div class="line"><span class="lineno">  291</span>                <span class="comment">// and we are done.</span></div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>                <span class="keywordtype">bool</span> is_polygon = border.size()&gt;4 &amp;&amp; border.size()&lt;=8;</div>
<div class="line"><span class="lineno">  294</span>                <span class="keywordtype">bool</span> lengths_match = std::all_of(border.begin()+2, border.end(), [is_polygon](<span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a>&amp; pt) {</div>
<div class="line"><span class="lineno">  295</span>                        return Slic3r::is_approx((pt - *((&amp;pt)-1)).squaredNorm(), (*((&amp;pt)-1) - *((&amp;pt)-2)).squaredNorm(), is_polygon ? 0.01 : 0.01);</div>
<div class="line"><span class="lineno">  296</span>                    });</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>                <span class="keywordflow">if</span> (lengths_match &amp;&amp; (is_polygon || border.size() &gt; 8)) {</div>
<div class="line"><span class="lineno">  299</span>                    <span class="keywordflow">if</span> (is_polygon) {</div>
<div class="line"><span class="lineno">  300</span>                        <span class="comment">// This is a polygon, add the separate edges with the center.</span></div>
<div class="line"><span class="lineno">  301</span>                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;int(border.size()); ++j)</div>
<div class="line"><span class="lineno">  302</span>                            plane.surface_features.emplace_back(SurfaceFeature(<a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">SurfaceFeatureType::Edge</a>,</div>
<div class="line"><span class="lineno">  303</span>                                border[j==0 ? border.size()-1 : j-1], border[j],</div>
<div class="line"><span class="lineno">  304</span>                                <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::make_optional(center)));</div>
<div class="line"><span class="lineno">  305</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  306</span>                        <span class="comment">// The fit went well and it has more than 8 points - let&#39;s consider this a circle.</span></div>
<div class="line"><span class="lineno">  307</span>                        plane.surface_features.emplace_back(SurfaceFeature(<a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a30954d90085f6eaaf5817917fc5fecb3">SurfaceFeatureType::Circle</a>, center, plane.normal, std::nullopt, radius));</div>
<div class="line"><span class="lineno">  308</span>                    }</div>
<div class="line"><span class="lineno">  309</span>                    <a class="code hl_variable" href="../../d9/d4c/bitbang_8c.html#a997358c3e5ab1070da66eb43ef43c389">done</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  310</span>                }</div>
<div class="line"><span class="lineno">  311</span>            }</div>
<div class="line"><span class="lineno">  312</span>        }</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">if</span> (! <a class="code hl_variable" href="../../d9/d4c/bitbang_8c.html#a997358c3e5ab1070da66eb43ef43c389">done</a>) {</div>
<div class="line"><span class="lineno">  315</span>            <span class="comment">// In this case, the border is not a circle and may contain circular</span></div>
<div class="line"><span class="lineno">  316</span>            <span class="comment">// segments. Try to find them and then add all remaining edges as edges.</span></div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>            <span class="keyword">auto</span> are_angles_same  = [](<span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a>, <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>) { <span class="keywordflow">return</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">Slic3r::is_approx</a>(a,b,0.01); };</div>
<div class="line"><span class="lineno">  319</span>            <span class="keyword">auto</span> are_lengths_same = [](<span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a>, <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>) { <span class="keywordflow">return</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">Slic3r::is_approx</a>(a,b,0.01); };</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>            <span class="comment">// Given an idx into border, return the index that is idx+offset position,</span></div>
<div class="line"><span class="lineno">  323</span>            <span class="comment">// while taking into account the need for wrap-around and the fact that</span></div>
<div class="line"><span class="lineno">  324</span>            <span class="comment">// the first and last point are the same.</span></div>
<div class="line"><span class="lineno">  325</span>            <span class="keyword">auto</span> offset_to_index = [border_size = int(border.size())](<span class="keywordtype">int</span> idx, <span class="keywordtype">int</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>) -&gt; <span class="keywordtype">int</span> {</div>
<div class="line"><span class="lineno">  326</span>                assert(std::abs(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>) &lt; border_size);</div>
<div class="line"><span class="lineno">  327</span>                <span class="keywordtype">int</span> out = idx+<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>;</div>
<div class="line"><span class="lineno">  328</span>                <span class="keywordflow">if</span> (out &gt;= border_size)</div>
<div class="line"><span class="lineno">  329</span>                    out = out - border_size;</div>
<div class="line"><span class="lineno">  330</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (out &lt; 0)</div>
<div class="line"><span class="lineno">  331</span>                    out = border_size + out;</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>                <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  334</span>            };</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>            <span class="comment">// First calculate angles at all the vertices.</span></div>
<div class="line"><span class="lineno">  337</span>            angles.clear();</div>
<div class="line"><span class="lineno">  338</span>            lengths.clear();</div>
<div class="line"><span class="lineno">  339</span>            <span class="keywordtype">int</span> first_different_angle_idx = 0;</div>
<div class="line"><span class="lineno">  340</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;int(border.size()); ++i) {</div>
<div class="line"><span class="lineno">  341</span>                <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a>&amp; v2 = border[i] - (i == 0 ? border[border.size()-1] : border[i-1]);</div>
<div class="line"><span class="lineno">  342</span>                <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a>&amp; v1 = (i == int(border.size()-1) ? border[0] : border[i+1]) - border[i];</div>
<div class="line"><span class="lineno">  343</span>                <span class="keywordtype">double</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a> = atan2(-<a class="code hl_function" href="../../dd/d3d/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03.html#a9702d7dc6b0a37966d1157909ff81294">normal</a>.dot(v1.cross(v2)), -v1.dot(v2)) + <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>;</div>
<div class="line"><span class="lineno">  344</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a> &gt; <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>)</div>
<div class="line"><span class="lineno">  345</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a> = 2*<a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> - <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a>;</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>                angles.push_back(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a>);</div>
<div class="line"><span class="lineno">  348</span>                lengths.push_back(v2.norm());</div>
<div class="line"><span class="lineno">  349</span>                <span class="keywordflow">if</span> (first_different_angle_idx == 0 &amp;&amp; angles.size() &gt; 1) {</div>
<div class="line"><span class="lineno">  350</span>                    <span class="keywordflow">if</span> (! are_angles_same(angles.back(), angles[angles.size()-2]))</div>
<div class="line"><span class="lineno">  351</span>                        first_different_angle_idx = angles.size()-1;</div>
<div class="line"><span class="lineno">  352</span>                }</div>
<div class="line"><span class="lineno">  353</span>            }</div>
<div class="line"><span class="lineno">  354</span>            assert(border.size() == angles.size());</div>
<div class="line"><span class="lineno">  355</span>            assert(border.size() == lengths.size());</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>            <span class="comment">// First go around the border and pick what might be circular segments.</span></div>
<div class="line"><span class="lineno">  358</span>            <span class="comment">// Save pair of indices to where such potential segments start and end.</span></div>
<div class="line"><span class="lineno">  359</span>            <span class="comment">// Also remember the length of these segments.</span></div>
<div class="line"><span class="lineno">  360</span>            <span class="keywordtype">int</span> start_idx = -1;</div>
<div class="line"><span class="lineno">  361</span>            <span class="keywordtype">bool</span> circle = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  362</span>            <span class="keywordtype">bool</span> first_iter = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  363</span>            std::vector&lt;SurfaceFeature&gt; circles;</div>
<div class="line"><span class="lineno">  364</span>            std::vector&lt;SurfaceFeature&gt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>;</div>
<div class="line"><span class="lineno">  365</span>            std::vector&lt;std::pair&lt;int, int&gt;&gt; circles_idxs;</div>
<div class="line"><span class="lineno">  366</span>            <span class="comment">//std::vector&lt;double&gt; circles_lengths;</span></div>
<div class="line"><span class="lineno">  367</span>            std::vector&lt;Vec3d&gt; single_circle; <span class="comment">// could be in loop-scope, but reallocations</span></div>
<div class="line"><span class="lineno">  368</span>            <span class="keywordtype">double</span> single_circle_length = 0.;</div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordtype">int</span> first_pt_idx = offset_to_index(first_different_angle_idx, 1);</div>
<div class="line"><span class="lineno">  370</span>            <span class="keywordtype">int</span> i = first_pt_idx;</div>
<div class="line"><span class="lineno">  371</span>            <span class="keywordflow">while</span> (i != first_pt_idx || first_iter) {</div>
<div class="line"><span class="lineno">  372</span>                <span class="keywordflow">if</span> (are_angles_same(angles[i], angles[offset_to_index(i,-1)])</div>
<div class="line"><span class="lineno">  373</span>                &amp;&amp; i != offset_to_index(first_pt_idx, -1) <span class="comment">// not the last point</span></div>
<div class="line"><span class="lineno">  374</span>                &amp;&amp; i != start_idx  ) {</div>
<div class="line"><span class="lineno">  375</span>                    <span class="comment">// circle</span></div>
<div class="line"><span class="lineno">  376</span>                    <span class="keywordflow">if</span> (! circle) {</div>
<div class="line"><span class="lineno">  377</span>                        circle = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  378</span>                        single_circle.clear();</div>
<div class="line"><span class="lineno">  379</span>                        single_circle_length = 0.;</div>
<div class="line"><span class="lineno">  380</span>                        start_idx = offset_to_index(i, -2);</div>
<div class="line"><span class="lineno">  381</span>                        single_circle = { border[start_idx], border[offset_to_index(start_idx,1)] };</div>
<div class="line"><span class="lineno">  382</span>                        single_circle_length += lengths[offset_to_index(i, -1)];</div>
<div class="line"><span class="lineno">  383</span>                    }</div>
<div class="line"><span class="lineno">  384</span>                    single_circle.emplace_back(border[i]);</div>
<div class="line"><span class="lineno">  385</span>                    single_circle_length += lengths[i];</div>
<div class="line"><span class="lineno">  386</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  387</span>                    <span class="keywordflow">if</span> (circle &amp;&amp; single_circle.size() &gt;= 5) { <span class="comment">// Less than 5 vertices? Not a circle.</span></div>
<div class="line"><span class="lineno">  388</span>                        single_circle.emplace_back(border[i]);</div>
<div class="line"><span class="lineno">  389</span>                        single_circle_length += lengths[i];</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>                        <span class="keywordtype">bool</span> accept_circle = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  392</span>                        {</div>
<div class="line"><span class="lineno">  393</span>                            <span class="comment">// Check that lengths of internal (!!!) edges match.</span></div>
<div class="line"><span class="lineno">  394</span>                            <span class="keywordtype">int</span> j = offset_to_index(start_idx, 3);</div>
<div class="line"><span class="lineno">  395</span>                            <span class="keywordflow">while</span> (j != i) {</div>
<div class="line"><span class="lineno">  396</span>                                <span class="keywordflow">if</span> (! are_lengths_same(lengths[offset_to_index(j,-1)], lengths[j])) {</div>
<div class="line"><span class="lineno">  397</span>                                    accept_circle = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  398</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  399</span>                                }</div>
<div class="line"><span class="lineno">  400</span>                                j = offset_to_index(j, 1);</div>
<div class="line"><span class="lineno">  401</span>                            }</div>
<div class="line"><span class="lineno">  402</span>                        }</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>                        <span class="keywordflow">if</span> (accept_circle) {</div>
<div class="line"><span class="lineno">  405</span>                            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; [center, radius, err] = <a class="code hl_function" href="../../d0/d61/namespace_slic3r_1_1_measure.html#a0aea5345972cfcfff4e16da5252934b6">get_center_and_radius</a>(single_circle, trafo, trafo_inv);</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>                            <span class="comment">// Check that the fit went well. The tolerance is high, only to</span></div>
<div class="line"><span class="lineno">  408</span>                            <span class="comment">// reject complete failures.</span></div>
<div class="line"><span class="lineno">  409</span>                            accept_circle &amp;= err &lt; 0.05;</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>                            <span class="comment">// If the segment subtends less than 90 degrees, throw it away.</span></div>
<div class="line"><span class="lineno">  412</span>                            accept_circle &amp;= single_circle_length / radius &gt; 0.9*<a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>/2.;</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>                            <span class="keywordflow">if</span> (accept_circle) {</div>
<div class="line"><span class="lineno">  415</span>                                <span class="comment">// Add the circle and remember indices into borders.</span></div>
<div class="line"><span class="lineno">  416</span>                                circles_idxs.emplace_back(start_idx, i);</div>
<div class="line"><span class="lineno">  417</span>                                circles.emplace_back(SurfaceFeature(<a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a30954d90085f6eaaf5817917fc5fecb3">SurfaceFeatureType::Circle</a>, center, plane.normal, std::nullopt, radius));</div>
<div class="line"><span class="lineno">  418</span>                            }</div>
<div class="line"><span class="lineno">  419</span>                        }</div>
<div class="line"><span class="lineno">  420</span>                    }</div>
<div class="line"><span class="lineno">  421</span>                    circle = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  422</span>                }</div>
<div class="line"><span class="lineno">  423</span>                <span class="comment">// Take care of the wrap around.</span></div>
<div class="line"><span class="lineno">  424</span>                first_iter = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  425</span>                i = offset_to_index(i, 1);</div>
<div class="line"><span class="lineno">  426</span>            }</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>            <span class="comment">// We have the circles. Now go around again and pick edges, while jumping over circles.</span></div>
<div class="line"><span class="lineno">  429</span>            <span class="keywordflow">if</span> (circles_idxs.empty()) {</div>
<div class="line"><span class="lineno">  430</span>                <span class="comment">// Just add all edges.</span></div>
<div class="line"><span class="lineno">  431</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;int(border.size()); ++i)</div>
<div class="line"><span class="lineno">  432</span>                    <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.emplace_back(SurfaceFeature(<a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">SurfaceFeatureType::Edge</a>, border[i-1], border[i]));</div>
<div class="line"><span class="lineno">  433</span>                <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.emplace_back(SurfaceFeature(<a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">SurfaceFeatureType::Edge</a>, border[0], border[border.size()-1]));</div>
<div class="line"><span class="lineno">  434</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (circles_idxs.size() &gt; 1 || circles_idxs.front().first != circles_idxs.front().second) {</div>
<div class="line"><span class="lineno">  435</span>                <span class="comment">// There is at least one circular segment. Start at its end and add edges until the start of the next one.</span></div>
<div class="line"><span class="lineno">  436</span>                <span class="keywordtype">int</span> i = circles_idxs.front().second;</div>
<div class="line"><span class="lineno">  437</span>                <span class="keywordtype">int</span> circle_idx = 1;</div>
<div class="line"><span class="lineno">  438</span>                <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno">  439</span>                    i = offset_to_index(i, 1);</div>
<div class="line"><span class="lineno">  440</span>                    <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.emplace_back(SurfaceFeature(<a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">SurfaceFeatureType::Edge</a>, border[offset_to_index(i,-1)], border[i]));</div>
<div class="line"><span class="lineno">  441</span>                    <span class="keywordflow">if</span> (circle_idx &lt; <span class="keywordtype">int</span>(circles_idxs.size()) &amp;&amp; i == circles_idxs[circle_idx].first) {</div>
<div class="line"><span class="lineno">  442</span>                        i = circles_idxs[circle_idx].second;</div>
<div class="line"><span class="lineno">  443</span>                        ++circle_idx;</div>
<div class="line"><span class="lineno">  444</span>                    }</div>
<div class="line"><span class="lineno">  445</span>                    <span class="keywordflow">if</span> (i == circles_idxs.front().first)</div>
<div class="line"><span class="lineno">  446</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  447</span>                }</div>
<div class="line"><span class="lineno">  448</span>            }</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>            <span class="comment">// Merge adjacent edges where needed.</span></div>
<div class="line"><span class="lineno">  451</span>            assert(std::all_of(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.begin(), <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.end(),</div>
<div class="line"><span class="lineno">  452</span>                            [](<span class="keyword">const</span> SurfaceFeature&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>) { return f.get_type() == SurfaceFeatureType::Edge; }));</div>
<div class="line"><span class="lineno">  453</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.size()-1; i&gt;=0; --i) {</div>
<div class="line"><span class="lineno">  454</span>                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; [first_start, first_end] = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>[i==0 ? <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.size()-1 : i-1].get_edge();</div>
<div class="line"><span class="lineno">  455</span>                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; [second_start, second_end] =   <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>[i].get_edge();</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">Slic3r::is_approx</a>(first_end, second_start)</div>
<div class="line"><span class="lineno">  458</span>                    &amp;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">Slic3r::is_approx</a>((first_end-first_start).normalized().<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#adb8a52f0ebfe5a551577b3e530b40c47">dot</a>((second_end-second_start).normalized()), 1.)) {</div>
<div class="line"><span class="lineno">  459</span>                    <span class="comment">// The edges have the same direction and share a point. Merge them.</span></div>
<div class="line"><span class="lineno">  460</span>                    <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>[i==0 ? <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.size()-1 : i-1] = SurfaceFeature(<a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">SurfaceFeatureType::Edge</a>, first_start, second_end);</div>
<div class="line"><span class="lineno">  461</span>                    <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.erase(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.begin() + i);</div>
<div class="line"><span class="lineno">  462</span>                }</div>
<div class="line"><span class="lineno">  463</span>            }</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>            <span class="comment">// Now move the circles and edges into the feature list for the plane.</span></div>
<div class="line"><span class="lineno">  466</span>            assert(std::all_of(circles.begin(), circles.end(), [](<span class="keyword">const</span> SurfaceFeature&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>) {</div>
<div class="line"><span class="lineno">  467</span>                return f.get_type() == SurfaceFeatureType::Circle;</div>
<div class="line"><span class="lineno">  468</span>            }));</div>
<div class="line"><span class="lineno">  469</span>            assert(std::all_of(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.begin(), <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.end(), [](<span class="keyword">const</span> SurfaceFeature&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>) {</div>
<div class="line"><span class="lineno">  470</span>                return f.get_type() == SurfaceFeatureType::Edge;</div>
<div class="line"><span class="lineno">  471</span>            }));</div>
<div class="line"><span class="lineno">  472</span>            plane.surface_features.insert(plane.surface_features.end(), std::make_move_iterator(circles.begin()),</div>
<div class="line"><span class="lineno">  473</span>                std::make_move_iterator(circles.end()));</div>
<div class="line"><span class="lineno">  474</span>            plane.surface_features.insert(plane.surface_features.end(), std::make_move_iterator(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.begin()),</div>
<div class="line"><span class="lineno">  475</span>                std::make_move_iterator(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">edges</a>.end()));</div>
<div class="line"><span class="lineno">  476</span>        }</div>
<div class="line"><span class="lineno">  477</span>    }</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>    <span class="comment">// The last surface feature is the plane itself.</span></div>
<div class="line"><span class="lineno">  480</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> cog = Vec3d::Zero();</div>
<div class="line"><span class="lineno">  481</span>    <span class="keywordtype">size_t</span> counter = 0;</div>
<div class="line"><span class="lineno">  482</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::vector&lt;Vec3d&gt;&amp; b : plane.borders) {</div>
<div class="line"><span class="lineno">  483</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>.size(); ++i) {</div>
<div class="line"><span class="lineno">  484</span>            cog += <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>[i];</div>
<div class="line"><span class="lineno">  485</span>            ++counter;</div>
<div class="line"><span class="lineno">  486</span>        }</div>
<div class="line"><span class="lineno">  487</span>    }</div>
<div class="line"><span class="lineno">  488</span>    cog /= double(counter);</div>
<div class="line"><span class="lineno">  489</span>    plane.surface_features.emplace_back(SurfaceFeature(<a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a0d3adee051531c15b3509b4d4d75ce7b">SurfaceFeatureType::Plane</a>,</div>
<div class="line"><span class="lineno">  490</span>        plane.normal, cog, std::optional&lt;Vec3d&gt;(), plane_idx + 0.0001));</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>    plane.borders.clear();</div>
<div class="line"><span class="lineno">  493</span>    plane.borders.shrink_to_fit();</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    plane.features_extracted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  496</span>}</div>
<div class="ttc" id="a_extrusion_simulator_8cpp_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition</b> ExtrusionSimulator.cpp:20</div></div>
<div class="ttc" id="abitbang_8c_html_a997358c3e5ab1070da66eb43ef43c389"><div class="ttname"><a href="../../d9/d4c/bitbang_8c.html#a997358c3e5ab1070da66eb43ef43c389">done</a></div><div class="ttdeci">static volatile int done</div><div class="ttdef"><b>Definition</b> bitbang.c:50</div></div>
<div class="ttc" id="agroup___geometry___module_html_a20ca137b84f18b9c41a0fef9c222e0da"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#a20ca137b84f18b9c41a0fef9c222e0da">Eigen::Transform::inverse</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC Transform inverse(TransformTraits traits=(TransformTraits) Mode) const</div><div class="ttdef"><b>Definition</b> Transform.h:1202</div></div>
<div class="ttc" id="agroup___geometry___module_html_a41e2e58b09790eb8e3e220acceb7de1f"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#a41e2e58b09790eb8e3e220acceb7de1f">Eigen::Transform&lt; double, 3, Eigen::Affine, Eigen::DontAlign &gt;::Identity</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC const Transform Identity()</div><div class="ttdoc">Returns an identity transformation.</div><div class="ttdef"><b>Definition</b> Transform.h:539</div></div>
<div class="ttc" id="agroup___geometry___module_html_a61ce1b4b1faf6849c9663fd86e9b3a70"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#a61ce1b4b1faf6849c9663fd86e9b3a70">Eigen::QuaternionBase::setFromTwoVectors</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC Derived &amp; setFromTwoVectors(const MatrixBase&lt; Derived1 &gt; &amp;a, const MatrixBase&lt; Derived2 &gt; &amp;b)</div><div class="ttdef"><b>Definition</b> Quaternion.h:582</div></div>
<div class="ttc" id="agroup___geometry___module_html_d3/d2e/class_eigen_1_1_quaternion"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#d3/d2e/class_eigen_1_1_quaternion">Eigen::Quaternion</a></div><div class="ttdoc">The quaternion class used to represent 3D orientations and rotations.</div><div class="ttdef"><b>Definition</b> Quaternion.h:233</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_measure_html_a0aea5345972cfcfff4e16da5252934b6"><div class="ttname"><a href="../../d0/d61/namespace_slic3r_1_1_measure.html#a0aea5345972cfcfff4e16da5252934b6">Slic3r::Measure::get_center_and_radius</a></div><div class="ttdeci">static std::tuple&lt; Vec3d, double, double &gt; get_center_and_radius(const std::vector&lt; Vec3d &gt; &amp;points, const Transform3d &amp;trafo, const Transform3d &amp;trafo_inv)</div><div class="ttdef"><b>Definition</b> Measure.cpp:19</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_measure_html_afce4a9ced890635800872cb052f40736a0d3adee051531c15b3509b4d4d75ce7b"><div class="ttname"><a href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a0d3adee051531c15b3509b4d4d75ce7b">Slic3r::Measure::SurfaceFeatureType::Plane</a></div><div class="ttdeci">@ Plane</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_measure_html_afce4a9ced890635800872cb052f40736a30954d90085f6eaaf5817917fc5fecb3"><div class="ttname"><a href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a30954d90085f6eaaf5817917fc5fecb3">Slic3r::Measure::SurfaceFeatureType::Circle</a></div><div class="ttdeci">@ Circle</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_measure_html_afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e"><div class="ttname"><a href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">Slic3r::Measure::SurfaceFeatureType::Edge</a></div><div class="ttdeci">@ Edge</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03_html_a9702d7dc6b0a37966d1157909ff81294"><div class="ttname"><a href="../../dd/d3d/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03.html#a9702d7dc6b0a37966d1157909ff81294">Slic3r::sla::anonymous_namespace{Rotfinder.cpp}::normal</a></div><div class="ttdeci">Vec&lt; 3, T &gt; normal(const std::array&lt; Vec&lt; 3, T &gt;, 3 &gt; &amp;tri)</div><div class="ttdef"><b>Definition</b> Rotfinder.cpp:43</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0051feabeb83fb74b6fd901fc4839e77"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Slic3r::Transform3d</a></div><div class="ttdeci">Eigen::Transform&lt; double, 3, Eigen::Affine, Eigen::DontAlign &gt; Transform3d</div><div class="ttdef"><b>Definition</b> Point.hpp:81</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5ec552d076296fd705739c608edc1580"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">Slic3r::offset</a></div><div class="ttdeci">Slic3r::Polygons offset(const Slic3r::Polygon &amp;polygon, const float delta, ClipperLib::JoinType joinType, double miterLimit)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:416</div></div>
<div class="ttc" id="anamespace_slic3r_html_a6b8e15a6e63fb72a48bc5e49b8a6f6b1"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Slic3r::Vec3d</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 3, 1, Eigen::DontAlign &gt; Vec3d</div><div class="ttdef"><b>Definition</b> Point.hpp:52</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7927d0ca1b31b8f9284ea268b11d27d5"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">Slic3r::angle</a></div><div class="ttdeci">double angle(const Eigen::MatrixBase&lt; Derived &gt; &amp;v1, const Eigen::MatrixBase&lt; Derived2 &gt; &amp;v2)</div><div class="ttdef"><b>Definition</b> Point.hpp:112</div></div>
<div class="ttc" id="anamespace_slic3r_html_a92b2e5013291a55201abda7303b67baf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">Slic3r::f</a></div><div class="ttdeci">static double f(double x, double z_sin, double z_cos, bool vertical, bool flip)</div><div class="ttdef"><b>Definition</b> FillGyroid.cpp:12</div></div>
<div class="ttc" id="anamespace_slic3r_html_a93b359a57ef07c110b0f8c62d0a15045"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">Slic3r::is_approx</a></div><div class="ttdeci">constexpr bool is_approx(Number value, Number test_value, Number precision=EPSILON)</div><div class="ttdef"><b>Definition</b> libslic3r.h:271</div></div>
<div class="ttc" id="anamespace_slic3r_html_adb8a52f0ebfe5a551577b3e530b40c47"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#adb8a52f0ebfe5a551577b3e530b40c47">Slic3r::dot</a></div><div class="ttdeci">T dot(const boost::geometry::model::d2::point_xy&lt; T &gt; &amp;v1, const boost::geometry::model::d2::point_xy&lt; T &gt; &amp;v2)</div><div class="ttdef"><b>Definition</b> ExtrusionSimulator.cpp:143</div></div>
<div class="ttc" id="anamespaceigl_html_a6956b0660e4ee6448f77813e4bfdc871"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#a6956b0660e4ee6448f77813e4bfdc871">igl::edges</a></div><div class="ttdeci">IGL_INLINE void edges(const Eigen::MatrixBase&lt; DerivedF &gt; &amp;F, Eigen::PlainObjectBase&lt; DerivedE &gt; &amp;E)</div><div class="ttdef"><b>Definition</b> edges.cpp:13</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">marchsq::__impl::SquareTag::a</a></div><div class="ttdeci">@ a</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">marchsq::__impl::SquareTag::b</a></div><div class="ttdeci">@ b</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00112">Slic3r::angle()</a>, <a class="el" href="../../#l00064">Slic3r::Measure::MeasuringImpl::PlaneData::borders</a>, <a class="el" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a30954d90085f6eaaf5817917fc5fecb3">Slic3r::Measure::Circle</a>, <a class="el" href="../../#l00050">done</a>, <a class="el" href="../../#l00143">Slic3r::dot()</a>, <a class="el" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">Slic3r::Measure::Edge</a>, <a class="el" href="../../#l00012">Slic3r::f()</a>, <a class="el" href="../../#l00068">Slic3r::Measure::MeasuringImpl::PlaneData::features_extracted</a>, <a class="el" href="../../#l00019">Slic3r::Measure::get_center_and_radius()</a>, <a class="el" href="../../#l00539">Eigen::Transform&lt; double, 3, Eigen::Affine, Eigen::DontAlign &gt;::Identity()</a>, <a class="el" href="../../#l01202">Eigen::Transform&lt; _Scalar, _Dim, _Mode, _Options &gt;::inverse()</a>, <a class="el" href="../../#l00271">Slic3r::is_approx()</a>, <a class="el" href="../../#l00020">M_PI</a>, <a class="el" href="../../#l00081">m_planes</a>, <a class="el" href="../../#l00066">Slic3r::Measure::MeasuringImpl::PlaneData::normal</a>, <a class="el" href="../../#l00416">Slic3r::offset()</a>, <a class="el" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a0d3adee051531c15b3509b4d4d75ce7b">Slic3r::Measure::Plane</a>, <a class="el" href="../../d5/d00/group___geometry___module.html#a3ecd0773d4d2ccfd7cfc3e781e135385">Eigen::Transform&lt; _Scalar, _Dim, _Mode, _Options &gt;::rotate()</a>, <a class="el" href="../../#l00582">Eigen::QuaternionBase&lt; Derived &gt;::setFromTwoVectors()</a>, and <a class="el" href="../../#l00065">Slic3r::Measure::MeasuringImpl::PlaneData::surface_features</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00091">MeasuringImpl()</a>, <a class="el" href="../../#l00505">get_feature()</a>, and <a class="el" href="../../#l00576">get_plane_features()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl_af1965362c0ec3e9533c34493ba1eefaa_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl_af1965362c0ec3e9533c34493ba1eefaa_icgraph.svg" width="420" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae2bce2baa8075dfa14ac2ac7bfc0e807" name="ae2bce2baa8075dfa14ac2ac7bfc0e807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2bce2baa8075dfa14ac2ac7bfc0e807">&#9670;&#160;</a></span>get_feature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="../../d3/d11/class_slic3r_1_1_measure_1_1_surface_feature.html">SurfaceFeature</a> &gt; Slic3r::Measure::MeasuringImpl::get_feature </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>face_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  506</span>{</div>
<div class="line"><span class="lineno">  507</span>    <span class="keywordflow">if</span> (face_idx &gt;= <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>.size())</div>
<div class="line"><span class="lineno">  508</span>        <span class="keywordflow">return</span> std::optional&lt;SurfaceFeature&gt;();</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>    <span class="keyword">const</span> PlaneData&amp; plane = <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[face_idx]];</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordflow">if</span> (! plane.features_extracted)</div>
<div class="line"><span class="lineno">  513</span>        <a class="code hl_function" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#af1965362c0ec3e9533c34493ba1eefaa">extract_features</a>(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[face_idx]);</div>
<div class="line"><span class="lineno">  514</span>    </div>
<div class="line"><span class="lineno">  515</span>    <span class="keywordtype">size_t</span> closest_feature_idx = size_t(-1);</div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordtype">double</span> min_dist = std::numeric_limits&lt;double&gt;::max();</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>    MeasurementResult res;</div>
<div class="line"><span class="lineno">  519</span>    SurfaceFeature point_sf(point);</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    assert(plane.surface_features.empty() || plane.surface_features.back().get_type() == <a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a0d3adee051531c15b3509b4d4d75ce7b">SurfaceFeatureType::Plane</a>);</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i=0; i&lt;plane.surface_features.size() - 1; ++i) {</div>
<div class="line"><span class="lineno">  524</span>        <span class="comment">// The -1 is there to prevent measuring distance to the plane itself,</span></div>
<div class="line"><span class="lineno">  525</span>        <span class="comment">// which is needless and relatively expensive.</span></div>
<div class="line"><span class="lineno">  526</span>        res = <a class="code hl_function" href="../../d0/d61/namespace_slic3r_1_1_measure.html#af3b3c5392e5361637c1d8c9b6f156181">get_measurement</a>(plane.surface_features[i], point_sf);</div>
<div class="line"><span class="lineno">  527</span>        <span class="keywordflow">if</span> (res.distance_strict) { <span class="comment">// TODO: this should become an assert after all combinations are implemented.</span></div>
<div class="line"><span class="lineno">  528</span>            <span class="keywordtype">double</span> <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">dist</a> = res.distance_strict-&gt;dist;</div>
<div class="line"><span class="lineno">  529</span>            <span class="keywordflow">if</span> (dist &lt; <a class="code hl_variable" href="../../d0/d61/namespace_slic3r_1_1_measure.html#a19c42c824ccde9b5c79df34ac8620a56">feature_hover_limit</a> &amp;&amp; dist &lt; min_dist) {</div>
<div class="line"><span class="lineno">  530</span>                min_dist = std::min(dist, min_dist);</div>
<div class="line"><span class="lineno">  531</span>                closest_feature_idx = i;</div>
<div class="line"><span class="lineno">  532</span>            }</div>
<div class="line"><span class="lineno">  533</span>        }</div>
<div class="line"><span class="lineno">  534</span>    }</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>    <span class="keywordflow">if</span> (closest_feature_idx != <span class="keywordtype">size_t</span>(-1)) {</div>
<div class="line"><span class="lineno">  537</span>        <span class="keyword">const</span> SurfaceFeature&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> = plane.surface_features[closest_feature_idx];</div>
<div class="line"><span class="lineno">  538</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>.get_type() == <a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">SurfaceFeatureType::Edge</a>) {</div>
<div class="line"><span class="lineno">  539</span>            <span class="comment">// If this is an edge, check if we are not close to the endpoint. If so,</span></div>
<div class="line"><span class="lineno">  540</span>            <span class="comment">// we will include the endpoint as well. Close = 10% of the lenghth of</span></div>
<div class="line"><span class="lineno">  541</span>            <span class="comment">// the edge, clamped between 0.025 and 0.5 mm.</span></div>
<div class="line"><span class="lineno">  542</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; [sp, ep] = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>.get_edge();</div>
<div class="line"><span class="lineno">  543</span>            <span class="keywordtype">double</span> len_sq = (ep-sp).squaredNorm();</div>
<div class="line"><span class="lineno">  544</span>            <span class="keywordtype">double</span> limit_sq = std::max(0.025*0.025, std::min(0.5*0.5, 0.1 * 0.1 * len_sq));</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>            <span class="keywordflow">if</span> ((point-sp).squaredNorm() &lt; limit_sq)</div>
<div class="line"><span class="lineno">  547</span>                <span class="keywordflow">return</span> std::make_optional(SurfaceFeature(sp));</div>
<div class="line"><span class="lineno">  548</span>            <span class="keywordflow">if</span> ((point-ep).squaredNorm() &lt; limit_sq)</div>
<div class="line"><span class="lineno">  549</span>                <span class="keywordflow">return</span> std::make_optional(SurfaceFeature(ep));</div>
<div class="line"><span class="lineno">  550</span>        }</div>
<div class="line"><span class="lineno">  551</span>        <span class="keywordflow">return</span> std::make_optional(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno">  552</span>    }</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>    <span class="comment">// Nothing detected, return the plane as a whole.</span></div>
<div class="line"><span class="lineno">  555</span>    assert(plane.surface_features.back().get_type() == <a class="code hl_enumvalue" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a0d3adee051531c15b3509b4d4d75ce7b">SurfaceFeatureType::Plane</a>);</div>
<div class="line"><span class="lineno">  556</span>    <span class="keywordflow">return</span> std::make_optional(plane.surface_features.back());</div>
<div class="line"><span class="lineno">  557</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_measure_1_1_measuring_impl_html_a25d62a9a11c4d49e527c7086536a308d"><div class="ttname"><a href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">Slic3r::Measure::MeasuringImpl::m_face_to_plane</a></div><div class="ttdeci">std::vector&lt; size_t &gt; m_face_to_plane</div><div class="ttdef"><b>Definition</b> Measure.cpp:82</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_geometry_html_a2b2112c1026a31e7c4c00693ca0bc2e2"><div class="ttname"><a href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">Slic3r::Geometry::dist</a></div><div class="ttdeci">T dist(const boost::polygon::point_data&lt; T &gt; &amp;p1, const boost::polygon::point_data&lt; T &gt; &amp;p2)</div><div class="ttdef"><b>Definition</b> Geometry.cpp:280</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_measure_html_a19c42c824ccde9b5c79df34ac8620a56"><div class="ttname"><a href="../../d0/d61/namespace_slic3r_1_1_measure.html#a19c42c824ccde9b5c79df34ac8620a56">Slic3r::Measure::feature_hover_limit</a></div><div class="ttdeci">constexpr double feature_hover_limit</div><div class="ttdef"><b>Definition</b> Measure.cpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_measure_html_af3b3c5392e5361637c1d8c9b6f156181"><div class="ttname"><a href="../../d0/d61/namespace_slic3r_1_1_measure.html#af3b3c5392e5361637c1d8c9b6f156181">Slic3r::Measure::get_measurement</a></div><div class="ttdeci">MeasurementResult get_measurement(const SurfaceFeature &amp;a, const SurfaceFeature &amp;b, const Measuring *measuring)</div><div class="ttdef"><b>Definition</b> Measure.cpp:795</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00142">Slic3r::Measure::MeasurementResult::distance_strict</a>, <a class="el" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736ae4a297a0f76119a442c2595ac040673e">Slic3r::Measure::Edge</a>, <a class="el" href="../../#l00263">extract_features()</a>, <a class="el" href="../../#l00012">Slic3r::f()</a>, <a class="el" href="../../#l00017">Slic3r::Measure::feature_hover_limit</a>, <a class="el" href="../../#l00068">Slic3r::Measure::MeasuringImpl::PlaneData::features_extracted</a>, <a class="el" href="../../#l00795">Slic3r::Measure::get_measurement()</a>, <a class="el" href="../../#l00082">m_face_to_plane</a>, <a class="el" href="../../#l00081">m_planes</a>, <a class="el" href="../../d0/d61/namespace_slic3r_1_1_measure.html#afce4a9ced890635800872cb052f40736a0d3adee051531c15b3509b4d4d75ce7b">Slic3r::Measure::Plane</a>, and <a class="el" href="../../#l00065">Slic3r::Measure::MeasuringImpl::PlaneData::surface_features</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl_ae2bce2baa8075dfa14ac2ac7bfc0e807_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ab10349273ee352ad6f830d983eb115fb" name="ab10349273ee352ad6f830d983eb115fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab10349273ee352ad6f830d983eb115fb">&#9670;&#160;</a></span>get_mesh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html">TriangleMesh</a> &amp; Slic3r::Measure::MeasuringImpl::get_mesh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  585</span>{</div>
<div class="line"><span class="lineno">  586</span>    <span class="keywordflow">return</span> this-&gt;<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a29d730ceaf262c93d0bfbf894f00748e">m_mesh</a>;</div>
<div class="line"><span class="lineno">  587</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00083">m_mesh</a>.</p>

</div>
</div>
<a id="ad95ba14756eff1f52de33518d01cd732" name="ad95ba14756eff1f52de33518d01cd732"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad95ba14756eff1f52de33518d01cd732">&#9670;&#160;</a></span>get_num_of_planes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Slic3r::Measure::MeasuringImpl::get_num_of_planes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  564</span>{</div>
<div class="line"><span class="lineno">  565</span>    <span class="keywordflow">return</span> (<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.size());</div>
<div class="line"><span class="lineno">  566</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00081">m_planes</a>.</p>

</div>
</div>
<a id="aa615c66ac91adef24d173a84b9f310aa" name="aa615c66ac91adef24d173a84b9f310aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa615c66ac91adef24d173a84b9f310aa">&#9670;&#160;</a></span>get_plane_features()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../d3/d11/class_slic3r_1_1_measure_1_1_surface_feature.html">SurfaceFeature</a> &gt; &amp; Slic3r::Measure::MeasuringImpl::get_plane_features </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>plane_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  577</span>{</div>
<div class="line"><span class="lineno">  578</span>    assert(plane_id &lt; <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.size());</div>
<div class="line"><span class="lineno">  579</span>    <span class="keywordflow">if</span> (! <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_id].features_extracted)</div>
<div class="line"><span class="lineno">  580</span>        <a class="code hl_function" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#af1965362c0ec3e9533c34493ba1eefaa">extract_features</a>(plane_id);</div>
<div class="line"><span class="lineno">  581</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_id].surface_features;</div>
<div class="line"><span class="lineno">  582</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00263">extract_features()</a>, and <a class="el" href="../../#l00081">m_planes</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl_aa615c66ac91adef24d173a84b9f310aa_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a655ee27b260792986b100a1b1286fa57" name="a655ee27b260792986b100a1b1286fa57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a655ee27b260792986b100a1b1286fa57">&#9670;&#160;</a></span>get_plane_triangle_indices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; int &gt; &amp; Slic3r::Measure::MeasuringImpl::get_plane_triangle_indices </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  571</span>{</div>
<div class="line"><span class="lineno">  572</span>    assert(idx &gt;= 0 &amp;&amp; idx &lt; <span class="keywordtype">int</span>(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.size()));</div>
<div class="line"><span class="lineno">  573</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[idx].facets;</div>
<div class="line"><span class="lineno">  574</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00081">m_planes</a>.</p>

</div>
</div>
<a id="a2aefaad4287f2d0d2abe29ee06ba36eb" name="a2aefaad4287f2d0d2abe29ee06ba36eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aefaad4287f2d0d2abe29ee06ba36eb">&#9670;&#160;</a></span>update_planes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::Measure::MeasuringImpl::update_planes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  106</span>{</div>
<div class="line"><span class="lineno">  107</span>    <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.clear();</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    <span class="comment">// Now we&#39;ll go through all the facets and append Points of facets sharing the same normal.</span></div>
<div class="line"><span class="lineno">  110</span>    <span class="comment">// This part is still performed in mesh coordinate system.</span></div>
<div class="line"><span class="lineno">  111</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span>             num_of_facets = <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a29d730ceaf262c93d0bfbf894f00748e">m_mesh</a>.<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html#a4f6c95f0898db4530266a7b3387e39ea">its</a>.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.size();</div>
<div class="line"><span class="lineno">  112</span>    <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>.resize(num_of_facets, <span class="keywordtype">size_t</span>(-1));</div>
<div class="line"><span class="lineno">  113</span>    <span class="keyword">const</span> std::vector&lt;Vec3f&gt; face_normals = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aa0e82dc812b1c5f4bebe93939907c565">its_face_normals</a>(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a29d730ceaf262c93d0bfbf894f00748e">m_mesh</a>.<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html#a4f6c95f0898db4530266a7b3387e39ea">its</a>);</div>
<div class="line"><span class="lineno">  114</span>    <span class="keyword">const</span> std::vector&lt;Vec3i&gt; face_neighbors = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aef08faf778cfd02ade987cac407ab039">its_face_neighbors</a>(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a29d730ceaf262c93d0bfbf894f00748e">m_mesh</a>.<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html#a4f6c95f0898db4530266a7b3387e39ea">its</a>);</div>
<div class="line"><span class="lineno">  115</span>    std::vector&lt;int&gt;         facet_queue(num_of_facets, 0);</div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordtype">int</span>                      facet_queue_cnt = 0;</div>
<div class="line"><span class="lineno">  117</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">stl_normal</a>*        normal_ptr      = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordtype">size_t</span> seed_facet_idx = 0;</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    <span class="keyword">auto</span> is_same_normal = [](<span class="keyword">const</span> <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">stl_normal</a>&amp; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a>, <span class="keyword">const</span> <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">stl_normal</a>&amp; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">return</span> (std::abs(<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a>(0) - <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>(0)) &lt; 0.001 &amp;&amp; std::abs(<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a>(1) - <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>(1)) &lt; 0.001 &amp;&amp; std::abs(<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a>(2) - <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>(2)) &lt; 0.001);</div>
<div class="line"><span class="lineno">  122</span>    };</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    <span class="comment">// First go through all the triangles and fill in m_planes vector. For each &quot;plane&quot;</span></div>
<div class="line"><span class="lineno">  125</span>    <span class="comment">// detected on the model, it will contain list of facets that are part of it.</span></div>
<div class="line"><span class="lineno">  126</span>    <span class="comment">// We will also fill in m_face_to_plane, which contains index into m_planes</span></div>
<div class="line"><span class="lineno">  127</span>    <span class="comment">// for each of the source facets.</span></div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><span class="lineno">  129</span>        <span class="comment">// Find next unvisited triangle:</span></div>
<div class="line"><span class="lineno">  130</span>        <span class="keywordflow">for</span> (; seed_facet_idx &lt; num_of_facets; ++ seed_facet_idx)</div>
<div class="line"><span class="lineno">  131</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[seed_facet_idx] == <span class="keywordtype">size_t</span>(-1)) {</div>
<div class="line"><span class="lineno">  132</span>                facet_queue[facet_queue_cnt ++] = seed_facet_idx;</div>
<div class="line"><span class="lineno">  133</span>                normal_ptr = &amp;face_normals[seed_facet_idx];</div>
<div class="line"><span class="lineno">  134</span>                <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[seed_facet_idx] = <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.size();</div>
<div class="line"><span class="lineno">  135</span>                <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.emplace_back();                </div>
<div class="line"><span class="lineno">  136</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  137</span>            }</div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">if</span> (seed_facet_idx == num_of_facets)</div>
<div class="line"><span class="lineno">  139</span>            <span class="keywordflow">break</span>; <span class="comment">// Everything was visited already</span></div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">while</span> (facet_queue_cnt &gt; 0) {</div>
<div class="line"><span class="lineno">  142</span>            <span class="keywordtype">int</span> facet_idx = facet_queue[-- facet_queue_cnt];</div>
<div class="line"><span class="lineno">  143</span>            <span class="keyword">const</span> <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">stl_normal</a>&amp; this_normal = face_normals[facet_idx];</div>
<div class="line"><span class="lineno">  144</span>            <span class="keywordflow">if</span> (is_same_normal(this_normal, *normal_ptr)) {</div>
<div class="line"><span class="lineno">  145</span><span class="comment">//                const Vec3i&amp; face = m_its.indices[facet_idx];</span></div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>                <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[facet_idx] = <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.size() - 1;</div>
<div class="line"><span class="lineno">  148</span>                <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.back().facets.emplace_back(facet_idx);</div>
<div class="line"><span class="lineno">  149</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 3; ++ j)</div>
<div class="line"><span class="lineno">  150</span>                    <span class="keywordflow">if</span> (<span class="keywordtype">int</span> neighbor_idx = face_neighbors[facet_idx][j]; neighbor_idx &gt;= 0 &amp;&amp; <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[neighbor_idx] == size_t(-1))</div>
<div class="line"><span class="lineno">  151</span>                        facet_queue[facet_queue_cnt ++] = neighbor_idx;</div>
<div class="line"><span class="lineno">  152</span>            }</div>
<div class="line"><span class="lineno">  153</span>        }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.back().normal = normal_ptr-&gt;cast&lt;<span class="keywordtype">double</span>&gt;();</div>
<div class="line"><span class="lineno">  156</span>        std::sort(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.back().facets.begin(), <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.back().facets.end());</div>
<div class="line"><span class="lineno">  157</span>    }</div>
<div class="line"><span class="lineno">  158</span>    </div>
<div class="line"><span class="lineno">  159</span>    <span class="comment">// Check that each facet is part of one of the planes.</span></div>
<div class="line"><span class="lineno">  160</span>    assert(std::none_of(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>.begin(), <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>.end(), [](<span class="keywordtype">size_t</span> val) { return val == size_t(-1); }));</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="comment">// Now we will walk around each of the planes and save vertices which form the border.</span></div>
<div class="line"><span class="lineno">  163</span>    SurfaceMesh sm(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a29d730ceaf262c93d0bfbf894f00748e">m_mesh</a>.<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html#a4f6c95f0898db4530266a7b3387e39ea">its</a>);</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> plane_id=0; plane_id &lt; int(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>.size()); ++plane_id) {</div>
<div class="line"><span class="lineno">  165</span>        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; facets = <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_id].facets;</div>
<div class="line"><span class="lineno">  166</span>        <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_id].borders.clear();</div>
<div class="line"><span class="lineno">  167</span>        std::vector&lt;std::array&lt;bool, 3&gt;&gt; visited(facets.size(), {false, false, false});</div>
<div class="line"><span class="lineno">  168</span>        </div>
<div class="line"><span class="lineno">  169</span>        </div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face_id=0; face_id&lt;int(facets.size()); ++face_id) {</div>
<div class="line"><span class="lineno">  172</span>            assert(<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[facets[face_id]] == plane_id);</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> edge_id=0; edge_id&lt;3; ++edge_id) {</div>
<div class="line"><span class="lineno">  175</span>                <span class="comment">// Every facet&#39;s edge which has a neighbor from a different plane is</span></div>
<div class="line"><span class="lineno">  176</span>                <span class="comment">// part of an edge that we want to walk around. Skip the others.</span></div>
<div class="line"><span class="lineno">  177</span>                <span class="keywordtype">int</span> neighbor_idx = face_neighbors[facets[face_id]][edge_id];</div>
<div class="line"><span class="lineno">  178</span>                <span class="keywordflow">if</span> (neighbor_idx == -1)</div>
<div class="line"><span class="lineno">  179</span>                    <span class="keywordflow">goto</span> PLANE_FAILURE;</div>
<div class="line"><span class="lineno">  180</span>                <span class="keywordflow">if</span> (visited[face_id][edge_id] || (<span class="keywordtype">int</span>)<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[neighbor_idx] == plane_id) {</div>
<div class="line"><span class="lineno">  181</span>                    visited[face_id][edge_id] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  182</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  183</span>                }</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>                Halfedge_index he = sm.halfedge(Face_index(facets[face_id]));</div>
<div class="line"><span class="lineno">  186</span>                <span class="keywordflow">while</span> (he.side() != edge_id)</div>
<div class="line"><span class="lineno">  187</span>                    he = sm.next(he);</div>
<div class="line"><span class="lineno">  188</span>            </div>
<div class="line"><span class="lineno">  189</span>                <span class="comment">// he is the first halfedge on the border. Now walk around and append the points.</span></div>
<div class="line"><span class="lineno">  190</span>                <span class="comment">//const Halfedge_index he_orig = he;</span></div>
<div class="line"><span class="lineno">  191</span>                <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_id].borders.emplace_back();</div>
<div class="line"><span class="lineno">  192</span>                std::vector&lt;Vec3d&gt;&amp; last_border = <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_id].borders.back();</div>
<div class="line"><span class="lineno">  193</span>                last_border.emplace_back(sm.point(sm.source(he)).cast&lt;<span class="keywordtype">double</span>&gt;());</div>
<div class="line"><span class="lineno">  194</span>                <span class="comment">//Vertex_index target = sm.target(he);</span></div>
<div class="line"><span class="lineno">  195</span>                <span class="keyword">const</span> Halfedge_index he_start = he;</div>
<div class="line"><span class="lineno">  196</span>                </div>
<div class="line"><span class="lineno">  197</span>                Face_index fi = he.face();</div>
<div class="line"><span class="lineno">  198</span>                <span class="keyword">auto</span> face_it = std::lower_bound(facets.begin(), facets.end(), <span class="keywordtype">int</span>(fi));</div>
<div class="line"><span class="lineno">  199</span>                assert(face_it != facets.end());</div>
<div class="line"><span class="lineno">  200</span>                assert(*face_it == <span class="keywordtype">int</span>(fi));</div>
<div class="line"><span class="lineno">  201</span>                visited[face_it - facets.begin()][he.side()] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>                <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">  204</span>                    <span class="keyword">const</span> Halfedge_index he_orig = he;</div>
<div class="line"><span class="lineno">  205</span>                    he = sm.next_around_target(he);</div>
<div class="line"><span class="lineno">  206</span>                    <span class="keywordflow">if</span> (he.is_invalid())</div>
<div class="line"><span class="lineno">  207</span>                        <span class="keywordflow">goto</span> PLANE_FAILURE;</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>                    <span class="comment">// For broken meshes, the iteration might never get back to he_orig.</span></div>
<div class="line"><span class="lineno">  210</span>                    <span class="comment">// Remember all halfedges we saw to break out of such infinite loops.</span></div>
<div class="line"><span class="lineno">  211</span>                    boost::container::small_vector&lt;Halfedge_index, 10&gt; he_seen;</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>                    <span class="keywordflow">while</span> ( (<span class="keywordtype">int</span>)<a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#a25d62a9a11c4d49e527c7086536a308d">m_face_to_plane</a>[sm.face(he)] == plane_id &amp;&amp; he != he_orig) {</div>
<div class="line"><span class="lineno">  214</span>                        he_seen.emplace_back(he);</div>
<div class="line"><span class="lineno">  215</span>                        he = sm.next_around_target(he);</div>
<div class="line"><span class="lineno">  216</span>                        <span class="keywordflow">if</span> (he.is_invalid() || std::find(he_seen.begin(), he_seen.end(), he) != he_seen.end())</div>
<div class="line"><span class="lineno">  217</span>                            <span class="keywordflow">goto</span> PLANE_FAILURE;</div>
<div class="line"><span class="lineno">  218</span>                    }</div>
<div class="line"><span class="lineno">  219</span>                    he = sm.opposite(he);</div>
<div class="line"><span class="lineno">  220</span>                    <span class="keywordflow">if</span> (he.is_invalid())</div>
<div class="line"><span class="lineno">  221</span>                        <span class="keywordflow">goto</span> PLANE_FAILURE;</div>
<div class="line"><span class="lineno">  222</span>                    </div>
<div class="line"><span class="lineno">  223</span>                    Face_index fi = he.face();</div>
<div class="line"><span class="lineno">  224</span>                    <span class="keyword">auto</span> face_it = std::lower_bound(facets.begin(), facets.end(), <span class="keywordtype">int</span>(fi));</div>
<div class="line"><span class="lineno">  225</span>                    <span class="keywordflow">if</span> (face_it == facets.end() || *face_it != <span class="keywordtype">int</span>(fi)) <span class="comment">// This indicates a broken mesh.</span></div>
<div class="line"><span class="lineno">  226</span>                        <span class="keywordflow">goto</span> PLANE_FAILURE;</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>                    <span class="keywordflow">if</span> (visited[face_it - facets.begin()][he.side()] &amp;&amp; he != he_start) {</div>
<div class="line"><span class="lineno">  229</span>                        last_border.resize(1);</div>
<div class="line"><span class="lineno">  230</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  231</span>                    }</div>
<div class="line"><span class="lineno">  232</span>                    visited[face_it - facets.begin()][he.side()] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>                    last_border.emplace_back(sm.point(sm.source(he)).cast&lt;<span class="keywordtype">double</span>&gt;());</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>                    <span class="comment">// In case of broken meshes, this loop might be infinite. Break</span></div>
<div class="line"><span class="lineno">  237</span>                    <span class="comment">// out in case it is clearly going bad.</span></div>
<div class="line"><span class="lineno">  238</span>                    <span class="keywordflow">if</span> (last_border.size() &gt; 3*facets.size()+1)</div>
<div class="line"><span class="lineno">  239</span>                        <span class="keywordflow">goto</span> PLANE_FAILURE;</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>                } <span class="keywordflow">while</span> (he != he_start);</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>                <span class="keywordflow">if</span> (last_border.size() == 1)</div>
<div class="line"><span class="lineno">  244</span>                    <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_id].borders.pop_back();</div>
<div class="line"><span class="lineno">  245</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  246</span>                    assert(last_border.front() == last_border.back());</div>
<div class="line"><span class="lineno">  247</span>                    last_border.pop_back();</div>
<div class="line"><span class="lineno">  248</span>                }</div>
<div class="line"><span class="lineno">  249</span>            }</div>
<div class="line"><span class="lineno">  250</span>        }</div>
<div class="line"><span class="lineno">  251</span>        <span class="keywordflow">continue</span>; <span class="comment">// There was no failure.</span></div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>        PLANE_FAILURE:</div>
<div class="line"><span class="lineno">  254</span>            <a class="code hl_variable" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#acbd493b37cb9d2338b1219699c2ac0f1">m_planes</a>[plane_id].borders.clear();</div>
<div class="line"><span class="lineno">  255</span>    }</div>
<div class="line"><span class="lineno">  256</span>}</div>
<div class="ttc" id="aclass_eigen_1_1_matrix_html"><div class="ttname"><a href="../../d2/d2d/class_eigen_1_1_matrix.html">Eigen::Matrix&lt; float, 3, 1, Eigen::DontAlign &gt;</a></div></div>
<div class="ttc" id="aclass_slic3r_1_1_triangle_mesh_html_a4f6c95f0898db4530266a7b3387e39ea"><div class="ttname"><a href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html#a4f6c95f0898db4530266a7b3387e39ea">Slic3r::TriangleMesh::its</a></div><div class="ttdeci">indexed_triangle_set its</div><div class="ttdef"><b>Definition</b> TriangleMesh.hpp:155</div></div>
<div class="ttc" id="anamespace_slic3r_html_aa0e82dc812b1c5f4bebe93939907c565"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aa0e82dc812b1c5f4bebe93939907c565">Slic3r::its_face_normals</a></div><div class="ttdeci">std::vector&lt; Vec3f &gt; its_face_normals(const indexed_triangle_set &amp;its)</div><div class="ttdef"><b>Definition</b> TriangleMesh.cpp:1530</div></div>
<div class="ttc" id="anamespace_slic3r_html_aef08faf778cfd02ade987cac407ab039"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aef08faf778cfd02ade987cac407ab039">Slic3r::its_face_neighbors</a></div><div class="ttdeci">std::vector&lt; Vec3i &gt; its_face_neighbors(const indexed_triangle_set &amp;its)</div><div class="ttdef"><b>Definition</b> TriangleMesh.cpp:1520</div></div>
<div class="ttc" id="astructindexed__triangle__set_html_a8e9771f92d4834e98a5ed13f131d71f6"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indexed_triangle_set::indices</a></div><div class="ttdeci">std::vector&lt; stl_triangle_vertex_indices &gt; indices</div><div class="ttdef"><b>Definition</b> stl.h:164</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00022">Slic3r::Halfedge_index::face()</a>, <a class="el" href="../../#l00065">Slic3r::SurfaceMesh::face()</a>, <a class="el" href="../../#l00069">Slic3r::SurfaceMesh::halfedge()</a>, <a class="el" href="../../#l00164">indexed_triangle_set::indices</a>, <a class="el" href="../../#l00024">Slic3r::Halfedge_index::is_invalid()</a>, <a class="el" href="../../#l00155">Slic3r::TriangleMesh::its</a>, <a class="el" href="../../#l01520">Slic3r::its_face_neighbors()</a>, <a class="el" href="../../#l01530">Slic3r::its_face_normals()</a>, <a class="el" href="../../#l00082">m_face_to_plane</a>, <a class="el" href="../../#l00083">m_mesh</a>, <a class="el" href="../../#l00081">m_planes</a>, <a class="el" href="../../#l00067">Slic3r::SurfaceMesh::next()</a>, <a class="el" href="../../#l00092">Slic3r::SurfaceMesh::next_around_target()</a>, <a class="el" href="../../#l00071">Slic3r::SurfaceMesh::opposite()</a>, <a class="el" href="../../#l00116">Slic3r::SurfaceMesh::point()</a>, <a class="el" href="../../#l00023">Slic3r::Halfedge_index::side()</a>, and <a class="el" href="../../#l00063">Slic3r::SurfaceMesh::source()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00091">MeasuringImpl()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl_a2aefaad4287f2d0d2abe29ee06ba36eb_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl_a2aefaad4287f2d0d2abe29ee06ba36eb_icgraph.svg" width="420" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a25d62a9a11c4d49e527c7086536a308d" name="a25d62a9a11c4d49e527c7086536a308d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d62a9a11c4d49e527c7086536a308d">&#9670;&#160;</a></span>m_face_to_plane</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;size_t&gt; Slic3r::Measure::MeasuringImpl::m_face_to_plane</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00505">get_feature()</a>, and <a class="el" href="../../#l00105">update_planes()</a>.</p>

</div>
</div>
<a id="a29d730ceaf262c93d0bfbf894f00748e" name="a29d730ceaf262c93d0bfbf894f00748e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29d730ceaf262c93d0bfbf894f00748e">&#9670;&#160;</a></span>m_mesh</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d71/class_slic3r_1_1_triangle_mesh.html">TriangleMesh</a> Slic3r::Measure::MeasuringImpl::m_mesh</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00584">get_mesh()</a>, and <a class="el" href="../../#l00105">update_planes()</a>.</p>

</div>
</div>
<a id="acbd493b37cb9d2338b1219699c2ac0f1" name="acbd493b37cb9d2338b1219699c2ac0f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbd493b37cb9d2338b1219699c2ac0f1">&#9670;&#160;</a></span>m_planes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html#d1/d18/struct_slic3r_1_1_measure_1_1_measuring_impl_1_1_plane_data">PlaneData</a>&gt; Slic3r::Measure::MeasuringImpl::m_planes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00091">MeasuringImpl()</a>, <a class="el" href="../../#l00263">extract_features()</a>, <a class="el" href="../../#l00505">get_feature()</a>, <a class="el" href="../../#l00563">get_num_of_planes()</a>, <a class="el" href="../../#l00576">get_plane_features()</a>, <a class="el" href="../../#l00570">get_plane_triangle_indices()</a>, and <a class="el" href="../../#l00105">update_planes()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/libslic3r/<a class="el" href="../../">Measure.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d0/d61/namespace_slic3r_1_1_measure.html">Measure</a></li><li class="navelem"><a class="el" href="../../d8/d71/class_slic3r_1_1_measure_1_1_measuring_impl.html">MeasuringImpl</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
