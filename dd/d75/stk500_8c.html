<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: src/avrdude/stk500.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dd/d75/stk500_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">stk500.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../">ac_cfg.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../">unistd.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../">avrdude.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../">libavrdude.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../">stk500.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../">stk500_private.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for stk500.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/dcc/stk500_8c__incl.svg" width="100%" height="493"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d63/structpdata.html">pdata</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af4ab65a2a5ace2cfa5f6cf059cf3fa1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a>&#160;&#160;&#160;7372800U</td></tr>
<tr class="separator:af4ab65a2a5ace2cfa5f6cf059cf3fa1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe0ef2faddd254a4f5a856d2d62886e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#acbe0ef2faddd254a4f5a856d2d62886e">MAX_SYNC_ATTEMPTS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:acbe0ef2faddd254a4f5a856d2d62886e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee902f4e72c2cd5b500d8f578f301ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a3ee902f4e72c2cd5b500d8f578f301ef">PDATA</a>(<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)&#160;&#160;&#160;((struct <a class="el" href="../../d0/d63/structpdata.html">pdata</a> *)(<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;cookie))</td></tr>
<tr class="separator:a3ee902f4e72c2cd5b500d8f578f301ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab25648b307fdbeb557f39c84d46f435b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, unsigned parm, unsigned *value)</td></tr>
<tr class="separator:ab25648b307fdbeb557f39c84d46f435b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4b6d230e6f598260a9ffef5dd5e05ce"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#ac4b6d230e6f598260a9ffef5dd5e05ce">stk500_setparm</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, unsigned parm, unsigned value)</td></tr>
<tr class="separator:ac4b6d230e6f598260a9ffef5dd5e05ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2df66b3921bc61af8cc7eb38cac4578f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a2df66b3921bc61af8cc7eb38cac4578f">stk500_print_parms1</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *p)</td></tr>
<tr class="separator:a2df66b3921bc61af8cc7eb38cac4578f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ac3e55b50b80cbc2629dc7389baef7d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, unsigned char *buf, size_t len)</td></tr>
<tr class="separator:a2ac3e55b50b80cbc2629dc7389baef7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a734ff0eda72916fd20e24d6d10d65ec1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, unsigned char *buf, size_t len)</td></tr>
<tr class="separator:a734ff0eda72916fd20e24d6d10d65ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3dab073187d6ee897f529939ccdf918"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#ac3dab073187d6ee897f529939ccdf918">stk500_drain</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, int display)</td></tr>
<tr class="separator:ac3dab073187d6ee897f529939ccdf918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecacdb47e304260e938679b5fd1d0aaa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)</td></tr>
<tr class="separator:aecacdb47e304260e938679b5fd1d0aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2abe22deba0cd804f530766b8cdd49bb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a2abe22deba0cd804f530766b8cdd49bb">stk500_cmd</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned char *<a class="el" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>, unsigned char *res)</td></tr>
<tr class="separator:a2abe22deba0cd804f530766b8cdd49bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a9f5551fd1bae8626a36062ff22f07"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a15a9f5551fd1bae8626a36062ff22f07">stk500_chip_erase</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *p)</td></tr>
<tr class="separator:a15a9f5551fd1bae8626a36062ff22f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5343cc46d394a9a3d2201efaf843be9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#ac5343cc46d394a9a3d2201efaf843be9">stk500_program_enable</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *p)</td></tr>
<tr class="separator:ac5343cc46d394a9a3d2201efaf843be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a547fc67e683b766f3f555aae3d595edb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a547fc67e683b766f3f555aae3d595edb">stk500_set_extended_parms</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, int n, unsigned char *<a class="el" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>)</td></tr>
<tr class="separator:a547fc67e683b766f3f555aae3d595edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa83a7555c8d3fe4737d85c19fc791cfe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#aa83a7555c8d3fe4737d85c19fc791cfe">mib510_isp</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, unsigned char <a class="el" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>)</td></tr>
<tr class="separator:aa83a7555c8d3fe4737d85c19fc791cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1647ffcfad8694c0d80f77c0b9716832"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a1647ffcfad8694c0d80f77c0b9716832">stk500_initialize</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *p)</td></tr>
<tr class="separator:a1647ffcfad8694c0d80f77c0b9716832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43870bafd518cb34259c6b8f26b17069"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a43870bafd518cb34259c6b8f26b17069">stk500_disable</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)</td></tr>
<tr class="separator:a43870bafd518cb34259c6b8f26b17069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6f35accd0a7bf3311f6a9e8ecb5ccf3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#af6f35accd0a7bf3311f6a9e8ecb5ccf3">stk500_enable</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)</td></tr>
<tr class="separator:af6f35accd0a7bf3311f6a9e8ecb5ccf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd7f21b0cfd1cba6cc45be0ffc547d8a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#afd7f21b0cfd1cba6cc45be0ffc547d8a">stk500_open</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, char *port)</td></tr>
<tr class="separator:afd7f21b0cfd1cba6cc45be0ffc547d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e819c9762657bdfc47d63bfadd41bc4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a9e819c9762657bdfc47d63bfadd41bc4">stk500_close</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)</td></tr>
<tr class="separator:a9e819c9762657bdfc47d63bfadd41bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342f176ade131a188ce2071a9462fddd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a342f176ade131a188ce2071a9462fddd">stk500_loadaddr</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *mem, unsigned int addr)</td></tr>
<tr class="separator:a342f176ade131a188ce2071a9462fddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad12e8ab66293ed0394718e6e805755d0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#ad12e8ab66293ed0394718e6e805755d0">stk500_paged_write</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *p, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *m, unsigned int page_size, unsigned int addr, unsigned int n_bytes)</td></tr>
<tr class="separator:ad12e8ab66293ed0394718e6e805755d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a041d15ca91f86e8785ea07c78c871997"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a041d15ca91f86e8785ea07c78c871997">stk500_paged_load</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *p, <a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *m, unsigned int page_size, unsigned int addr, unsigned int n_bytes)</td></tr>
<tr class="separator:a041d15ca91f86e8785ea07c78c871997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a212ec192515d105d2f2239a36c907c85"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a212ec192515d105d2f2239a36c907c85">stk500_set_vtarget</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, double v)</td></tr>
<tr class="separator:a212ec192515d105d2f2239a36c907c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f029846508974fd9bf14cb7d4144096"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a7f029846508974fd9bf14cb7d4144096">stk500_set_varef</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, unsigned int chan, double v)</td></tr>
<tr class="separator:a7f029846508974fd9bf14cb7d4144096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ec1baef2c10142b5e963d469bd01877"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a9ec1baef2c10142b5e963d469bd01877">stk500_set_fosc</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, double v)</td></tr>
<tr class="separator:a9ec1baef2c10142b5e963d469bd01877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a668b2ae491cb226fe45ab2b0fa2ecd97"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a668b2ae491cb226fe45ab2b0fa2ecd97">stk500_set_sck_period</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, double v)</td></tr>
<tr class="separator:a668b2ae491cb226fe45ab2b0fa2ecd97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e0432d1156876a3109874f01415ff4c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a4e0432d1156876a3109874f01415ff4c">stk500_display</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *p)</td></tr>
<tr class="separator:a4e0432d1156876a3109874f01415ff4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a3f98c6b3923b91c0059c9144f38221"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a9a3f98c6b3923b91c0059c9144f38221">stk500_print_parms</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)</td></tr>
<tr class="separator:a9a3f98c6b3923b91c0059c9144f38221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaddcb15fd8c515d15d6a38724ef936de"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#aaddcb15fd8c515d15d6a38724ef936de">stk500_setup</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)</td></tr>
<tr class="separator:aaddcb15fd8c515d15d6a38724ef936de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3107e77db1884af8d818f8b060f1149"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#ae3107e77db1884af8d818f8b060f1149">stk500_teardown</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)</td></tr>
<tr class="separator:ae3107e77db1884af8d818f8b060f1149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b95471cba97fa400381cf216fbfc16b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a0b95471cba97fa400381cf216fbfc16b">stk500_initpgm</a> (<a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)</td></tr>
<tr class="separator:a0b95471cba97fa400381cf216fbfc16b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a856d323b148974c4fe42dc1d0815974b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/stk500_8c.html#a856d323b148974c4fe42dc1d0815974b">stk500_desc</a> [] = &quot;Atmel STK500 Version 1.x firmware&quot;</td></tr>
<tr class="separator:a856d323b148974c4fe42dc1d0815974b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="acbe0ef2faddd254a4f5a856d2d62886e" name="acbe0ef2faddd254a4f5a856d2d62886e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbe0ef2faddd254a4f5a856d2d62886e">&#9670;&#160;</a></span>MAX_SYNC_ATTEMPTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SYNC_ATTEMPTS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ee902f4e72c2cd5b500d8f578f301ef" name="a3ee902f4e72c2cd5b500d8f578f301ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee902f4e72c2cd5b500d8f578f301ef">&#9670;&#160;</a></span>PDATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PDATA</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a></td><td>)</td>
          <td>&#160;&#160;&#160;((struct <a class="el" href="../../d0/d63/structpdata.html">pdata</a> *)(<a class="el" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;cookie))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af4ab65a2a5ace2cfa5f6cf059cf3fa1e" name="af4ab65a2a5ace2cfa5f6cf059cf3fa1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">&#9670;&#160;</a></span>STK500_XTAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STK500_XTAL&#160;&#160;&#160;7372800U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa83a7555c8d3fe4737d85c19fc791cfe" name="aa83a7555c8d3fe4737d85c19fc791cfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa83a7555c8d3fe4737d85c19fc791cfe">&#9670;&#160;</a></span>mib510_isp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mib510_isp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  343</span>{</div>
<div class="line"><span class="lineno">  344</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[9];</div>
<div class="line"><span class="lineno">  345</span>  <span class="keywordtype">int</span> tries = 0;</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>  buf[0] = 0xaa;</div>
<div class="line"><span class="lineno">  348</span>  buf[1] = 0x55;</div>
<div class="line"><span class="lineno">  349</span>  buf[2] = 0x55;</div>
<div class="line"><span class="lineno">  350</span>  buf[3] = 0xaa;</div>
<div class="line"><span class="lineno">  351</span>  buf[4] = 0x17;</div>
<div class="line"><span class="lineno">  352</span>  buf[5] = 0x51;</div>
<div class="line"><span class="lineno">  353</span>  buf[6] = 0x31;</div>
<div class="line"><span class="lineno">  354</span>  buf[7] = 0x13;</div>
<div class="line"><span class="lineno">  355</span>  buf[8] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>;</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span> retry:</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>  tries++;</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 9);</div>
<div class="line"><span class="lineno">  363</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  364</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  365</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno">  367</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: mib510_isp(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno">  368</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  369</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  370</span>    }</div>
<div class="line"><span class="lineno">  371</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  372</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  373</span>    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  374</span>  }</div>
<div class="line"><span class="lineno">  375</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  376</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: mib510_isp(): protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  377</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  378</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  380</span>  }</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  383</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  384</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  385</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  386</span>  }</div>
<div class="line"><span class="lineno">  387</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aae26e63a8af382bd3c0adcf7ca75f9f0">Resp_STK_NODEVICE</a>) {</div>
<div class="line"><span class="lineno">  388</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: mib510_isp(): no device\n&quot;</span>,</div>
<div class="line"><span class="lineno">  389</span>            <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  390</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  391</span>  }</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#abc9a3c8f942074fa87146a245075799a">Resp_STK_FAILED</a>)</div>
<div class="line"><span class="lineno">  394</span>  {</div>
<div class="line"><span class="lineno">  395</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: mib510_isp(): command %d failed\n&quot;</span>,</div>
<div class="line"><span class="lineno">  396</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>);</div>
<div class="line"><span class="lineno">  397</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  398</span>  }</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: mib510_isp(): unknown response=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  402</span>          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, buf[0]);</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  405</span>}</div>
<div class="ttc" id="aavrdude_8h_html_a1ddcc97224a95cec04b38b0ac866fa19"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a></div><div class="ttdeci">#define MSG_INFO</div><div class="ttdef"><b>Definition</b> avrdude.h:51</div></div>
<div class="ttc" id="aavrdude_8h_html_ab9e1449fd00c98428516f0b41eddcb10"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a></div><div class="ttdeci">char * progname</div><div class="ttdef"><b>Definition</b> main.c:61</div></div>
<div class="ttc" id="aavrdude_8h_html_ae3011b9c6440c863e64eed3fed5106e3"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a></div><div class="ttdeci">int avrdude_message(const int msglvl, const char *format,...)</div><div class="ttdef"><b>Definition</b> main.c:93</div></div>
<div class="ttc" id="amain_8c_html_a5dce38ae4dc703c88d229316a6a00dee"><div class="ttname"><a href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a></div><div class="ttdeci">static PROGRAMMER * pgm</div><div class="ttdef"><b>Definition</b> main.c:192</div></div>
<div class="ttc" id="astk500_8c_html_a2ac3e55b50b80cbc2629dc7389baef7d"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a></div><div class="ttdeci">static int stk500_send(PROGRAMMER *pgm, unsigned char *buf, size_t len)</div><div class="ttdef"><b>Definition</b> stk500.c:62</div></div>
<div class="ttc" id="astk500_8c_html_a734ff0eda72916fd20e24d6d10d65ec1"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a></div><div class="ttdeci">static int stk500_recv(PROGRAMMER *pgm, unsigned char *buf, size_t len)</div><div class="ttdef"><b>Definition</b> stk500.c:68</div></div>
<div class="ttc" id="astk500_8c_html_aecacdb47e304260e938679b5fd1d0aaa"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a></div><div class="ttdeci">int stk500_getsync(PROGRAMMER *pgm)</div><div class="ttdef"><b>Definition</b> stk500.c:88</div></div>
<div class="ttc" id="astk500__private_8h_html_a9ac77563d31b8d5baf685171d455afdf"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a></div><div class="ttdeci">#define Resp_STK_INSYNC</div><div class="ttdef"><b>Definition</b> stk500_private.h:22</div></div>
<div class="ttc" id="astk500__private_8h_html_a9e6879f70f501978a4cf15273cc557a2"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a></div><div class="ttdeci">#define Resp_STK_NOSYNC</div><div class="ttdef"><b>Definition</b> stk500_private.h:23</div></div>
<div class="ttc" id="astk500__private_8h_html_aae26e63a8af382bd3c0adcf7ca75f9f0"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#aae26e63a8af382bd3c0adcf7ca75f9f0">Resp_STK_NODEVICE</a></div><div class="ttdeci">#define Resp_STK_NODEVICE</div><div class="ttdef"><b>Definition</b> stk500_private.h:21</div></div>
<div class="ttc" id="astk500__private_8h_html_abc9a3c8f942074fa87146a245075799a"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#abc9a3c8f942074fa87146a245075799a">Resp_STK_FAILED</a></div><div class="ttdeci">#define Resp_STK_FAILED</div><div class="ttdef"><b>Definition</b> stk500_private.h:19</div></div>
<div class="ttc" id="astk500__private_8h_html_aee6907626a89bf0f567976cc3561c88c"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a></div><div class="ttdeci">#define Resp_STK_OK</div><div class="ttdef"><b>Definition</b> stk500_private.h:18</div></div>
<div class="ttc" id="aterm_8c_html_afaf837ac6f2815d3a1975cb001f2db5f"><div class="ttname"><a href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a></div><div class="ttdeci">struct command cmd[]</div><div class="ttdef"><b>Definition</b> term.c:94</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00094">cmd</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00019">Resp_STK_FAILED</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00021">Resp_STK_NODEVICE</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, and <a class="el" href="../../#l00062">stk500_send()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00686">stk500_close()</a>, and <a class="el" href="../../#l00656">stk500_open()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_aa83a7555c8d3fe4737d85c19fc791cfe_cgraph.svg" width="579" height="207"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_aa83a7555c8d3fe4737d85c19fc791cfe_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a15a9f5551fd1bae8626a36062ff22f07" name="a15a9f5551fd1bae8626a36062ff22f07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a9f5551fd1bae8626a36062ff22f07">&#9670;&#160;</a></span>stk500_chip_erase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_chip_erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  181</span>{</div>
<div class="line"><span class="lineno">  182</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[4];</div>
<div class="line"><span class="lineno">  183</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> res[4];</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a7a9574c193527210eafe66320cc25381">cmd</a> == NULL) {</div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: Error: %s programmer uses stk500_chip_erase() but does not\n&quot;</span></div>
<div class="line"><span class="lineno">  187</span>                    <span class="stringliteral">&quot;provide a cmd() method.\n&quot;</span>,</div>
<div class="line"><span class="lineno">  188</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#adb113747399343501adc958df6c201ff">type</a>);</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  190</span>  }</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>  <span class="keywordflow">if</span> (p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#ac74f9304b03966900bc759a9c5409daf">op</a>[<a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a9de610aaca03794d36797a47c4dbd43a">AVR_OP_CHIP_ERASE</a>] == NULL) {</div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;chip erase instruction not defined for part \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line"><span class="lineno">  194</span>            p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a8a1a31ff99738c37d5a3b15712261ead">desc</a>);</div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  196</span>  }</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a7f8baedcf19adf5588cd42b8040d1a9e">pgm_led</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#ad76d1750a6cdeebd506bfcd6752554d2">ON</a>);</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>  memset(<a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>));</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>  <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ad411bdb04fa8abc5d0c89bc81ce9c170">avr_set_bits</a>(p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#ac74f9304b03966900bc759a9c5409daf">op</a>[<a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a9de610aaca03794d36797a47c4dbd43a">AVR_OP_CHIP_ERASE</a>], <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>);</div>
<div class="line"><span class="lineno">  203</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a7a9574c193527210eafe66320cc25381">cmd</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>, res);</div>
<div class="line"><span class="lineno">  204</span>  <a class="code hl_function" href="../../d7/d8a/unistd_8cpp.html#a430a82cab7dcae73945a46a247815dc9">usleep</a>(p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a89083b0bf6d1140667d34e19ee5fba71">chip_erase_delay</a>);</div>
<div class="line"><span class="lineno">  205</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#ae1605ff194688941e8667dbb2832b01a">initialize</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, p);</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a7f8baedcf19adf5588cd42b8040d1a9e">pgm_led</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a29e413f6725b2ba32d165ffaa35b01e5">OFF</a>);</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  210</span>}</div>
<div class="ttc" id="aavrpart_8c_html_ad411bdb04fa8abc5d0c89bc81ce9c170"><div class="ttname"><a href="../../df/dd5/avrpart_8c.html#ad411bdb04fa8abc5d0c89bc81ce9c170">avr_set_bits</a></div><div class="ttdeci">int avr_set_bits(OPCODE *op, unsigned char *cmd)</div><div class="ttdef"><b>Definition</b> avrpart.c:80</div></div>
<div class="ttc" id="alibavrdude_8h_html_a29e413f6725b2ba32d165ffaa35b01e5"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a29e413f6725b2ba32d165ffaa35b01e5">OFF</a></div><div class="ttdeci">#define OFF</div><div class="ttdef"><b>Definition</b> libavrdude.h:585</div></div>
<div class="ttc" id="alibavrdude_8h_html_a726ca809ffd3d67ab4b8476646f26635a9de610aaca03794d36797a47c4dbd43a"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a9de610aaca03794d36797a47c4dbd43a">AVR_OP_CHIP_ERASE</a></div><div class="ttdeci">@ AVR_OP_CHIP_ERASE</div><div class="ttdef"><b>Definition</b> libavrdude.h:156</div></div>
<div class="ttc" id="alibavrdude_8h_html_a89083b0bf6d1140667d34e19ee5fba71"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a89083b0bf6d1140667d34e19ee5fba71">avrpart::chip_erase_delay</a></div><div class="ttdeci">int chip_erase_delay</div><div class="ttdef"><b>Definition</b> libavrdude.h:222</div></div>
<div class="ttc" id="alibavrdude_8h_html_a8a1a31ff99738c37d5a3b15712261ead"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a8a1a31ff99738c37d5a3b15712261ead">avrpart::desc</a></div><div class="ttdeci">char desc[AVR_DESCLEN]</div><div class="ttdef"><b>Definition</b> libavrdude.h:218</div></div>
<div class="ttc" id="alibavrdude_8h_html_ac74f9304b03966900bc759a9c5409daf"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ac74f9304b03966900bc759a9c5409daf">avrpart::op</a></div><div class="ttdeci">OPCODE * op[AVR_OP_MAX]</div><div class="ttdef"><b>Definition</b> libavrdude.h:275</div></div>
<div class="ttc" id="alibavrdude_8h_html_ad76d1750a6cdeebd506bfcd6752554d2"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ad76d1750a6cdeebd506bfcd6752554d2">ON</a></div><div class="ttdeci">#define ON</div><div class="ttdef"><b>Definition</b> libavrdude.h:584</div></div>
<div class="ttc" id="astructprogrammer__t_html_a7a9574c193527210eafe66320cc25381"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a7a9574c193527210eafe66320cc25381">programmer_t::cmd</a></div><div class="ttdeci">int(* cmd)(struct programmer_t *pgm, const unsigned char *cmd, unsigned char *res)</div><div class="ttdef"><b>Definition</b> libavrdude.h:651</div></div>
<div class="ttc" id="astructprogrammer__t_html_a7f8baedcf19adf5588cd42b8040d1a9e"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a7f8baedcf19adf5588cd42b8040d1a9e">programmer_t::pgm_led</a></div><div class="ttdeci">int(* pgm_led)(struct programmer_t *pgm, int value)</div><div class="ttdef"><b>Definition</b> libavrdude.h:641</div></div>
<div class="ttc" id="astructprogrammer__t_html_adb113747399343501adc958df6c201ff"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#adb113747399343501adc958df6c201ff">programmer_t::type</a></div><div class="ttdeci">char type[PGM_TYPELEN]</div><div class="ttdef"><b>Definition</b> libavrdude.h:619</div></div>
<div class="ttc" id="astructprogrammer__t_html_ae1605ff194688941e8667dbb2832b01a"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#ae1605ff194688941e8667dbb2832b01a">programmer_t::initialize</a></div><div class="ttdeci">int(* initialize)(struct programmer_t *pgm, AVRPART *p)</div><div class="ttdef"><b>Definition</b> libavrdude.h:643</div></div>
<div class="ttc" id="aunistd_8cpp_html_a430a82cab7dcae73945a46a247815dc9"><div class="ttname"><a href="../../d7/d8a/unistd_8cpp.html#a430a82cab7dcae73945a46a247815dc9">usleep</a></div><div class="ttdeci">int usleep(unsigned usec)</div><div class="ttdef"><b>Definition</b> unistd.cpp:13</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00156">AVR_OP_CHIP_ERASE</a>, <a class="el" href="../../#l00080">avr_set_bits()</a>, <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00222">avrpart::chip_erase_delay</a>, <a class="el" href="../../#l00651">programmer_t::cmd</a>, <a class="el" href="../../#l00094">cmd</a>, <a class="el" href="../../#l00218">avrpart::desc</a>, <a class="el" href="../../#l00643">programmer_t::initialize</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00585">OFF</a>, <a class="el" href="../../#l00584">ON</a>, <a class="el" href="../../#l00275">avrpart::op</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00641">programmer_t::pgm_led</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00619">programmer_t::type</a>, and <a class="el" href="../../#l00013">usleep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a15a9f5551fd1bae8626a36062ff22f07_cgraph.svg" width="316" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a15a9f5551fd1bae8626a36062ff22f07_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a9e819c9762657bdfc47d63bfadd41bc4" name="a9e819c9762657bdfc47d63bfadd41bc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e819c9762657bdfc47d63bfadd41bc4">&#9670;&#160;</a></span>stk500_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  687</span>{</div>
<div class="line"><span class="lineno">  688</span>  <span class="comment">// MIB510 close</span></div>
<div class="line"><span class="lineno">  689</span>  <span class="keywordflow">if</span> (strcmp(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#a59bcd8f586373668a1dbbf64b47fda5d">ldata</a>(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#aa4e89f2cb024b90526cc6d7c5cc282ba">lfirst</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a36126363995ced65ef00d97d425d4729">id</a>)), <span class="stringliteral">&quot;mib510&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  690</span>    (<a class="code hl_function" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>)<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aa83a7555c8d3fe4737d85c19fc791cfe">mib510_isp</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, 0);</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>  <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a211e87f7bfdbfa94ddc09f45795d130d">serial_close</a>(&amp;<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">fd</a>);</div>
<div class="line"><span class="lineno">  693</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">fd</a>.<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#af67a8aabc0107825a78baeac91bfbfb1">ifd</a> = -1;</div>
<div class="line"><span class="lineno">  694</span>}</div>
<div class="ttc" id="aglu-libtess_8h_html_a4292190e3f1f6b373a760c7d9316ad3c"><div class="ttname"><a href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a></div><div class="ttdeci">typedef void(GLAPIENTRYP _GLUfuncptr)(void)</div></div>
<div class="ttc" id="alibavrdude_8h_html_a211e87f7bfdbfa94ddc09f45795d130d"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a211e87f7bfdbfa94ddc09f45795d130d">serial_close</a></div><div class="ttdeci">#define serial_close</div><div class="ttdef"><b>Definition</b> libavrdude.h:576</div></div>
<div class="ttc" id="alibavrdude_8h_html_a59bcd8f586373668a1dbbf64b47fda5d"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a59bcd8f586373668a1dbbf64b47fda5d">ldata</a></div><div class="ttdeci">void * ldata(LNODEID)</div><div class="ttdef"><b>Definition</b> lists.c:720</div></div>
<div class="ttc" id="alibavrdude_8h_html_aa4e89f2cb024b90526cc6d7c5cc282ba"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#aa4e89f2cb024b90526cc6d7c5cc282ba">lfirst</a></div><div class="ttdeci">LNODEID lfirst(LISTID)</div><div class="ttdef"><b>Definition</b> lists.c:688</div></div>
<div class="ttc" id="alibavrdude_8h_html_af67a8aabc0107825a78baeac91bfbfb1"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#af67a8aabc0107825a78baeac91bfbfb1">filedescriptor::ifd</a></div><div class="ttdeci">int ifd</div><div class="ttdef"><b>Definition</b> libavrdude.h:522</div></div>
<div class="ttc" id="astk500_8c_html_aa83a7555c8d3fe4737d85c19fc791cfe"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#aa83a7555c8d3fe4737d85c19fc791cfe">mib510_isp</a></div><div class="ttdeci">static int mib510_isp(PROGRAMMER *pgm, unsigned char cmd)</div><div class="ttdef"><b>Definition</b> stk500.c:342</div></div>
<div class="ttc" id="astructprogrammer__t_html_a31d40bf02b8dac5484b4aa4e67759d7b"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">programmer_t::fd</a></div><div class="ttdeci">union filedescriptor fd</div><div class="ttdef"><b>Definition</b> libavrdude.h:637</div></div>
<div class="ttc" id="astructprogrammer__t_html_a36126363995ced65ef00d97d425d4729"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a36126363995ced65ef00d97d425d4729">programmer_t::id</a></div><div class="ttdeci">LISTID id</div><div class="ttdef"><b>Definition</b> libavrdude.h:617</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00637">programmer_t::fd</a>, <a class="el" href="../../#l00617">programmer_t::id</a>, <a class="el" href="../../#l00522">filedescriptor::ifd</a>, <a class="el" href="../../#l00720">ldata()</a>, <a class="el" href="../../#l00688">lfirst()</a>, <a class="el" href="../../#l00342">mib510_isp()</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00576">serial_close</a>, and <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a9e819c9762657bdfc47d63bfadd41bc4_cgraph.svg" width="100%" height="495"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a9e819c9762657bdfc47d63bfadd41bc4_icgraph.svg" width="651" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2abe22deba0cd804f530766b8cdd49bb" name="a2abe22deba0cd804f530766b8cdd49bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2abe22deba0cd804f530766b8cdd49bb">&#9670;&#160;</a></span>stk500_cmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_cmd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  140</span>{</div>
<div class="line"><span class="lineno">  141</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[32];</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a04590423c95bace8a039e236a9a178b9">Cmnd_STK_UNIVERSAL</a>;</div>
<div class="line"><span class="lineno">  144</span>  buf[1] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[0];</div>
<div class="line"><span class="lineno">  145</span>  buf[2] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[1];</div>
<div class="line"><span class="lineno">  146</span>  buf[3] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[2];</div>
<div class="line"><span class="lineno">  147</span>  buf[4] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[3];</div>
<div class="line"><span class="lineno">  148</span>  buf[5] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 6);</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  154</span>  <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  155</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_cmd(): programmer is out of sync\n&quot;</span>, <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  157</span>  }</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>  res[0] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[1];</div>
<div class="line"><span class="lineno">  160</span>  res[1] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[2];</div>
<div class="line"><span class="lineno">  161</span>  res[2] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[3];</div>
<div class="line"><span class="lineno">  162</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, &amp;res[3], 1) &lt; 0)</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  167</span>  <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  168</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_cmd(): protocol error\n&quot;</span>, <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  170</span>  }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  173</span>}</div>
<div class="ttc" id="astk500__private_8h_html_a04590423c95bace8a039e236a9a178b9"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a04590423c95bace8a039e236a9a178b9">Cmnd_STK_UNIVERSAL</a></div><div class="ttdeci">#define Cmnd_STK_UNIVERSAL</div><div class="ttdef"><b>Definition</b> stk500_private.h:49</div></div>
<div class="ttc" id="astk500__private_8h_html_a519142e4cfc98ce4a0b138dba73c5357"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a></div><div class="ttdeci">#define Sync_CRC_EOP</div><div class="ttdef"><b>Definition</b> stk500_private.h:32</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00094">cmd</a>, <a class="el" href="../../#l00049">Cmnd_STK_UNIVERSAL</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>, and <a class="el" href="../../#l00697">stk500_loadaddr()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a2abe22deba0cd804f530766b8cdd49bb_cgraph.svg" width="422" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a2abe22deba0cd804f530766b8cdd49bb_icgraph.svg" width="100%" height="383"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a43870bafd518cb34259c6b8f26b17069" name="a43870bafd518cb34259c6b8f26b17069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43870bafd518cb34259c6b8f26b17069">&#9670;&#160;</a></span>stk500_disable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_disable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  602</span>{</div>
<div class="line"><span class="lineno">  603</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[16];</div>
<div class="line"><span class="lineno">  604</span>  <span class="keywordtype">int</span> tries=0;</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span> retry:</div>
<div class="line"><span class="lineno">  607</span>  </div>
<div class="line"><span class="lineno">  608</span>  tries++;</div>
<div class="line"><span class="lineno">  609</span> </div>
<div class="line"><span class="lineno">  610</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a8d42960d3c22c1254ac6535b4ce89356">Cmnd_STK_LEAVE_PROGMODE</a>;</div>
<div class="line"><span class="lineno">  611</span>  buf[1] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">  612</span> </div>
<div class="line"><span class="lineno">  613</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 2);</div>
<div class="line"><span class="lineno">  614</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  615</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  616</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno">  617</span>    <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno">  618</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_disable(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno">  619</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  620</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  621</span>    }</div>
<div class="line"><span class="lineno">  622</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  623</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  624</span>    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  625</span>  }</div>
<div class="line"><span class="lineno">  626</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  627</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_disable(): protocol error, expect=0x%02x, &quot;</span></div>
<div class="line"><span class="lineno">  628</span>                    <span class="stringliteral">&quot;resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  629</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  631</span>  }</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  634</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  635</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  636</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  637</span>  }</div>
<div class="line"><span class="lineno">  638</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aae26e63a8af382bd3c0adcf7ca75f9f0">Resp_STK_NODEVICE</a>) {</div>
<div class="line"><span class="lineno">  639</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_disable(): no device\n&quot;</span>,</div>
<div class="line"><span class="lineno">  640</span>            <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  641</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  642</span>  }</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_disable(): unknown response=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  645</span>          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, buf[0]);</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  648</span>}</div>
<div class="ttc" id="astk500__private_8h_html_a8d42960d3c22c1254ac6535b4ce89356"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a8d42960d3c22c1254ac6535b4ce89356">Cmnd_STK_LEAVE_PROGMODE</a></div><div class="ttdeci">#define Cmnd_STK_LEAVE_PROGMODE</div><div class="ttdef"><b>Definition</b> stk500_private.h:45</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00045">Cmnd_STK_LEAVE_PROGMODE</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00021">Resp_STK_NODEVICE</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a43870bafd518cb34259c6b8f26b17069_cgraph.svg" width="599" height="206"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a43870bafd518cb34259c6b8f26b17069_icgraph.svg" width="662" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4e0432d1156876a3109874f01415ff4c" name="a4e0432d1156876a3109874f01415ff4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e0432d1156876a3109874f01415ff4c">&#9670;&#160;</a></span>stk500_display()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_display </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1220</span>{</div>
<div class="line"><span class="lineno"> 1221</span>  <span class="keywordtype">unsigned</span> maj, <a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a52c8391bfe74901409df09e9b1d5ac79">min</a>, hdw, topcard;</div>
<div class="line"><span class="lineno"> 1222</span> </div>
<div class="line"><span class="lineno"> 1223</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aacabb25076b3bbc9a18b8aecf0798a61">Parm_STK_HW_VER</a>, &amp;hdw);</div>
<div class="line"><span class="lineno"> 1224</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9f14989587f3a52ede3e924f70681b60">Parm_STK_SW_MAJOR</a>, &amp;maj);</div>
<div class="line"><span class="lineno"> 1225</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a1a89dd4bbb0c2cd0401019b205b6db7e">Parm_STK_SW_MINOR</a>, &amp;min);</div>
<div class="line"><span class="lineno"> 1226</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a5704b8e9e96f25db8147ae7fa1c31dd7">Param_STK500_TOPCARD_DETECT</a>, &amp;topcard);</div>
<div class="line"><span class="lineno"> 1227</span> </div>
<div class="line"><span class="lineno"> 1228</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%sHardware Version: %d\n&quot;</span>, p, hdw);</div>
<div class="line"><span class="lineno"> 1229</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%sFirmware Version: %d.%d\n&quot;</span>, p, maj, min);</div>
<div class="line"><span class="lineno"> 1230</span>  <span class="keywordflow">if</span> (topcard &lt; 3) {</div>
<div class="line"><span class="lineno"> 1231</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *n = <span class="stringliteral">&quot;Unknown&quot;</span>;</div>
<div class="line"><span class="lineno"> 1232</span> </div>
<div class="line"><span class="lineno"> 1233</span>    <span class="keywordflow">switch</span> (topcard) {</div>
<div class="line"><span class="lineno"> 1234</span>      <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno"> 1235</span>  n = <span class="stringliteral">&quot;STK502&quot;</span>;</div>
<div class="line"><span class="lineno"> 1236</span>  <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>      <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno"> 1239</span>  n = <span class="stringliteral">&quot;STK501&quot;</span>;</div>
<div class="line"><span class="lineno"> 1240</span>  <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1241</span>    }</div>
<div class="line"><span class="lineno"> 1242</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%sTopcard         : %s\n&quot;</span>, p, n);</div>
<div class="line"><span class="lineno"> 1243</span>  }</div>
<div class="line"><span class="lineno"> 1244</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2df66b3921bc61af8cc7eb38cac4578f">stk500_print_parms1</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, p);</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1247</span>}</div>
<div class="ttc" id="anamespace_eigen_1_1half__impl_html_a52c8391bfe74901409df09e9b1d5ac79"><div class="ttname"><a href="../../d6/d88/namespace_eigen_1_1half__impl.html#a52c8391bfe74901409df09e9b1d5ac79">Eigen::half_impl::min</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC half() min(const half &amp;a, const half &amp;b)</div><div class="ttdef"><b>Definition</b> Half.h:507</div></div>
<div class="ttc" id="astk500_8c_html_a2df66b3921bc61af8cc7eb38cac4578f"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a2df66b3921bc61af8cc7eb38cac4578f">stk500_print_parms1</a></div><div class="ttdeci">static void stk500_print_parms1(PROGRAMMER *pgm, const char *p)</div><div class="ttdef"><b>Definition</b> stk500.c:1250</div></div>
<div class="ttc" id="astk500_8c_html_ab25648b307fdbeb557f39c84d46f435b"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a></div><div class="ttdeci">static int stk500_getparm(PROGRAMMER *pgm, unsigned parm, unsigned *value)</div><div class="ttdef"><b>Definition</b> stk500.c:1107</div></div>
<div class="ttc" id="astk500__private_8h_html_a1a89dd4bbb0c2cd0401019b205b6db7e"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a1a89dd4bbb0c2cd0401019b205b6db7e">Parm_STK_SW_MINOR</a></div><div class="ttdeci">#define Parm_STK_SW_MINOR</div><div class="ttdef"><b>Definition</b> stk500_private.h:73</div></div>
<div class="ttc" id="astk500__private_8h_html_a5704b8e9e96f25db8147ae7fa1c31dd7"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a5704b8e9e96f25db8147ae7fa1c31dd7">Param_STK500_TOPCARD_DETECT</a></div><div class="ttdeci">#define Param_STK500_TOPCARD_DETECT</div><div class="ttdef"><b>Definition</b> stk500_private.h:89</div></div>
<div class="ttc" id="astk500__private_8h_html_a9f14989587f3a52ede3e924f70681b60"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a9f14989587f3a52ede3e924f70681b60">Parm_STK_SW_MAJOR</a></div><div class="ttdeci">#define Parm_STK_SW_MAJOR</div><div class="ttdef"><b>Definition</b> stk500_private.h:72</div></div>
<div class="ttc" id="astk500__private_8h_html_aacabb25076b3bbc9a18b8aecf0798a61"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#aacabb25076b3bbc9a18b8aecf0798a61">Parm_STK_HW_VER</a></div><div class="ttdeci">#define Parm_STK_HW_VER</div><div class="ttdef"><b>Definition</b> stk500_private.h:71</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00089">Param_STK500_TOPCARD_DETECT</a>, <a class="el" href="../../#l00071">Parm_STK_HW_VER</a>, <a class="el" href="../../#l00072">Parm_STK_SW_MAJOR</a>, <a class="el" href="../../#l00073">Parm_STK_SW_MINOR</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l01107">stk500_getparm()</a>, and <a class="el" href="../../#l01250">stk500_print_parms1()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a4e0432d1156876a3109874f01415ff4c_cgraph.svg" width="100%" height="523"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a4e0432d1156876a3109874f01415ff4c_icgraph.svg" width="662" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac3dab073187d6ee897f529939ccdf918" name="ac3dab073187d6ee897f529939ccdf918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3dab073187d6ee897f529939ccdf918">&#9670;&#160;</a></span>stk500_drain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stk500_drain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>display</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   83</span>{</div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordflow">return</span> <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#afb50daf285f8a9ed3af4f71b2825c394">serial_drain</a>(&amp;<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">fd</a>, display);</div>
<div class="line"><span class="lineno">   85</span>}</div>
<div class="ttc" id="alibavrdude_8h_html_afb50daf285f8a9ed3af4f71b2825c394"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#afb50daf285f8a9ed3af4f71b2825c394">serial_drain</a></div><div class="ttdeci">#define serial_drain</div><div class="ttdef"><b>Definition</b> libavrdude.h:579</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00637">programmer_t::fd</a>, <a class="el" href="../../#l00192">pgm</a>, and <a class="el" href="../../#l00579">serial_drain</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00127">arduino_open()</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, and <a class="el" href="../../#l00656">stk500_open()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ac3dab073187d6ee897f529939ccdf918_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="af6f35accd0a7bf3311f6a9e8ecb5ccf3" name="af6f35accd0a7bf3311f6a9e8ecb5ccf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6f35accd0a7bf3311f6a9e8ecb5ccf3">&#9670;&#160;</a></span>stk500_enable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  651</span>{</div>
<div class="line"><span class="lineno">  652</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  653</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_af6f35accd0a7bf3311f6a9e8ecb5ccf3_icgraph.svg" width="659" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab25648b307fdbeb557f39c84d46f435b" name="ab25648b307fdbeb557f39c84d46f435b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab25648b307fdbeb557f39c84d46f435b">&#9670;&#160;</a></span>stk500_getparm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_getparm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>parm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1108</span>{</div>
<div class="line"><span class="lineno"> 1109</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[16];</div>
<div class="line"><span class="lineno"> 1110</span>  <span class="keywordtype">unsigned</span> v;</div>
<div class="line"><span class="lineno"> 1111</span>  <span class="keywordtype">int</span> tries = 0;</div>
<div class="line"><span class="lineno"> 1112</span> </div>
<div class="line"><span class="lineno"> 1113</span> retry:</div>
<div class="line"><span class="lineno"> 1114</span>  tries++;</div>
<div class="line"><span class="lineno"> 1115</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a7eb2c0ca20bb9aff1cb5ee269f031180">Cmnd_STK_GET_PARAMETER</a>;</div>
<div class="line"><span class="lineno"> 1116</span>  buf[1] = parm;</div>
<div class="line"><span class="lineno"> 1117</span>  buf[2] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 3);</div>
<div class="line"><span class="lineno"> 1120</span> </div>
<div class="line"><span class="lineno"> 1121</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno"> 1122</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1123</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno"> 1124</span>    <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno"> 1125</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_getparm(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1126</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno"> 1127</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1128</span>    }</div>
<div class="line"><span class="lineno"> 1129</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno"> 1130</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1131</span>    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno"> 1132</span>  }</div>
<div class="line"><span class="lineno"> 1133</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno"> 1134</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_getparm(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno"> 1135</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1136</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno"> 1137</span>    <span class="keywordflow">return</span> -2;</div>
<div class="line"><span class="lineno"> 1138</span>  }</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno"> 1141</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1142</span>  v = buf[0];</div>
<div class="line"><span class="lineno"> 1143</span> </div>
<div class="line"><span class="lineno"> 1144</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno"> 1145</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1146</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#abc9a3c8f942074fa87146a245075799a">Resp_STK_FAILED</a>) {</div>
<div class="line"><span class="lineno"> 1147</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_getparm(): parameter 0x%02x failed\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1148</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, v);</div>
<div class="line"><span class="lineno"> 1149</span>    <span class="keywordflow">return</span> -3;</div>
<div class="line"><span class="lineno"> 1150</span>  }</div>
<div class="line"><span class="lineno"> 1151</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno"> 1152</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_getparm(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno"> 1153</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1154</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno"> 1155</span>    <span class="keywordflow">return</span> -3;</div>
<div class="line"><span class="lineno"> 1156</span>  }</div>
<div class="line"><span class="lineno"> 1157</span> </div>
<div class="line"><span class="lineno"> 1158</span>  *value = v;</div>
<div class="line"><span class="lineno"> 1159</span> </div>
<div class="line"><span class="lineno"> 1160</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1161</span>}</div>
<div class="ttc" id="astk500__private_8h_html_a7eb2c0ca20bb9aff1cb5ee269f031180"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a7eb2c0ca20bb9aff1cb5ee269f031180">Cmnd_STK_GET_PARAMETER</a></div><div class="ttdeci">#define Cmnd_STK_GET_PARAMETER</div><div class="ttdef"><b>Definition</b> stk500_private.h:40</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00040">Cmnd_STK_GET_PARAMETER</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00019">Resp_STK_FAILED</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01219">stk500_display()</a>, <a class="el" href="../../#l00411">stk500_initialize()</a>, <a class="el" href="../../#l01250">stk500_print_parms1()</a>, <a class="el" href="../../#l01005">stk500_set_varef()</a>, and <a class="el" href="../../#l00982">stk500_set_vtarget()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ab25648b307fdbeb557f39c84d46f435b_cgraph.svg" width="606" height="206"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ab25648b307fdbeb557f39c84d46f435b_icgraph.svg" width="100%" height="478"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aecacdb47e304260e938679b5fd1d0aaa" name="aecacdb47e304260e938679b5fd1d0aaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecacdb47e304260e938679b5fd1d0aaa">&#9670;&#160;</a></span>stk500_getsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stk500_getsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   89</span>{</div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[32], resp[32];</div>
<div class="line"><span class="lineno">   91</span>  <span class="keywordtype">int</span> attempt;</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno">   94</span><span class="comment">   * get in sync */</span></div>
<div class="line"><span class="lineno">   95</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a1f4923ac879140cf53e55284fcba9eed">Cmnd_STK_GET_SYNC</a>;</div>
<div class="line"><span class="lineno">   96</span>  buf[1] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">   97</span>  </div>
<div class="line"><span class="lineno">   98</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno">   99</span><span class="comment">   * First send and drain a few times to get rid of line noise </span></div>
<div class="line"><span class="lineno">  100</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno">  101</span>   </div>
<div class="line"><span class="lineno">  102</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 2);</div>
<div class="line"><span class="lineno">  103</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac3dab073187d6ee897f529939ccdf918">stk500_drain</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, 0);</div>
<div class="line"><span class="lineno">  104</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 2);</div>
<div class="line"><span class="lineno">  105</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac3dab073187d6ee897f529939ccdf918">stk500_drain</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, 0);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>  <span class="keywordflow">for</span> (attempt = 0; attempt &lt; <a class="code hl_define" href="../../dd/d75/stk500_8c.html#acbe0ef2faddd254a4f5a856d2d62886e">MAX_SYNC_ATTEMPTS</a>; attempt++) {</div>
<div class="line"><span class="lineno">  108</span>    <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 2);</div>
<div class="line"><span class="lineno">  109</span>    <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, resp, 1);</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">if</span> (resp[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>){</div>
<div class="line"><span class="lineno">  111</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  112</span>    }</div>
<div class="line"><span class="lineno">  113</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_getsync() attempt %d of %d: not in sync: resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  114</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, attempt + 1, <a class="code hl_define" href="../../dd/d75/stk500_8c.html#acbe0ef2faddd254a4f5a856d2d62886e">MAX_SYNC_ATTEMPTS</a>, resp[0]);</div>
<div class="line"><span class="lineno">  115</span>  }</div>
<div class="line"><span class="lineno">  116</span>  <span class="keywordflow">if</span> (attempt == <a class="code hl_define" href="../../dd/d75/stk500_8c.html#acbe0ef2faddd254a4f5a856d2d62886e">MAX_SYNC_ATTEMPTS</a>) {</div>
<div class="line"><span class="lineno">  117</span>    <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac3dab073187d6ee897f529939ccdf918">stk500_drain</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, 0);</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  119</span>  }</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, resp, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  123</span>  <span class="keywordflow">if</span> (resp[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  124</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_getsync(): can&#39;t communicate with device: &quot;</span></div>
<div class="line"><span class="lineno">  125</span>                    <span class="stringliteral">&quot;resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  126</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, resp[0]);</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  128</span>  }</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  131</span>}</div>
<div class="ttc" id="astk500_8c_html_ac3dab073187d6ee897f529939ccdf918"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#ac3dab073187d6ee897f529939ccdf918">stk500_drain</a></div><div class="ttdeci">int stk500_drain(PROGRAMMER *pgm, int display)</div><div class="ttdef"><b>Definition</b> stk500.c:82</div></div>
<div class="ttc" id="astk500_8c_html_acbe0ef2faddd254a4f5a856d2d62886e"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#acbe0ef2faddd254a4f5a856d2d62886e">MAX_SYNC_ATTEMPTS</a></div><div class="ttdeci">#define MAX_SYNC_ATTEMPTS</div><div class="ttdef"><b>Definition</b> stk500.c:46</div></div>
<div class="ttc" id="astk500__private_8h_html_a1f4923ac879140cf53e55284fcba9eed"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a1f4923ac879140cf53e55284fcba9eed">Cmnd_STK_GET_SYNC</a></div><div class="ttdeci">#define Cmnd_STK_GET_SYNC</div><div class="ttdef"><b>Definition</b> stk500_private.h:36</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00036">Cmnd_STK_GET_SYNC</a>, <a class="el" href="../../#l00046">MAX_SYNC_ATTEMPTS</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00082">stk500_drain()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00127">arduino_open()</a>, <a class="el" href="../../#l00342">mib510_isp()</a>, <a class="el" href="../../#l00601">stk500_disable()</a>, <a class="el" href="../../#l01107">stk500_getparm()</a>, <a class="el" href="../../#l00411">stk500_initialize()</a>, <a class="el" href="../../#l00697">stk500_loadaddr()</a>, <a class="el" href="../../#l00656">stk500_open()</a>, <a class="el" href="../../#l00882">stk500_paged_load()</a>, <a class="el" href="../../#l00765">stk500_paged_write()</a>, <a class="el" href="../../#l00215">stk500_program_enable()</a>, <a class="el" href="../../#l00274">stk500_set_extended_parms()</a>, and <a class="el" href="../../#l01164">stk500_setparm()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_aecacdb47e304260e938679b5fd1d0aaa_cgraph.svg" width="443" height="154"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_aecacdb47e304260e938679b5fd1d0aaa_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a1647ffcfad8694c0d80f77c0b9716832" name="a1647ffcfad8694c0d80f77c0b9716832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1647ffcfad8694c0d80f77c0b9716832">&#9670;&#160;</a></span>stk500_initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  412</span>{</div>
<div class="line"><span class="lineno">  413</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[32];</div>
<div class="line"><span class="lineno">  414</span>  <a class="code hl_struct" href="../../d2/d68/libavrdude_8h.html#d5/dbe/structavrmem">AVRMEM</a> * m;</div>
<div class="line"><span class="lineno">  415</span>  <span class="keywordtype">int</span> tries;</div>
<div class="line"><span class="lineno">  416</span>  <span class="keywordtype">unsigned</span> maj, <a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a52c8391bfe74901409df09e9b1d5ac79">min</a>;</div>
<div class="line"><span class="lineno">  417</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno">  418</span>  <span class="keywordtype">int</span> n_extparms;</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9f14989587f3a52ede3e924f70681b60">Parm_STK_SW_MAJOR</a>, &amp;maj);</div>
<div class="line"><span class="lineno">  421</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a1a89dd4bbb0c2cd0401019b205b6db7e">Parm_STK_SW_MINOR</a>, &amp;min);</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>  <span class="comment">// MIB510 does not need extparams</span></div>
<div class="line"><span class="lineno">  424</span>  <span class="keywordflow">if</span> (strcmp(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#a59bcd8f586373668a1dbbf64b47fda5d">ldata</a>(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#aa4e89f2cb024b90526cc6d7c5cc282ba">lfirst</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a36126363995ced65ef00d97d425d4729">id</a>)), <span class="stringliteral">&quot;mib510&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  425</span>    n_extparms = 0;</div>
<div class="line"><span class="lineno">  426</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((maj &gt; 1) || ((maj == 1) &amp;&amp; (min &gt; 10)))</div>
<div class="line"><span class="lineno">  427</span>    n_extparms = 4;</div>
<div class="line"><span class="lineno">  428</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  429</span>    n_extparms = 3;</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>  tries = 0;</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span> retry:</div>
<div class="line"><span class="lineno">  434</span>  tries++;</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>  memset(buf, 0, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  439</span><span class="comment">   * set device programming parameters</span></div>
<div class="line"><span class="lineno">  440</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno">  441</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aeeeca88442d2389040333fec1eb0de4a">Cmnd_STK_SET_DEVICE</a>;</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>  buf[1] = p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#afa0193e8828618a2c5f00856d262699b">stk500_devcode</a>;</div>
<div class="line"><span class="lineno">  444</span>  buf[2] = 0; <span class="comment">/* device revision */</span></div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>  <span class="keywordflow">if</span> ((p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#ae9622e4b2cb8e28cee9a0f7dca9baa92">flags</a> &amp; <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a9d99e823010f950b5b366486ed719044">AVRPART_SERIALOK</a>) &amp;&amp; (p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#ae9622e4b2cb8e28cee9a0f7dca9baa92">flags</a> &amp; <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a6c072313c70a0b0344ec8cd39ef88a98">AVRPART_PARALLELOK</a>))</div>
<div class="line"><span class="lineno">  447</span>    buf[3] = 0; <span class="comment">/* device supports parallel and serial programming */</span></div>
<div class="line"><span class="lineno">  448</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  449</span>    buf[3] = 1; <span class="comment">/* device supports parallel only */</span></div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>  <span class="keywordflow">if</span> (p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#ae9622e4b2cb8e28cee9a0f7dca9baa92">flags</a> &amp; <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a6c072313c70a0b0344ec8cd39ef88a98">AVRPART_PARALLELOK</a>) {</div>
<div class="line"><span class="lineno">  452</span>    <span class="keywordflow">if</span> (p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#ae9622e4b2cb8e28cee9a0f7dca9baa92">flags</a> &amp; <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a27793844852a3ea151759875c10a7ff6">AVRPART_PSEUDOPARALLEL</a>) {</div>
<div class="line"><span class="lineno">  453</span>      buf[4] = 0; <span class="comment">/* pseudo parallel interface */</span></div>
<div class="line"><span class="lineno">  454</span>      n_extparms = 0;</div>
<div class="line"><span class="lineno">  455</span>    }</div>
<div class="line"><span class="lineno">  456</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  457</span>      buf[4] = 1; <span class="comment">/* full parallel interface */</span></div>
<div class="line"><span class="lineno">  458</span>    }</div>
<div class="line"><span class="lineno">  459</span>  }</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  462</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_initialize(): n_extparms = %d\n&quot;</span>,</div>
<div class="line"><span class="lineno">  463</span>          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, n_extparms);</div>
<div class="line"><span class="lineno">  464</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  465</span>    </div>
<div class="line"><span class="lineno">  466</span>  buf[5] = 1; <span class="comment">/* polling supported - XXX need this in config file */</span></div>
<div class="line"><span class="lineno">  467</span>  buf[6] = 1; <span class="comment">/* programming is self-timed - XXX need in config file */</span></div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>  m = <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a>(p, <span class="stringliteral">&quot;lock&quot;</span>);</div>
<div class="line"><span class="lineno">  470</span>  <span class="keywordflow">if</span> (m)</div>
<div class="line"><span class="lineno">  471</span>    buf[7] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a>;</div>
<div class="line"><span class="lineno">  472</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  473</span>    buf[7] = 0;</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  476</span><span class="comment">   * number of fuse bytes</span></div>
<div class="line"><span class="lineno">  477</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno">  478</span>  buf[8] = 0;</div>
<div class="line"><span class="lineno">  479</span>  m = <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a>(p, <span class="stringliteral">&quot;fuse&quot;</span>);</div>
<div class="line"><span class="lineno">  480</span>  <span class="keywordflow">if</span> (m)</div>
<div class="line"><span class="lineno">  481</span>    buf[8] += m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a>;</div>
<div class="line"><span class="lineno">  482</span>  m = <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a>(p, <span class="stringliteral">&quot;lfuse&quot;</span>);</div>
<div class="line"><span class="lineno">  483</span>  <span class="keywordflow">if</span> (m)</div>
<div class="line"><span class="lineno">  484</span>    buf[8] += m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a>;</div>
<div class="line"><span class="lineno">  485</span>  m = <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a>(p, <span class="stringliteral">&quot;hfuse&quot;</span>);</div>
<div class="line"><span class="lineno">  486</span>  <span class="keywordflow">if</span> (m)</div>
<div class="line"><span class="lineno">  487</span>    buf[8] += m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a>;</div>
<div class="line"><span class="lineno">  488</span>  m = <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a>(p, <span class="stringliteral">&quot;efuse&quot;</span>);</div>
<div class="line"><span class="lineno">  489</span>  <span class="keywordflow">if</span> (m)</div>
<div class="line"><span class="lineno">  490</span>    buf[8] += m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a>;</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>  m = <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a>(p, <span class="stringliteral">&quot;flash&quot;</span>);</div>
<div class="line"><span class="lineno">  493</span>  <span class="keywordflow">if</span> (m) {</div>
<div class="line"><span class="lineno">  494</span>    buf[9] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a4a128d79391cd4fbf1c4723387a05731">readback</a>[0];</div>
<div class="line"><span class="lineno">  495</span>    buf[10] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a4a128d79391cd4fbf1c4723387a05731">readback</a>[1];</div>
<div class="line"><span class="lineno">  496</span>    <span class="keywordflow">if</span> (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a79b0eaa832974d0562c4bc17716eb4e7">paged</a>) {</div>
<div class="line"><span class="lineno">  497</span>      buf[13] = (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a9d797017271ffa71a1e3e5729ba56711">page_size</a> &gt;&gt; 8) &amp; 0x00ff;</div>
<div class="line"><span class="lineno">  498</span>      buf[14] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a9d797017271ffa71a1e3e5729ba56711">page_size</a> &amp; 0x00ff;</div>
<div class="line"><span class="lineno">  499</span>    }</div>
<div class="line"><span class="lineno">  500</span>    buf[17] = (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a> &gt;&gt; 24) &amp; 0xff;</div>
<div class="line"><span class="lineno">  501</span>    buf[18] = (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a> &gt;&gt; 16) &amp; 0xff;</div>
<div class="line"><span class="lineno">  502</span>    buf[19] = (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a> &gt;&gt; 8) &amp; 0xff;</div>
<div class="line"><span class="lineno">  503</span>    buf[20] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a> &amp; 0xff;</div>
<div class="line"><span class="lineno">  504</span>  }</div>
<div class="line"><span class="lineno">  505</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  506</span>    buf[9]  = 0xff;</div>
<div class="line"><span class="lineno">  507</span>    buf[10] = 0xff;</div>
<div class="line"><span class="lineno">  508</span>    buf[13] = 0;</div>
<div class="line"><span class="lineno">  509</span>    buf[14] = 0;</div>
<div class="line"><span class="lineno">  510</span>    buf[17] = 0;</div>
<div class="line"><span class="lineno">  511</span>    buf[18] = 0;</div>
<div class="line"><span class="lineno">  512</span>    buf[19] = 0;</div>
<div class="line"><span class="lineno">  513</span>    buf[20] = 0;</div>
<div class="line"><span class="lineno">  514</span>  }</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>  m = <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a>(p, <span class="stringliteral">&quot;eeprom&quot;</span>);</div>
<div class="line"><span class="lineno">  517</span>  <span class="keywordflow">if</span> (m) {</div>
<div class="line"><span class="lineno">  518</span>    buf[11] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a4a128d79391cd4fbf1c4723387a05731">readback</a>[0];</div>
<div class="line"><span class="lineno">  519</span>    buf[12] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a4a128d79391cd4fbf1c4723387a05731">readback</a>[1];</div>
<div class="line"><span class="lineno">  520</span>    buf[15] = (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a> &gt;&gt; 8) &amp; 0x00ff;</div>
<div class="line"><span class="lineno">  521</span>    buf[16] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">size</a> &amp; 0x00ff;</div>
<div class="line"><span class="lineno">  522</span>  }</div>
<div class="line"><span class="lineno">  523</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  524</span>    buf[11] = 0xff;</div>
<div class="line"><span class="lineno">  525</span>    buf[12] = 0xff;</div>
<div class="line"><span class="lineno">  526</span>    buf[15] = 0;</div>
<div class="line"><span class="lineno">  527</span>    buf[16] = 0;</div>
<div class="line"><span class="lineno">  528</span>  }</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>  buf[21] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 22);</div>
<div class="line"><span class="lineno">  533</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  534</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  535</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno">  536</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_initialize(): programmer not in sync, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  537</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, buf[0]);</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">if</span> (tries &gt; 33)</div>
<div class="line"><span class="lineno">  539</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  540</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  541</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  542</span>    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  543</span>  }</div>
<div class="line"><span class="lineno">  544</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  545</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_initialize(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  546</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  547</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  548</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  549</span>  }</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  552</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  553</span>  <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  554</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_initialize(): (b) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  555</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  556</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>, buf[0]);</div>
<div class="line"><span class="lineno">  557</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  558</span>  }</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>  <span class="keywordflow">if</span> (n_extparms) {</div>
<div class="line"><span class="lineno">  561</span>    <span class="keywordflow">if</span> ((p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a29062e481ca889056d823798f879a1b4">pagel</a> == 0) || (p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#adfde8a49a58bfcb074d71bf309d71334">bs2</a> == 0)) {</div>
<div class="line"><span class="lineno">  562</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#ae5a11e7738886ec5eb0ddecdf4b358ec">MSG_NOTICE2</a>, <span class="stringliteral">&quot;%s: PAGEL and BS2 signals not defined in the configuration &quot;</span></div>
<div class="line"><span class="lineno">  563</span>                          <span class="stringliteral">&quot;file for part %s, using dummy values\n&quot;</span>,</div>
<div class="line"><span class="lineno">  564</span>                          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a8a1a31ff99738c37d5a3b15712261ead">desc</a>);</div>
<div class="line"><span class="lineno">  565</span>      buf[2] = 0xD7;            <span class="comment">/* they look somehow possible, */</span></div>
<div class="line"><span class="lineno">  566</span>      buf[3] = 0xA0;            <span class="comment">/* don&#39;t they? ;) */</span></div>
<div class="line"><span class="lineno">  567</span>    }</div>
<div class="line"><span class="lineno">  568</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  569</span>      buf[2] = p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a29062e481ca889056d823798f879a1b4">pagel</a>;</div>
<div class="line"><span class="lineno">  570</span>      buf[3] = p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#adfde8a49a58bfcb074d71bf309d71334">bs2</a>;</div>
<div class="line"><span class="lineno">  571</span>    }</div>
<div class="line"><span class="lineno">  572</span>    buf[0] = n_extparms+1;</div>
<div class="line"><span class="lineno">  573</span> </div>
<div class="line"><span class="lineno">  574</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  575</span><span class="comment">     * m is currently pointing to eeprom memory if the part has it</span></div>
<div class="line"><span class="lineno">  576</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  577</span>    <span class="keywordflow">if</span> (m)</div>
<div class="line"><span class="lineno">  578</span>      buf[1] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a9d797017271ffa71a1e3e5729ba56711">page_size</a>;</div>
<div class="line"><span class="lineno">  579</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  580</span>      buf[1] = 0;</div>
<div class="line"><span class="lineno">  581</span> </div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>    <span class="keywordflow">if</span> (n_extparms == 4) {</div>
<div class="line"><span class="lineno">  584</span>      <span class="keywordflow">if</span> (p-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#abbf1a6bc0c04159613bde2c29fd3cc45">reset_disposition</a> == <a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#abed82baf7f470b522273a3e37c24c600a245d45c3b7ddbf840d243d5e1bff1264">RESET_DEDICATED</a>)</div>
<div class="line"><span class="lineno">  585</span>        buf[4] = 0;</div>
<div class="line"><span class="lineno">  586</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  587</span>        buf[4] = 1;</div>
<div class="line"><span class="lineno">  588</span>    }</div>
<div class="line"><span class="lineno">  589</span> </div>
<div class="line"><span class="lineno">  590</span>    rc = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a547fc67e683b766f3f555aae3d595edb">stk500_set_extended_parms</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, n_extparms+1, buf);</div>
<div class="line"><span class="lineno">  591</span>    <span class="keywordflow">if</span> (rc) {</div>
<div class="line"><span class="lineno">  592</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_initialize(): failed\n&quot;</span>, <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  593</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  594</span>    }</div>
<div class="line"><span class="lineno">  595</span>  }</div>
<div class="line"><span class="lineno">  596</span> </div>
<div class="line"><span class="lineno">  597</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#aa11416566c4cdc0673f1cece7ad53cdc">program_enable</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, p);</div>
<div class="line"><span class="lineno">  598</span>}</div>
<div class="ttc" id="aavrdude_8h_html_ae5a11e7738886ec5eb0ddecdf4b358ec"><div class="ttname"><a href="../../db/daf/avrdude_8h.html#ae5a11e7738886ec5eb0ddecdf4b358ec">MSG_NOTICE2</a></div><div class="ttdeci">#define MSG_NOTICE2</div><div class="ttdef"><b>Definition</b> avrdude.h:53</div></div>
<div class="ttc" id="aavrpart_8c_html_ac270cad9c51ac6da0bb27ee27620f524"><div class="ttname"><a href="../../df/dd5/avrpart_8c.html#ac270cad9c51ac6da0bb27ee27620f524">avr_locate_mem</a></div><div class="ttdeci">AVRMEM * avr_locate_mem(AVRPART *p, char *desc)</div><div class="ttdef"><b>Definition</b> avrpart.c:354</div></div>
<div class="ttc" id="alibavrdude_8h_html_a27793844852a3ea151759875c10a7ff6"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a27793844852a3ea151759875c10a7ff6">AVRPART_PSEUDOPARALLEL</a></div><div class="ttdeci">#define AVRPART_PSEUDOPARALLEL</div><div class="ttdef"><b>Definition</b> libavrdude.h:197</div></div>
<div class="ttc" id="alibavrdude_8h_html_a29062e481ca889056d823798f879a1b4"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a29062e481ca889056d823798f879a1b4">avrpart::pagel</a></div><div class="ttdeci">unsigned char pagel</div><div class="ttdef"><b>Definition</b> libavrdude.h:223</div></div>
<div class="ttc" id="alibavrdude_8h_html_a4a128d79391cd4fbf1c4723387a05731"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a4a128d79391cd4fbf1c4723387a05731">avrmem::readback</a></div><div class="ttdeci">unsigned char readback[2]</div><div class="ttdef"><b>Definition</b> libavrdude.h:296</div></div>
<div class="ttc" id="alibavrdude_8h_html_a66a16d993e92825c5b793b7d5bdd1a6e"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a66a16d993e92825c5b793b7d5bdd1a6e">avrmem::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> libavrdude.h:286</div></div>
<div class="ttc" id="alibavrdude_8h_html_a6c072313c70a0b0344ec8cd39ef88a98"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a6c072313c70a0b0344ec8cd39ef88a98">AVRPART_PARALLELOK</a></div><div class="ttdeci">#define AVRPART_PARALLELOK</div><div class="ttdef"><b>Definition</b> libavrdude.h:196</div></div>
<div class="ttc" id="alibavrdude_8h_html_a79b0eaa832974d0562c4bc17716eb4e7"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a79b0eaa832974d0562c4bc17716eb4e7">avrmem::paged</a></div><div class="ttdeci">int paged</div><div class="ttdef"><b>Definition</b> libavrdude.h:285</div></div>
<div class="ttc" id="alibavrdude_8h_html_a9d797017271ffa71a1e3e5729ba56711"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a9d797017271ffa71a1e3e5729ba56711">avrmem::page_size</a></div><div class="ttdeci">int page_size</div><div class="ttdef"><b>Definition</b> libavrdude.h:287</div></div>
<div class="ttc" id="alibavrdude_8h_html_a9d99e823010f950b5b366486ed719044"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a9d99e823010f950b5b366486ed719044">AVRPART_SERIALOK</a></div><div class="ttdeci">#define AVRPART_SERIALOK</div><div class="ttdef"><b>Definition</b> libavrdude.h:195</div></div>
<div class="ttc" id="alibavrdude_8h_html_abbf1a6bc0c04159613bde2c29fd3cc45"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#abbf1a6bc0c04159613bde2c29fd3cc45">avrpart::reset_disposition</a></div><div class="ttdeci">int reset_disposition</div><div class="ttdef"><b>Definition</b> libavrdude.h:227</div></div>
<div class="ttc" id="alibavrdude_8h_html_abed82baf7f470b522273a3e37c24c600a245d45c3b7ddbf840d243d5e1bff1264"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#abed82baf7f470b522273a3e37c24c600a245d45c3b7ddbf840d243d5e1bff1264">RESET_DEDICATED</a></div><div class="ttdeci">@ RESET_DEDICATED</div><div class="ttdef"><b>Definition</b> libavrdude.h:171</div></div>
<div class="ttc" id="alibavrdude_8h_html_adfde8a49a58bfcb074d71bf309d71334"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#adfde8a49a58bfcb074d71bf309d71334">avrpart::bs2</a></div><div class="ttdeci">unsigned char bs2</div><div class="ttdef"><b>Definition</b> libavrdude.h:224</div></div>
<div class="ttc" id="alibavrdude_8h_html_ae9622e4b2cb8e28cee9a0f7dca9baa92"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ae9622e4b2cb8e28cee9a0f7dca9baa92">avrpart::flags</a></div><div class="ttdeci">unsigned flags</div><div class="ttdef"><b>Definition</b> libavrdude.h:230</div></div>
<div class="ttc" id="alibavrdude_8h_html_afa0193e8828618a2c5f00856d262699b"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#afa0193e8828618a2c5f00856d262699b">avrpart::stk500_devcode</a></div><div class="ttdeci">int stk500_devcode</div><div class="ttdef"><b>Definition</b> libavrdude.h:220</div></div>
<div class="ttc" id="alibavrdude_8h_html_d5/dbe/structavrmem"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#d5/dbe/structavrmem">avrmem</a></div><div class="ttdef"><b>Definition</b> libavrdude.h:283</div></div>
<div class="ttc" id="astk500_8c_html_a547fc67e683b766f3f555aae3d595edb"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a547fc67e683b766f3f555aae3d595edb">stk500_set_extended_parms</a></div><div class="ttdeci">static int stk500_set_extended_parms(PROGRAMMER *pgm, int n, unsigned char *cmd)</div><div class="ttdef"><b>Definition</b> stk500.c:274</div></div>
<div class="ttc" id="astk500__private_8h_html_aeeeca88442d2389040333fec1eb0de4a"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#aeeeca88442d2389040333fec1eb0de4a">Cmnd_STK_SET_DEVICE</a></div><div class="ttdeci">#define Cmnd_STK_SET_DEVICE</div><div class="ttdef"><b>Definition</b> stk500_private.h:41</div></div>
<div class="ttc" id="astructprogrammer__t_html_aa11416566c4cdc0673f1cece7ad53cdc"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#aa11416566c4cdc0673f1cece7ad53cdc">programmer_t::program_enable</a></div><div class="ttdeci">int(* program_enable)(struct programmer_t *pgm, AVRPART *p)</div><div class="ttdef"><b>Definition</b> libavrdude.h:649</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00354">avr_locate_mem()</a>, <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00196">AVRPART_PARALLELOK</a>, <a class="el" href="../../#l00197">AVRPART_PSEUDOPARALLEL</a>, <a class="el" href="../../#l00195">AVRPART_SERIALOK</a>, <a class="el" href="../../#l00224">avrpart::bs2</a>, <a class="el" href="../../#l00041">Cmnd_STK_SET_DEVICE</a>, <a class="el" href="../../#l00218">avrpart::desc</a>, <a class="el" href="../../#l00230">avrpart::flags</a>, <a class="el" href="../../#l00617">programmer_t::id</a>, <a class="el" href="../../#l00720">ldata()</a>, <a class="el" href="../../#l00688">lfirst()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00053">MSG_NOTICE2</a>, <a class="el" href="../../#l00287">avrmem::page_size</a>, <a class="el" href="../../#l00285">avrmem::paged</a>, <a class="el" href="../../#l00223">avrpart::pagel</a>, <a class="el" href="../../#l00072">Parm_STK_SW_MAJOR</a>, <a class="el" href="../../#l00073">Parm_STK_SW_MINOR</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00649">programmer_t::program_enable</a>, <a class="el" href="../../#l00296">avrmem::readback</a>, <a class="el" href="../../#l00171">RESET_DEDICATED</a>, <a class="el" href="../../#l00227">avrpart::reset_disposition</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00286">avrmem::size</a>, <a class="el" href="../../#l00220">avrpart::stk500_devcode</a>, <a class="el" href="../../#l01107">stk500_getparm()</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, <a class="el" href="../../#l00274">stk500_set_extended_parms()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a1647ffcfad8694c0d80f77c0b9716832_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a1647ffcfad8694c0d80f77c0b9716832_icgraph.svg" width="667" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0b95471cba97fa400381cf216fbfc16b" name="a0b95471cba97fa400381cf216fbfc16b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b95471cba97fa400381cf216fbfc16b">&#9670;&#160;</a></span>stk500_initpgm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_initpgm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1322</span>{</div>
<div class="line"><span class="lineno"> 1323</span>  strcpy(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#adb113747399343501adc958df6c201ff">type</a>, <span class="stringliteral">&quot;STK500&quot;</span>);</div>
<div class="line"><span class="lineno"> 1324</span> </div>
<div class="line"><span class="lineno"> 1325</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1326</span><span class="comment">   * mandatory functions</span></div>
<div class="line"><span class="lineno"> 1327</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno"> 1328</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#ae1605ff194688941e8667dbb2832b01a">initialize</a>     = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a1647ffcfad8694c0d80f77c0b9716832">stk500_initialize</a>;</div>
<div class="line"><span class="lineno"> 1329</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a01e72d231ae9cfb477d4b17e59b99629">display</a>        = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a4e0432d1156876a3109874f01415ff4c">stk500_display</a>;</div>
<div class="line"><span class="lineno"> 1330</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a91c23b20622f9f9d521b376ab06fb766">enable</a>         = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#af6f35accd0a7bf3311f6a9e8ecb5ccf3">stk500_enable</a>;</div>
<div class="line"><span class="lineno"> 1331</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#af379e8b085ee2b46653d59beb51a0018">disable</a>        = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a43870bafd518cb34259c6b8f26b17069">stk500_disable</a>;</div>
<div class="line"><span class="lineno"> 1332</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#aa11416566c4cdc0673f1cece7ad53cdc">program_enable</a> = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac5343cc46d394a9a3d2201efaf843be9">stk500_program_enable</a>;</div>
<div class="line"><span class="lineno"> 1333</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#af29e4f48b086ad45c22e2295d8198fac">chip_erase</a>     = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a15a9f5551fd1bae8626a36062ff22f07">stk500_chip_erase</a>;</div>
<div class="line"><span class="lineno"> 1334</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a7a9574c193527210eafe66320cc25381">cmd</a>            = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2abe22deba0cd804f530766b8cdd49bb">stk500_cmd</a>;</div>
<div class="line"><span class="lineno"> 1335</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a14c5e9e18079ec111751178160e414da">open</a>           = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#afd7f21b0cfd1cba6cc45be0ffc547d8a">stk500_open</a>;</div>
<div class="line"><span class="lineno"> 1336</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#aec89a5e18122747ecc59ebb94eea0787">close</a>          = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a9e819c9762657bdfc47d63bfadd41bc4">stk500_close</a>;</div>
<div class="line"><span class="lineno"> 1337</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a17124abbb6d4c05c4d467687c0b9ea18">read_byte</a>      = <a class="code hl_function" href="../../d1/d26/avr_8c.html#a85e221dfbfc8d49b12db629c4b257269">avr_read_byte_default</a>;</div>
<div class="line"><span class="lineno"> 1338</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#ab29618c5cfd46d946b8a22016d28f839">write_byte</a>     = <a class="code hl_function" href="../../d1/d26/avr_8c.html#a2738ec92c96c410c12c72595a2c9a5d1">avr_write_byte_default</a>;</div>
<div class="line"><span class="lineno"> 1339</span> </div>
<div class="line"><span class="lineno"> 1340</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1341</span><span class="comment">   * optional functions</span></div>
<div class="line"><span class="lineno"> 1342</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno"> 1343</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a02603524a905f4b009aceb14dd60b6d9">paged_write</a>    = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ad12e8ab66293ed0394718e6e805755d0">stk500_paged_write</a>;</div>
<div class="line"><span class="lineno"> 1344</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a1c1ce727dac1ad33cb55a178e7930641">paged_load</a>     = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a041d15ca91f86e8785ea07c78c871997">stk500_paged_load</a>;</div>
<div class="line"><span class="lineno"> 1345</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#ab8db818b578df1b356e69f888b960bf3">print_parms</a>    = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a9a3f98c6b3923b91c0059c9144f38221">stk500_print_parms</a>;</div>
<div class="line"><span class="lineno"> 1346</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a2de080c8f81841e76898945ef495e12a">set_vtarget</a>    = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a212ec192515d105d2f2239a36c907c85">stk500_set_vtarget</a>;</div>
<div class="line"><span class="lineno"> 1347</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a6ff8f9e22a68ae903a5bc973a4f4141b">set_varef</a>      = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a7f029846508974fd9bf14cb7d4144096">stk500_set_varef</a>;</div>
<div class="line"><span class="lineno"> 1348</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#ab879a0d96e15edac4bed2b71108f82e2">set_fosc</a>       = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a9ec1baef2c10142b5e963d469bd01877">stk500_set_fosc</a>;</div>
<div class="line"><span class="lineno"> 1349</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#af0595cb3de1cb4184cf2469de0c60452">set_sck_period</a> = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a668b2ae491cb226fe45ab2b0fa2ecd97">stk500_set_sck_period</a>;</div>
<div class="line"><span class="lineno"> 1350</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#ab704996c4ccf74bf902ac3106a424908">setup</a>          = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#aaddcb15fd8c515d15d6a38724ef936de">stk500_setup</a>;</div>
<div class="line"><span class="lineno"> 1351</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a6c5a6e2f6821c3bbc9b0a6a88eb1c721">teardown</a>       = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ae3107e77db1884af8d818f8b060f1149">stk500_teardown</a>;</div>
<div class="line"><span class="lineno"> 1352</span>  <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#afbc0c1b0a1f51005bdd38417918cb7d2">page_size</a>      = 256;</div>
<div class="line"><span class="lineno"> 1353</span>}</div>
<div class="ttc" id="aavr_8c_html_a2738ec92c96c410c12c72595a2c9a5d1"><div class="ttname"><a href="../../d1/d26/avr_8c.html#a2738ec92c96c410c12c72595a2c9a5d1">avr_write_byte_default</a></div><div class="ttdeci">int avr_write_byte_default(PROGRAMMER *pgm, AVRPART *p, AVRMEM *mem, unsigned long addr, unsigned char data)</div><div class="ttdef"><b>Definition</b> avr.c:530</div></div>
<div class="ttc" id="aavr_8c_html_a85e221dfbfc8d49b12db629c4b257269"><div class="ttname"><a href="../../d1/d26/avr_8c.html#a85e221dfbfc8d49b12db629c4b257269">avr_read_byte_default</a></div><div class="ttdeci">int avr_read_byte_default(PROGRAMMER *pgm, AVRPART *p, AVRMEM *mem, unsigned long addr, unsigned char *value)</div><div class="ttdef"><b>Definition</b> avr.c:183</div></div>
<div class="ttc" id="astk500_8c_html_a041d15ca91f86e8785ea07c78c871997"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a041d15ca91f86e8785ea07c78c871997">stk500_paged_load</a></div><div class="ttdeci">static int stk500_paged_load(PROGRAMMER *pgm, AVRPART *p, AVRMEM *m, unsigned int page_size, unsigned int addr, unsigned int n_bytes)</div><div class="ttdef"><b>Definition</b> stk500.c:882</div></div>
<div class="ttc" id="astk500_8c_html_a15a9f5551fd1bae8626a36062ff22f07"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a15a9f5551fd1bae8626a36062ff22f07">stk500_chip_erase</a></div><div class="ttdeci">static int stk500_chip_erase(PROGRAMMER *pgm, AVRPART *p)</div><div class="ttdef"><b>Definition</b> stk500.c:180</div></div>
<div class="ttc" id="astk500_8c_html_a1647ffcfad8694c0d80f77c0b9716832"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a1647ffcfad8694c0d80f77c0b9716832">stk500_initialize</a></div><div class="ttdeci">static int stk500_initialize(PROGRAMMER *pgm, AVRPART *p)</div><div class="ttdef"><b>Definition</b> stk500.c:411</div></div>
<div class="ttc" id="astk500_8c_html_a212ec192515d105d2f2239a36c907c85"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a212ec192515d105d2f2239a36c907c85">stk500_set_vtarget</a></div><div class="ttdeci">static int stk500_set_vtarget(PROGRAMMER *pgm, double v)</div><div class="ttdef"><b>Definition</b> stk500.c:982</div></div>
<div class="ttc" id="astk500_8c_html_a2abe22deba0cd804f530766b8cdd49bb"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a2abe22deba0cd804f530766b8cdd49bb">stk500_cmd</a></div><div class="ttdeci">static int stk500_cmd(PROGRAMMER *pgm, const unsigned char *cmd, unsigned char *res)</div><div class="ttdef"><b>Definition</b> stk500.c:138</div></div>
<div class="ttc" id="astk500_8c_html_a43870bafd518cb34259c6b8f26b17069"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a43870bafd518cb34259c6b8f26b17069">stk500_disable</a></div><div class="ttdeci">static void stk500_disable(PROGRAMMER *pgm)</div><div class="ttdef"><b>Definition</b> stk500.c:601</div></div>
<div class="ttc" id="astk500_8c_html_a4e0432d1156876a3109874f01415ff4c"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a4e0432d1156876a3109874f01415ff4c">stk500_display</a></div><div class="ttdeci">static void stk500_display(PROGRAMMER *pgm, const char *p)</div><div class="ttdef"><b>Definition</b> stk500.c:1219</div></div>
<div class="ttc" id="astk500_8c_html_a668b2ae491cb226fe45ab2b0fa2ecd97"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a668b2ae491cb226fe45ab2b0fa2ecd97">stk500_set_sck_period</a></div><div class="ttdeci">static int stk500_set_sck_period(PROGRAMMER *pgm, double v)</div><div class="ttdef"><b>Definition</b> stk500.c:1084</div></div>
<div class="ttc" id="astk500_8c_html_a7f029846508974fd9bf14cb7d4144096"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a7f029846508974fd9bf14cb7d4144096">stk500_set_varef</a></div><div class="ttdeci">static int stk500_set_varef(PROGRAMMER *pgm, unsigned int chan, double v)</div><div class="ttdef"><b>Definition</b> stk500.c:1005</div></div>
<div class="ttc" id="astk500_8c_html_a9a3f98c6b3923b91c0059c9144f38221"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a9a3f98c6b3923b91c0059c9144f38221">stk500_print_parms</a></div><div class="ttdeci">static void stk500_print_parms(PROGRAMMER *pgm)</div><div class="ttdef"><b>Definition</b> stk500.c:1297</div></div>
<div class="ttc" id="astk500_8c_html_a9e819c9762657bdfc47d63bfadd41bc4"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a9e819c9762657bdfc47d63bfadd41bc4">stk500_close</a></div><div class="ttdeci">static void stk500_close(PROGRAMMER *pgm)</div><div class="ttdef"><b>Definition</b> stk500.c:686</div></div>
<div class="ttc" id="astk500_8c_html_a9ec1baef2c10142b5e963d469bd01877"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a9ec1baef2c10142b5e963d469bd01877">stk500_set_fosc</a></div><div class="ttdeci">static int stk500_set_fosc(PROGRAMMER *pgm, double v)</div><div class="ttdef"><b>Definition</b> stk500.c:1028</div></div>
<div class="ttc" id="astk500_8c_html_aaddcb15fd8c515d15d6a38724ef936de"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#aaddcb15fd8c515d15d6a38724ef936de">stk500_setup</a></div><div class="ttdeci">static void stk500_setup(PROGRAMMER *pgm)</div><div class="ttdef"><b>Definition</b> stk500.c:1302</div></div>
<div class="ttc" id="astk500_8c_html_ac5343cc46d394a9a3d2201efaf843be9"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#ac5343cc46d394a9a3d2201efaf843be9">stk500_program_enable</a></div><div class="ttdeci">static int stk500_program_enable(PROGRAMMER *pgm, AVRPART *p)</div><div class="ttdef"><b>Definition</b> stk500.c:215</div></div>
<div class="ttc" id="astk500_8c_html_ad12e8ab66293ed0394718e6e805755d0"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#ad12e8ab66293ed0394718e6e805755d0">stk500_paged_write</a></div><div class="ttdeci">static int stk500_paged_write(PROGRAMMER *pgm, AVRPART *p, AVRMEM *m, unsigned int page_size, unsigned int addr, unsigned int n_bytes)</div><div class="ttdef"><b>Definition</b> stk500.c:765</div></div>
<div class="ttc" id="astk500_8c_html_ae3107e77db1884af8d818f8b060f1149"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#ae3107e77db1884af8d818f8b060f1149">stk500_teardown</a></div><div class="ttdeci">static void stk500_teardown(PROGRAMMER *pgm)</div><div class="ttdef"><b>Definition</b> stk500.c:1314</div></div>
<div class="ttc" id="astk500_8c_html_af6f35accd0a7bf3311f6a9e8ecb5ccf3"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#af6f35accd0a7bf3311f6a9e8ecb5ccf3">stk500_enable</a></div><div class="ttdeci">static void stk500_enable(PROGRAMMER *pgm)</div><div class="ttdef"><b>Definition</b> stk500.c:650</div></div>
<div class="ttc" id="astk500_8c_html_afd7f21b0cfd1cba6cc45be0ffc547d8a"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#afd7f21b0cfd1cba6cc45be0ffc547d8a">stk500_open</a></div><div class="ttdeci">static int stk500_open(PROGRAMMER *pgm, char *port)</div><div class="ttdef"><b>Definition</b> stk500.c:656</div></div>
<div class="ttc" id="astructprogrammer__t_html_a01e72d231ae9cfb477d4b17e59b99629"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a01e72d231ae9cfb477d4b17e59b99629">programmer_t::display</a></div><div class="ttdeci">void(* display)(struct programmer_t *pgm, const char *p)</div><div class="ttdef"><b>Definition</b> libavrdude.h:644</div></div>
<div class="ttc" id="astructprogrammer__t_html_a02603524a905f4b009aceb14dd60b6d9"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a02603524a905f4b009aceb14dd60b6d9">programmer_t::paged_write</a></div><div class="ttdeci">int(* paged_write)(struct programmer_t *pgm, AVRPART *p, AVRMEM *m, unsigned int page_size, unsigned int baseaddr, unsigned int n_bytes)</div><div class="ttdef"><b>Definition</b> libavrdude.h:659</div></div>
<div class="ttc" id="astructprogrammer__t_html_a14c5e9e18079ec111751178160e414da"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a14c5e9e18079ec111751178160e414da">programmer_t::open</a></div><div class="ttdeci">int(* open)(struct programmer_t *pgm, char *port)</div><div class="ttdef"><b>Definition</b> libavrdude.h:657</div></div>
<div class="ttc" id="astructprogrammer__t_html_a17124abbb6d4c05c4d467687c0b9ea18"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a17124abbb6d4c05c4d467687c0b9ea18">programmer_t::read_byte</a></div><div class="ttdeci">int(* read_byte)(struct programmer_t *pgm, AVRPART *p, AVRMEM *m, unsigned long addr, unsigned char *value)</div><div class="ttdef"><b>Definition</b> libavrdude.h:670</div></div>
<div class="ttc" id="astructprogrammer__t_html_a1c1ce727dac1ad33cb55a178e7930641"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a1c1ce727dac1ad33cb55a178e7930641">programmer_t::paged_load</a></div><div class="ttdeci">int(* paged_load)(struct programmer_t *pgm, AVRPART *p, AVRMEM *m, unsigned int page_size, unsigned int baseaddr, unsigned int n_bytes)</div><div class="ttdef"><b>Definition</b> libavrdude.h:662</div></div>
<div class="ttc" id="astructprogrammer__t_html_a2de080c8f81841e76898945ef495e12a"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a2de080c8f81841e76898945ef495e12a">programmer_t::set_vtarget</a></div><div class="ttdeci">int(* set_vtarget)(struct programmer_t *pgm, double v)</div><div class="ttdef"><b>Definition</b> libavrdude.h:674</div></div>
<div class="ttc" id="astructprogrammer__t_html_a6c5a6e2f6821c3bbc9b0a6a88eb1c721"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a6c5a6e2f6821c3bbc9b0a6a88eb1c721">programmer_t::teardown</a></div><div class="ttdeci">void(* teardown)(struct programmer_t *pgm)</div><div class="ttdef"><b>Definition</b> libavrdude.h:685</div></div>
<div class="ttc" id="astructprogrammer__t_html_a6ff8f9e22a68ae903a5bc973a4f4141b"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a6ff8f9e22a68ae903a5bc973a4f4141b">programmer_t::set_varef</a></div><div class="ttdeci">int(* set_varef)(struct programmer_t *pgm, unsigned int chan, double v)</div><div class="ttdef"><b>Definition</b> libavrdude.h:675</div></div>
<div class="ttc" id="astructprogrammer__t_html_a91c23b20622f9f9d521b376ab06fb766"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a91c23b20622f9f9d521b376ab06fb766">programmer_t::enable</a></div><div class="ttdeci">void(* enable)(struct programmer_t *pgm)</div><div class="ttdef"><b>Definition</b> libavrdude.h:645</div></div>
<div class="ttc" id="astructprogrammer__t_html_ab29618c5cfd46d946b8a22016d28f839"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#ab29618c5cfd46d946b8a22016d28f839">programmer_t::write_byte</a></div><div class="ttdeci">int(* write_byte)(struct programmer_t *pgm, AVRPART *p, AVRMEM *m, unsigned long addr, unsigned char value)</div><div class="ttdef"><b>Definition</b> libavrdude.h:668</div></div>
<div class="ttc" id="astructprogrammer__t_html_ab704996c4ccf74bf902ac3106a424908"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#ab704996c4ccf74bf902ac3106a424908">programmer_t::setup</a></div><div class="ttdeci">void(* setup)(struct programmer_t *pgm)</div><div class="ttdef"><b>Definition</b> libavrdude.h:684</div></div>
<div class="ttc" id="astructprogrammer__t_html_ab879a0d96e15edac4bed2b71108f82e2"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#ab879a0d96e15edac4bed2b71108f82e2">programmer_t::set_fosc</a></div><div class="ttdeci">int(* set_fosc)(struct programmer_t *pgm, double v)</div><div class="ttdef"><b>Definition</b> libavrdude.h:676</div></div>
<div class="ttc" id="astructprogrammer__t_html_ab8db818b578df1b356e69f888b960bf3"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#ab8db818b578df1b356e69f888b960bf3">programmer_t::print_parms</a></div><div class="ttdeci">void(* print_parms)(struct programmer_t *pgm)</div><div class="ttdef"><b>Definition</b> libavrdude.h:673</div></div>
<div class="ttc" id="astructprogrammer__t_html_aec89a5e18122747ecc59ebb94eea0787"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#aec89a5e18122747ecc59ebb94eea0787">programmer_t::close</a></div><div class="ttdeci">void(* close)(struct programmer_t *pgm)</div><div class="ttdef"><b>Definition</b> libavrdude.h:658</div></div>
<div class="ttc" id="astructprogrammer__t_html_af0595cb3de1cb4184cf2469de0c60452"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#af0595cb3de1cb4184cf2469de0c60452">programmer_t::set_sck_period</a></div><div class="ttdeci">int(* set_sck_period)(struct programmer_t *pgm, double v)</div><div class="ttdef"><b>Definition</b> libavrdude.h:677</div></div>
<div class="ttc" id="astructprogrammer__t_html_af29e4f48b086ad45c22e2295d8198fac"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#af29e4f48b086ad45c22e2295d8198fac">programmer_t::chip_erase</a></div><div class="ttdeci">int(* chip_erase)(struct programmer_t *pgm, AVRPART *p)</div><div class="ttdef"><b>Definition</b> libavrdude.h:650</div></div>
<div class="ttc" id="astructprogrammer__t_html_af379e8b085ee2b46653d59beb51a0018"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#af379e8b085ee2b46653d59beb51a0018">programmer_t::disable</a></div><div class="ttdeci">void(* disable)(struct programmer_t *pgm)</div><div class="ttdef"><b>Definition</b> libavrdude.h:646</div></div>
<div class="ttc" id="astructprogrammer__t_html_afbc0c1b0a1f51005bdd38417918cb7d2"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#afbc0c1b0a1f51005bdd38417918cb7d2">programmer_t::page_size</a></div><div class="ttdeci">int page_size</div><div class="ttdef"><b>Definition</b> libavrdude.h:638</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00183">avr_read_byte_default()</a>, <a class="el" href="../../#l00530">avr_write_byte_default()</a>, <a class="el" href="../../#l00650">programmer_t::chip_erase</a>, <a class="el" href="../../#l00658">programmer_t::close</a>, <a class="el" href="../../#l00651">programmer_t::cmd</a>, <a class="el" href="../../#l00646">programmer_t::disable</a>, <a class="el" href="../../#l00644">programmer_t::display</a>, <a class="el" href="../../#l00645">programmer_t::enable</a>, <a class="el" href="../../#l00643">programmer_t::initialize</a>, <a class="el" href="../../#l00657">programmer_t::open</a>, <a class="el" href="../../#l00638">programmer_t::page_size</a>, <a class="el" href="../../#l00662">programmer_t::paged_load</a>, <a class="el" href="../../#l00659">programmer_t::paged_write</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00673">programmer_t::print_parms</a>, <a class="el" href="../../#l00649">programmer_t::program_enable</a>, <a class="el" href="../../#l00670">programmer_t::read_byte</a>, <a class="el" href="../../#l00676">programmer_t::set_fosc</a>, <a class="el" href="../../#l00677">programmer_t::set_sck_period</a>, <a class="el" href="../../#l00675">programmer_t::set_varef</a>, <a class="el" href="../../#l00674">programmer_t::set_vtarget</a>, <a class="el" href="../../#l00684">programmer_t::setup</a>, <a class="el" href="../../#l00180">stk500_chip_erase()</a>, <a class="el" href="../../#l00686">stk500_close()</a>, <a class="el" href="../../#l00138">stk500_cmd()</a>, <a class="el" href="../../#l00601">stk500_disable()</a>, <a class="el" href="../../#l01219">stk500_display()</a>, <a class="el" href="../../#l00650">stk500_enable()</a>, <a class="el" href="../../#l00411">stk500_initialize()</a>, <a class="el" href="../../#l00656">stk500_open()</a>, <a class="el" href="../../#l00882">stk500_paged_load()</a>, <a class="el" href="../../#l00765">stk500_paged_write()</a>, <a class="el" href="../../#l01297">stk500_print_parms()</a>, <a class="el" href="../../#l00215">stk500_program_enable()</a>, <a class="el" href="../../#l01028">stk500_set_fosc()</a>, <a class="el" href="../../#l01084">stk500_set_sck_period()</a>, <a class="el" href="../../#l01005">stk500_set_varef()</a>, <a class="el" href="../../#l00982">stk500_set_vtarget()</a>, <a class="el" href="../../#l01302">stk500_setup()</a>, <a class="el" href="../../#l01314">stk500_teardown()</a>, <a class="el" href="../../#l00685">programmer_t::teardown</a>, <a class="el" href="../../#l00619">programmer_t::type</a>, and <a class="el" href="../../#l00668">programmer_t::write_byte</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00179">arduino_initpgm()</a>, and <a class="el" href="../../#l00041">stk500generic_open()</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a0b95471cba97fa400381cf216fbfc16b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a0b95471cba97fa400381cf216fbfc16b_icgraph.svg" width="506" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a342f176ade131a188ce2071a9462fddd" name="a342f176ade131a188ce2071a9462fddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a342f176ade131a188ce2071a9462fddd">&#9670;&#160;</a></span>stk500_loadaddr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_loadaddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  698</span>{</div>
<div class="line"><span class="lineno">  699</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[16];</div>
<div class="line"><span class="lineno">  700</span>  <span class="keywordtype">int</span> tries;</div>
<div class="line"><span class="lineno">  701</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ext_byte;</div>
<div class="line"><span class="lineno">  702</span>  <a class="code hl_struct" href="../../d2/d68/libavrdude_8h.html#dd/d64/structopcode">OPCODE</a> * lext;</div>
<div class="line"><span class="lineno">  703</span> </div>
<div class="line"><span class="lineno">  704</span>  tries = 0;</div>
<div class="line"><span class="lineno">  705</span> retry:</div>
<div class="line"><span class="lineno">  706</span>  tries++;</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>  <span class="comment">/* To support flash &gt; 64K words the correct Extended Address Byte is needed */</span></div>
<div class="line"><span class="lineno">  709</span>  lext = mem-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#aec868e58c97ab6ca8b83b2449321461f">op</a>[<a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635ac6cd0261b6cfded334a27e66682b73ad">AVR_OP_LOAD_EXT_ADDR</a>];</div>
<div class="line"><span class="lineno">  710</span>  <span class="keywordflow">if</span> (lext != NULL) {</div>
<div class="line"><span class="lineno">  711</span>    ext_byte = (addr &gt;&gt; 16) &amp; 0xff;</div>
<div class="line"><span class="lineno">  712</span>    <span class="keywordflow">if</span> (ext_byte != <a class="code hl_define" href="../../dd/d75/stk500_8c.html#a3ee902f4e72c2cd5b500d8f578f301ef">PDATA</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)-&gt;ext_addr_byte) {</div>
<div class="line"><span class="lineno">  713</span>      <span class="comment">/* Either this is the first addr load, or a 64K word boundary is</span></div>
<div class="line"><span class="lineno">  714</span><span class="comment">       * crossed, so set the ext addr byte */</span></div>
<div class="line"><span class="lineno">  715</span>      <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#ad411bdb04fa8abc5d0c89bc81ce9c170">avr_set_bits</a>(lext, buf);</div>
<div class="line"><span class="lineno">  716</span>      <a class="code hl_function" href="../../df/dd5/avrpart_8c.html#acb3fe8c61399b6f7b252f39c8018a99f">avr_set_addr</a>(lext, buf, addr);</div>
<div class="line"><span class="lineno">  717</span>      <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2abe22deba0cd804f530766b8cdd49bb">stk500_cmd</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, buf);</div>
<div class="line"><span class="lineno">  718</span>      <a class="code hl_define" href="../../dd/d75/stk500_8c.html#a3ee902f4e72c2cd5b500d8f578f301ef">PDATA</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)-&gt;ext_addr_byte = ext_byte;</div>
<div class="line"><span class="lineno">  719</span>    }</div>
<div class="line"><span class="lineno">  720</span>  }</div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a0a424cefa28dcf4bc94b29ddfe3aaee0">Cmnd_STK_LOAD_ADDRESS</a>;</div>
<div class="line"><span class="lineno">  723</span>  <span class="comment">// Workaround for the infamous &#39;;&#39; bug in the Prusa3D usb to serial converter.</span></div>
<div class="line"><span class="lineno">  724</span>  <span class="comment">// Send the binary data by nibbles to avoid transmitting the &#39;;&#39; character.</span></div>
<div class="line"><span class="lineno">  725</span>  buf[1] = addr &amp; 0x0f;</div>
<div class="line"><span class="lineno">  726</span>  buf[2] = addr &amp; 0xf0;</div>
<div class="line"><span class="lineno">  727</span>  buf[3] = (addr &gt;&gt; 8) &amp; 0x0f;</div>
<div class="line"><span class="lineno">  728</span>  buf[4] = (addr &gt;&gt; 8) &amp; 0xf0;</div>
<div class="line"><span class="lineno">  729</span>  buf[5] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">  730</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 6);</div>
<div class="line"><span class="lineno">  731</span> </div>
<div class="line"><span class="lineno">  732</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  733</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  734</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno">  735</span>    <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno">  736</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_loadaddr(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno">  737</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  738</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  739</span>    }</div>
<div class="line"><span class="lineno">  740</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  741</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  742</span>    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  743</span>  }</div>
<div class="line"><span class="lineno">  744</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  745</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_loadaddr(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  746</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  747</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  748</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  749</span>  }</div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  752</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  753</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  754</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  755</span>  }</div>
<div class="line"><span class="lineno">  756</span> </div>
<div class="line"><span class="lineno">  757</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: loadaddr(): (b) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  758</span>                  <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  759</span>                  <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  760</span> </div>
<div class="line"><span class="lineno">  761</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  762</span>}</div>
<div class="ttc" id="aavrpart_8c_html_acb3fe8c61399b6f7b252f39c8018a99f"><div class="ttname"><a href="../../df/dd5/avrpart_8c.html#acb3fe8c61399b6f7b252f39c8018a99f">avr_set_addr</a></div><div class="ttdeci">int avr_set_addr(OPCODE *op, unsigned char *cmd, unsigned long addr)</div><div class="ttdef"><b>Definition</b> avrpart.c:107</div></div>
<div class="ttc" id="alibavrdude_8h_html_a726ca809ffd3d67ab4b8476646f26635ac6cd0261b6cfded334a27e66682b73ad"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635ac6cd0261b6cfded334a27e66682b73ad">AVR_OP_LOAD_EXT_ADDR</a></div><div class="ttdeci">@ AVR_OP_LOAD_EXT_ADDR</div><div class="ttdef"><b>Definition</b> libavrdude.h:154</div></div>
<div class="ttc" id="alibavrdude_8h_html_aec868e58c97ab6ca8b83b2449321461f"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#aec868e58c97ab6ca8b83b2449321461f">avrmem::op</a></div><div class="ttdeci">OPCODE * op[AVR_OP_MAX]</div><div class="ttdef"><b>Definition</b> libavrdude.h:306</div></div>
<div class="ttc" id="alibavrdude_8h_html_dd/d64/structopcode"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#dd/d64/structopcode">opcode</a></div><div class="ttdef"><b>Definition</b> libavrdude.h:190</div></div>
<div class="ttc" id="astk500_8c_html_a3ee902f4e72c2cd5b500d8f578f301ef"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a3ee902f4e72c2cd5b500d8f578f301ef">PDATA</a></div><div class="ttdeci">#define PDATA(pgm)</div><div class="ttdef"><b>Definition</b> stk500.c:54</div></div>
<div class="ttc" id="astk500__private_8h_html_a0a424cefa28dcf4bc94b29ddfe3aaee0"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a0a424cefa28dcf4bc94b29ddfe3aaee0">Cmnd_STK_LOAD_ADDRESS</a></div><div class="ttdeci">#define Cmnd_STK_LOAD_ADDRESS</div><div class="ttdef"><b>Definition</b> stk500_private.h:48</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00154">AVR_OP_LOAD_EXT_ADDR</a>, <a class="el" href="../../#l00107">avr_set_addr()</a>, <a class="el" href="../../#l00080">avr_set_bits()</a>, <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00048">Cmnd_STK_LOAD_ADDRESS</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00306">avrmem::op</a>, <a class="el" href="../../#l00054">PDATA</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00138">stk500_cmd()</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00882">stk500_paged_load()</a>, and <a class="el" href="../../#l00765">stk500_paged_write()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a342f176ade131a188ce2071a9462fddd_cgraph.svg" width="607" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a342f176ade131a188ce2071a9462fddd_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="afd7f21b0cfd1cba6cc45be0ffc547d8a" name="afd7f21b0cfd1cba6cc45be0ffc547d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd7f21b0cfd1cba6cc45be0ffc547d8a">&#9670;&#160;</a></span>stk500_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  657</span>{</div>
<div class="line"><span class="lineno">  658</span>  <span class="keyword">union </span><a class="code hl_union" href="../../d2/d68/libavrdude_8h.html#db/d34/unionpinfo">pinfo</a> <a class="code hl_union" href="../../d2/d68/libavrdude_8h.html#db/d34/unionpinfo">pinfo</a>;</div>
<div class="line"><span class="lineno">  659</span>  strcpy(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a2d7124b78d19996c6e5735b4bd1f1e18">port</a>, port);</div>
<div class="line"><span class="lineno">  660</span>  <a class="code hl_union" href="../../d2/d68/libavrdude_8h.html#db/d34/unionpinfo">pinfo</a>.<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#ace7c0e41eddbd256a55d2ea9923b153f">baud</a> = <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a5eaf4d49b39f0c1824e7f7961bf97cd9">baudrate</a>? <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a5eaf4d49b39f0c1824e7f7961bf97cd9">baudrate</a>: 115200;</div>
<div class="line"><span class="lineno">  661</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a1b94603caed7e694d2613aa0d745fb5a">serial_open</a>(port, <a class="code hl_union" href="../../d2/d68/libavrdude_8h.html#db/d34/unionpinfo">pinfo</a>, &amp;<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">fd</a>)==-1) {</div>
<div class="line"><span class="lineno">  662</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  663</span>  }</div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>  <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  666</span><span class="comment">   * drain any extraneous input</span></div>
<div class="line"><span class="lineno">  667</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno">  668</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac3dab073187d6ee897f529939ccdf918">stk500_drain</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, 0);</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>  <span class="comment">// MIB510 init</span></div>
<div class="line"><span class="lineno">  671</span>  <span class="keywordflow">if</span> (strcmp(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#a59bcd8f586373668a1dbbf64b47fda5d">ldata</a>(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#aa4e89f2cb024b90526cc6d7c5cc282ba">lfirst</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a36126363995ced65ef00d97d425d4729">id</a>)), <span class="stringliteral">&quot;mib510&quot;</span>) == 0 &amp;&amp;</div>
<div class="line"><span class="lineno">  672</span>      <a class="code hl_function" href="../../dd/d75/stk500_8c.html#aa83a7555c8d3fe4737d85c19fc791cfe">mib510_isp</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, 1) != 0) {</div>
<div class="line"><span class="lineno">  673</span>    <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a211e87f7bfdbfa94ddc09f45795d130d">serial_close</a>(&amp;<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">fd</a>);</div>
<div class="line"><span class="lineno">  674</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  675</span>  }</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0) {</div>
<div class="line"><span class="lineno">  678</span>    <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a211e87f7bfdbfa94ddc09f45795d130d">serial_close</a>(&amp;<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">fd</a>);</div>
<div class="line"><span class="lineno">  679</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  680</span>  }</div>
<div class="line"><span class="lineno">  681</span> </div>
<div class="line"><span class="lineno">  682</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  683</span>}</div>
<div class="ttc" id="alibavrdude_8h_html_a1b94603caed7e694d2613aa0d745fb5a"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a1b94603caed7e694d2613aa0d745fb5a">serial_open</a></div><div class="ttdeci">#define serial_open</div><div class="ttdef"><b>Definition</b> libavrdude.h:574</div></div>
<div class="ttc" id="alibavrdude_8h_html_ace7c0e41eddbd256a55d2ea9923b153f"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ace7c0e41eddbd256a55d2ea9923b153f">pinfo::baud</a></div><div class="ttdeci">long baud</div><div class="ttdef"><b>Definition</b> libavrdude.h:537</div></div>
<div class="ttc" id="alibavrdude_8h_html_db/d34/unionpinfo"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#db/d34/unionpinfo">pinfo</a></div><div class="ttdef"><b>Definition</b> libavrdude.h:536</div></div>
<div class="ttc" id="astructprogrammer__t_html_a2d7124b78d19996c6e5735b4bd1f1e18"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a2d7124b78d19996c6e5735b4bd1f1e18">programmer_t::port</a></div><div class="ttdeci">char port[PGM_PORTLEN]</div><div class="ttdef"><b>Definition</b> libavrdude.h:620</div></div>
<div class="ttc" id="astructprogrammer__t_html_a5eaf4d49b39f0c1824e7f7961bf97cd9"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a5eaf4d49b39f0c1824e7f7961bf97cd9">programmer_t::baudrate</a></div><div class="ttdeci">int baudrate</div><div class="ttdef"><b>Definition</b> libavrdude.h:630</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00537">pinfo::baud</a>, <a class="el" href="../../#l00630">programmer_t::baudrate</a>, <a class="el" href="../../#l00637">programmer_t::fd</a>, <a class="el" href="../../#l00617">programmer_t::id</a>, <a class="el" href="../../#l00720">ldata()</a>, <a class="el" href="../../#l00688">lfirst()</a>, <a class="el" href="../../#l00342">mib510_isp()</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00620">programmer_t::port</a>, <a class="el" href="../../#l00576">serial_close</a>, <a class="el" href="../../#l00574">serial_open</a>, <a class="el" href="../../#l00082">stk500_drain()</a>, and <a class="el" href="../../#l00088">stk500_getsync()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_afd7f21b0cfd1cba6cc45be0ffc547d8a_cgraph.svg" width="100%" height="477"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_afd7f21b0cfd1cba6cc45be0ffc547d8a_icgraph.svg" width="648" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a041d15ca91f86e8785ea07c78c871997" name="a041d15ca91f86e8785ea07c78c871997"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a041d15ca91f86e8785ea07c78c871997">&#9670;&#160;</a></span>stk500_paged_load()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_paged_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>n_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  885</span>{</div>
<div class="line"><span class="lineno">  886</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[16];</div>
<div class="line"><span class="lineno">  887</span>  <span class="keywordtype">int</span> memtype;</div>
<div class="line"><span class="lineno">  888</span>  <span class="keywordtype">int</span> a_div;</div>
<div class="line"><span class="lineno">  889</span>  <span class="keywordtype">int</span> tries;</div>
<div class="line"><span class="lineno">  890</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;</div>
<div class="line"><span class="lineno">  891</span>  <span class="keywordtype">int</span> block_size;</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span>  <span class="keywordflow">if</span> (strcmp(m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#af2f1a258ab710d32c8dad8ca1e471ebf">desc</a>, <span class="stringliteral">&quot;flash&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  894</span>    memtype = <span class="charliteral">&#39;F&#39;</span>;</div>
<div class="line"><span class="lineno">  895</span>  }</div>
<div class="line"><span class="lineno">  896</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#af2f1a258ab710d32c8dad8ca1e471ebf">desc</a>, <span class="stringliteral">&quot;eeprom&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  897</span>    memtype = <span class="charliteral">&#39;E&#39;</span>;</div>
<div class="line"><span class="lineno">  898</span>  }</div>
<div class="line"><span class="lineno">  899</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  900</span>    <span class="keywordflow">return</span> -2;</div>
<div class="line"><span class="lineno">  901</span>  }</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span>  <span class="keywordflow">if</span> ((m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#aec868e58c97ab6ca8b83b2449321461f">op</a>[<a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a53e432ec9d5cf990a35bfa0e2def5457">AVR_OP_LOADPAGE_LO</a>]) || (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#aec868e58c97ab6ca8b83b2449321461f">op</a>[<a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a64d335e5dd4fb47bdb2ad26910695bcf">AVR_OP_READ_LO</a>]))</div>
<div class="line"><span class="lineno">  904</span>    a_div = 2;</div>
<div class="line"><span class="lineno">  905</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  906</span>    a_div = 1;</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>  n = addr + n_bytes;</div>
<div class="line"><span class="lineno">  909</span>  <span class="keywordflow">for</span> (; addr &lt; n; addr += block_size) {</div>
<div class="line"><span class="lineno">  910</span>    <span class="comment">// MIB510 uses fixed blocks size of 256 bytes</span></div>
<div class="line"><span class="lineno">  911</span>    <span class="keywordflow">if</span> (strcmp(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#a59bcd8f586373668a1dbbf64b47fda5d">ldata</a>(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#aa4e89f2cb024b90526cc6d7c5cc282ba">lfirst</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a36126363995ced65ef00d97d425d4729">id</a>)), <span class="stringliteral">&quot;mib510&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  912</span>      block_size = 256;</div>
<div class="line"><span class="lineno">  913</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  914</span>      <span class="keywordflow">if</span> (n - addr &lt; page_size)</div>
<div class="line"><span class="lineno">  915</span>        block_size = n - addr;</div>
<div class="line"><span class="lineno">  916</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  917</span>        block_size = page_size;</div>
<div class="line"><span class="lineno">  918</span>    }</div>
<div class="line"><span class="lineno">  919</span> </div>
<div class="line"><span class="lineno">  920</span>    tries = 0;</div>
<div class="line"><span class="lineno">  921</span>  retry:</div>
<div class="line"><span class="lineno">  922</span>    tries++;</div>
<div class="line"><span class="lineno">  923</span>    <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a342f176ade131a188ce2071a9462fddd">stk500_loadaddr</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, m, addr/a_div);</div>
<div class="line"><span class="lineno">  924</span>    buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#ab0d635300cf07e7146c2637ae21033f0">Cmnd_STK_READ_PAGE</a>;</div>
<div class="line"><span class="lineno">  925</span>    <span class="comment">// Workaround for the infamous &#39;;&#39; bug in the Prusa3D usb to serial converter.</span></div>
<div class="line"><span class="lineno">  926</span>    <span class="comment">// Send the binary data by nibbles to avoid transmitting the &#39;;&#39; character.</span></div>
<div class="line"><span class="lineno">  927</span>    buf[1] = (block_size &gt;&gt; 8) &amp; 0xf0;</div>
<div class="line"><span class="lineno">  928</span>    buf[2] = (block_size &gt;&gt; 8) &amp; 0x0f;</div>
<div class="line"><span class="lineno">  929</span>    buf[3] = block_size &amp; 0xf0;</div>
<div class="line"><span class="lineno">  930</span>    buf[4] = block_size &amp; 0x0f;</div>
<div class="line"><span class="lineno">  931</span>    buf[5] = memtype;</div>
<div class="line"><span class="lineno">  932</span>    buf[6] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">  933</span>    <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 7);</div>
<div class="line"><span class="lineno">  934</span> </div>
<div class="line"><span class="lineno">  935</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  936</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  937</span>    <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno">  938</span>      <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno">  939</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_paged_load(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno">  940</span>                <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  941</span>        <span class="keywordflow">return</span> -3;</div>
<div class="line"><span class="lineno">  942</span>      }</div>
<div class="line"><span class="lineno">  943</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  944</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  945</span>      <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  946</span>    }</div>
<div class="line"><span class="lineno">  947</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  948</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_paged_load(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  949</span>                      <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  950</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  951</span>      <span class="keywordflow">return</span> -4;</div>
<div class="line"><span class="lineno">  952</span>    }</div>
<div class="line"><span class="lineno">  953</span> </div>
<div class="line"><span class="lineno">  954</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, &amp;m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>[addr], block_size) &lt; 0)</div>
<div class="line"><span class="lineno">  955</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  956</span> </div>
<div class="line"><span class="lineno">  957</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  958</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span>    <span class="keywordflow">if</span>(strcmp(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#a59bcd8f586373668a1dbbf64b47fda5d">ldata</a>(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#aa4e89f2cb024b90526cc6d7c5cc282ba">lfirst</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a36126363995ced65ef00d97d425d4729">id</a>)), <span class="stringliteral">&quot;mib510&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  961</span>      <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  962</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_paged_load(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  963</span>                      <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  964</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  965</span>      <span class="keywordflow">return</span> -5;</div>
<div class="line"><span class="lineno">  966</span>    }</div>
<div class="line"><span class="lineno">  967</span>  }</div>
<div class="line"><span class="lineno">  968</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  969</span>      <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  970</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_paged_load(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  971</span>                        <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  972</span>                        <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>, buf[0]);</div>
<div class="line"><span class="lineno">  973</span>        <span class="keywordflow">return</span> -5;</div>
<div class="line"><span class="lineno">  974</span>      }</div>
<div class="line"><span class="lineno">  975</span>    }</div>
<div class="line"><span class="lineno">  976</span>  }</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span>  <span class="keywordflow">return</span> n_bytes;</div>
<div class="line"><span class="lineno">  979</span>}</div>
<div class="ttc" id="alibavrdude_8h_html_a726ca809ffd3d67ab4b8476646f26635a53e432ec9d5cf990a35bfa0e2def5457"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a53e432ec9d5cf990a35bfa0e2def5457">AVR_OP_LOADPAGE_LO</a></div><div class="ttdeci">@ AVR_OP_LOADPAGE_LO</div><div class="ttdef"><b>Definition</b> libavrdude.h:152</div></div>
<div class="ttc" id="alibavrdude_8h_html_a726ca809ffd3d67ab4b8476646f26635a64d335e5dd4fb47bdb2ad26910695bcf"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a64d335e5dd4fb47bdb2ad26910695bcf">AVR_OP_READ_LO</a></div><div class="ttdeci">@ AVR_OP_READ_LO</div><div class="ttdef"><b>Definition</b> libavrdude.h:148</div></div>
<div class="ttc" id="alibavrdude_8h_html_a982cb446f63a0bc5d6c04fbadb5b498a"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">avrmem::buf</a></div><div class="ttdeci">unsigned char * buf</div><div class="ttdef"><b>Definition</b> libavrdude.h:304</div></div>
<div class="ttc" id="alibavrdude_8h_html_af2f1a258ab710d32c8dad8ca1e471ebf"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#af2f1a258ab710d32c8dad8ca1e471ebf">avrmem::desc</a></div><div class="ttdeci">char desc[AVR_MEMDESCLEN]</div><div class="ttdef"><b>Definition</b> libavrdude.h:284</div></div>
<div class="ttc" id="astk500_8c_html_a342f176ade131a188ce2071a9462fddd"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#a342f176ade131a188ce2071a9462fddd">stk500_loadaddr</a></div><div class="ttdeci">static int stk500_loadaddr(PROGRAMMER *pgm, AVRMEM *mem, unsigned int addr)</div><div class="ttdef"><b>Definition</b> stk500.c:697</div></div>
<div class="ttc" id="astk500__private_8h_html_ab0d635300cf07e7146c2637ae21033f0"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#ab0d635300cf07e7146c2637ae21033f0">Cmnd_STK_READ_PAGE</a></div><div class="ttdeci">#define Cmnd_STK_READ_PAGE</div><div class="ttdef"><b>Definition</b> stk500_private.h:63</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00152">AVR_OP_LOADPAGE_LO</a>, <a class="el" href="../../#l00148">AVR_OP_READ_LO</a>, <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00063">Cmnd_STK_READ_PAGE</a>, <a class="el" href="../../#l00284">avrmem::desc</a>, <a class="el" href="../../#l00617">programmer_t::id</a>, <a class="el" href="../../#l00720">ldata()</a>, <a class="el" href="../../#l00688">lfirst()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00306">avrmem::op</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00697">stk500_loadaddr()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a041d15ca91f86e8785ea07c78c871997_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a041d15ca91f86e8785ea07c78c871997_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ad12e8ab66293ed0394718e6e805755d0" name="ad12e8ab66293ed0394718e6e805755d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad12e8ab66293ed0394718e6e805755d0">&#9670;&#160;</a></span>stk500_paged_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_paged_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#a0c22df11bc2acba2fcf6be7181a9f0d8">AVRMEM</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>n_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  768</span>{</div>
<div class="line"><span class="lineno">  769</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buf = alloca(page_size + 16);</div>
<div class="line"><span class="lineno">  770</span>  <span class="keywordtype">int</span> memtype;</div>
<div class="line"><span class="lineno">  771</span>  <span class="keywordtype">int</span> a_div;</div>
<div class="line"><span class="lineno">  772</span>  <span class="keywordtype">int</span> block_size;</div>
<div class="line"><span class="lineno">  773</span>  <span class="keywordtype">int</span> tries;</div>
<div class="line"><span class="lineno">  774</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;</div>
<div class="line"><span class="lineno">  775</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j;</div>
<div class="line"><span class="lineno">  776</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> prusa3d_semicolon_workaround_round = 0;</div>
<div class="line"><span class="lineno">  777</span>  <span class="keywordtype">bool</span> has_semicolon = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>  <span class="keywordflow">if</span> (strcmp(m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#af2f1a258ab710d32c8dad8ca1e471ebf">desc</a>, <span class="stringliteral">&quot;flash&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  780</span>    memtype = <span class="charliteral">&#39;F&#39;</span>;</div>
<div class="line"><span class="lineno">  781</span>  }</div>
<div class="line"><span class="lineno">  782</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#af2f1a258ab710d32c8dad8ca1e471ebf">desc</a>, <span class="stringliteral">&quot;eeprom&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  783</span>    memtype = <span class="charliteral">&#39;E&#39;</span>;</div>
<div class="line"><span class="lineno">  784</span>  }</div>
<div class="line"><span class="lineno">  785</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  786</span>    <span class="keywordflow">return</span> -2;</div>
<div class="line"><span class="lineno">  787</span>  }</div>
<div class="line"><span class="lineno">  788</span> </div>
<div class="line"><span class="lineno">  789</span>  <span class="keywordflow">if</span> ((m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#aec868e58c97ab6ca8b83b2449321461f">op</a>[<a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a53e432ec9d5cf990a35bfa0e2def5457">AVR_OP_LOADPAGE_LO</a>]) || (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#aec868e58c97ab6ca8b83b2449321461f">op</a>[<a class="code hl_enumvalue" href="../../d2/d68/libavrdude_8h.html#a726ca809ffd3d67ab4b8476646f26635a64d335e5dd4fb47bdb2ad26910695bcf">AVR_OP_READ_LO</a>]))</div>
<div class="line"><span class="lineno">  790</span>    a_div = 2;</div>
<div class="line"><span class="lineno">  791</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  792</span>    a_div = 1;</div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>  n = addr + n_bytes;</div>
<div class="line"><span class="lineno">  795</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  796</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;n_bytes   = %d\n&quot;</span></div>
<div class="line"><span class="lineno">  797</span>                  <span class="stringliteral">&quot;n         = %u\n&quot;</span></div>
<div class="line"><span class="lineno">  798</span>                  <span class="stringliteral">&quot;a_div     = %d\n&quot;</span></div>
<div class="line"><span class="lineno">  799</span>                  <span class="stringliteral">&quot;page_size = %d\n&quot;</span>,</div>
<div class="line"><span class="lineno">  800</span>                  n_bytes, n, a_div, page_size);</div>
<div class="line"><span class="lineno">  801</span><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="lineno">  802</span> </div>
<div class="line"><span class="lineno">  803</span>  <span class="keywordflow">for</span> (; addr &lt; n; addr += block_size) {</div>
<div class="line"><span class="lineno">  804</span>    <span class="comment">// MIB510 uses fixed blocks size of 256 bytes</span></div>
<div class="line"><span class="lineno">  805</span>    <span class="keywordflow">if</span> (strcmp(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#a59bcd8f586373668a1dbbf64b47fda5d">ldata</a>(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#aa4e89f2cb024b90526cc6d7c5cc282ba">lfirst</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a36126363995ced65ef00d97d425d4729">id</a>)), <span class="stringliteral">&quot;mib510&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  806</span>      block_size = 256;</div>
<div class="line"><span class="lineno">  807</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  808</span>      <span class="keywordflow">if</span> (n - addr &lt; page_size)</div>
<div class="line"><span class="lineno">  809</span>        block_size = n - addr;</div>
<div class="line"><span class="lineno">  810</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  811</span>        block_size = page_size;</div>
<div class="line"><span class="lineno">  812</span>    }</div>
<div class="line"><span class="lineno">  813</span>    tries = 0;</div>
<div class="line"><span class="lineno">  814</span>  retry:</div>
<div class="line"><span class="lineno">  815</span>    tries++;</div>
<div class="line"><span class="lineno">  816</span>    <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a342f176ade131a188ce2071a9462fddd">stk500_loadaddr</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, m, addr/a_div);</div>
<div class="line"><span class="lineno">  817</span> </div>
<div class="line"><span class="lineno">  818</span>    <span class="keywordflow">for</span> (i = 0; i &lt; n_bytes; ++ i)</div>
<div class="line"><span class="lineno">  819</span>      <span class="keywordflow">if</span> (m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>[addr + i] == <span class="charliteral">&#39;;&#39;</span>) {</div>
<div class="line"><span class="lineno">  820</span>        has_semicolon = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  821</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  822</span>      }</div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span>    <span class="keywordflow">for</span> (prusa3d_semicolon_workaround_round = 0; prusa3d_semicolon_workaround_round &lt; (has_semicolon ? 2u : 1u); prusa3d_semicolon_workaround_round++) {</div>
<div class="line"><span class="lineno">  825</span>      <span class="comment">/* build command block and avoid multiple send commands as it leads to a crash</span></div>
<div class="line"><span class="lineno">  826</span><span class="comment">          of the silabs usb serial driver on mac os x */</span></div>
<div class="line"><span class="lineno">  827</span>      i = 0;</div>
<div class="line"><span class="lineno">  828</span>      buf[i++] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a426d68078980a6009e57153f4ab7e910">Cmnd_STK_PROG_PAGE</a>;</div>
<div class="line"><span class="lineno">  829</span>      <span class="comment">// Workaround for the infamous &#39;;&#39; bug in the Prusa3D usb to serial converter.</span></div>
<div class="line"><span class="lineno">  830</span>      <span class="comment">// Send the binary data by nibbles to avoid transmitting the &#39;;&#39; character.</span></div>
<div class="line"><span class="lineno">  831</span>      buf[i++] = (block_size &gt;&gt; 8) &amp; 0xf0;</div>
<div class="line"><span class="lineno">  832</span>      buf[i++] = (block_size &gt;&gt; 8) &amp; 0x0f;</div>
<div class="line"><span class="lineno">  833</span>      buf[i++] = block_size &amp; 0xf0;</div>
<div class="line"><span class="lineno">  834</span>      buf[i++] = block_size &amp; 0x0f;</div>
<div class="line"><span class="lineno">  835</span>      buf[i++] = memtype;</div>
<div class="line"><span class="lineno">  836</span>      <span class="keywordflow">if</span> (has_semicolon) {</div>
<div class="line"><span class="lineno">  837</span>        <span class="keywordflow">for</span> (j = 0; j &lt; (unsigned)block_size; ++i, ++ j) {</div>
<div class="line"><span class="lineno">  838</span>          buf[i] = m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>[addr + j];</div>
<div class="line"><span class="lineno">  839</span>          <span class="keywordflow">if</span> (buf[i] == <span class="charliteral">&#39;;&#39;</span>)</div>
<div class="line"><span class="lineno">  840</span>            buf[i] |= (prusa3d_semicolon_workaround_round ? 0xf0 : 0x0f);</div>
<div class="line"><span class="lineno">  841</span>        }</div>
<div class="line"><span class="lineno">  842</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  843</span>        memcpy(&amp;buf[i], &amp;m-&gt;<a class="code hl_variable" href="../../d2/d68/libavrdude_8h.html#a982cb446f63a0bc5d6c04fbadb5b498a">buf</a>[addr], block_size);</div>
<div class="line"><span class="lineno">  844</span>        i += block_size;</div>
<div class="line"><span class="lineno">  845</span>      }</div>
<div class="line"><span class="lineno">  846</span>      buf[i++] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">  847</span>      <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>( <a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, i);</div>
<div class="line"><span class="lineno">  848</span> </div>
<div class="line"><span class="lineno">  849</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  850</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  851</span>      <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno">  852</span>        <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno">  853</span>          <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_paged_write(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno">  854</span>                  <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  855</span>          <span class="keywordflow">return</span> -3;</div>
<div class="line"><span class="lineno">  856</span>        }</div>
<div class="line"><span class="lineno">  857</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  858</span>          <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  859</span>        <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  860</span>      }</div>
<div class="line"><span class="lineno">  861</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  862</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_paged_write(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  863</span>                        <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  864</span>                        <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  865</span>        <span class="keywordflow">return</span> -4;</div>
<div class="line"><span class="lineno">  866</span>      }</div>
<div class="line"><span class="lineno">  867</span>      </div>
<div class="line"><span class="lineno">  868</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  869</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  870</span>      <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  871</span>        <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_paged_write(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  872</span>                        <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  873</span>                        <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  874</span>        <span class="keywordflow">return</span> -5;</div>
<div class="line"><span class="lineno">  875</span>      }</div>
<div class="line"><span class="lineno">  876</span>    }</div>
<div class="line"><span class="lineno">  877</span>  }</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>  <span class="keywordflow">return</span> n_bytes;</div>
<div class="line"><span class="lineno">  880</span>}</div>
<div class="ttc" id="astk500__private_8h_html_a426d68078980a6009e57153f4ab7e910"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a426d68078980a6009e57153f4ab7e910">Cmnd_STK_PROG_PAGE</a></div><div class="ttdeci">#define Cmnd_STK_PROG_PAGE</div><div class="ttdef"><b>Definition</b> stk500_private.h:56</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00152">AVR_OP_LOADPAGE_LO</a>, <a class="el" href="../../#l00148">AVR_OP_READ_LO</a>, <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00304">avrmem::buf</a>, <a class="el" href="../../#l00056">Cmnd_STK_PROG_PAGE</a>, <a class="el" href="../../#l00284">avrmem::desc</a>, <a class="el" href="../../#l00617">programmer_t::id</a>, <a class="el" href="../../#l00720">ldata()</a>, <a class="el" href="../../#l00688">lfirst()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00306">avrmem::op</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00697">stk500_loadaddr()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ad12e8ab66293ed0394718e6e805755d0_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ad12e8ab66293ed0394718e6e805755d0_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a9a3f98c6b3923b91c0059c9144f38221" name="a9a3f98c6b3923b91c0059c9144f38221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a3f98c6b3923b91c0059c9144f38221">&#9670;&#160;</a></span>stk500_print_parms()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_print_parms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1298</span>{</div>
<div class="line"><span class="lineno"> 1299</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2df66b3921bc61af8cc7eb38cac4578f">stk500_print_parms1</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 1300</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00192">pgm</a>, and <a class="el" href="../../#l01250">stk500_print_parms1()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a9a3f98c6b3923b91c0059c9144f38221_cgraph.svg" width="100%" height="490"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a9a3f98c6b3923b91c0059c9144f38221_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a2df66b3921bc61af8cc7eb38cac4578f" name="a2df66b3921bc61af8cc7eb38cac4578f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2df66b3921bc61af8cc7eb38cac4578f">&#9670;&#160;</a></span>stk500_print_parms1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_print_parms1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1251</span>{</div>
<div class="line"><span class="lineno"> 1252</span>  <span class="keywordtype">unsigned</span> vtarget, vadjust, osc_pscale, osc_cmatch, sck_duration;</div>
<div class="line"><span class="lineno"> 1253</span> </div>
<div class="line"><span class="lineno"> 1254</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a347cbe7164b4c488fe646b2ea7d6ea01">Parm_STK_VTARGET</a>, &amp;vtarget);</div>
<div class="line"><span class="lineno"> 1255</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a99bb6c74ff37e92def9b659aabca8fb9">Parm_STK_VADJUST</a>, &amp;vadjust);</div>
<div class="line"><span class="lineno"> 1256</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#ac951301f9c4985bf54c62c79ef29d61c">Parm_STK_OSC_PSCALE</a>, &amp;osc_pscale);</div>
<div class="line"><span class="lineno"> 1257</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#ae2c266595afc4a0aadd7e17f3ca29813">Parm_STK_OSC_CMATCH</a>, &amp;osc_cmatch);</div>
<div class="line"><span class="lineno"> 1258</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#ad73db361fee470589a9aafd465ebbb21">Parm_STK_SCK_DURATION</a>, &amp;sck_duration);</div>
<div class="line"><span class="lineno"> 1259</span> </div>
<div class="line"><span class="lineno"> 1260</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%sVtarget         : %.1f V\n&quot;</span>, p, vtarget / 10.0);</div>
<div class="line"><span class="lineno"> 1261</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%sVaref           : %.1f V\n&quot;</span>, p, vadjust / 10.0);</div>
<div class="line"><span class="lineno"> 1262</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%sOscillator      : &quot;</span>, p);</div>
<div class="line"><span class="lineno"> 1263</span>  <span class="keywordflow">if</span> (osc_pscale == 0)</div>
<div class="line"><span class="lineno"> 1264</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;Off\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1265</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1266</span>    <span class="keywordtype">int</span> prescale = 1;</div>
<div class="line"><span class="lineno"> 1267</span>    <span class="keywordtype">double</span> f = <a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a> / 2;</div>
<div class="line"><span class="lineno"> 1268</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *unit;</div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span>    <span class="keywordflow">switch</span> (osc_pscale) {</div>
<div class="line"><span class="lineno"> 1271</span>      <span class="keywordflow">case</span> 2: prescale = 8; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1272</span>      <span class="keywordflow">case</span> 3: prescale = 32; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1273</span>      <span class="keywordflow">case</span> 4: prescale = 64; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1274</span>      <span class="keywordflow">case</span> 5: prescale = 128; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1275</span>      <span class="keywordflow">case</span> 6: prescale = 256; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1276</span>      <span class="keywordflow">case</span> 7: prescale = 1024; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1277</span>    }</div>
<div class="line"><span class="lineno"> 1278</span>    f /= prescale;</div>
<div class="line"><span class="lineno"> 1279</span>    f /= (osc_cmatch + 1);</div>
<div class="line"><span class="lineno"> 1280</span>    <span class="keywordflow">if</span> (f &gt; 1e6) {</div>
<div class="line"><span class="lineno"> 1281</span>      f /= 1e6;</div>
<div class="line"><span class="lineno"> 1282</span>      unit = <span class="stringliteral">&quot;MHz&quot;</span>;</div>
<div class="line"><span class="lineno"> 1283</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f &gt; 1e3) {</div>
<div class="line"><span class="lineno"> 1284</span>      f /= 1000;</div>
<div class="line"><span class="lineno"> 1285</span>      unit = <span class="stringliteral">&quot;kHz&quot;</span>;</div>
<div class="line"><span class="lineno"> 1286</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1287</span>      unit = <span class="stringliteral">&quot;Hz&quot;</span>;</div>
<div class="line"><span class="lineno"> 1288</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%.3f %s\n&quot;</span>, f, unit);</div>
<div class="line"><span class="lineno"> 1289</span>  }</div>
<div class="line"><span class="lineno"> 1290</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%sSCK period      : %.1f us\n&quot;</span>, p,</div>
<div class="line"><span class="lineno"> 1291</span>    sck_duration * 8.0e6 / <a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a> + 0.05);</div>
<div class="line"><span class="lineno"> 1292</span> </div>
<div class="line"><span class="lineno"> 1293</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1294</span>}</div>
<div class="ttc" id="astk500_8c_html_af4ab65a2a5ace2cfa5f6cf059cf3fa1e"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a></div><div class="ttdeci">#define STK500_XTAL</div><div class="ttdef"><b>Definition</b> stk500.c:45</div></div>
<div class="ttc" id="astk500__private_8h_html_a347cbe7164b4c488fe646b2ea7d6ea01"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a347cbe7164b4c488fe646b2ea7d6ea01">Parm_STK_VTARGET</a></div><div class="ttdeci">#define Parm_STK_VTARGET</div><div class="ttdef"><b>Definition</b> stk500_private.h:75</div></div>
<div class="ttc" id="astk500__private_8h_html_a99bb6c74ff37e92def9b659aabca8fb9"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a99bb6c74ff37e92def9b659aabca8fb9">Parm_STK_VADJUST</a></div><div class="ttdeci">#define Parm_STK_VADJUST</div><div class="ttdef"><b>Definition</b> stk500_private.h:76</div></div>
<div class="ttc" id="astk500__private_8h_html_ac951301f9c4985bf54c62c79ef29d61c"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#ac951301f9c4985bf54c62c79ef29d61c">Parm_STK_OSC_PSCALE</a></div><div class="ttdeci">#define Parm_STK_OSC_PSCALE</div><div class="ttdef"><b>Definition</b> stk500_private.h:77</div></div>
<div class="ttc" id="astk500__private_8h_html_ad73db361fee470589a9aafd465ebbb21"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#ad73db361fee470589a9aafd465ebbb21">Parm_STK_SCK_DURATION</a></div><div class="ttdeci">#define Parm_STK_SCK_DURATION</div><div class="ttdef"><b>Definition</b> stk500_private.h:80</div></div>
<div class="ttc" id="astk500__private_8h_html_ae2c266595afc4a0aadd7e17f3ca29813"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#ae2c266595afc4a0aadd7e17f3ca29813">Parm_STK_OSC_CMATCH</a></div><div class="ttdeci">#define Parm_STK_OSC_CMATCH</div><div class="ttdef"><b>Definition</b> stk500_private.h:78</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00078">Parm_STK_OSC_CMATCH</a>, <a class="el" href="../../#l00077">Parm_STK_OSC_PSCALE</a>, <a class="el" href="../../#l00080">Parm_STK_SCK_DURATION</a>, <a class="el" href="../../#l00076">Parm_STK_VADJUST</a>, <a class="el" href="../../#l00075">Parm_STK_VTARGET</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l01107">stk500_getparm()</a>, and <a class="el" href="../../#l00045">STK500_XTAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01219">stk500_display()</a>, and <a class="el" href="../../#l01297">stk500_print_parms()</a>.</p>
<div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a2df66b3921bc61af8cc7eb38cac4578f_cgraph.svg" width="100%" height="490"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a2df66b3921bc61af8cc7eb38cac4578f_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ac5343cc46d394a9a3d2201efaf843be9" name="ac5343cc46d394a9a3d2201efaf843be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5343cc46d394a9a3d2201efaf843be9">&#9670;&#160;</a></span>stk500_program_enable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_program_enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ad20cf2afe340ad8c47dc12de7f93eaba">AVRPART</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  216</span>{</div>
<div class="line"><span class="lineno">  217</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[16];</div>
<div class="line"><span class="lineno">  218</span>  <span class="keywordtype">int</span> tries=0;</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span> retry:</div>
<div class="line"><span class="lineno">  221</span>  </div>
<div class="line"><span class="lineno">  222</span>  tries++;</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a00f2bad9ba3c271cff7148ca2c6e336c">Cmnd_STK_ENTER_PROGMODE</a>;</div>
<div class="line"><span class="lineno">  225</span>  buf[1] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 2);</div>
<div class="line"><span class="lineno">  228</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  230</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno">  231</span>    <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno">  232</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_program_enable(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno">  233</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  234</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  235</span>    }</div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  237</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  239</span>  }</div>
<div class="line"><span class="lineno">  240</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  241</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_program_enable(): protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  242</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  243</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  245</span>  }</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  248</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  249</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  251</span>  }</div>
<div class="line"><span class="lineno">  252</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aae26e63a8af382bd3c0adcf7ca75f9f0">Resp_STK_NODEVICE</a>) {</div>
<div class="line"><span class="lineno">  253</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_program_enable(): no device\n&quot;</span>,</div>
<div class="line"><span class="lineno">  254</span>            <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  255</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  256</span>  }</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>  <span class="keywordflow">if</span>(buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#abc9a3c8f942074fa87146a245075799a">Resp_STK_FAILED</a>)</div>
<div class="line"><span class="lineno">  259</span>  {</div>
<div class="line"><span class="lineno">  260</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_program_enable(): failed to enter programming mode\n&quot;</span>,</div>
<div class="line"><span class="lineno">  261</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  263</span>  }</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_program_enable(): unknown response=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  267</span>          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, buf[0]);</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  270</span>}</div>
<div class="ttc" id="astk500__private_8h_html_a00f2bad9ba3c271cff7148ca2c6e336c"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a00f2bad9ba3c271cff7148ca2c6e336c">Cmnd_STK_ENTER_PROGMODE</a></div><div class="ttdeci">#define Cmnd_STK_ENTER_PROGMODE</div><div class="ttdef"><b>Definition</b> stk500_private.h:44</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00044">Cmnd_STK_ENTER_PROGMODE</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00019">Resp_STK_FAILED</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00021">Resp_STK_NODEVICE</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ac5343cc46d394a9a3d2201efaf843be9_cgraph.svg" width="651" height="204"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ac5343cc46d394a9a3d2201efaf843be9_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a734ff0eda72916fd20e24d6d10d65ec1" name="a734ff0eda72916fd20e24d6d10d65ec1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a734ff0eda72916fd20e24d6d10d65ec1">&#9670;&#160;</a></span>stk500_recv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_recv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   69</span>{</div>
<div class="line"><span class="lineno">   70</span>  <span class="keywordtype">int</span> rv;</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>  rv = <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a7b8859c3ac051a2c2de2f02adf2a9402">serial_recv</a>(&amp;<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">fd</a>, buf, len);</div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordflow">if</span> (rv &lt; 0) {</div>
<div class="line"><span class="lineno">   74</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_recv(): programmer is not responding\n&quot;</span>,</div>
<div class="line"><span class="lineno">   75</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   77</span>  }</div>
<div class="line"><span class="lineno">   78</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   79</span>}</div>
<div class="ttc" id="alibavrdude_8h_html_a7b8859c3ac051a2c2de2f02adf2a9402"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a7b8859c3ac051a2c2de2f02adf2a9402">serial_recv</a></div><div class="ttdeci">#define serial_recv</div><div class="ttdef"><b>Definition</b> libavrdude.h:578</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00637">programmer_t::fd</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, and <a class="el" href="../../#l00578">serial_recv</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00342">mib510_isp()</a>, <a class="el" href="../../#l00138">stk500_cmd()</a>, <a class="el" href="../../#l00601">stk500_disable()</a>, <a class="el" href="../../#l01107">stk500_getparm()</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00411">stk500_initialize()</a>, <a class="el" href="../../#l00697">stk500_loadaddr()</a>, <a class="el" href="../../#l00882">stk500_paged_load()</a>, <a class="el" href="../../#l00765">stk500_paged_write()</a>, <a class="el" href="../../#l00215">stk500_program_enable()</a>, <a class="el" href="../../#l00274">stk500_set_extended_parms()</a>, and <a class="el" href="../../#l01164">stk500_setparm()</a>.</p>
<div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a734ff0eda72916fd20e24d6d10d65ec1_cgraph.svg" width="279" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-38" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a734ff0eda72916fd20e24d6d10d65ec1_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a2ac3e55b50b80cbc2629dc7389baef7d" name="a2ac3e55b50b80cbc2629dc7389baef7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ac3e55b50b80cbc2629dc7389baef7d">&#9670;&#160;</a></span>stk500_send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   63</span>{</div>
<div class="line"><span class="lineno">   64</span>  <span class="keywordflow">return</span> <a class="code hl_define" href="../../d2/d68/libavrdude_8h.html#a6e19d344aacfbb8abb3360d715c577c4">serial_send</a>(&amp;<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a31d40bf02b8dac5484b4aa4e67759d7b">fd</a>, buf, len);</div>
<div class="line"><span class="lineno">   65</span>}</div>
<div class="ttc" id="alibavrdude_8h_html_a6e19d344aacfbb8abb3360d715c577c4"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#a6e19d344aacfbb8abb3360d715c577c4">serial_send</a></div><div class="ttdeci">#define serial_send</div><div class="ttdef"><b>Definition</b> libavrdude.h:577</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00637">programmer_t::fd</a>, <a class="el" href="../../#l00192">pgm</a>, and <a class="el" href="../../#l00577">serial_send</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00342">mib510_isp()</a>, <a class="el" href="../../#l00138">stk500_cmd()</a>, <a class="el" href="../../#l00601">stk500_disable()</a>, <a class="el" href="../../#l01107">stk500_getparm()</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00411">stk500_initialize()</a>, <a class="el" href="../../#l00697">stk500_loadaddr()</a>, <a class="el" href="../../#l00882">stk500_paged_load()</a>, <a class="el" href="../../#l00765">stk500_paged_write()</a>, <a class="el" href="../../#l00215">stk500_program_enable()</a>, <a class="el" href="../../#l00274">stk500_set_extended_parms()</a>, and <a class="el" href="../../#l01164">stk500_setparm()</a>.</p>
<div id="dynsection-39" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a2ac3e55b50b80cbc2629dc7389baef7d_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a547fc67e683b766f3f555aae3d595edb" name="a547fc67e683b766f3f555aae3d595edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a547fc67e683b766f3f555aae3d595edb">&#9670;&#160;</a></span>stk500_set_extended_parms()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_set_extended_parms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  276</span>{</div>
<div class="line"><span class="lineno">  277</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[16];</div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordtype">int</span> tries=0;</div>
<div class="line"><span class="lineno">  279</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span> retry:</div>
<div class="line"><span class="lineno">  282</span>  </div>
<div class="line"><span class="lineno">  283</span>  tries++;</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a29053d4fec9dd8c5de868482a59475f6">Cmnd_STK_SET_DEVICE_EXT</a>;</div>
<div class="line"><span class="lineno">  286</span>  <span class="keywordflow">for</span> (i=0; i&lt;n; i++) {</div>
<div class="line"><span class="lineno">  287</span>    buf[1+i] = <a class="code hl_variable" href="../../d5/de5/term_8c.html#afaf837ac6f2815d3a1975cb001f2db5f">cmd</a>[i];</div>
<div class="line"><span class="lineno">  288</span>  }</div>
<div class="line"><span class="lineno">  289</span>  i++;</div>
<div class="line"><span class="lineno">  290</span>  buf[i] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, i+1);</div>
<div class="line"><span class="lineno">  293</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  295</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno">  297</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_extended_parms(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno">  298</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  299</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  300</span>    }</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  302</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  303</span>    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  304</span>  }</div>
<div class="line"><span class="lineno">  305</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno">  306</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_extended_parms(): protocol error, &quot;</span></div>
<div class="line"><span class="lineno">  307</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  308</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  310</span>  }</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  314</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>) {</div>
<div class="line"><span class="lineno">  315</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  316</span>  }</div>
<div class="line"><span class="lineno">  317</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aae26e63a8af382bd3c0adcf7ca75f9f0">Resp_STK_NODEVICE</a>) {</div>
<div class="line"><span class="lineno">  318</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_extended_parms(): no device\n&quot;</span>,</div>
<div class="line"><span class="lineno">  319</span>            <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  321</span>  }</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>  <span class="keywordflow">if</span>(buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#abc9a3c8f942074fa87146a245075799a">Resp_STK_FAILED</a>)</div>
<div class="line"><span class="lineno">  324</span>  {</div>
<div class="line"><span class="lineno">  325</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_extended_parms(): failed to set extended &quot;</span></div>
<div class="line"><span class="lineno">  326</span>                      <span class="stringliteral">&quot;device programming parameters\n&quot;</span>,</div>
<div class="line"><span class="lineno">  327</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  329</span>  }</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>  <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_extended_parms(): unknown response=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno">  333</span>          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, buf[0]);</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  336</span>}</div>
<div class="ttc" id="astk500__private_8h_html_a29053d4fec9dd8c5de868482a59475f6"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#a29053d4fec9dd8c5de868482a59475f6">Cmnd_STK_SET_DEVICE_EXT</a></div><div class="ttdeci">#define Cmnd_STK_SET_DEVICE_EXT</div><div class="ttdef"><b>Definition</b> stk500_private.h:42</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00094">cmd</a>, <a class="el" href="../../#l00042">Cmnd_STK_SET_DEVICE_EXT</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00019">Resp_STK_FAILED</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00021">Resp_STK_NODEVICE</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00411">stk500_initialize()</a>.</p>
<div id="dynsection-40" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a547fc67e683b766f3f555aae3d595edb_cgraph.svg" width="636" height="206"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-41" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a547fc67e683b766f3f555aae3d595edb_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a9ec1baef2c10142b5e963d469bd01877" name="a9ec1baef2c10142b5e963d469bd01877"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ec1baef2c10142b5e963d469bd01877">&#9670;&#160;</a></span>stk500_set_fosc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_set_fosc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1029</span>{</div>
<div class="line"><span class="lineno"> 1030</span>  <span class="keywordtype">unsigned</span> prescale, cmatch, fosc;</div>
<div class="line"><span class="lineno"> 1031</span>  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> ps[] = {</div>
<div class="line"><span class="lineno"> 1032</span>    1, 8, 32, 64, 128, 256, 1024</div>
<div class="line"><span class="lineno"> 1033</span>  };</div>
<div class="line"><span class="lineno"> 1034</span>  <span class="keywordtype">int</span> idx, rc;</div>
<div class="line"><span class="lineno"> 1035</span> </div>
<div class="line"><span class="lineno"> 1036</span>  prescale = cmatch = 0;</div>
<div class="line"><span class="lineno"> 1037</span>  <span class="keywordflow">if</span> (v &gt; 0.0) {</div>
<div class="line"><span class="lineno"> 1038</span>    <span class="keywordflow">if</span> (v &gt; <a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a> / 2) {</div>
<div class="line"><span class="lineno"> 1039</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *unit;</div>
<div class="line"><span class="lineno"> 1040</span>      <span class="keywordflow">if</span> (v &gt; 1e6) {</div>
<div class="line"><span class="lineno"> 1041</span>        v /= 1e6;</div>
<div class="line"><span class="lineno"> 1042</span>        unit = <span class="stringliteral">&quot;MHz&quot;</span>;</div>
<div class="line"><span class="lineno"> 1043</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v &gt; 1e3) {</div>
<div class="line"><span class="lineno"> 1044</span>        v /= 1e3;</div>
<div class="line"><span class="lineno"> 1045</span>        unit = <span class="stringliteral">&quot;kHz&quot;</span>;</div>
<div class="line"><span class="lineno"> 1046</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1047</span>        unit = <span class="stringliteral">&quot;Hz&quot;</span>;</div>
<div class="line"><span class="lineno"> 1048</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_fosc(): f = %.3f %s too high, using %.3f MHz\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1049</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, v, unit, <a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a> / 2e6);</div>
<div class="line"><span class="lineno"> 1050</span>      fosc = <a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a> / 2;</div>
<div class="line"><span class="lineno"> 1051</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1052</span>      fosc = (unsigned)v;</div>
<div class="line"><span class="lineno"> 1053</span>    </div>
<div class="line"><span class="lineno"> 1054</span>    <span class="keywordflow">for</span> (idx = 0; idx &lt; <span class="keyword">sizeof</span>(ps) / <span class="keyword">sizeof</span>(ps[0]); idx++) {</div>
<div class="line"><span class="lineno"> 1055</span>      <span class="keywordflow">if</span> (fosc &gt;= <a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a> / (256 * ps[idx] * 2)) {</div>
<div class="line"><span class="lineno"> 1056</span>        <span class="comment">/* this prescaler value can handle our frequency */</span></div>
<div class="line"><span class="lineno"> 1057</span>        prescale = idx + 1;</div>
<div class="line"><span class="lineno"> 1058</span>        cmatch = (unsigned)(<a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a> / (2 * fosc * ps[idx])) - 1;</div>
<div class="line"><span class="lineno"> 1059</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1060</span>      }</div>
<div class="line"><span class="lineno"> 1061</span>    }</div>
<div class="line"><span class="lineno"> 1062</span>    <span class="keywordflow">if</span> (idx == <span class="keyword">sizeof</span>(ps) / <span class="keyword">sizeof</span>(ps[0])) {</div>
<div class="line"><span class="lineno"> 1063</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_fosc(): f = %u Hz too low, %u Hz min\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1064</span>          <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, fosc, <a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a> / (256 * 1024 * 2));</div>
<div class="line"><span class="lineno"> 1065</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1066</span>    }</div>
<div class="line"><span class="lineno"> 1067</span>  }</div>
<div class="line"><span class="lineno"> 1068</span>  </div>
<div class="line"><span class="lineno"> 1069</span>  <span class="keywordflow">if</span> ((rc = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac4b6d230e6f598260a9ffef5dd5e05ce">stk500_setparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#ac951301f9c4985bf54c62c79ef29d61c">Parm_STK_OSC_PSCALE</a>, prescale)) != 0</div>
<div class="line"><span class="lineno"> 1070</span>      || (rc = <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac4b6d230e6f598260a9ffef5dd5e05ce">stk500_setparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#ae2c266595afc4a0aadd7e17f3ca29813">Parm_STK_OSC_CMATCH</a>, cmatch)) != 0)</div>
<div class="line"><span class="lineno"> 1071</span>    <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1072</span>  </div>
<div class="line"><span class="lineno"> 1073</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1074</span>}</div>
<div class="ttc" id="astk500_8c_html_ac4b6d230e6f598260a9ffef5dd5e05ce"><div class="ttname"><a href="../../dd/d75/stk500_8c.html#ac4b6d230e6f598260a9ffef5dd5e05ce">stk500_setparm</a></div><div class="ttdeci">static int stk500_setparm(PROGRAMMER *pgm, unsigned parm, unsigned value)</div><div class="ttdef"><b>Definition</b> stk500.c:1164</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00078">Parm_STK_OSC_CMATCH</a>, <a class="el" href="../../#l00077">Parm_STK_OSC_PSCALE</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l01164">stk500_setparm()</a>, and <a class="el" href="../../#l00045">STK500_XTAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-42" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a9ec1baef2c10142b5e963d469bd01877_cgraph.svg" width="100%" height="490"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-43" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a9ec1baef2c10142b5e963d469bd01877_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a668b2ae491cb226fe45ab2b0fa2ecd97" name="a668b2ae491cb226fe45ab2b0fa2ecd97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a668b2ae491cb226fe45ab2b0fa2ecd97">&#9670;&#160;</a></span>stk500_set_sck_period()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_set_sck_period </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1085</span>{</div>
<div class="line"><span class="lineno"> 1086</span>  <span class="keywordtype">int</span> dur;</div>
<div class="line"><span class="lineno"> 1087</span>  <span class="keywordtype">double</span> <a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a52c8391bfe74901409df09e9b1d5ac79">min</a>, <a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a92e6345ca905d3483422361cf8c991b6">max</a>;</div>
<div class="line"><span class="lineno"> 1088</span> </div>
<div class="line"><span class="lineno"> 1089</span>  <a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a52c8391bfe74901409df09e9b1d5ac79">min</a> = 8.0 / <a class="code hl_define" href="../../dd/d75/stk500_8c.html#af4ab65a2a5ace2cfa5f6cf059cf3fa1e">STK500_XTAL</a>;</div>
<div class="line"><span class="lineno"> 1090</span>  <a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a92e6345ca905d3483422361cf8c991b6">max</a> = 255 * <a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a52c8391bfe74901409df09e9b1d5ac79">min</a>;</div>
<div class="line"><span class="lineno"> 1091</span>  dur = (int)(v / min + 0.5);</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>  <span class="keywordflow">if</span> (v &lt; min) {</div>
<div class="line"><span class="lineno"> 1094</span>      dur = 1;</div>
<div class="line"><span class="lineno"> 1095</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_sck_period(): p = %.1f us too small, using %.1f us\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1096</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, v / 1e-6, dur * min / 1e-6);</div>
<div class="line"><span class="lineno"> 1097</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v &gt; max) {</div>
<div class="line"><span class="lineno"> 1098</span>      dur = 255;</div>
<div class="line"><span class="lineno"> 1099</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_sck_period(): p = %.1f us too large, using %.1f us\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1100</span>                      <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, v / 1e-6, dur * min / 1e-6);</div>
<div class="line"><span class="lineno"> 1101</span>  }</div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac4b6d230e6f598260a9ffef5dd5e05ce">stk500_setparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#ad73db361fee470589a9aafd465ebbb21">Parm_STK_SCK_DURATION</a>, dur);</div>
<div class="line"><span class="lineno"> 1104</span>}</div>
<div class="ttc" id="anamespace_eigen_1_1half__impl_html_a92e6345ca905d3483422361cf8c991b6"><div class="ttname"><a href="../../d6/d88/namespace_eigen_1_1half__impl.html#a92e6345ca905d3483422361cf8c991b6">Eigen::half_impl::max</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC half() max(const half &amp;a, const half &amp;b)</div><div class="ttdef"><b>Definition</b> Half.h:516</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00080">Parm_STK_SCK_DURATION</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l01164">stk500_setparm()</a>, and <a class="el" href="../../#l00045">STK500_XTAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-44" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a668b2ae491cb226fe45ab2b0fa2ecd97_cgraph.svg" width="100%" height="491"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-45" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a668b2ae491cb226fe45ab2b0fa2ecd97_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a7f029846508974fd9bf14cb7d4144096" name="a7f029846508974fd9bf14cb7d4144096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f029846508974fd9bf14cb7d4144096">&#9670;&#160;</a></span>stk500_set_varef()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_set_varef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1007</span>{</div>
<div class="line"><span class="lineno"> 1008</span>  <span class="keywordtype">unsigned</span> uaref, utarg;</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1010</span>  uaref = (unsigned)((v + 0.049) * 10);</div>
<div class="line"><span class="lineno"> 1011</span> </div>
<div class="line"><span class="lineno"> 1012</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a347cbe7164b4c488fe646b2ea7d6ea01">Parm_STK_VTARGET</a>, &amp;utarg) != 0) {</div>
<div class="line"><span class="lineno"> 1013</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_varef(): cannot obtain V[target]\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1014</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1016</span>  }</div>
<div class="line"><span class="lineno"> 1017</span> </div>
<div class="line"><span class="lineno"> 1018</span>  <span class="keywordflow">if</span> (uaref &gt; utarg) {</div>
<div class="line"><span class="lineno"> 1019</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_varef(): V[aref] must not be greater than &quot;</span></div>
<div class="line"><span class="lineno"> 1020</span>                    <span class="stringliteral">&quot;V[target] = %.1f\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1021</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, utarg / 10.0);</div>
<div class="line"><span class="lineno"> 1022</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1023</span>  }</div>
<div class="line"><span class="lineno"> 1024</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac4b6d230e6f598260a9ffef5dd5e05ce">stk500_setparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a99bb6c74ff37e92def9b659aabca8fb9">Parm_STK_VADJUST</a>, uaref);</div>
<div class="line"><span class="lineno"> 1025</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00076">Parm_STK_VADJUST</a>, <a class="el" href="../../#l00075">Parm_STK_VTARGET</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l01107">stk500_getparm()</a>, and <a class="el" href="../../#l01164">stk500_setparm()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-46" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a7f029846508974fd9bf14cb7d4144096_cgraph.svg" width="100%" height="523"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-47" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a7f029846508974fd9bf14cb7d4144096_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a212ec192515d105d2f2239a36c907c85" name="a212ec192515d105d2f2239a36c907c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a212ec192515d105d2f2239a36c907c85">&#9670;&#160;</a></span>stk500_set_vtarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_set_vtarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  983</span>{</div>
<div class="line"><span class="lineno">  984</span>  <span class="keywordtype">unsigned</span> uaref, utarg;</div>
<div class="line"><span class="lineno">  985</span> </div>
<div class="line"><span class="lineno">  986</span>  utarg = (unsigned)((v + 0.049) * 10);</div>
<div class="line"><span class="lineno">  987</span> </div>
<div class="line"><span class="lineno">  988</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#ab25648b307fdbeb557f39c84d46f435b">stk500_getparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a99bb6c74ff37e92def9b659aabca8fb9">Parm_STK_VADJUST</a>, &amp;uaref) != 0) {</div>
<div class="line"><span class="lineno">  989</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_vtarget(): cannot obtain V[aref]\n&quot;</span>,</div>
<div class="line"><span class="lineno">  990</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno">  991</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  992</span>  }</div>
<div class="line"><span class="lineno">  993</span> </div>
<div class="line"><span class="lineno">  994</span>  <span class="keywordflow">if</span> (uaref &gt; utarg) {</div>
<div class="line"><span class="lineno">  995</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_set_vtarget(): reducing V[aref] from %.1f to %.1f\n&quot;</span>,</div>
<div class="line"><span class="lineno">  996</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, uaref / 10.0, v);</div>
<div class="line"><span class="lineno">  997</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac4b6d230e6f598260a9ffef5dd5e05ce">stk500_setparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a99bb6c74ff37e92def9b659aabca8fb9">Parm_STK_VADJUST</a>, utarg)</div>
<div class="line"><span class="lineno">  998</span>  != 0)</div>
<div class="line"><span class="lineno">  999</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1000</span>  }</div>
<div class="line"><span class="lineno"> 1001</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d75/stk500_8c.html#ac4b6d230e6f598260a9ffef5dd5e05ce">stk500_setparm</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a347cbe7164b4c488fe646b2ea7d6ea01">Parm_STK_VTARGET</a>, utarg);</div>
<div class="line"><span class="lineno"> 1002</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00076">Parm_STK_VADJUST</a>, <a class="el" href="../../#l00075">Parm_STK_VTARGET</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l01107">stk500_getparm()</a>, and <a class="el" href="../../#l01164">stk500_setparm()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-48" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a212ec192515d105d2f2239a36c907c85_cgraph.svg" width="100%" height="523"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-49" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_a212ec192515d105d2f2239a36c907c85_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ac4b6d230e6f598260a9ffef5dd5e05ce" name="ac4b6d230e6f598260a9ffef5dd5e05ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4b6d230e6f598260a9ffef5dd5e05ce">&#9670;&#160;</a></span>stk500_setparm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stk500_setparm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>parm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1165</span>{</div>
<div class="line"><span class="lineno"> 1166</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[16];</div>
<div class="line"><span class="lineno"> 1167</span>  <span class="keywordtype">int</span> tries = 0;</div>
<div class="line"><span class="lineno"> 1168</span> </div>
<div class="line"><span class="lineno"> 1169</span> retry:</div>
<div class="line"><span class="lineno"> 1170</span>  tries++;</div>
<div class="line"><span class="lineno"> 1171</span>  buf[0] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aea6a2b2bcff44bcc46d11baaf47f5c83">Cmnd_STK_SET_PARAMETER</a>;</div>
<div class="line"><span class="lineno"> 1172</span>  buf[1] = parm;</div>
<div class="line"><span class="lineno"> 1173</span>  buf[2] = value;</div>
<div class="line"><span class="lineno"> 1174</span>  buf[3] = <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a519142e4cfc98ce4a0b138dba73c5357">Sync_CRC_EOP</a>;</div>
<div class="line"><span class="lineno"> 1175</span> </div>
<div class="line"><span class="lineno"> 1176</span>  <a class="code hl_function" href="../../dd/d75/stk500_8c.html#a2ac3e55b50b80cbc2629dc7389baef7d">stk500_send</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 4);</div>
<div class="line"><span class="lineno"> 1177</span> </div>
<div class="line"><span class="lineno"> 1178</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno"> 1179</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1180</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9e6879f70f501978a4cf15273cc557a2">Resp_STK_NOSYNC</a>) {</div>
<div class="line"><span class="lineno"> 1181</span>    <span class="keywordflow">if</span> (tries &gt; 33) {</div>
<div class="line"><span class="lineno"> 1182</span>      <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_setparm(): can&#39;t get into sync\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1183</span>              <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno"> 1184</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1185</span>    }</div>
<div class="line"><span class="lineno"> 1186</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#aecacdb47e304260e938679b5fd1d0aaa">stk500_getsync</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>) &lt; 0)</div>
<div class="line"><span class="lineno"> 1187</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1188</span>    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno"> 1189</span>  }</div>
<div class="line"><span class="lineno"> 1190</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf[0] != <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>) {</div>
<div class="line"><span class="lineno"> 1191</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_setparm(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno"> 1192</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1193</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno"> 1194</span>    <span class="keywordflow">return</span> -2;</div>
<div class="line"><span class="lineno"> 1195</span>  }</div>
<div class="line"><span class="lineno"> 1196</span> </div>
<div class="line"><span class="lineno"> 1197</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno"> 1198</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1199</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#aee6907626a89bf0f567976cc3561c88c">Resp_STK_OK</a>)</div>
<div class="line"><span class="lineno"> 1200</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>  parm = buf[0];  <span class="comment">/* if not STK_OK, we&#39;ve been echoed parm here */</span></div>
<div class="line"><span class="lineno"> 1203</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d75/stk500_8c.html#a734ff0eda72916fd20e24d6d10d65ec1">stk500_recv</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>, buf, 1) &lt; 0)</div>
<div class="line"><span class="lineno"> 1204</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1205</span>  <span class="keywordflow">if</span> (buf[0] == <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#abc9a3c8f942074fa87146a245075799a">Resp_STK_FAILED</a>) {</div>
<div class="line"><span class="lineno"> 1206</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_setparm(): parameter 0x%02x failed\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1207</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, parm);</div>
<div class="line"><span class="lineno"> 1208</span>    <span class="keywordflow">return</span> -3;</div>
<div class="line"><span class="lineno"> 1209</span>  }</div>
<div class="line"><span class="lineno"> 1210</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1211</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;\n%s: stk500_setparm(): (a) protocol error, &quot;</span></div>
<div class="line"><span class="lineno"> 1212</span>                    <span class="stringliteral">&quot;expect=0x%02x, resp=0x%02x\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1213</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>, <a class="code hl_define" href="../../d6/d09/stk500__private_8h.html#a9ac77563d31b8d5baf685171d455afdf">Resp_STK_INSYNC</a>, buf[0]);</div>
<div class="line"><span class="lineno"> 1214</span>    <span class="keywordflow">return</span> -3;</div>
<div class="line"><span class="lineno"> 1215</span>  }</div>
<div class="line"><span class="lineno"> 1216</span>}</div>
<div class="ttc" id="astk500__private_8h_html_aea6a2b2bcff44bcc46d11baaf47f5c83"><div class="ttname"><a href="../../d6/d09/stk500__private_8h.html#aea6a2b2bcff44bcc46d11baaf47f5c83">Cmnd_STK_SET_PARAMETER</a></div><div class="ttdeci">#define Cmnd_STK_SET_PARAMETER</div><div class="ttdef"><b>Definition</b> stk500_private.h:39</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00039">Cmnd_STK_SET_PARAMETER</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00192">pgm</a>, <a class="el" href="../../#l00061">progname</a>, <a class="el" href="../../#l00019">Resp_STK_FAILED</a>, <a class="el" href="../../#l00022">Resp_STK_INSYNC</a>, <a class="el" href="../../#l00023">Resp_STK_NOSYNC</a>, <a class="el" href="../../#l00018">Resp_STK_OK</a>, <a class="el" href="../../#l00088">stk500_getsync()</a>, <a class="el" href="../../#l00068">stk500_recv()</a>, <a class="el" href="../../#l00062">stk500_send()</a>, and <a class="el" href="../../#l00032">Sync_CRC_EOP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01028">stk500_set_fosc()</a>, <a class="el" href="../../#l01084">stk500_set_sck_period()</a>, <a class="el" href="../../#l01005">stk500_set_varef()</a>, and <a class="el" href="../../#l00982">stk500_set_vtarget()</a>.</p>
<div id="dynsection-50" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ac4b6d230e6f598260a9ffef5dd5e05ce_cgraph.svg" width="606" height="206"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-51" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ac4b6d230e6f598260a9ffef5dd5e05ce_icgraph.svg" width="100%" height="438"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aaddcb15fd8c515d15d6a38724ef936de" name="aaddcb15fd8c515d15d6a38724ef936de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaddcb15fd8c515d15d6a38724ef936de">&#9670;&#160;</a></span>stk500_setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_setup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1303</span>{</div>
<div class="line"><span class="lineno"> 1304</span>  <span class="keywordflow">if</span> ((<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a675d556eaafa6be18fd545be9674cc63">cookie</a> = <a class="code hl_function" href="../../d3/dbc/config__gram_8c.html#a8d12df60024a0ab3de3a276240433890">malloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d0/d63/structpdata.html">pdata</a>))) == 0) {</div>
<div class="line"><span class="lineno"> 1305</span>    <a class="code hl_function" href="../../db/daf/avrdude_8h.html#ae3011b9c6440c863e64eed3fed5106e3">avrdude_message</a>(<a class="code hl_define" href="../../db/daf/avrdude_8h.html#a1ddcc97224a95cec04b38b0ac866fa19">MSG_INFO</a>, <span class="stringliteral">&quot;%s: stk500_setup(): Out of memory allocating private data\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1306</span>                    <a class="code hl_variable" href="../../db/daf/avrdude_8h.html#ab9e1449fd00c98428516f0b41eddcb10">progname</a>);</div>
<div class="line"><span class="lineno"> 1307</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1308</span>  }</div>
<div class="line"><span class="lineno"> 1309</span>  memset(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a675d556eaafa6be18fd545be9674cc63">cookie</a>, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d0/d63/structpdata.html">pdata</a>));</div>
<div class="line"><span class="lineno"> 1310</span>  <a class="code hl_define" href="../../dd/d75/stk500_8c.html#a3ee902f4e72c2cd5b500d8f578f301ef">PDATA</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>)-&gt;ext_addr_byte = 0xff; <span class="comment">/* Ensures it is programmed before</span></div>
<div class="line"><span class="lineno"> 1311</span><span class="comment">             * first memory address */</span></div>
<div class="line"><span class="lineno"> 1312</span>}</div>
<div class="ttc" id="aconfig__gram_8c_html_a8d12df60024a0ab3de3a276240433890"><div class="ttname"><a href="../../d3/dbc/config__gram_8c.html#a8d12df60024a0ab3de3a276240433890">malloc</a></div><div class="ttdeci">void * malloc(YYSIZE_T)</div></div>
<div class="ttc" id="astructpdata_html"><div class="ttname"><a href="../../d0/d63/structpdata.html">pdata</a></div><div class="ttdef"><b>Definition</b> avr910.c:50</div></div>
<div class="ttc" id="astructprogrammer__t_html_a675d556eaafa6be18fd545be9674cc63"><div class="ttname"><a href="../../d6/d82/structprogrammer__t.html#a675d556eaafa6be18fd545be9674cc63">programmer_t::cookie</a></div><div class="ttdeci">void * cookie</div><div class="ttdef"><b>Definition</b> libavrdude.h:689</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">avrdude_message()</a>, <a class="el" href="../../#l00689">programmer_t::cookie</a>, <a class="el" href="../../d3/dbc/config__gram_8c.html#a8d12df60024a0ab3de3a276240433890">malloc()</a>, <a class="el" href="../../#l00051">MSG_INFO</a>, <a class="el" href="../../#l00054">PDATA</a>, <a class="el" href="../../#l00192">pgm</a>, and <a class="el" href="../../#l00061">progname</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-52" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-52-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-52-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-52-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_aaddcb15fd8c515d15d6a38724ef936de_cgraph.svg" width="286" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-53" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-53-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-53-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-53-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_aaddcb15fd8c515d15d6a38724ef936de_icgraph.svg" width="652" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae3107e77db1884af8d818f8b060f1149" name="ae3107e77db1884af8d818f8b060f1149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3107e77db1884af8d818f8b060f1149">&#9670;&#160;</a></span>stk500_teardown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> stk500_teardown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d68/libavrdude_8h.html#ae3bf8f66abca96195187549ee1a7bba7">PROGRAMMER</a> *&#160;</td>
          <td class="paramname"><em>pgm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1315</span>{</div>
<div class="line"><span class="lineno"> 1316</span>  <a class="code hl_function" href="../../d3/dbc/config__gram_8c.html#af07d89f5ceaea0c7c8252cc41fd75f37">free</a>(<a class="code hl_variable" href="../../d0/d29/main_8c.html#a5dce38ae4dc703c88d229316a6a00dee">pgm</a>-&gt;<a class="code hl_variable" href="../../d6/d82/structprogrammer__t.html#a675d556eaafa6be18fd545be9674cc63">cookie</a>);</div>
<div class="line"><span class="lineno"> 1317</span>}</div>
<div class="ttc" id="aconfig__gram_8c_html_af07d89f5ceaea0c7c8252cc41fd75f37"><div class="ttname"><a href="../../d3/dbc/config__gram_8c.html#af07d89f5ceaea0c7c8252cc41fd75f37">free</a></div><div class="ttdeci">void free(void *)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00689">programmer_t::cookie</a>, <a class="el" href="../../d3/dbc/config__gram_8c.html#af07d89f5ceaea0c7c8252cc41fd75f37">free()</a>, and <a class="el" href="../../#l00192">pgm</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01321">stk500_initpgm()</a>.</p>
<div id="dynsection-54" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-54-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-54-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-54-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ae3107e77db1884af8d818f8b060f1149_cgraph.svg" width="223" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-55" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-55-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-55-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-55-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d75/stk500_8c_ae3107e77db1884af8d818f8b060f1149_icgraph.svg" width="100%" height="364"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a856d323b148974c4fe42dc1d0815974b" name="a856d323b148974c4fe42dc1d0815974b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a856d323b148974c4fe42dc1d0815974b">&#9670;&#160;</a></span>stk500_desc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char stk500_desc[] = &quot;Atmel STK500 Version 1.x firmware&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_3152723ac38ccb2051caa7ee1212accf.html">avrdude</a></li><li class="navelem"><a class="el" href="../../dd/d75/stk500_8c.html">stk500.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
