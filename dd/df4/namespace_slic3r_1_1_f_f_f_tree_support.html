<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: Slic3r::FFFTreeSupport Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::FFFTreeSupport Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html">AreaIncreaseSettings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation">Bifurcation</a></td></tr>
<tr class="separator:d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Branch</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">DrawArea</a></td></tr>
<tr class="separator:df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Element</a></td></tr>
<tr class="separator:dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html">InterfacePlacer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html">RichInterfacePlacer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dd/dbd/struct_slic3r_1_1_f_f_f_tree_support_1_1_slice"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/dbd/struct_slic3r_1_1_f_f_f_tree_support_1_1_slice">Slice</a></td></tr>
<tr class="separator:dd/dbd/struct_slic3r_1_1_f_f_f_tree_support_1_1_slice"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html">SupportElementInfluenceAreas</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html">SupportElementStateBits</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html">Tree</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html">TreeSupportMeshGroupSettings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This struct contains settings used in the tree support. Thanks to this most functions do not need to know of meshes etc. Also makes the code shorter.  <a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a9ffddd79a33474301413b3501818dd09"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9ffddd79a33474301413b3501818dd09">Forest</a> = std::vector&lt; <a class="el" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html">Tree</a> &gt;</td></tr>
<tr class="separator:a9ffddd79a33474301413b3501818dd09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a791017efa818294dd8d8fbc88c29866a"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a791017efa818294dd8d8fbc88c29866a">Trees</a> = std::vector&lt; <a class="el" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html">Tree</a> &gt;</td></tr>
<tr class="separator:a791017efa818294dd8d8fbc88c29866a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b172731ba7cf960859fa50acd674b09"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">LineInformation</a> = std::vector&lt; std::pair&lt; <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2e">LineStatus</a> &gt; &gt;</td></tr>
<tr class="separator:a8b172731ba7cf960859fa50acd674b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120c940cfdd766c67f428bbd8bc25341"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> = std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">LineInformation</a> &gt;</td></tr>
<tr class="separator:a120c940cfdd766c67f428bbd8bc25341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a884a3220bfa9e3f7fb5e2169a75d7b1d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> = std::deque&lt; <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &gt;</td></tr>
<tr class="separator:a884a3220bfa9e3f7fb5e2169a75d7b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a493a7de86471c664147a099ee5585609"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> = int</td></tr>
<tr class="separator:a493a7de86471c664147a099ee5585609"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a19c1b7de30dd7a8941ee1c8446e4ed2e"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2e">LineStatus</a> { <br />
&#160;&#160;<a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eaccc0377a8afbf50e7094f5c23a8af223">INVALID</a>
, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eab25f374974935939df6d4a5cbfe1dd39">TO_MODEL</a>
, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eac86025471c7d0e5b609cc69e034f0978">TO_MODEL_GRACIOUS</a>
, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea8f5cfba6c2529a95ba4a66a999d286bc">TO_MODEL_GRACIOUS_SAFE</a>
, <br />
&#160;&#160;<a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17000f38054a1d7473b4524cfbba05c6">TO_BP</a>
, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17e968aeab1713f65be1d61bf3c31014">TO_BP_SAFE</a>
<br />
 }</td></tr>
<tr class="separator:a19c1b7de30dd7a8941ee1c8446e4ed2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6de0fe0d580b1d4a0c1bd7ab947a934"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934">InterfacePreference</a> { <br />
&#160;&#160;<a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934ae2407ba6eb2d434329973ed28daf26fb">InterfaceAreaOverwritesSupport</a>
, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934a9821a51233685f171b3ec0bf6db31ef6">SupportAreaOverwritesInterface</a>
, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934aff3a95b930446ace141a9560cb31763d">InterfaceLinesOverwriteSupport</a>
, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934a79032580102f82f96b21f791f7bade2c">SupportLinesOverwriteInterface</a>
, <br />
&#160;&#160;<a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934af80a4ad87fee7c9fdc19b7769495fdb5">Nothing</a>
<br />
 }</td></tr>
<tr class="separator:ab6de0fe0d580b1d4a0c1bd7ab947a934"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a58708375463e99b2adb77d839339f51e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Element</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a58708375463e99b2adb77d839339f51e">to_tree_element</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;element, bool is_root)</td></tr>
<tr class="separator:a58708375463e99b2adb77d839339f51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8e234e92ef7e4c1d6f24ce0e7cf53cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9ffddd79a33474301413b3501818dd09">Forest</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa8e234e92ef7e4c1d6f24ce0e7cf53cb">make_forest</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&amp;move_bounds)</td></tr>
<tr class="separator:aa8e234e92ef7e4c1d6f24ce0e7cf53cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af09b5f88f692b40a0e2edc768d6164b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af09b5f88f692b40a0e2edc768d6164b0">trim_influence_areas_bottom_up</a> (<a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9ffddd79a33474301413b3501818dd09">Forest</a> &amp;forest, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float dxy_dlayer)</td></tr>
<tr class="separator:af09b5f88f692b40a0e2edc768d6164b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82d545d72851489d7944f1ef84d1356f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a82d545d72851489d7944f1ef84d1356f">smooth_trees_inside_influence_areas</a> (<a class="el" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Branch</a> &amp;root, bool is_root)</td></tr>
<tr class="separator:a82d545d72851489d7944f1ef84d1356f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b8853398d7f448803e1b717fded535"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a06b8853398d7f448803e1b717fded535">smooth_trees_inside_influence_areas</a> (<a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9ffddd79a33474301413b3501818dd09">Forest</a> &amp;forest)</td></tr>
<tr class="separator:a06b8853398d7f448803e1b717fded535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81892c54115bb52c838fb9a4d23bada3"><td class="memTemplParams" colspan="2">template&lt;bool flip_normals&gt; </td></tr>
<tr class="memitem:a81892c54115bb52c838fb9a4d23bada3"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a81892c54115bb52c838fb9a4d23bada3">triangulate_fan</a> (<a class="el" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;its, int ifan, int ibegin, int iend)</td></tr>
<tr class="separator:a81892c54115bb52c838fb9a4d23bada3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c399addd988cbf5b23f6e3094bba97"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a78c399addd988cbf5b23f6e3094bba97">triangulate_strip</a> (<a class="el" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;its, int ibegin1, int iend1, int ibegin2, int iend2)</td></tr>
<tr class="separator:a78c399addd988cbf5b23f6e3094bba97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5a62d876708f908d22ff52c6da9350"><td class="memItemLeft" align="right" valign="top">static std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aaa5a62d876708f908d22ff52c6da9350">discretize_circle</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &amp;center, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &amp;normal, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float radius, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float eps, std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &gt; &amp;pts)</td></tr>
<tr class="separator:aaa5a62d876708f908d22ff52c6da9350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b1e3e497e4086f33f972043ba757e57"><td class="memItemLeft" align="right" valign="top">static std::pair&lt; float, float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5b1e3e497e4086f33f972043ba757e57">extrude_branch</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> * &gt; &amp;path, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, <a class="el" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;result)</td></tr>
<tr class="separator:a5b1e3e497e4086f33f972043ba757e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8424f920968063d5aa16e27c2b7f635"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af8424f920968063d5aa16e27c2b7f635">organic_smooth_branches_avoid_collisions</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::pair&lt; <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *, int &gt; &gt; &amp;elements_with_link_down, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;linear_data_layers, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="separator:af8424f920968063d5aa16e27c2b7f635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f3c278c734d77924e1f29d285aa971c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5f3c278c734d77924e1f29d285aa971c">organic_draw_branches</a> (<a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object, <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;bottom_contacts, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;top_contacts, <a class="el" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html">InterfacePlacer</a> &amp;interface_placer, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;intermediate_layers, <a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;layer_storage, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="separator:a5f3c278c734d77924e1f29d285aa971c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeba81cf5ed00cbfc5342579d0f9cd5dd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aeba81cf5ed00cbfc5342579d0f9cd5dd">calculateMachineBorderCollision</a> (<a class="el" href="../../d8/d90/class_slic3r_1_1_polygon.html">Polygon</a> machine_border)</td></tr>
<tr class="separator:aeba81cf5ed00cbfc5342579d0f9cd5dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c984cee519c0956b376d8371312d3d9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;pt)</td></tr>
<tr class="separator:a0c984cee519c0956b376d8371312d3d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06df6821b1d25b7af7251d2f4e922f7c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a06df6821b1d25b7af7251d2f4e922f7c">validate_range</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#aee987cbd1647986a9ac92226daffa4d7">Points</a> &amp;points)</td></tr>
<tr class="separator:a06df6821b1d25b7af7251d2f4e922f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9b0340e4ea4f549ab094a2f396c6ec"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#adf9b0340e4ea4f549ab094a2f396c6ec">validate_range</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/dd1/class_slic3r_1_1_multi_point.html">MultiPoint</a> &amp;mp)</td></tr>
<tr class="separator:adf9b0340e4ea4f549ab094a2f396c6ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa95809e233bdd0d2738162822ef17ff9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa95809e233bdd0d2738162822ef17ff9">validate_range</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;polygons)</td></tr>
<tr class="separator:aa95809e233bdd0d2738162822ef17ff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a920f67c93294f987f0d286047ad209bb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a920f67c93294f987f0d286047ad209bb">validate_range</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> &amp;polylines)</td></tr>
<tr class="separator:a920f67c93294f987f0d286047ad209bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72da14b47702c9d35a655cf8c2336c9b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a72da14b47702c9d35a655cf8c2336c9b">validate_range</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">LineInformation</a> &amp;lines)</td></tr>
<tr class="separator:a72da14b47702c9d35a655cf8c2336c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc88332df88abf06fabd3dd806a9657f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#adc88332df88abf06fabd3dd806a9657f">validate_range</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> &amp;lines)</td></tr>
<tr class="separator:adc88332df88abf06fabd3dd806a9657f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a389a6c48fa824f1c3b5af80d510eae2c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a389a6c48fa824f1c3b5af80d510eae2c">check_self_intersections</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;polygons, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string_view message)</td></tr>
<tr class="separator:a389a6c48fa824f1c3b5af80d510eae2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98762af92d2b13283ab508d8cb0166f2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a98762af92d2b13283ab508d8cb0166f2">check_self_intersections</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/dc4/class_slic3r_1_1_ex_polygon.html">ExPolygon</a> &amp;expoly, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string_view message)</td></tr>
<tr class="separator:a98762af92d2b13283ab508d8cb0166f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeed21f68c33581eb7f3bc0b326a6bfc2"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; std::pair&lt; <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a>, std::vector&lt; size_t &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aeed21f68c33581eb7f3bc0b326a6bfc2">group_meshes</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d8f/class_slic3r_1_1_print.html">Print</a> &amp;print, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;print_object_ids)</td></tr>
<tr class="separator:aeed21f68c33581eb7f3bc0b326a6bfc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3e3c47728795e00a4099047c5ebc5a7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac3e3c47728795e00a4099047c5ebc5a7">generate_overhangs</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;settings, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="separator:ac3e3c47728795e00a4099047c5ebc5a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dda71b81c82e359530c91128bcd7abd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dda71b81c82e359530c91128bcd7abd">precalculate</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d8f/class_slic3r_1_1_print.html">Print</a> &amp;print, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;overhangs, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;object_ids, <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:a9dda71b81c82e359530c91128bcd7abd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Precalculates all avoidances, that could be required.  <br /></td></tr>
<tr class="separator:a9dda71b81c82e359530c91128bcd7abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab438824023a3a935e925a285dff2d154"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab438824023a3a935e925a285dff2d154">convert_lines_to_internal</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> &amp;polylines, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx)</td></tr>
<tr class="memdesc:ab438824023a3a935e925a285dff2d154"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a Polygons object representing a line into the internal format.  <br /></td></tr>
<tr class="separator:ab438824023a3a935e925a285dff2d154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ddef5499fa931cd6a895477f7d480e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a30ddef5499fa931cd6a895477f7d480e">evaluate_point_for_next_layer_function</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, size_t current_layer, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::pair&lt; <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2e">LineStatus</a> &gt; &amp;p)</td></tr>
<tr class="memdesc:a30ddef5499fa931cd6a895477f7d480e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluates if a point has to be added now. Required for a split_lines call in <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a176fb939fdb2bfcef9adb6b393771391" title="Creates the initial influence areas (that can later be propagated down) by placing them below the ove...">generate_initial_areas()</a>.  <br /></td></tr>
<tr class="separator:a30ddef5499fa931cd6a895477f7d480e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25075430eea82dc2f07ade2ea9aa7145"><td class="memTemplParams" colspan="2">template&lt;typename EvaluatePointFn &gt; </td></tr>
<tr class="memitem:a25075430eea82dc2f07ade2ea9aa7145"><td class="memTemplItemLeft" align="right" valign="top">static std::pair&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a25075430eea82dc2f07ade2ea9aa7145">split_lines</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> &amp;lines, EvaluatePointFn evaluatePoint)</td></tr>
<tr class="memdesc:a25075430eea82dc2f07ade2ea9aa7145"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluates which points of some lines are not valid one layer below and which are. Assumes all points are valid on the current layer. Validity is evaluated using supplied lambda.  <br /></td></tr>
<tr class="separator:a25075430eea82dc2f07ade2ea9aa7145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3ad982a70b3f29440da13d9c90275f0"><td class="memItemLeft" align="right" valign="top">static std::optional&lt; std::pair&lt; <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>, size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa3ad982a70b3f29440da13d9c90275f0">polyline_sample_next_point_at_distance</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#aee987cbd1647986a9ac92226daffa4d7">Points</a> &amp;polyline, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;start_pt, size_t start_idx, double dist)</td></tr>
<tr class="separator:aa3ad982a70b3f29440da13d9c90275f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f6974d8c9affbf8ae2f7f1963cf22d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a79f6974d8c9affbf8ae2f7f1963cf22d">ensure_maximum_distance_polyline</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> &amp;<a class="el" href="../../d8/d33/lexer_8c.html#a171692544b8e065853e387755849a433">input</a>, double distance, size_t min_points)</td></tr>
<tr class="memdesc:a79f6974d8c9affbf8ae2f7f1963cf22d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eensures that every line segment is about distance in length. The resulting lines may differ from the original but all points are on the original.  <br /></td></tr>
<tr class="separator:a79f6974d8c9affbf8ae2f7f1963cf22d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3db90eed67f0d35149aa2b62a56c618"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af3db90eed67f0d35149aa2b62a56c618">generate_support_infill_lines</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;polygon, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html">SupportParameters</a> &amp;support_params, bool roof, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx, <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> support_infill_distance)</td></tr>
<tr class="memdesc:af3db90eed67f0d35149aa2b62a56c618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Polylines representing the (infill) lines that will result in slicing the given area.  <br /></td></tr>
<tr class="separator:af3db90eed67f0d35149aa2b62a56c618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dfc6d8bd33b63c46bcb69e36154f5da"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> first, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> second={})</td></tr>
<tr class="memdesc:a9dfc6d8bd33b63c46bcb69e36154f5da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unions two Polygons. Ensures that if the input is non empty that the output also will be non empty.  <br /></td></tr>
<tr class="separator:a9dfc6d8bd33b63c46bcb69e36154f5da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10d42159133e647bd0231c3b574ad951"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a10d42159133e647bd0231c3b574ad951">safe_offset_inc</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;me, <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> distance, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;collision, <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> safe_step_size, <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> last_step_offset_without_check, size_t min_amount_offset)</td></tr>
<tr class="memdesc:a10d42159133e647bd0231c3b574ad951"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offsets (increases the area of) a polygons object in multiple steps to ensure that it does not lag through over a given obstacle.  <br /></td></tr>
<tr class="separator:a10d42159133e647bd0231c3b574ad951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41c75893bf8acfd3cf9c90cfa06b2487"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a41c75893bf8acfd3cf9c90cfa06b2487">generate_raft_contact</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html">InterfacePlacer</a> &amp;interface_placer)</td></tr>
<tr class="separator:a41c75893bf8acfd3cf9c90cfa06b2487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68cf66066ce35e90b7d041ec4af865f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a68cf66066ce35e90b7d041ec4af865f4">finalize_raft_contact</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int raft_contact_layer_idx, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;top_contacts, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds)</td></tr>
<tr class="separator:a68cf66066ce35e90b7d041ec4af865f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd26448acb9c08a9f4fd663da07c11c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5bd26448acb9c08a9f4fd663da07c11c">sample_overhang_area</a> (<a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&amp;overhang_area, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool large_horizontal_roof, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t layer_idx, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t num_support_roof_layers, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> connect_length, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html">TreeSupportMeshGroupSettings</a> &amp;mesh_group_settings, <a class="el" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html">RichInterfacePlacer</a> &amp;interface_placer)</td></tr>
<tr class="separator:a5bd26448acb9c08a9f4fd663da07c11c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176fb939fdb2bfcef9adb6b393771391"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a176fb939fdb2bfcef9adb6b393771391">generate_initial_areas</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;overhangs, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, <a class="el" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html">InterfacePlacer</a> &amp;interface_placer, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:a176fb939fdb2bfcef9adb6b393771391"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the initial influence areas (that can later be propagated down) by placing them below the overhang.  <br /></td></tr>
<tr class="separator:a176fb939fdb2bfcef9adb6b393771391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2114dd5f9bf09745fc5ae30aabd9e6d"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab2114dd5f9bf09745fc5ae30aabd9e6d">move_inside</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;polygons, <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;from, int distance=0, <a class="el" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a> maxDist2=std::numeric_limits&lt; <a class="el" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a> &gt;::max())</td></tr>
<tr class="separator:ab2114dd5f9bf09745fc5ae30aabd9e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cea5675bfa8ad2c71fcd7c1785690fe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a4cea5675bfa8ad2c71fcd7c1785690fe">move_inside_if_outside</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;polygons, <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> from, int distance=0, <a class="el" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a> maxDist2=std::numeric_limits&lt; <a class="el" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a> &gt;::max())</td></tr>
<tr class="separator:a4cea5675bfa8ad2c71fcd7c1785690fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0931050cec7937180b5b2cb962c64fde"><td class="memItemLeft" align="right" valign="top">static std::optional&lt; <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0931050cec7937180b5b2cb962c64fde">increase_single_area</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html">AreaIncreaseSettings</a> &amp;settings, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;parent, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;relevant_offset, <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;to_bp_data, <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;to_model_data, <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;increased, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> overspeed, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool mergelayer)</td></tr>
<tr class="memdesc:a0931050cec7937180b5b2cb962c64fde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if an influence area contains a valid subsection and returns the corresponding metadata and the new Influence area.  <br /></td></tr>
<tr class="separator:a0931050cec7937180b5b2cb962c64fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57466ec994792782e529655de103ab91"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a57466ec994792782e529655de103ab91">increase_areas_one_layer</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, std::vector&lt; <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &gt; &amp;merging_areas, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;layer_elements, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool mergelayer, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:a57466ec994792782e529655de103ab91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases influence areas as far as required.  <br /></td></tr>
<tr class="separator:a57466ec994792782e529655de103ab91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a183ed4ab8686513525c8c6b81401af"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a183ed4ab8686513525c8c6b81401af">merge_support_element_states</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;first, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;second, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;next_position, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> layer_idx, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config)</td></tr>
<tr class="separator:a5a183ed4ab8686513525c8c6b81401af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb175d116e2dfb6bc27c8f0005bfd906"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#abb175d116e2dfb6bc27c8f0005bfd906">merge_influence_areas_two_elements</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx, <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &amp;dst, <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &amp;src)</td></tr>
<tr class="separator:abb175d116e2dfb6bc27c8f0005bfd906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad858edd51a19e644532ce4d00379fb76"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ad858edd51a19e644532ce4d00379fb76">merge_influence_areas_leaves</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx, <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> dst_begin, <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *dst_end)</td></tr>
<tr class="memdesc:ad858edd51a19e644532ce4d00379fb76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges Influence Areas if possible.  <br /></td></tr>
<tr class="separator:ad858edd51a19e644532ce4d00379fb76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2ce227e4f177e6b0a86047f62857854"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab2ce227e4f177e6b0a86047f62857854">merge_influence_areas_two_sets</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx, <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> dst_begin, <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *dst_end, <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *src_begin, <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> src_end)</td></tr>
<tr class="separator:ab2ce227e4f177e6b0a86047f62857854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a072f8fb61613be20955808d6ea3da0eb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a072f8fb61613be20955808d6ea3da0eb">merge_influence_areas</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx, std::vector&lt; <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &gt; &amp;influence_areas, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:a072f8fb61613be20955808d6ea3da0eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges Influence Areas at one layer if possible.  <br /></td></tr>
<tr class="separator:a072f8fb61613be20955808d6ea3da0eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb49cf1fc20a86890b55d203812fd7bb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aeb49cf1fc20a86890b55d203812fd7bb">create_layer_pathing</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:aeb49cf1fc20a86890b55d203812fd7bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Propagates influence downwards, and merges overlapping ones.  <br /></td></tr>
<tr class="separator:aeb49cf1fc20a86890b55d203812fd7bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d3a0c486b78654286cf3541d8a6b5d6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5d3a0c486b78654286cf3541d8a6b5d6">set_points_on_areas</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;elem, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> *layer_above)</td></tr>
<tr class="memdesc:a5d3a0c486b78654286cf3541d8a6b5d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the result_on_layer for all parents based on the <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> supplied.  <br /></td></tr>
<tr class="separator:a5d3a0c486b78654286cf3541d8a6b5d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af51f5b21f6617dd3d6c57468be988ff8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af51f5b21f6617dd3d6c57468be988ff8">set_to_model_contact_simple</a> (<a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;elem)</td></tr>
<tr class="separator:af51f5b21f6617dd3d6c57468be988ff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae933bab23a01546925f47e2403e6c198"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ae933bab23a01546925f47e2403e6c198">set_to_model_contact_to_model_gracious</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;first_elem, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:ae933bab23a01546925f47e2403e6c198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the best point to connect to the model and set the result_on_layer of the relevant <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> accordingly.  <br /></td></tr>
<tr class="separator:ae933bab23a01546925f47e2403e6c198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada6ee7c767b7f812f1d7a4265f74a71c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ada6ee7c767b7f812f1d7a4265f74a71c">remove_deleted_elements</a> (std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds)</td></tr>
<tr class="separator:ada6ee7c767b7f812f1d7a4265f74a71c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92615f6c41e6b6715175c0ad1b804864"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a92615f6c41e6b6715175c0ad1b804864">create_nodes_from_area</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:a92615f6c41e6b6715175c0ad1b804864"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the result_on_layer point for all influence areas.  <br /></td></tr>
<tr class="separator:a92615f6c41e6b6715175c0ad1b804864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6b7427c147c841c0a8e34271053a0a6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ad6b7427c147c841c0a8e34271053a0a6">generate_branch_areas</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">DrawArea</a> &gt; &amp;linear_data, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:ad6b7427c147c841c0a8e34271053a0a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws circles around result_on_layer points of the influence areas.  <br /></td></tr>
<tr class="separator:ad6b7427c147c841c0a8e34271053a0a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac967237dc3f772e90e6ec13a5aaffdb1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac967237dc3f772e90e6ec13a5aaffdb1">smooth_branch_areas</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">DrawArea</a> &gt; &amp;linear_data, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;linear_data_layers, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:ac967237dc3f772e90e6ec13a5aaffdb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies some smoothing to the outer wall, intended to smooth out sudden jumps as they can happen when a branch moves though a hole.  <br /></td></tr>
<tr class="separator:ac967237dc3f772e90e6ec13a5aaffdb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f5baaed8cbc8d6f04b714f50501cef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a91f5baaed8cbc8d6f04b714f50501cef">drop_non_gracious_areas</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">DrawArea</a> &gt; &amp;linear_data, std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;support_layer_storage, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:a91f5baaed8cbc8d6f04b714f50501cef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop down areas that do rest non-gracefully on the model to ensure the branch actually rests on something.  <br /></td></tr>
<tr class="separator:a91f5baaed8cbc8d6f04b714f50501cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c74ce38001bad50498bc09a6ac254a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a67c74ce38001bad50498bc09a6ac254a">finalize_interface_and_support_areas</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;overhangs, std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;support_layer_storage, std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;support_roof_storage, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;bottom_contacts, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;top_contacts, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;intermediate_layers, <a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;layer_storage, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:a67c74ce38001bad50498bc09a6ac254a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates Support Floor, ensures Support Roof can not cut of branches, and saves the branches as support to storage.  <br /></td></tr>
<tr class="separator:a67c74ce38001bad50498bc09a6ac254a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe7894d0eaf4f718b69b4a8f4b9e999"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aafe7894d0eaf4f718b69b4a8f4b9e999">draw_areas</a> (<a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;volumes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;overhangs, std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;move_bounds, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;bottom_contacts, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;top_contacts, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;intermediate_layers, <a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;layer_storage, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:aafe7894d0eaf4f718b69b4a8f4b9e999"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws circles around result_on_layer points of the influence areas and applies some post processing.  <br /></td></tr>
<tr class="separator:aafe7894d0eaf4f718b69b4a8f4b9e999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26bc295197117d2d20bc72c33be92f6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab26bc295197117d2d20bc72c33be92f6">generate_support_areas</a> (<a class="el" href="../../d5/d8f/class_slic3r_1_1_print.html">Print</a> &amp;print, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d33/class_slic3r_1_1_build_volume.html">BuildVolume</a> &amp;build_volume, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;print_object_ids, std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt; throw_on_cancel)</td></tr>
<tr class="memdesc:ab26bc295197117d2d20bc72c33be92f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the areas that need support.  <br /></td></tr>
<tr class="separator:ab26bc295197117d2d20bc72c33be92f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0b43fc4eb70422b92722063157736e0"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac0b43fc4eb70422b92722063157736e0">getEffectiveDTT</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;settings, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;elem)</td></tr>
<tr class="memdesc:ac0b43fc4eb70422b92722063157736e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Distance to top regarding the real radius this part will have. This is different from distance_to_top, which is can be used to calculate the top most layer of the branch.  <br /></td></tr>
<tr class="separator:ac0b43fc4eb70422b92722063157736e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c0f5dd4d95f10538669e32992adb86d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;settings, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;elem)</td></tr>
<tr class="memdesc:a9c0f5dd4d95f10538669e32992adb86d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Radius, that this element will have.  <br /></td></tr>
<tr class="separator:a9c0f5dd4d95f10538669e32992adb86d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fe6563863279b24725d47874451e250"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;settings, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;elem)</td></tr>
<tr class="memdesc:a0fe6563863279b24725d47874451e250"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the collision Radius of this <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Element</a>. This can be smaller then the actual radius, as the drawAreas will cut off areas that may collide with the model.  <br /></td></tr>
<tr class="separator:a0fe6563863279b24725d47874451e250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5b7776f37deebb6df33ac042653debb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af5b7776f37deebb6df33ac042653debb">support_element_radius</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;settings, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;elem)</td></tr>
<tr class="separator:af5b7776f37deebb6df33ac042653debb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413ae4b4f158f0affe88cd5cc5873c51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a413ae4b4f158f0affe88cd5cc5873c51">support_element_collision_radius</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;settings, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;elem)</td></tr>
<tr class="separator:a413ae4b4f158f0affe88cd5cc5873c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b7e3aa2dbc67c812bcd72802a8e7734"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5b7e3aa2dbc67c812bcd72802a8e7734">tree_supports_show_error</a> (std::string_view message, bool critical)</td></tr>
<tr class="separator:a5b7e3aa2dbc67c812bcd72802a8e7734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d118629726e53c068e0a8c7d44eb80"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">layer_z</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t layer_idx)</td></tr>
<tr class="separator:aa2d118629726e53c068e0a8c7d44eb80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf81f5493356198ef1d10a851d40e994"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#acf81f5493356198ef1d10a851d40e994">layer_idx_ceil</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> double z)</td></tr>
<tr class="separator:acf81f5493356198ef1d10a851d40e994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66c42b1b74f00331d423f2a4b4c5361a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a66c42b1b74f00331d423f2a4b4c5361a">layer_idx_floor</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> double z)</td></tr>
<tr class="separator:a66c42b1b74f00331d423f2a4b4c5361a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa1be873e2e3f6f7a9869feca2fcf78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#acaa1be873e2e3f6f7a9869feca2fcf78">layer_initialize</a> (<a class="el" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp;layer_new, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t layer_idx)</td></tr>
<tr class="separator:acaa1be873e2e3f6f7a9869feca2fcf78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0a7d9e844215a555a30eef3dd925d9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af0a7d9e844215a555a30eef3dd925d9e">layer_allocate_unguarded</a> (<a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;layer_storage, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a1fa4d196f7a343766004aaa786d148bd">SupporLayerType</a> layer_type, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, size_t layer_idx)</td></tr>
<tr class="separator:af0a7d9e844215a555a30eef3dd925d9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c6c9af32e09eb3e442c8ac6d9363003"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8c6c9af32e09eb3e442c8ac6d9363003">layer_allocate</a> (<a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;layer_storage, <a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a1fa4d196f7a343766004aaa786d148bd">SupporLayerType</a> layer_type, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config, size_t layer_idx)</td></tr>
<tr class="separator:a8c6c9af32e09eb3e442c8ac6d9363003"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9dbe7ecc866105ff180975414a400ce9"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dbe7ecc866105ff180975414a400ce9">SUPPORT_TREE_EXPONENTIAL_FACTOR</a> = 1.5</td></tr>
<tr class="separator:a9dbe7ecc866105ff180975414a400ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8852f1bdc0dfbb6be4f9ae2884dc55"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a2b8852f1bdc0dfbb6be4f9ae2884dc55">SUPPORT_TREE_EXPONENTIAL_THRESHOLD</a> = <a class="el" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>&lt;<a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&gt;(1. * <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dbe7ecc866105ff180975414a400ce9">SUPPORT_TREE_EXPONENTIAL_FACTOR</a>)</td></tr>
<tr class="separator:a2b8852f1bdc0dfbb6be4f9ae2884dc55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b5b96cff6089fb6522a3159e639f99"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ad8b5b96cff6089fb6522a3159e639f99">SUPPORT_TREE_COLLISION_RESOLUTION</a> = <a class="el" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>&lt;<a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&gt;(0.5)</td></tr>
<tr class="separator:ad8b5b96cff6089fb6522a3159e639f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee4ab4cd99f65609817f5b5760e9516"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aeee4ab4cd99f65609817f5b5760e9516">SUPPORT_TREE_AVOID_SUPPORT_BLOCKER</a> = true</td></tr>
<tr class="separator:aeee4ab4cd99f65609817f5b5760e9516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad99b24bb16e78e513e22aeff7ce50ea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aad99b24bb16e78e513e22aeff7ce50ea">g_showed_critical_error</a> = false</td></tr>
<tr class="separator:aad99b24bb16e78e513e22aeff7ce50ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e44c1ba8a01d2910f6bfd9941520db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af5e44c1ba8a01d2910f6bfd9941520db">g_showed_performance_warning</a> = false</td></tr>
<tr class="separator:af5e44c1ba8a01d2910f6bfd9941520db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47bb1d5408b436e5aee7dba2deb0d626"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a47bb1d5408b436e5aee7dba2deb0d626">SUPPORT_TREE_CIRCLE_RESOLUTION</a> = 25</td></tr>
<tr class="separator:a47bb1d5408b436e5aee7dba2deb0d626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f48fd7ab27a9f22afd56e15a106cf4"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac9f48fd7ab27a9f22afd56e15a106cf4">polygons_strictly_simple</a> = false</td></tr>
<tr class="separator:ac9f48fd7ab27a9f22afd56e15a106cf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63f627df889bd2b2e66d516c5da63da"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ae63f627df889bd2b2e66d516c5da63da">tiny_area_threshold</a> = <a class="el" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(<a class="el" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>&lt;double&gt;(0.001))</td></tr>
<tr class="separator:ae63f627df889bd2b2e66d516c5da63da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation" id="d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation">&#9670;&#160;</a></span>Slic3r::FFFTreeSupport::Bifurcation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct Slic3r::FFFTreeSupport::Bifurcation</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::FFFTreeSupport::Bifurcation:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d9/df7/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="adea5d2bf581cce44e3abde7aec09b535" name="adea5d2bf581cce44e3abde7aec09b535"></a>double</td>
<td class="fieldname">
area</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a1827b0bb599ccd38d873aea308c0cba6" name="a1827b0bb599ccd38d873aea308c0cba6"></a><a class="el" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Branch</a> *</td>
<td class="fieldname">
branch</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area" id="df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area"></a>
<h2 class="memtitle"><span class="permalink"><a href="#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">&#9670;&#160;</a></span>Slic3r::FFFTreeSupport::DrawArea</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct Slic3r::FFFTreeSupport::DrawArea</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::FFFTreeSupport::DrawArea:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../da/dbf/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area__coll__graph.svg" width="100%" height="528"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a1140ad0da7b29d431375a7db48620101" name="a1140ad0da7b29d431375a7db48620101"></a><a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *</td>
<td class="fieldname">
child_element</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5a58fe1cd67095d966b228c89aef5010" name="a5a58fe1cd67095d966b228c89aef5010"></a><a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *</td>
<td class="fieldname">
element</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a0bb0aa9daea609cbe44301a2ed6cb220" name="a0bb0aa9daea609cbe44301a2ed6cb220"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a></td>
<td class="fieldname">
polygons</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element" id="dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element"></a>
<h2 class="memtitle"><span class="permalink"><a href="#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">&#9670;&#160;</a></span>Slic3r::FFFTreeSupport::Element</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct Slic3r::FFFTreeSupport::Element</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::FFFTreeSupport::Element:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dc/db7/struct_slic3r_1_1_f_f_f_tree_support_1_1_element__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a7aea34e1c67cdbab1ae551e82ad0ab31" name="a7aea34e1c67cdbab1ae551e82ad0ab31"></a><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d23/struct_slic3r_1_1_f_f_f_tree_support_1_1_element_1_1_collision_sphere">CollisionSphere</a></td>
<td class="fieldname">
collision_sphere</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a1a6c9ed181786c1bafbcca2ad2c44d55" name="a1a6c9ed181786c1bafbcca2ad2c44d55"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a></td>
<td class="fieldname">
influence_area</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a8287be15112d4a99c7b261e0c9a71b91" name="a8287be15112d4a99c7b261e0c9a71b91"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a></td>
<td class="fieldname">
last_collision</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="af47567509de74211bb8fd3afcc5c704d" name="af47567509de74211bb8fd3afcc5c704d"></a>double</td>
<td class="fieldname">
last_collision_depth</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae1d6a2a7bca10171e85b237835678e9b" name="ae1d6a2a7bca10171e85b237835678e9b"></a><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a></td>
<td class="fieldname">
layer_idx</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ac49b393bb9ea2563adf6148cb00ad4aa" name="ac49b393bb9ea2563adf6148cb00ad4aa"></a>bool</td>
<td class="fieldname">
locked</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5694c46d75207125d042499767bf60dd" name="a5694c46d75207125d042499767bf60dd"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a></td>
<td class="fieldname">
position</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a92547cf7d8c9d6a65f88b1a4b03e54ff" name="a92547cf7d8c9d6a65f88b1a4b03e54ff"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a></td>
<td class="fieldname">
prev_position</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ab5d60b11edd98d607bca9a672f52ae73" name="ab5d60b11edd98d607bca9a672f52ae73"></a>float</td>
<td class="fieldname">
radius</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="dd/dbd/struct_slic3r_1_1_f_f_f_tree_support_1_1_slice" id="dd/dbd/struct_slic3r_1_1_f_f_f_tree_support_1_1_slice"></a>
<h2 class="memtitle"><span class="permalink"><a href="#dd/dbd/struct_slic3r_1_1_f_f_f_tree_support_1_1_slice">&#9670;&#160;</a></span>Slic3r::FFFTreeSupport::Slice</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct Slic3r::FFFTreeSupport::Slice</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::FFFTreeSupport::Slice:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/dc5/struct_slic3r_1_1_f_f_f_tree_support_1_1_slice__coll__graph.svg" width="467" height="546"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a8172f069e05644a79b998bfcd99460ee" name="a8172f069e05644a79b998bfcd99460ee"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a></td>
<td class="fieldname">
bottom_contacts</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aadbcb787fc3cd561d129654f0316f51e" name="aadbcb787fc3cd561d129654f0316f51e"></a>size_t</td>
<td class="fieldname">
num_branches { 0 }</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="afc05acae552729ec60f08945f424add1" name="afc05acae552729ec60f08945f424add1"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a></td>
<td class="fieldname">
polygons</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a9ffddd79a33474301413b3501818dd09" name="a9ffddd79a33474301413b3501818dd09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ffddd79a33474301413b3501818dd09">&#9670;&#160;</a></span>Forest</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9ffddd79a33474301413b3501818dd09">Slic3r::FFFTreeSupport::Forest</a> = typedef std::vector&lt;<a class="el" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html">Tree</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a493a7de86471c664147a099ee5585609" name="a493a7de86471c664147a099ee5585609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a493a7de86471c664147a099ee5585609">&#9670;&#160;</a></span>LayerIndex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">Slic3r::FFFTreeSupport::LayerIndex</a> = typedef int</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8b172731ba7cf960859fa50acd674b09" name="a8b172731ba7cf960859fa50acd674b09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b172731ba7cf960859fa50acd674b09">&#9670;&#160;</a></span>LineInformation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">Slic3r::FFFTreeSupport::LineInformation</a> = typedef std::vector&lt;std::pair&lt;<a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2e">LineStatus</a>&gt; &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a120c940cfdd766c67f428bbd8bc25341" name="a120c940cfdd766c67f428bbd8bc25341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a120c940cfdd766c67f428bbd8bc25341">&#9670;&#160;</a></span>LineInformations</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">Slic3r::FFFTreeSupport::LineInformations</a> = typedef std::vector&lt;<a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">LineInformation</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a884a3220bfa9e3f7fb5e2169a75d7b1d" name="a884a3220bfa9e3f7fb5e2169a75d7b1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a884a3220bfa9e3f7fb5e2169a75d7b1d">&#9670;&#160;</a></span>SupportElements</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">Slic3r::FFFTreeSupport::SupportElements</a> = typedef std::deque&lt;<a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a791017efa818294dd8d8fbc88c29866a" name="a791017efa818294dd8d8fbc88c29866a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a791017efa818294dd8d8fbc88c29866a">&#9670;&#160;</a></span>Trees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a791017efa818294dd8d8fbc88c29866a">Slic3r::FFFTreeSupport::Trees</a> = typedef std::vector&lt;<a class="el" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html">Tree</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ab6de0fe0d580b1d4a0c1bd7ab947a934" name="ab6de0fe0d580b1d4a0c1bd7ab947a934"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6de0fe0d580b1d4a0c1bd7ab947a934">&#9670;&#160;</a></span>InterfacePreference</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934">Slic3r::FFFTreeSupport::InterfacePreference</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab6de0fe0d580b1d4a0c1bd7ab947a934ae2407ba6eb2d434329973ed28daf26fb" name="ab6de0fe0d580b1d4a0c1bd7ab947a934ae2407ba6eb2d434329973ed28daf26fb"></a>InterfaceAreaOverwritesSupport&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab6de0fe0d580b1d4a0c1bd7ab947a934a9821a51233685f171b3ec0bf6db31ef6" name="ab6de0fe0d580b1d4a0c1bd7ab947a934a9821a51233685f171b3ec0bf6db31ef6"></a>SupportAreaOverwritesInterface&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab6de0fe0d580b1d4a0c1bd7ab947a934aff3a95b930446ace141a9560cb31763d" name="ab6de0fe0d580b1d4a0c1bd7ab947a934aff3a95b930446ace141a9560cb31763d"></a>InterfaceLinesOverwriteSupport&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab6de0fe0d580b1d4a0c1bd7ab947a934a79032580102f82f96b21f791f7bade2c" name="ab6de0fe0d580b1d4a0c1bd7ab947a934a79032580102f82f96b21f791f7bade2c"></a>SupportLinesOverwriteInterface&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab6de0fe0d580b1d4a0c1bd7ab947a934af80a4ad87fee7c9fdc19b7769495fdb5" name="ab6de0fe0d580b1d4a0c1bd7ab947a934af80a4ad87fee7c9fdc19b7769495fdb5"></a>Nothing&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno">   29</span>{</div>
<div class="line"><span class="lineno">   30</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934ae2407ba6eb2d434329973ed28daf26fb">InterfaceAreaOverwritesSupport</a>,</div>
<div class="line"><span class="lineno">   31</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934a9821a51233685f171b3ec0bf6db31ef6">SupportAreaOverwritesInterface</a>,</div>
<div class="line"><span class="lineno">   32</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934aff3a95b930446ace141a9560cb31763d">InterfaceLinesOverwriteSupport</a>,</div>
<div class="line"><span class="lineno">   33</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934a79032580102f82f96b21f791f7bade2c">SupportLinesOverwriteInterface</a>,</div>
<div class="line"><span class="lineno">   34</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934af80a4ad87fee7c9fdc19b7769495fdb5">Nothing</a></div>
<div class="line"><span class="lineno">   35</span>};</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab6de0fe0d580b1d4a0c1bd7ab947a934a79032580102f82f96b21f791f7bade2c"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934a79032580102f82f96b21f791f7bade2c">Slic3r::FFFTreeSupport::InterfacePreference::SupportLinesOverwriteInterface</a></div><div class="ttdeci">@ SupportLinesOverwriteInterface</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab6de0fe0d580b1d4a0c1bd7ab947a934a9821a51233685f171b3ec0bf6db31ef6"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934a9821a51233685f171b3ec0bf6db31ef6">Slic3r::FFFTreeSupport::InterfacePreference::SupportAreaOverwritesInterface</a></div><div class="ttdeci">@ SupportAreaOverwritesInterface</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab6de0fe0d580b1d4a0c1bd7ab947a934ae2407ba6eb2d434329973ed28daf26fb"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934ae2407ba6eb2d434329973ed28daf26fb">Slic3r::FFFTreeSupport::InterfacePreference::InterfaceAreaOverwritesSupport</a></div><div class="ttdeci">@ InterfaceAreaOverwritesSupport</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab6de0fe0d580b1d4a0c1bd7ab947a934af80a4ad87fee7c9fdc19b7769495fdb5"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934af80a4ad87fee7c9fdc19b7769495fdb5">Slic3r::FFFTreeSupport::InterfacePreference::Nothing</a></div><div class="ttdeci">@ Nothing</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab6de0fe0d580b1d4a0c1bd7ab947a934aff3a95b930446ace141a9560cb31763d"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934aff3a95b930446ace141a9560cb31763d">Slic3r::FFFTreeSupport::InterfacePreference::InterfaceLinesOverwriteSupport</a></div><div class="ttdeci">@ InterfaceLinesOverwriteSupport</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19c1b7de30dd7a8941ee1c8446e4ed2e" name="a19c1b7de30dd7a8941ee1c8446e4ed2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19c1b7de30dd7a8941ee1c8446e4ed2e">&#9670;&#160;</a></span>LineStatus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2e">Slic3r::FFFTreeSupport::LineStatus</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a19c1b7de30dd7a8941ee1c8446e4ed2eaccc0377a8afbf50e7094f5c23a8af223" name="a19c1b7de30dd7a8941ee1c8446e4ed2eaccc0377a8afbf50e7094f5c23a8af223"></a>INVALID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a19c1b7de30dd7a8941ee1c8446e4ed2eab25f374974935939df6d4a5cbfe1dd39" name="a19c1b7de30dd7a8941ee1c8446e4ed2eab25f374974935939df6d4a5cbfe1dd39"></a>TO_MODEL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a19c1b7de30dd7a8941ee1c8446e4ed2eac86025471c7d0e5b609cc69e034f0978" name="a19c1b7de30dd7a8941ee1c8446e4ed2eac86025471c7d0e5b609cc69e034f0978"></a>TO_MODEL_GRACIOUS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a19c1b7de30dd7a8941ee1c8446e4ed2ea8f5cfba6c2529a95ba4a66a999d286bc" name="a19c1b7de30dd7a8941ee1c8446e4ed2ea8f5cfba6c2529a95ba4a66a999d286bc"></a>TO_MODEL_GRACIOUS_SAFE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a19c1b7de30dd7a8941ee1c8446e4ed2ea17000f38054a1d7473b4524cfbba05c6" name="a19c1b7de30dd7a8941ee1c8446e4ed2ea17000f38054a1d7473b4524cfbba05c6"></a>TO_BP&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a19c1b7de30dd7a8941ee1c8446e4ed2ea17e968aeab1713f65be1d61bf3c31014" name="a19c1b7de30dd7a8941ee1c8446e4ed2ea17e968aeab1713f65be1d61bf3c31014"></a>TO_BP_SAFE&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno">   49</span>{</div>
<div class="line"><span class="lineno">   50</span>    <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a3cca6f85cc4fd0249d3b85aede67df2eaccc0377a8afbf50e7094f5c23a8af223">INVALID</a>,</div>
<div class="line"><span class="lineno">   51</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eab25f374974935939df6d4a5cbfe1dd39">TO_MODEL</a>,</div>
<div class="line"><span class="lineno">   52</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eac86025471c7d0e5b609cc69e034f0978">TO_MODEL_GRACIOUS</a>,</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea8f5cfba6c2529a95ba4a66a999d286bc">TO_MODEL_GRACIOUS_SAFE</a>,</div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17000f38054a1d7473b4524cfbba05c6">TO_BP</a>,</div>
<div class="line"><span class="lineno">   55</span>    <a class="code hl_enumvalue" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17e968aeab1713f65be1d61bf3c31014">TO_BP_SAFE</a></div>
<div class="line"><span class="lineno">   56</span>};</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a19c1b7de30dd7a8941ee1c8446e4ed2ea17000f38054a1d7473b4524cfbba05c6"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17000f38054a1d7473b4524cfbba05c6">Slic3r::FFFTreeSupport::LineStatus::TO_BP</a></div><div class="ttdeci">@ TO_BP</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a19c1b7de30dd7a8941ee1c8446e4ed2ea17e968aeab1713f65be1d61bf3c31014"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17e968aeab1713f65be1d61bf3c31014">Slic3r::FFFTreeSupport::LineStatus::TO_BP_SAFE</a></div><div class="ttdeci">@ TO_BP_SAFE</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a19c1b7de30dd7a8941ee1c8446e4ed2ea8f5cfba6c2529a95ba4a66a999d286bc"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea8f5cfba6c2529a95ba4a66a999d286bc">Slic3r::FFFTreeSupport::LineStatus::TO_MODEL_GRACIOUS_SAFE</a></div><div class="ttdeci">@ TO_MODEL_GRACIOUS_SAFE</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a19c1b7de30dd7a8941ee1c8446e4ed2eab25f374974935939df6d4a5cbfe1dd39"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eab25f374974935939df6d4a5cbfe1dd39">Slic3r::FFFTreeSupport::LineStatus::TO_MODEL</a></div><div class="ttdeci">@ TO_MODEL</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a19c1b7de30dd7a8941ee1c8446e4ed2eac86025471c7d0e5b609cc69e034f0978"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eac86025471c7d0e5b609cc69e034f0978">Slic3r::FFFTreeSupport::LineStatus::TO_MODEL_GRACIOUS</a></div><div class="ttdeci">@ TO_MODEL_GRACIOUS</div></div>
<div class="ttc" id="anamespace_slic3r_html_a3cca6f85cc4fd0249d3b85aede67df2eaccc0377a8afbf50e7094f5c23a8af223"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a3cca6f85cc4fd0249d3b85aede67df2eaccc0377a8afbf50e7094f5c23a8af223">Slic3r::ModelVolumeType::INVALID</a></div><div class="ttdeci">@ INVALID</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aeba81cf5ed00cbfc5342579d0f9cd5dd" name="aeba81cf5ed00cbfc5342579d0f9cd5dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeba81cf5ed00cbfc5342579d0f9cd5dd">&#9670;&#160;</a></span>calculateMachineBorderCollision()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> Slic3r::FFFTreeSupport::calculateMachineBorderCollision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d90/class_slic3r_1_1_polygon.html">Polygon</a>&#160;</td>
          <td class="paramname"><em>machine_border</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   40</span>{</div>
<div class="line"><span class="lineno">   41</span>    <span class="comment">// Put a border of 1m around the print volume so that we don&#39;t collide.</span></div>
<div class="line"><span class="lineno">   42</span><span class="preprocessor">#if 1</span></div>
<div class="line"><span class="lineno">   43</span>    <span class="comment">//FIXME just returning no border will let tree support legs collide with print bed boundary</span></div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">   45</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">   46</span>    <span class="comment">//FIXME offsetting by 1000mm easily overflows int32_tr coordinate.</span></div>
<div class="line"><span class="lineno">   47</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> out = offset(machine_border, scaled&lt;float&gt;(1000.), jtMiter, 1.2);</div>
<div class="line"><span class="lineno">   48</span>    machine_border.<a class="code hl_function" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a1d2346fcc6ad14762b3ac851ebe1ddb5">reverse</a>(); <span class="comment">// Makes the polygon negative so that we subtract the actual volume from the collision area.</span></div>
<div class="line"><span class="lineno">   49</span>    out.emplace_back(std::move(machine_border));</div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">   51</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   52</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_multi_point_html_a1d2346fcc6ad14762b3ac851ebe1ddb5"><div class="ttname"><a href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a1d2346fcc6ad14762b3ac851ebe1ddb5">Slic3r::MultiPoint::reverse</a></div><div class="ttdeci">void reverse()</div><div class="ttdef"><b>Definition</b> MultiPoint.hpp:34</div></div>
<div class="ttc" id="anamespace_slic3r_html_a00eaa65faeaecea2aec629f311ce5a1c"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Slic3r::Polygons</a></div><div class="ttdeci">std::vector&lt; Polygon, PointsAllocator&lt; Polygon &gt; &gt; Polygons</div><div class="ttdef"><b>Definition</b> Polygon.hpp:15</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00416">Slic3r::offset()</a>, and <a class="el" href="../../#l00034">Slic3r::MultiPoint::reverse()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aeba81cf5ed00cbfc5342579d0f9cd5dd_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a98762af92d2b13283ab508d8cb0166f2" name="a98762af92d2b13283ab508d8cb0166f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98762af92d2b13283ab508d8cb0166f2">&#9670;&#160;</a></span>check_self_intersections() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::check_self_intersections </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/dc4/class_slic3r_1_1_ex_polygon.html">ExPolygon</a> &amp;&#160;</td>
          <td class="paramname"><em>expoly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string_view&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  112</span>{</div>
<div class="line"><span class="lineno">  113</span><span class="preprocessor">#ifdef TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  114</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a389a6c48fa824f1c3b5af80d510eae2c">check_self_intersections</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">to_polygons</a>(expoly), message);</div>
<div class="line"><span class="lineno">  115</span><span class="preprocessor">#endif </span><span class="comment">// TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  116</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a389a6c48fa824f1c3b5af80d510eae2c"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a389a6c48fa824f1c3b5af80d510eae2c">Slic3r::FFFTreeSupport::check_self_intersections</a></div><div class="ttdeci">static void check_self_intersections(const Polygons &amp;polygons, const std::string_view message)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:104</div></div>
<div class="ttc" id="anamespace_slic3r_html_a843ba2fe16b213f550fb3d55c55a716e"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">Slic3r::to_polygons</a></div><div class="ttdeci">Polygons to_polygons(const ExPolygon &amp;src)</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:281</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00104">check_self_intersections()</a>, and <a class="el" href="../../#l00281">Slic3r::to_polygons()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a98762af92d2b13283ab508d8cb0166f2_cgraph.svg" width="100%" height="425"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a389a6c48fa824f1c3b5af80d510eae2c" name="a389a6c48fa824f1c3b5af80d510eae2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a389a6c48fa824f1c3b5af80d510eae2c">&#9670;&#160;</a></span>check_self_intersections() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::check_self_intersections </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>polygons</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string_view&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  105</span>{</div>
<div class="line"><span class="lineno">  106</span><span class="preprocessor">#ifdef TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a59f3fa35e6f1b18cd26ffffb33a04d96">intersecting_edges</a>(polygons).<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">empty</a>())</div>
<div class="line"><span class="lineno">  108</span>        ::MessageBoxA(<span class="keyword">nullptr</span>, (std::string(<span class="stringliteral">&quot;TreeSupport infill self intersections: &quot;</span>) + std::string(message)).c_str(), <span class="stringliteral">&quot;Bug detected!&quot;</span>, MB_OK | MB_SYSTEMMODAL | MB_SETFOREGROUND | MB_ICONWARNING);</div>
<div class="line"><span class="lineno">  109</span><span class="preprocessor">#endif </span><span class="comment">// TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  110</span>}</div>
<div class="ttc" id="anamespace_slic3r_html_a59f3fa35e6f1b18cd26ffffb33a04d96"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a59f3fa35e6f1b18cd26ffffb33a04d96">Slic3r::intersecting_edges</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; EdgeGrid::Grid::ContourEdge, EdgeGrid::Grid::ContourEdge &gt; &gt; intersecting_edges(const Polygons &amp;polygons)</div><div class="ttdef"><b>Definition</b> EdgeGrid.cpp:1568</div></div>
<div class="ttc" id="anamespace_slic3r_html_aecabe174ebbb0e9cc7be41dafc297ef7"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">Slic3r::empty</a></div><div class="ttdeci">bool empty(const BoundingBoxBase&lt; PointType, PointsType &gt; &amp;bb)</div><div class="ttdef"><b>Definition</b> BoundingBox.hpp:229</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00229">Slic3r::empty()</a>, and <a class="el" href="../../#l01568">Slic3r::intersecting_edges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00111">check_self_intersections()</a>, and <a class="el" href="../../#l00628">generate_support_infill_lines()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a389a6c48fa824f1c3b5af80d510eae2c_cgraph.svg" width="579" height="167"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a389a6c48fa824f1c3b5af80d510eae2c_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ab438824023a3a935e925a285dff2d154" name="ab438824023a3a935e925a285dff2d154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab438824023a3a935e925a285dff2d154">&#9670;&#160;</a></span>convert_lines_to_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> Slic3r::FFFTreeSupport::convert_lines_to_internal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> &amp;&#160;</td>
          <td class="paramname"><em>polylines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a Polygons object representing a line into the internal format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">polylines[in]</td><td>The <a class="el" href="../../d6/de0/class_slic3r_1_1_polyline.html">Polyline</a> that will be converted. </td></tr>
    <tr><td class="paramname">layer_idx[in]</td><td>The current layer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>All lines of the <code>polylines</code> object, with information for each point regarding in which avoidance it is currently valid in. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  357</span>{</div>
<div class="line"><span class="lineno">  358</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> min_xy_dist = config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e07ec0b2df8f878e998e444d191dbfc">xy_distance</a> &gt; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a510f0b550289688a5f94753933635aa8">xy_min_distance</a>;</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> result;</div>
<div class="line"><span class="lineno">  361</span>    <span class="comment">// Also checks if the position is valid, if it is NOT, it deletes that point</span></div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d6/de0/class_slic3r_1_1_polyline.html">Polyline</a> &amp;line : polylines) {</div>
<div class="line"><span class="lineno">  363</span>        <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">LineInformation</a> res_line;</div>
<div class="line"><span class="lineno">  364</span>        <span class="keywordflow">for</span> (<a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> p : line) {</div>
<div class="line"><span class="lineno">  365</span>            <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), layer_idx, TreeModelVolumes::AvoidanceType::FastSafe, <span class="keyword">false</span>, min_xy_dist), p))</div>
<div class="line"><span class="lineno">  366</span>                res_line.emplace_back(p, LineStatus::TO_BP_SAFE);</div>
<div class="line"><span class="lineno">  367</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), layer_idx, TreeModelVolumes::AvoidanceType::Fast, <span class="keyword">false</span>, min_xy_dist), p))</div>
<div class="line"><span class="lineno">  368</span>                res_line.emplace_back(p, LineStatus::TO_BP);</div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a> &amp;&amp; ! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), layer_idx, TreeModelVolumes::AvoidanceType::FastSafe, <span class="keyword">true</span>, min_xy_dist), p))</div>
<div class="line"><span class="lineno">  370</span>                res_line.emplace_back(p, LineStatus::TO_MODEL_GRACIOUS_SAFE);</div>
<div class="line"><span class="lineno">  371</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a> &amp;&amp; ! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), layer_idx, TreeModelVolumes::AvoidanceType::Fast, <span class="keyword">true</span>, min_xy_dist), p))</div>
<div class="line"><span class="lineno">  372</span>                res_line.emplace_back(p, LineStatus::TO_MODEL_GRACIOUS);</div>
<div class="line"><span class="lineno">  373</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a> &amp;&amp; ! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#af880ece6544ec2816bc0444aeec378bb">getCollision</a>(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), layer_idx, min_xy_dist), p))</div>
<div class="line"><span class="lineno">  374</span>                res_line.emplace_back(p, LineStatus::TO_MODEL);</div>
<div class="line"><span class="lineno">  375</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!res_line.empty()) {</div>
<div class="line"><span class="lineno">  376</span>                result.emplace_back(res_line);</div>
<div class="line"><span class="lineno">  377</span>                res_line.clear();</div>
<div class="line"><span class="lineno">  378</span>            }</div>
<div class="line"><span class="lineno">  379</span>        }</div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">if</span> (!res_line.empty()) {</div>
<div class="line"><span class="lineno">  381</span>            result.emplace_back(res_line);</div>
<div class="line"><span class="lineno">  382</span>            res_line.clear();</div>
<div class="line"><span class="lineno">  383</span>        }</div>
<div class="line"><span class="lineno">  384</span>    }</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(result);</div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  388</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_ac25a22a562e32a0dbbae800969c56f3c"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">Slic3r::FFFTreeSupport::TreeModelVolumes::getAvoidance</a></div><div class="ttdeci">const Polygons &amp; getAvoidance(coord_t radius, LayerIndex layer_idx, AvoidanceType type, bool to_model, bool min_xy_dist) const</div><div class="ttdoc">Provides the areas that have to be avoided by the tree's branches in order to reach the build plate.</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.cpp:327</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_af880ece6544ec2816bc0444aeec378bb"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#af880ece6544ec2816bc0444aeec378bb">Slic3r::FFFTreeSupport::TreeModelVolumes::getCollision</a></div><div class="ttdeci">const Polygons &amp; getCollision(const coord_t radius, LayerIndex layer_idx, bool min_xy_dist) const</div><div class="ttdoc">Provides the areas that have to be avoided by the tree's branches to prevent collision with the model...</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.cpp:291</div></div>
<div class="ttc" id="aclass_slic3r_1_1_point_html"><div class="ttname"><a href="../../d6/dec/class_slic3r_1_1_point.html">Slic3r::Point</a></div><div class="ttdef"><b>Definition</b> Point.hpp:158</div></div>
<div class="ttc" id="aclass_slic3r_1_1_polyline_html"><div class="ttname"><a href="../../d6/de0/class_slic3r_1_1_polyline.html">Slic3r::Polyline</a></div><div class="ttdef"><b>Definition</b> Polyline.hpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a0c984cee519c0956b376d8371312d3d9"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">Slic3r::FFFTreeSupport::validate_range</a></div><div class="ttdeci">static void validate_range(const Point &amp;pt)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:62</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a120c940cfdd766c67f428bbd8bc25341"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">Slic3r::FFFTreeSupport::LineInformations</a></div><div class="ttdeci">std::vector&lt; LineInformation &gt; LineInformations</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:59</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a8b172731ba7cf960859fa50acd674b09"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">Slic3r::FFFTreeSupport::LineInformation</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; Point, LineStatus &gt; &gt; LineInformation</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:58</div></div>
<div class="ttc" id="asemver_8c_html_a477fec2b303f34d210b5d5f8ed8b4f71"><div class="ttname"><a href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a></div><div class="ttdeci">static int contains(const char c, const char *matrix, size_t len)</div><div class="ttdef"><b>Definition</b> semver.c:65</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a2e07ec0b2df8f878e998e444d191dbfc"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e07ec0b2df8f878e998e444d191dbfc">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_distance</a></div><div class="ttdeci">coord_t xy_distance</div><div class="ttdoc">How far should support be from the model.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:276</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a3e3c953b2bddcff105a01742359ce230"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">Slic3r::FFFTreeSupport::TreeSupportSettings::getRadius</a></div><div class="ttdeci">coord_t getRadius(size_t distance_to_top, const double elephant_foot_increases=0) const</div><div class="ttdoc">Get the Radius part will have based on numeric values.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:403</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a510f0b550289688a5f94753933635aa8"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a510f0b550289688a5f94753933635aa8">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_min_distance</a></div><div class="ttdeci">coord_t xy_min_distance</div><div class="ttdoc">minimum xy_distance. Only relevant when Z overrides XY, otherwise equal to xy_distance-</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:293</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a85af9d912d44a4a99dc52839cd088c17"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">Slic3r::FFFTreeSupport::TreeSupportSettings::support_rests_on_model</a></div><div class="ttdeci">bool support_rests_on_model</div><div class="ttdoc">True if the branches may connect to the model.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:272</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00247">Slic3r::contains()</a>, <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a0ef9b0d1194548e1a1423c2cbc12349aae16b5b7f26f54214445cbe38d72c2828">Slic3r::FFFTreeSupport::TreeModelVolumes::Fast</a>, <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a0ef9b0d1194548e1a1423c2cbc12349aa5669b0822803d9bf0bd3e4b107ae098f">Slic3r::FFFTreeSupport::TreeModelVolumes::FastSafe</a>, <a class="el" href="../../#l00327">Slic3r::FFFTreeSupport::TreeModelVolumes::getAvoidance()</a>, <a class="el" href="../../#l00291">Slic3r::FFFTreeSupport::TreeModelVolumes::getCollision()</a>, <a class="el" href="../../#l00403">Slic3r::FFFTreeSupport::TreeSupportSettings::getRadius()</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::TreeSupportSettings::support_rests_on_model</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17000f38054a1d7473b4524cfbba05c6">TO_BP</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17e968aeab1713f65be1d61bf3c31014">TO_BP_SAFE</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eab25f374974935939df6d4a5cbfe1dd39">TO_MODEL</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eac86025471c7d0e5b609cc69e034f0978">TO_MODEL_GRACIOUS</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea8f5cfba6c2529a95ba4a66a999d286bc">TO_MODEL_GRACIOUS_SAFE</a>, <a class="el" href="../../#l00062">validate_range()</a>, <a class="el" href="../../#l00276">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_distance</a>, and <a class="el" href="../../#l00293">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_min_distance</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01062">sample_overhang_area()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ab438824023a3a935e925a285dff2d154_cgraph.svg" width="100%" height="533"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ab438824023a3a935e925a285dff2d154_icgraph.svg" width="396" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aeb49cf1fc20a86890b55d203812fd7bb" name="aeb49cf1fc20a86890b55d203812fd7bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb49cf1fc20a86890b55d203812fd7bb">&#9670;&#160;</a></span>create_layer_pathing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::create_layer_pathing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Propagates influence downwards, and merges overlapping ones. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">move_bounds[in,out]</td><td>All currently existing influence areas </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 2406</span>{</div>
<div class="line"><span class="lineno"> 2407</span><span class="preprocessor">#ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 2408</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> data_size_inverse = 1 / double(move_bounds.size());</div>
<div class="line"><span class="lineno"> 2409</span>    <span class="keywordtype">double</span> progress_total = TREE_PROGRESS_PRECALC_AVO + TREE_PROGRESS_PRECALC_COLL + TREE_PROGRESS_GENERATE_NODES;</div>
<div class="line"><span class="lineno"> 2410</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 2411</span> </div>
<div class="line"><span class="lineno"> 2412</span>    <span class="keyword">auto</span> dur_inc   = std::chrono::duration_values&lt;std::chrono::nanoseconds&gt;::zero();</div>
<div class="line"><span class="lineno"> 2413</span>    <span class="keyword">auto</span> dur_total = std::chrono::duration_values&lt;std::chrono::nanoseconds&gt;::zero();</div>
<div class="line"><span class="lineno"> 2414</span> </div>
<div class="line"><span class="lineno"> 2415</span>    <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> last_merge_layer_idx = move_bounds.size();</div>
<div class="line"><span class="lineno"> 2416</span>    <span class="keywordtype">bool</span> new_element = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2417</span> </div>
<div class="line"><span class="lineno"> 2418</span>    <span class="comment">// Ensures at least one merge operation per 3mm height, 50 layers, 1 mm movement of slow speed or 5mm movement of fast speed (whatever is lowest). Values were guessed.</span></div>
<div class="line"><span class="lineno"> 2419</span>    <span class="keywordtype">size_t</span> max_merge_every_x_layers = std::min(std::min(5000 / (std::max(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a4e8e1d27ede43a52b1f87b413d286f0d">maximum_move_distance</a>, <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(100))), 1000 / std::max(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a52f7f214759712af60e5c3cd5bf38286">maximum_move_distance_slow</a>, <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(20))), 3000 / config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a1987508509a360f10adc9e341ac0fc34">layer_height</a>);</div>
<div class="line"><span class="lineno"> 2420</span>    <span class="keywordtype">size_t</span> merge_every_x_layers = 1;</div>
<div class="line"><span class="lineno"> 2421</span>    <span class="comment">// Calculate the influence areas for each layer below (Top down)</span></div>
<div class="line"><span class="lineno"> 2422</span>    <span class="comment">// This is done by first increasing the influence area by the allowed movement distance, and merging them with other influence areas if possible</span></div>
<div class="line"><span class="lineno"> 2423</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layer_idx = <span class="keywordtype">int</span>(move_bounds.size()) - 1; layer_idx &gt; 0; -- layer_idx)</div>
<div class="line"><span class="lineno"> 2424</span>        <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;prev_layer = move_bounds[layer_idx]; ! prev_layer.empty()) {</div>
<div class="line"><span class="lineno"> 2425</span>            <span class="comment">// merging is expensive and only parallelized to a max speedup of 2. As such it may be useful in some cases to only merge every few layers to improve performance.</span></div>
<div class="line"><span class="lineno"> 2426</span>            <span class="keywordtype">bool</span> had_new_element = new_element;</div>
<div class="line"><span class="lineno"> 2427</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> merge_this_layer = had_new_element || size_t(last_merge_layer_idx - layer_idx) &gt;= merge_every_x_layers;</div>
<div class="line"><span class="lineno"> 2428</span>            <span class="keywordflow">if</span> (had_new_element)</div>
<div class="line"><span class="lineno"> 2429</span>                merge_every_x_layers = 1;</div>
<div class="line"><span class="lineno"> 2430</span>            <span class="keyword">const</span> <span class="keyword">auto</span> ta               = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 2431</span> </div>
<div class="line"><span class="lineno"> 2432</span>            <span class="comment">// ### Increase the influence areas by the allowed movement distance</span></div>
<div class="line"><span class="lineno"> 2433</span>            std::vector&lt;SupportElementMerging&gt; influence_areas;</div>
<div class="line"><span class="lineno"> 2434</span>            influence_areas.reserve(prev_layer.size());</div>
<div class="line"><span class="lineno"> 2435</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> element_idx = 0; element_idx &lt; <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a>(prev_layer.size()); ++ element_idx) {</div>
<div class="line"><span class="lineno"> 2436</span>                <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;el = prev_layer[element_idx];</div>
<div class="line"><span class="lineno"> 2437</span>                assert(!el.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ab91ca9359c684859675f7f26e6d3cd01">influence_area</a>.empty());</div>
<div class="line"><span class="lineno"> 2438</span>                <a class="code hl_typedef" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a956f1e2219ddb910164f93e4ff4e5c19">SupportElement::ParentIndices</a> parents;</div>
<div class="line"><span class="lineno"> 2439</span>                parents.emplace_back(element_idx);</div>
<div class="line"><span class="lineno"> 2440</span>                influence_areas.push_back({ el.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>, parents });</div>
<div class="line"><span class="lineno"> 2441</span>            }</div>
<div class="line"><span class="lineno"> 2442</span>            increase_areas_one_layer(volumes, config, influence_areas, layer_idx, prev_layer, merge_this_layer, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 2443</span> </div>
<div class="line"><span class="lineno"> 2444</span>            <span class="comment">// Place already fully constructed elements to the output, remove them from influence_areas.</span></div>
<div class="line"><span class="lineno"> 2445</span>            SupportElements &amp;this_layer = move_bounds[layer_idx - 1];</div>
<div class="line"><span class="lineno"> 2446</span>            influence_areas.erase(std::remove_if(influence_areas.begin(), influence_areas.end(),</div>
<div class="line"><span class="lineno"> 2447</span>                [&amp;this_layer, layer_idx](SupportElementMerging &amp;elem) {</div>
<div class="line"><span class="lineno"> 2448</span>                    if (elem.areas.influence_areas.empty())</div>
<div class="line"><span class="lineno"> 2449</span>                        <span class="comment">// This area was removed completely due to collisions.</span></div>
<div class="line"><span class="lineno"> 2450</span>                        return true;</div>
<div class="line"><span class="lineno"> 2451</span>                    if (elem.areas.to_bp_areas.empty() &amp;&amp; elem.areas.to_model_areas.empty()) {</div>
<div class="line"><span class="lineno"> 2452</span>                        if (area(elem.areas.influence_areas) &lt; tiny_area_threshold) {</div>
<div class="line"><span class="lineno"> 2453</span>                            BOOST_LOG_TRIVIAL(error) &lt;&lt; <span class="stringliteral">&quot;Insert Error of Influence area bypass on layer &quot;</span> &lt;&lt; layer_idx - 1;</div>
<div class="line"><span class="lineno"> 2454</span>                            tree_supports_show_error(<span class="stringliteral">&quot;Insert error of area after bypassing merge.\n&quot;</span>sv, true);</div>
<div class="line"><span class="lineno"> 2455</span>                        }</div>
<div class="line"><span class="lineno"> 2456</span>                        <span class="comment">// Move the area to output.</span></div>
<div class="line"><span class="lineno"> 2457</span>                        this_layer.emplace_back(elem.state, std::move(elem.parents), std::move(elem.areas.influence_areas));</div>
<div class="line"><span class="lineno"> 2458</span>                        return true;</div>
<div class="line"><span class="lineno"> 2459</span>                    }</div>
<div class="line"><span class="lineno"> 2460</span>                    <span class="comment">// Keep the area.</span></div>
<div class="line"><span class="lineno"> 2461</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2462</span>                }),</div>
<div class="line"><span class="lineno"> 2463</span>                influence_areas.end());</div>
<div class="line"><span class="lineno"> 2464</span> </div>
<div class="line"><span class="lineno"> 2465</span>            dur_inc += std::chrono::high_resolution_clock::now() - ta;</div>
<div class="line"><span class="lineno"> 2466</span>            new_element = ! move_bounds[layer_idx - 1].empty();</div>
<div class="line"><span class="lineno"> 2467</span>            <span class="keywordflow">if</span> (merge_this_layer) {</div>
<div class="line"><span class="lineno"> 2468</span>                <span class="keywordtype">bool</span> reduced_by_merging = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2469</span>                <span class="keywordflow">if</span> (<span class="keywordtype">size_t</span> count_before_merge = influence_areas.size(); count_before_merge &gt; 1) {</div>
<div class="line"><span class="lineno"> 2470</span>                    <span class="comment">// ### Calculate which influence areas overlap, and merge them into a new influence area (simplified: an intersection of influence areas that have such an intersection)</span></div>
<div class="line"><span class="lineno"> 2471</span>                    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a072f8fb61613be20955808d6ea3da0eb">merge_influence_areas</a>(volumes, config, layer_idx, influence_areas, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 2472</span>                    reduced_by_merging = count_before_merge &gt; influence_areas.size();</div>
<div class="line"><span class="lineno"> 2473</span>                }</div>
<div class="line"><span class="lineno"> 2474</span>                last_merge_layer_idx = layer_idx;</div>
<div class="line"><span class="lineno"> 2475</span>                <span class="keywordflow">if</span> (! reduced_by_merging &amp;&amp; ! had_new_element)</div>
<div class="line"><span class="lineno"> 2476</span>                    merge_every_x_layers = std::min(max_merge_every_x_layers, merge_every_x_layers + 1);</div>
<div class="line"><span class="lineno"> 2477</span>            }</div>
<div class="line"><span class="lineno"> 2478</span> </div>
<div class="line"><span class="lineno"> 2479</span>            dur_total += std::chrono::high_resolution_clock::now() - ta;</div>
<div class="line"><span class="lineno"> 2480</span> </div>
<div class="line"><span class="lineno"> 2481</span>            <span class="comment">// Save calculated elements to output, and allocate Polygons on heap, as they will not be changed again.</span></div>
<div class="line"><span class="lineno"> 2482</span>            <span class="keywordflow">for</span> (SupportElementMerging &amp;elem : influence_areas)</div>
<div class="line"><span class="lineno"> 2483</span>                <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (! elem.areas.influence_areas.<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">empty</a>()) {</div>
<div class="line"><span class="lineno"> 2484</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> new_area = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(elem.areas.influence_areas);</div>
<div class="line"><span class="lineno"> 2485</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(new_area) &lt; tiny_area_threshold) {</div>
<div class="line"><span class="lineno"> 2486</span>                        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Insert Error of Influence area on layer &quot;</span> &lt;&lt; layer_idx - 1 &lt;&lt; <span class="stringliteral">&quot;. Origin of &quot;</span> &lt;&lt; elem.parents.size() &lt;&lt; <span class="stringliteral">&quot; areas. Was to bp &quot;</span> &lt;&lt; elem.state.to_buildplate;</div>
<div class="line"><span class="lineno"> 2487</span>                        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5b7e3aa2dbc67c812bcd72802a8e7734">tree_supports_show_error</a>(<span class="stringliteral">&quot;Insert error of area after merge.\n&quot;</span>sv, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2488</span>                    }</div>
<div class="line"><span class="lineno"> 2489</span>                    this_layer.emplace_back(elem.state, std::move(elem.parents), std::move(new_area));</div>
<div class="line"><span class="lineno"> 2490</span>                }</div>
<div class="line"><span class="lineno"> 2491</span> </div>
<div class="line"><span class="lineno"> 2492</span><span class="preprocessor">    #ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 2493</span>            progress_total += data_size_inverse * TREE_PROGRESS_AREA_CALC;</div>
<div class="line"><span class="lineno"> 2494</span>            Progress::messageProgress(Progress::Stage::SUPPORT, progress_total * m_progress_multiplier + m_progress_offset, TREE_PROGRESS_TOTAL);</div>
<div class="line"><span class="lineno"> 2495</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno"> 2496</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2497</span>        }</div>
<div class="line"><span class="lineno"> 2498</span> </div>
<div class="line"><span class="lineno"> 2499</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Time spent with creating influence areas&#39; subtasks: Increasing areas &quot;</span> &lt;&lt; dur_inc.count() / 1000000 &lt;&lt; </div>
<div class="line"><span class="lineno"> 2500</span>        <span class="stringliteral">&quot; ms merging areas: &quot;</span> &lt;&lt; (dur_total - dur_inc).<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">count</a>() / 1000000 &lt;&lt; <span class="stringliteral">&quot; ms&quot;</span>;</div>
<div class="line"><span class="lineno"> 2501</span>}</div>
<div class="ttc" id="alexer_8c_html_ad4a65b873df5c05570846b5413b41dfd"><div class="ttname"><a href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a></div><div class="ttdeci">if(!(yy_init))</div><div class="ttdef"><b>Definition</b> lexer.c:1190</div></div>
<div class="ttc" id="alibslic3r_8h_html_a8a7f69c27280e7542b2d1fd979af4545"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a></div><div class="ttdeci">int32_t coord_t</div><div class="ttdef"><b>Definition</b> libslic3r.h:39</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a072f8fb61613be20955808d6ea3da0eb"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a072f8fb61613be20955808d6ea3da0eb">Slic3r::FFFTreeSupport::merge_influence_areas</a></div><div class="ttdeci">static void merge_influence_areas(const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, const LayerIndex layer_idx, std::vector&lt; SupportElementMerging &gt; &amp;influence_areas, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Merges Influence Areas at one layer if possible.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2310</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a493a7de86471c664147a099ee5585609"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">Slic3r::FFFTreeSupport::LayerIndex</a></div><div class="ttdeci">int LayerIndex</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:26</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a5b7e3aa2dbc67c812bcd72802a8e7734"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5b7e3aa2dbc67c812bcd72802a8e7734">Slic3r::FFFTreeSupport::tree_supports_show_error</a></div><div class="ttdeci">void tree_supports_show_error(std::string_view message, bool critical)</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.cpp:173</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a884a3220bfa9e3f7fb5e2169a75d7b1d"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">Slic3r::FFFTreeSupport::SupportElements</a></div><div class="ttdeci">std::deque&lt; SupportElement &gt; SupportElements</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:281</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a9dfc6d8bd33b63c46bcb69e36154f5da"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">Slic3r::FFFTreeSupport::safe_union</a></div><div class="ttdeci">static Polygons safe_union(const Polygons first, const Polygons second={})</div><div class="ttdoc">Unions two Polygons. Ensures that if the input is non empty that the output also will be non empty.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:720</div></div>
<div class="ttc" id="anamespaceigl_html_a1b625c8dfd9a1e79e087f984322d7e05"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">igl::count</a></div><div class="ttdeci">IGL_INLINE void count(const Eigen::SparseMatrix&lt; XType &gt; &amp;X, const int dim, Eigen::SparseVector&lt; SType &gt; &amp;S)</div><div class="ttdef"><b>Definition</b> count.cpp:12</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a58071852761a9be613103b74cc81e6dc"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">libnest2d::shapelike::area</a></div><div class="ttdeci">Unit area(const Cntr &amp;poly, const PathTag &amp;)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:971</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_html"><div class="ttname"><a href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">Slic3r::FFFTreeSupport::SupportElement</a></div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:252</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_html_a956f1e2219ddb910164f93e4ff4e5c19"><div class="ttname"><a href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a956f1e2219ddb910164f93e4ff4e5c19">Slic3r::FFFTreeSupport::SupportElement::ParentIndices</a></div><div class="ttdeci">std::vector&lt; int32_t &gt; ParentIndices</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:259</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_html_ab91ca9359c684859675f7f26e6d3cd01"><div class="ttname"><a href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ab91ca9359c684859675f7f26e6d3cd01">Slic3r::FFFTreeSupport::SupportElement::influence_area</a></div><div class="ttdeci">Polygons influence_area</div><div class="ttdoc">The resulting influence area. Will only be set in the results of createLayerPathing,...</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:278</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_html_ad96e4622b2cb06e4f357540dd558bd46"><div class="ttname"><a href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">Slic3r::FFFTreeSupport::SupportElement::state</a></div><div class="ttdeci">SupportElementState state</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:267</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a1987508509a360f10adc9e341ac0fc34"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a1987508509a360f10adc9e341ac0fc34">Slic3r::FFFTreeSupport::TreeSupportSettings::layer_height</a></div><div class="ttdeci">coord_t layer_height</div><div class="ttdoc">Height of a single layer.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:224</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a4e8e1d27ede43a52b1f87b413d286f0d"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a4e8e1d27ede43a52b1f87b413d286f0d">Slic3r::FFFTreeSupport::TreeSupportSettings::maximum_move_distance</a></div><div class="ttdeci">coord_t maximum_move_distance</div><div class="ttdoc">How far an influence area may move outward every layer at most.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:236</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a52f7f214759712af60e5c3cd5bf38286"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a52f7f214759712af60e5c3cd5bf38286">Slic3r::FFFTreeSupport::TreeSupportSettings::maximum_move_distance_slow</a></div><div class="ttdeci">coord_t maximum_move_distance_slow</div><div class="ttdoc">How far every influence area will move outward every layer if possible.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:240</div></div>
<div class="ttc" id="atga_8cpp_html_adbb625a19574e9e39e1d07df31b00b06"><div class="ttname"><a href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a></div><div class="ttdeci">static char error[256]</div><div class="ttdef"><b>Definition</b> tga.cpp:50</div></div>
<div class="ttc" id="aunistd_8h_html_a37994e3b11c72957c6f454c6ec96d43d"><div class="ttname"><a href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a></div><div class="ttdeci">__int32 int32_t</div><div class="ttdef"><b>Definition</b> unistd.h:75</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02405">create_layer_pathing()</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l01735">increase_areas_one_layer()</a>, <a class="el" href="../../#l00278">Slic3r::FFFTreeSupport::SupportElement::influence_area</a>, <a class="el" href="../../#l00224">Slic3r::FFFTreeSupport::TreeSupportSettings::layer_height</a>, <a class="el" href="../../#l00236">Slic3r::FFFTreeSupport::TreeSupportSettings::maximum_move_distance</a>, <a class="el" href="../../#l00240">Slic3r::FFFTreeSupport::TreeSupportSettings::maximum_move_distance_slow</a>, <a class="el" href="../../#l02310">merge_influence_areas()</a>, <a class="el" href="../../#l00720">safe_union()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, and <a class="el" href="../../#l00173">tree_supports_show_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02405">create_layer_pathing()</a>, and <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aeb49cf1fc20a86890b55d203812fd7bb_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aeb49cf1fc20a86890b55d203812fd7bb_icgraph.svg" width="384" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a92615f6c41e6b6715175c0ad1b804864" name="a92615f6c41e6b6715175c0ad1b804864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92615f6c41e6b6715175c0ad1b804864">&#9670;&#160;</a></span>create_nodes_from_area()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::create_nodes_from_area </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the result_on_layer point for all influence areas. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">move_bounds[in,out]</td><td>All currently existing influence areas </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 2652</span>{</div>
<div class="line"><span class="lineno"> 2653</span>    <span class="comment">// Initialize points on layer 0, with a &quot;random&quot; point in the influence area. </span></div>
<div class="line"><span class="lineno"> 2654</span>    <span class="comment">// Point is chosen based on an inaccurate estimate where the branches will split into two, but every point inside the influence area would produce a valid result.</span></div>
<div class="line"><span class="lineno"> 2655</span>    {</div>
<div class="line"><span class="lineno"> 2656</span>        <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> *layer_above = move_bounds.size() &gt; 1 ? &amp;move_bounds[1] : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2657</span>        <span class="keywordflow">if</span> (layer_above) {</div>
<div class="line"><span class="lineno"> 2658</span>            <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;elem : *layer_above)</div>
<div class="line"><span class="lineno"> 2659</span>                elem.state.marked = false;</div>
<div class="line"><span class="lineno"> 2660</span>        }</div>
<div class="line"><span class="lineno"> 2661</span>        <span class="keywordflow">for</span> (SupportElement &amp;init : move_bounds.front()) {</div>
<div class="line"><span class="lineno"> 2662</span>            init.state.result_on_layer = move_inside_if_outside(init.influence_area, init.state.next_position);</div>
<div class="line"><span class="lineno"> 2663</span>            <span class="comment">// Also set the parent nodes, as these will be required for the first iteration of the loop below and mark the parent nodes.</span></div>
<div class="line"><span class="lineno"> 2664</span>            set_points_on_areas(init, layer_above);</div>
<div class="line"><span class="lineno"> 2665</span>        }</div>
<div class="line"><span class="lineno"> 2666</span>    }</div>
<div class="line"><span class="lineno"> 2667</span> </div>
<div class="line"><span class="lineno"> 2668</span>    throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2669</span> </div>
<div class="line"><span class="lineno"> 2670</span>    <span class="keywordflow">for</span> (LayerIndex layer_idx = 1; layer_idx &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 2671</span>        <span class="keyword">auto</span> &amp;layer       = move_bounds[layer_idx];</div>
<div class="line"><span class="lineno"> 2672</span>        <span class="keyword">auto</span> *layer_above = layer_idx + 1 &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()) ? &amp;move_bounds[layer_idx + 1] : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2673</span>        <span class="keywordflow">if</span> (layer_above)</div>
<div class="line"><span class="lineno"> 2674</span>            <span class="keywordflow">for</span> (SupportElement &amp;elem : *layer_above)</div>
<div class="line"><span class="lineno"> 2675</span>                elem.state.marked = false;</div>
<div class="line"><span class="lineno"> 2676</span>        <span class="keywordflow">for</span> (SupportElement &amp;elem : layer) {</div>
<div class="line"><span class="lineno"> 2677</span>            assert(! elem.state.deleted);</div>
<div class="line"><span class="lineno"> 2678</span>            assert(elem.state.layer_idx == layer_idx);</div>
<div class="line"><span class="lineno"> 2679</span>            <span class="comment">// check if the resulting center point is not yet set</span></div>
<div class="line"><span class="lineno"> 2680</span>            <span class="keywordflow">if</span> (! elem.state.result_on_layer_is_set()) {</div>
<div class="line"><span class="lineno"> 2681</span>                <span class="keywordflow">if</span> (elem.state.to_buildplate || (elem.state.distance_to_top &lt; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a27dcd1588b701fef77f1bbb8e819b49c">min_dtt_to_model</a> &amp;&amp; ! elem.state.supports_roof)) {</div>
<div class="line"><span class="lineno"> 2682</span>                    <span class="keywordflow">if</span> (elem.state.to_buildplate) {</div>
<div class="line"><span class="lineno"> 2683</span>                        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Uninitialized Influence area targeting &quot;</span> &lt;&lt; elem.state.target_position.x() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; elem.state.target_position.y() &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div>
<div class="line"><span class="lineno"> 2684</span>                            <span class="stringliteral">&quot;at target_height: &quot;</span> &lt;&lt; elem.state.target_height &lt;&lt; <span class="stringliteral">&quot; layer: &quot;</span> &lt;&lt; layer_idx;</div>
<div class="line"><span class="lineno"> 2685</span>                        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5b7e3aa2dbc67c812bcd72802a8e7734">tree_supports_show_error</a>(<span class="stringliteral">&quot;Uninitialized support element! A branch could be missing or exist partially.&quot;</span>sv, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2686</span>                    }</div>
<div class="line"><span class="lineno"> 2687</span>                    <span class="comment">// we dont need to remove yet the parents as they will have a lower dtt and also no result_on_layer set</span></div>
<div class="line"><span class="lineno"> 2688</span>                    elem.state.deleted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2689</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2690</span>                    <span class="comment">// set the point where the branch will be placed on the model</span></div>
<div class="line"><span class="lineno"> 2691</span>                    <span class="keywordflow">if</span> (elem.state.to_model_gracious)</div>
<div class="line"><span class="lineno"> 2692</span>                        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ae933bab23a01546925f47e2403e6c198">set_to_model_contact_to_model_gracious</a>(volumes, config, move_bounds, elem, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 2693</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2694</span>                        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af51f5b21f6617dd3d6c57468be988ff8">set_to_model_contact_simple</a>(elem);</div>
<div class="line"><span class="lineno"> 2695</span>                }</div>
<div class="line"><span class="lineno"> 2696</span>            }</div>
<div class="line"><span class="lineno"> 2697</span>            <span class="keywordflow">if</span> (! elem.state.deleted &amp;&amp; ! elem.state.marked &amp;&amp; elem.state.target_height == layer_idx)</div>
<div class="line"><span class="lineno"> 2698</span>                <span class="comment">// Just a tip surface with no supporting element.</span></div>
<div class="line"><span class="lineno"> 2699</span>                elem.state.deleted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2700</span>            <span class="keywordflow">if</span> (elem.state.deleted) {</div>
<div class="line"><span class="lineno"> 2701</span>                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> parent_idx : elem.parents)</div>
<div class="line"><span class="lineno"> 2702</span>                    <span class="comment">// When the roof was not able to generate downwards enough, the top elements may have not moved, and have result_on_layer already set.</span></div>
<div class="line"><span class="lineno"> 2703</span>                    <span class="comment">// As this branch needs to be removed =&gt; all parents result_on_layer have to be invalidated.</span></div>
<div class="line"><span class="lineno"> 2704</span>                    (*layer_above)[parent_idx].state.result_on_layer_reset();</div>
<div class="line"><span class="lineno"> 2705</span>            }</div>
<div class="line"><span class="lineno"> 2706</span>            <span class="keywordflow">if</span> (! elem.state.deleted) {</div>
<div class="line"><span class="lineno"> 2707</span>                <span class="comment">// Element is valid now setting points in the layer above and mark the parent nodes.</span></div>
<div class="line"><span class="lineno"> 2708</span>                <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5d3a0c486b78654286cf3541d8a6b5d6">set_points_on_areas</a>(elem, layer_above);</div>
<div class="line"><span class="lineno"> 2709</span>            }</div>
<div class="line"><span class="lineno"> 2710</span>        }</div>
<div class="line"><span class="lineno"> 2711</span>        throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2712</span>    }</div>
<div class="line"><span class="lineno"> 2713</span> </div>
<div class="line"><span class="lineno"> 2714</span><span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><span class="lineno"> 2715</span>    <span class="comment">// Verify the tree connectivity including the branch slopes.</span></div>
<div class="line"><span class="lineno"> 2716</span>    <span class="keywordflow">for</span> (LayerIndex layer_idx = 0; layer_idx + 1 &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 2717</span>        <span class="keyword">auto</span> &amp;layer = move_bounds[layer_idx];</div>
<div class="line"><span class="lineno"> 2718</span>        <span class="keyword">auto</span> &amp;above = move_bounds[layer_idx + 1];</div>
<div class="line"><span class="lineno"> 2719</span>        <span class="keywordflow">for</span> (SupportElement &amp;elem : layer)</div>
<div class="line"><span class="lineno"> 2720</span>            <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (! elem.state.deleted) {</div>
<div class="line"><span class="lineno"> 2721</span>                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> iparent : elem.parents) {</div>
<div class="line"><span class="lineno"> 2722</span>                    SupportElement &amp;parent = above[iparent];</div>
<div class="line"><span class="lineno"> 2723</span>                    assert(! parent.state.deleted);</div>
<div class="line"><span class="lineno"> 2724</span>                    assert(elem.state.result_on_layer_is_set() == parent.state.result_on_layer_is_set());</div>
<div class="line"><span class="lineno"> 2725</span>                    <span class="keywordflow">if</span> (elem.state.result_on_layer_is_set()) {</div>
<div class="line"><span class="lineno"> 2726</span>                        <span class="keywordtype">double</span> radius_increase = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, elem) - <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, parent);</div>
<div class="line"><span class="lineno"> 2727</span>                        assert(radius_increase &gt;= 0);</div>
<div class="line"><span class="lineno"> 2728</span>                        <span class="keywordtype">double</span> shift = (elem.state.result_on_layer - parent.state.result_on_layer).cast&lt;double&gt;().norm();</div>
<div class="line"><span class="lineno"> 2729</span>                        <span class="comment">//FIXME this assert fails a lot. Is it correct?</span></div>
<div class="line"><span class="lineno"> 2730</span><span class="comment">//                        assert(shift &lt; radius_increase + 2. * config.maximum_move_distance_slow);</span></div>
<div class="line"><span class="lineno"> 2731</span>                    }</div>
<div class="line"><span class="lineno"> 2732</span>                }</div>
<div class="line"><span class="lineno"> 2733</span>            }</div>
<div class="line"><span class="lineno"> 2734</span>        }</div>
<div class="line"><span class="lineno"> 2735</span><span class="preprocessor">#endif </span><span class="comment">// NDEBUG</span></div>
<div class="line"><span class="lineno"> 2736</span> </div>
<div class="line"><span class="lineno"> 2737</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ada6ee7c767b7f812f1d7a4265f74a71c">remove_deleted_elements</a>(move_bounds);</div>
<div class="line"><span class="lineno"> 2738</span> </div>
<div class="line"><span class="lineno"> 2739</span><span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><span class="lineno"> 2740</span>    <span class="comment">// Verify the tree connectivity including the branch slopes.</span></div>
<div class="line"><span class="lineno"> 2741</span>    <span class="keywordflow">for</span> (LayerIndex layer_idx = 0; layer_idx + 1 &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 2742</span>        <span class="keyword">auto</span> &amp;layer = move_bounds[layer_idx];</div>
<div class="line"><span class="lineno"> 2743</span>        <span class="keyword">auto</span> &amp;above = move_bounds[layer_idx + 1];</div>
<div class="line"><span class="lineno"> 2744</span>        <span class="keywordflow">for</span> (SupportElement &amp;elem : layer) {</div>
<div class="line"><span class="lineno"> 2745</span>            assert(! elem.state.deleted);</div>
<div class="line"><span class="lineno"> 2746</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> iparent : elem.parents) {</div>
<div class="line"><span class="lineno"> 2747</span>                SupportElement &amp;parent = above[iparent];</div>
<div class="line"><span class="lineno"> 2748</span>                assert(! parent.state.deleted);</div>
<div class="line"><span class="lineno"> 2749</span>                assert(elem.state.result_on_layer_is_set() == parent.state.result_on_layer_is_set());</div>
<div class="line"><span class="lineno"> 2750</span>                <span class="keywordflow">if</span> (elem.state.result_on_layer_is_set()) {</div>
<div class="line"><span class="lineno"> 2751</span>                    <span class="keywordtype">double</span> radius_increase = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, elem) - <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, parent);</div>
<div class="line"><span class="lineno"> 2752</span>                    assert(radius_increase &gt;= 0);</div>
<div class="line"><span class="lineno"> 2753</span>                    <span class="keywordtype">double</span> shift = (elem.state.result_on_layer - parent.state.result_on_layer).cast&lt;double&gt;().norm();</div>
<div class="line"><span class="lineno"> 2754</span>                    <span class="comment">//FIXME this assert fails a lot. Is it correct?</span></div>
<div class="line"><span class="lineno"> 2755</span><span class="comment">//                    assert(shift &lt; radius_increase + 2. * config.maximum_move_distance_slow);</span></div>
<div class="line"><span class="lineno"> 2756</span>                }</div>
<div class="line"><span class="lineno"> 2757</span>            }</div>
<div class="line"><span class="lineno"> 2758</span>        }</div>
<div class="line"><span class="lineno"> 2759</span>    }</div>
<div class="line"><span class="lineno"> 2760</span><span class="preprocessor">#endif </span><span class="comment">// NDEBUG</span></div>
<div class="line"><span class="lineno"> 2761</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a5d3a0c486b78654286cf3541d8a6b5d6"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5d3a0c486b78654286cf3541d8a6b5d6">Slic3r::FFFTreeSupport::set_points_on_areas</a></div><div class="ttdeci">static void set_points_on_areas(const SupportElement &amp;elem, SupportElements *layer_above)</div><div class="ttdoc">Sets the result_on_layer for all parents based on the SupportElement supplied.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2508</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a9c0f5dd4d95f10538669e32992adb86d"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">Slic3r::FFFTreeSupport::support_element_radius</a></div><div class="ttdeci">coord_t support_element_radius(const TreeSupportSettings &amp;settings, const SupportElementState &amp;elem)</div><div class="ttdoc">Get the Radius, that this element will have.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:236</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ada6ee7c767b7f812f1d7a4265f74a71c"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ada6ee7c767b7f812f1d7a4265f74a71c">Slic3r::FFFTreeSupport::remove_deleted_elements</a></div><div class="ttdeci">static void remove_deleted_elements(std::vector&lt; SupportElements &gt; &amp;move_bounds)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2600</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ae933bab23a01546925f47e2403e6c198"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ae933bab23a01546925f47e2403e6c198">Slic3r::FFFTreeSupport::set_to_model_contact_to_model_gracious</a></div><div class="ttdeci">static void set_to_model_contact_to_model_gracious(const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, std::vector&lt; SupportElements &gt; &amp;move_bounds, SupportElement &amp;first_elem, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Get the best point to connect to the model and set the result_on_layer of the relevant SupportElement...</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2552</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_af51f5b21f6617dd3d6c57468be988ff8"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af51f5b21f6617dd3d6c57468be988ff8">Slic3r::FFFTreeSupport::set_to_model_contact_simple</a></div><div class="ttdeci">static void set_to_model_contact_simple(SupportElement &amp;elem)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2538</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a27dcd1588b701fef77f1bbb8e819b49c"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a27dcd1588b701fef77f1bbb8e819b49c">Slic3r::FFFTreeSupport::TreeSupportSettings::min_dtt_to_model</a></div><div class="ttdeci">size_t min_dtt_to_model</div><div class="ttdoc">If smaller (in layers) than that, all branches to model will be deleted.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:260</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02647">create_nodes_from_area()</a>, <a class="el" href="../../#l00134">Slic3r::FFFTreeSupport::SupportElementStateBits::deleted</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00260">Slic3r::FFFTreeSupport::TreeSupportSettings::min_dtt_to_model</a>, <a class="el" href="../../#l01521">move_inside_if_outside()</a>, <a class="el" href="../../#l02600">remove_deleted_elements()</a>, <a class="el" href="../../#l00176">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer</a>, <a class="el" href="../../#l00177">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer_is_set()</a>, <a class="el" href="../../#l02508">set_points_on_areas()</a>, <a class="el" href="../../#l02538">set_to_model_contact_simple()</a>, <a class="el" href="../../#l02552">set_to_model_contact_to_model_gracious()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, <a class="el" href="../../#l00236">support_element_radius()</a>, and <a class="el" href="../../#l00173">tree_supports_show_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02647">create_nodes_from_area()</a>, and <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a92615f6c41e6b6715175c0ad1b804864_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a92615f6c41e6b6715175c0ad1b804864_icgraph.svg" width="400" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aaa5a62d876708f908d22ff52c6da9350" name="aaa5a62d876708f908d22ff52c6da9350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5a62d876708f908d22ff52c6da9350">&#9670;&#160;</a></span>discretize_circle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::pair&lt; int, int &gt; Slic3r::FFFTreeSupport::discretize_circle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &amp;&#160;</td>
          <td class="paramname"><em>normal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td>
          <td class="paramname"><em>eps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>pts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  562</span>{</div>
<div class="line"><span class="lineno">  563</span>    <span class="comment">// Calculate discretization step and number of steps.</span></div>
<div class="line"><span class="lineno">  564</span>    <span class="keywordtype">float</span> angle_step = 2. * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a4ae93c48c742ccd51e0ec59fa85b49bd">acos</a>(1. - eps / radius);</div>
<div class="line"><span class="lineno">  565</span>    <span class="keyword">auto</span>  nsteps     = int(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a>(2 * <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / angle_step));</div>
<div class="line"><span class="lineno">  566</span>    angle_step = 2 * <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / nsteps;</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  568</span>    <span class="comment">// Prepare coordinate system for the circle plane.</span></div>
<div class="line"><span class="lineno">  569</span>    <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3f</a> x = normal.cross(<a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3f</a>(0.f, -1.f, 0.f)).normalized();</div>
<div class="line"><span class="lineno">  570</span>    <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3f</a> y = normal.cross(x).normalized();</div>
<div class="line"><span class="lineno">  571</span>    assert(std::abs(x.cross(y).dot(normal) - 1.f) &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span>    <span class="comment">// Discretize the circle.</span></div>
<div class="line"><span class="lineno">  574</span>    <span class="keywordtype">int</span> begin = int(pts.size());</div>
<div class="line"><span class="lineno">  575</span>    pts.reserve(pts.size() + nsteps);</div>
<div class="line"><span class="lineno">  576</span>    <span class="keywordtype">float</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a> = 0;</div>
<div class="line"><span class="lineno">  577</span>    x *= radius;</div>
<div class="line"><span class="lineno">  578</span>    y *= radius;</div>
<div class="line"><span class="lineno">  579</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nsteps; ++ i) {</div>
<div class="line"><span class="lineno">  580</span>        pts.emplace_back(center + x * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a92b03396990b0e9eea0731aa406e31a4">cos</a>(angle) + y * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a9cfb0ea58bd813510a9e2db18a5e49f0">sin</a>(angle));</div>
<div class="line"><span class="lineno">  581</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a> += angle_step;</div>
<div class="line"><span class="lineno">  582</span>    }</div>
<div class="line"><span class="lineno">  583</span>    <span class="keywordflow">return</span> { begin, int(pts.size()) };</div>
<div class="line"><span class="lineno">  584</span>}</div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a4ae93c48c742ccd51e0ec59fa85b49bd"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a4ae93c48c742ccd51e0ec59fa85b49bd">acos</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const AcosReturnType acos() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:262</div></div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a63043b6807e8e10fb1adf4667e3664d2"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const CeilReturnType ceil() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:402</div></div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a92b03396990b0e9eea0731aa406e31a4"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a92b03396990b0e9eea0731aa406e31a4">cos</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const CosReturnType cos() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:202</div></div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a9cfb0ea58bd813510a9e2db18a5e49f0"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a9cfb0ea58bd813510a9e2db18a5e49f0">sin</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const SinReturnType sin() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:220</div></div>
<div class="ttc" id="a_extrusion_simulator_8cpp_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition</b> ExtrusionSimulator.cpp:20</div></div>
<div class="ttc" id="aclass_eigen_1_1_matrix_html"><div class="ttname"><a href="../../d2/d2d/class_eigen_1_1_matrix.html">Eigen::Matrix&lt; float, 3, 1, Eigen::DontAlign &gt;</a></div></div>
<div class="ttc" id="alibslic3r_8h_html_a75f355966e0a97665eaf5a4c79baa7af"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a></div><div class="ttdeci">static constexpr double EPSILON</div><div class="ttdef"><b>Definition</b> libslic3r.h:51</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7927d0ca1b31b8f9284ea268b11d27d5"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">Slic3r::angle</a></div><div class="ttdeci">double angle(const Eigen::MatrixBase&lt; Derived &gt; &amp;v1, const Eigen::MatrixBase&lt; Derived2 &gt; &amp;v2)</div><div class="ttdef"><b>Definition</b> Point.hpp:112</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00262">acos()</a>, <a class="el" href="../../#l00112">Slic3r::angle()</a>, <a class="el" href="../../#l00402">ceil()</a>, <a class="el" href="../../#l00202">cos()</a>, <a class="el" href="../../#l00051">EPSILON</a>, <a class="el" href="../../#l00020">M_PI</a>, and <a class="el" href="../../#l00220">sin()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00587">extrude_branch()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aaa5a62d876708f908d22ff52c6da9350_cgraph.svg" width="459" height="234"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aaa5a62d876708f908d22ff52c6da9350_icgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aafe7894d0eaf4f718b69b4a8f4b9e999" name="aafe7894d0eaf4f718b69b4a8f4b9e999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafe7894d0eaf4f718b69b4a8f4b9e999">&#9670;&#160;</a></span>draw_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::draw_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>print_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>overhangs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>intermediate_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Draws circles around result_on_layer points of the influence areas and applies some post processing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">move_bounds[in]</td><td>All currently existing influence areas </td></tr>
    <tr><td class="paramname">storage[in,out]</td><td>The storage where the support should be stored. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 3250</span>{</div>
<div class="line"><span class="lineno"> 3251</span>    std::vector&lt;Polygons&gt; support_layer_storage(move_bounds.size());</div>
<div class="line"><span class="lineno"> 3252</span>    std::vector&lt;Polygons&gt; support_roof_storage(move_bounds.size());</div>
<div class="line"><span class="lineno"> 3253</span>    <span class="comment">// All SupportElements are put into a layer independent storage to improve parallelization.</span></div>
<div class="line"><span class="lineno"> 3254</span>    std::vector&lt;DrawArea&gt; linear_data;</div>
<div class="line"><span class="lineno"> 3255</span>    std::vector&lt;size_t&gt;   linear_data_layers;</div>
<div class="line"><span class="lineno"> 3256</span>    {</div>
<div class="line"><span class="lineno"> 3257</span>        std::vector&lt;std::pair&lt;SupportElement*, SupportElement*&gt;&gt; map_downwards_old;</div>
<div class="line"><span class="lineno"> 3258</span>        std::vector&lt;std::pair&lt;SupportElement*, SupportElement*&gt;&gt; map_downwards_new;</div>
<div class="line"><span class="lineno"> 3259</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx = 0; layer_idx &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 3260</span>            <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> *layer_above = layer_idx + 1 &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()) ? &amp;move_bounds[layer_idx + 1] : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3261</span>            map_downwards_new.clear();</div>
<div class="line"><span class="lineno"> 3262</span>            linear_data_layers.emplace_back(linear_data.size());</div>
<div class="line"><span class="lineno"> 3263</span>            std::sort(map_downwards_old.begin(), map_downwards_old.end(), [](<span class="keyword">auto</span> &amp;l, <span class="keyword">auto</span> &amp;r) { return l.first &lt; r.first;  });</div>
<div class="line"><span class="lineno"> 3264</span>            <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;elem : move_bounds[layer_idx]) {</div>
<div class="line"><span class="lineno"> 3265</span>                <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *child = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3266</span>                <span class="keywordflow">if</span> (layer_idx &gt; 0) {</div>
<div class="line"><span class="lineno"> 3267</span>                    <span class="keyword">auto</span> it = std::lower_bound(map_downwards_old.begin(), map_downwards_old.end(), &amp;elem, [](<span class="keyword">auto</span> &amp;l, <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *r) { return l.first &lt; r; });</div>
<div class="line"><span class="lineno"> 3268</span>                    <span class="keywordflow">if</span> (it != map_downwards_old.end() &amp;&amp; it-&gt;first == &amp;elem) {</div>
<div class="line"><span class="lineno"> 3269</span>                        child = it-&gt;second;</div>
<div class="line"><span class="lineno"> 3270</span>                        <span class="comment">// Only one link points to a node above from below.</span></div>
<div class="line"><span class="lineno"> 3271</span>                        assert(! (++ it != map_downwards_old.end() &amp;&amp; it-&gt;first == &amp;elem));</div>
<div class="line"><span class="lineno"> 3272</span>                    }</div>
<div class="line"><span class="lineno"> 3273</span>                    assert(child ? child-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_function" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#adae870488e645e1ddac5ef8b2fe0f861">result_on_layer_is_set</a>() : elem.state.target_height &gt; layer_idx);</div>
<div class="line"><span class="lineno"> 3274</span>                }</div>
<div class="line"><span class="lineno"> 3275</span>                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> parent_idx : elem.parents) {</div>
<div class="line"><span class="lineno"> 3276</span>                    SupportElement &amp;parent = (*layer_above)[parent_idx];</div>
<div class="line"><span class="lineno"> 3277</span>                    <span class="keywordflow">if</span> (parent.state.result_on_layer_is_set())</div>
<div class="line"><span class="lineno"> 3278</span>                        map_downwards_new.emplace_back(&amp;parent, &amp;elem);</div>
<div class="line"><span class="lineno"> 3279</span>                }</div>
<div class="line"><span class="lineno"> 3280</span>                linear_data.push_back({ &amp;elem, child });</div>
<div class="line"><span class="lineno"> 3281</span>            }</div>
<div class="line"><span class="lineno"> 3282</span>            std::swap(map_downwards_old, map_downwards_new);</div>
<div class="line"><span class="lineno"> 3283</span>        }</div>
<div class="line"><span class="lineno"> 3284</span>        linear_data_layers.emplace_back(linear_data.size());</div>
<div class="line"><span class="lineno"> 3285</span>    }</div>
<div class="line"><span class="lineno"> 3286</span> </div>
<div class="line"><span class="lineno"> 3287</span>    throw_on_cancel();</div>
<div class="line"><span class="lineno"> 3288</span> </div>
<div class="line"><span class="lineno"> 3289</span><span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><span class="lineno"> 3290</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; move_bounds.size(); ++ i) {</div>
<div class="line"><span class="lineno"> 3291</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a> = linear_data_layers[i];</div>
<div class="line"><span class="lineno"> 3292</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>   = linear_data_layers[i + 1];</div>
<div class="line"><span class="lineno"> 3293</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = begin; j &lt; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>; ++ j)</div>
<div class="line"><span class="lineno"> 3294</span>            assert(linear_data[j].element == &amp;move_bounds[i][j - begin]);</div>
<div class="line"><span class="lineno"> 3295</span>    }</div>
<div class="line"><span class="lineno"> 3296</span><span class="preprocessor">#endif </span><span class="comment">// NDEBUG</span></div>
<div class="line"><span class="lineno"> 3297</span> </div>
<div class="line"><span class="lineno"> 3298</span>    <span class="keyword">auto</span> t_start = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3299</span>    <span class="comment">// Generate the circles that will be the branches.</span></div>
<div class="line"><span class="lineno"> 3300</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ad6b7427c147c841c0a8e34271053a0a6">generate_branch_areas</a>(volumes, config, move_bounds, linear_data, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3301</span> </div>
<div class="line"><span class="lineno"> 3302</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 3303</span>    assert(linear_data_layers.size() == move_bounds.size() + 1);</div>
<div class="line"><span class="lineno"> 3304</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;draw_area : linear_data)</div>
<div class="line"><span class="lineno"> 3305</span>        assert(<a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(draw_area.polygons, draw_area.element-&gt;state.result_on_layer));</div>
<div class="line"><span class="lineno"> 3306</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; move_bounds.size(); ++ i) {</div>
<div class="line"><span class="lineno"> 3307</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a> = linear_data_layers[i];</div>
<div class="line"><span class="lineno"> 3308</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>   = linear_data_layers[i + 1];</div>
<div class="line"><span class="lineno"> 3309</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = begin; j &lt; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>; ++ j) {</div>
<div class="line"><span class="lineno"> 3310</span>            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;draw_area = linear_data[j];</div>
<div class="line"><span class="lineno"> 3311</span>            assert(draw_area.element == &amp;move_bounds[i][j - begin]);</div>
<div class="line"><span class="lineno"> 3312</span>            assert(<a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(draw_area.polygons, draw_area.element-&gt;state.result_on_layer));</div>
<div class="line"><span class="lineno"> 3313</span>        }</div>
<div class="line"><span class="lineno"> 3314</span>    }</div>
<div class="line"><span class="lineno"> 3315</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3316</span> </div>
<div class="line"><span class="lineno"> 3317</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 3318</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> area_layer_idx = 0; area_layer_idx + 1 &lt; linear_data_layers.size(); ++ area_layer_idx) {</div>
<div class="line"><span class="lineno"> 3319</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a> = linear_data_layers[area_layer_idx];</div>
<div class="line"><span class="lineno"> 3320</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>   = linear_data_layers[area_layer_idx + 1];</div>
<div class="line"><span class="lineno"> 3321</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> polygons;</div>
<div class="line"><span class="lineno"> 3322</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> area_idx = begin; area_idx &lt; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>; ++ area_idx) {</div>
<div class="line"><span class="lineno"> 3323</span>            DrawArea &amp;<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a> = linear_data[area_idx];</div>
<div class="line"><span class="lineno"> 3324</span>            <a class="code hl_function" href="../../dc/db2/namespacepriv.html#a3e6045aa7075a33d05830cc70eebdbba">append</a>(polygons, <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>.polygons);</div>
<div class="line"><span class="lineno"> 3325</span>        }</div>
<div class="line"><span class="lineno"> 3326</span>        SVG::export_expolygons(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;treesupport-extrude_areas-raw-%d.svg&quot;</span>, area_layer_idx),</div>
<div class="line"><span class="lineno"> 3327</span>            { { { <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(polygons) }, { <span class="stringliteral">&quot;parent&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>,  <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, scaled&lt;coord_t&gt;(0.1f), 0.5f } } });</div>
<div class="line"><span class="lineno"> 3328</span>    }</div>
<div class="line"><span class="lineno"> 3329</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3330</span> </div>
<div class="line"><span class="lineno"> 3331</span>    <span class="keyword">auto</span> t_generate = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3332</span>    <span class="comment">// In some edgecases a branch may go though a hole, where the regular radius does not fit. This can result in an apparent jump in branch radius. As such this cases need to be caught and smoothed out.</span></div>
<div class="line"><span class="lineno"> 3333</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac967237dc3f772e90e6ec13a5aaffdb1">smooth_branch_areas</a>(config, move_bounds, linear_data, linear_data_layers, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3334</span> </div>
<div class="line"><span class="lineno"> 3335</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 3336</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> area_layer_idx = 0; area_layer_idx + 1 &lt; linear_data_layers.size(); ++area_layer_idx) {</div>
<div class="line"><span class="lineno"> 3337</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a> = linear_data_layers[area_layer_idx];</div>
<div class="line"><span class="lineno"> 3338</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> = linear_data_layers[area_layer_idx + 1];</div>
<div class="line"><span class="lineno"> 3339</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> polygons;</div>
<div class="line"><span class="lineno"> 3340</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> area_idx = begin; area_idx &lt; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>; ++area_idx) {</div>
<div class="line"><span class="lineno"> 3341</span>            DrawArea&amp; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a> = linear_data[area_idx];</div>
<div class="line"><span class="lineno"> 3342</span>            <a class="code hl_function" href="../../dc/db2/namespacepriv.html#a3e6045aa7075a33d05830cc70eebdbba">append</a>(polygons, <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>.polygons);</div>
<div class="line"><span class="lineno"> 3343</span>        }</div>
<div class="line"><span class="lineno"> 3344</span>        SVG::export_expolygons(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;treesupport-extrude_areas-smooth-%d.svg&quot;</span>, area_layer_idx),</div>
<div class="line"><span class="lineno"> 3345</span>            { { { <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(polygons) }, { <span class="stringliteral">&quot;parent&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>,  <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, scaled&lt;coord_t&gt;(0.1f), 0.5f } } });</div>
<div class="line"><span class="lineno"> 3346</span>    }</div>
<div class="line"><span class="lineno"> 3347</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3348</span> </div>
<div class="line"><span class="lineno"> 3349</span>    <span class="keyword">auto</span> t_smooth = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3350</span>    <span class="comment">// drop down all trees that connect non gracefully with the model</span></div>
<div class="line"><span class="lineno"> 3351</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a91f5baaed8cbc8d6f04b714f50501cef">drop_non_gracious_areas</a>(volumes, linear_data, support_layer_storage, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3352</span>    <span class="keyword">auto</span> t_drop = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3353</span> </div>
<div class="line"><span class="lineno"> 3354</span>    <span class="comment">// Single threaded combining all support areas to the right layers.</span></div>
<div class="line"><span class="lineno"> 3355</span>    {</div>
<div class="line"><span class="lineno"> 3356</span>        <span class="keyword">auto</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a> = linear_data.begin();</div>
<div class="line"><span class="lineno"> 3357</span>        <span class="keywordflow">for</span> (LayerIndex layer_idx = 0; layer_idx &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 3358</span>            <span class="keywordtype">size_t</span> cnt_roofs = 0;</div>
<div class="line"><span class="lineno"> 3359</span>            <span class="keywordtype">size_t</span> cnt_layers = 0;</div>
<div class="line"><span class="lineno"> 3360</span>            <span class="keyword">auto</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> = <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a>;</div>
<div class="line"><span class="lineno"> 3361</span>            <span class="keywordflow">for</span> (; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a> != linear_data.end() &amp;&amp; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>-&gt;element-&gt;state.layer_idx == layer_idx; ++ <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>)</div>
<div class="line"><span class="lineno"> 3362</span>                ++ (<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>-&gt;element-&gt;state.missing_roof_layers &gt; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>-&gt;element-&gt;state.distance_to_top ? cnt_roofs : cnt_layers);</div>
<div class="line"><span class="lineno"> 3363</span>            <span class="keyword">auto</span> &amp;this_roofs  = support_roof_storage[layer_idx];</div>
<div class="line"><span class="lineno"> 3364</span>            <span class="keyword">auto</span> &amp;this_layers = support_layer_storage[layer_idx];</div>
<div class="line"><span class="lineno"> 3365</span>            this_roofs.reserve(this_roofs.size() + cnt_roofs);</div>
<div class="line"><span class="lineno"> 3366</span>            this_layers.reserve(this_layers.size() + cnt_layers);</div>
<div class="line"><span class="lineno"> 3367</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = begin; it != <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>; ++ it)</div>
<div class="line"><span class="lineno"> 3368</span>                std::move(std::begin(it-&gt;polygons), std::end(it-&gt;polygons), std::back_inserter(it-&gt;element-&gt;state.missing_roof_layers &gt; it-&gt;element-&gt;state.distance_to_top ? this_roofs : this_layers));</div>
<div class="line"><span class="lineno"> 3369</span>            <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a> = <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>;</div>
<div class="line"><span class="lineno"> 3370</span>        }</div>
<div class="line"><span class="lineno"> 3371</span>    }</div>
<div class="line"><span class="lineno"> 3372</span> </div>
<div class="line"><span class="lineno"> 3373</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a67c74ce38001bad50498bc09a6ac254a">finalize_interface_and_support_areas</a>(print_object, volumes, config, overhangs, support_layer_storage, support_roof_storage,</div>
<div class="line"><span class="lineno"> 3374</span>        bottom_contacts, top_contacts, intermediate_layers, layer_storage, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3375</span>    <span class="keyword">auto</span> t_end = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3376</span> </div>
<div class="line"><span class="lineno"> 3377</span>    <span class="keyword">auto</span> dur_gen_tips = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_generate - t_start).count();</div>
<div class="line"><span class="lineno"> 3378</span>    <span class="keyword">auto</span> dur_smooth = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_smooth - t_generate).count();</div>
<div class="line"><span class="lineno"> 3379</span>    <span class="keyword">auto</span> dur_drop = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_drop - t_smooth).count();</div>
<div class="line"><span class="lineno"> 3380</span>    <span class="keyword">auto</span> dur_finalize = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_end - t_drop).count();</div>
<div class="line"><span class="lineno"> 3381</span> </div>
<div class="line"><span class="lineno"> 3382</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; </div>
<div class="line"><span class="lineno"> 3383</span>        <span class="stringliteral">&quot;Time used for drawing subfuctions: generate_branch_areas: &quot;</span> &lt;&lt; dur_gen_tips &lt;&lt; <span class="stringliteral">&quot; ms &quot;</span></div>
<div class="line"><span class="lineno"> 3384</span>        <span class="stringliteral">&quot;smooth_branch_areas: &quot;</span> &lt;&lt; dur_smooth &lt;&lt; <span class="stringliteral">&quot; ms &quot;</span></div>
<div class="line"><span class="lineno"> 3385</span>        <span class="stringliteral">&quot;drop_non_gracious_areas: &quot;</span> &lt;&lt; dur_drop &lt;&lt; <span class="stringliteral">&quot; ms &quot;</span></div>
<div class="line"><span class="lineno"> 3386</span>        <span class="stringliteral">&quot;finalize_interface_and_support_areas &quot;</span> &lt;&lt; dur_finalize &lt;&lt; <span class="stringliteral">&quot; ms&quot;</span>;</div>
<div class="line"><span class="lineno"> 3387</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a67c74ce38001bad50498bc09a6ac254a"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a67c74ce38001bad50498bc09a6ac254a">Slic3r::FFFTreeSupport::finalize_interface_and_support_areas</a></div><div class="ttdeci">static void finalize_interface_and_support_areas(const PrintObject &amp;print_object, const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, const std::vector&lt; Polygons &gt; &amp;overhangs, std::vector&lt; Polygons &gt; &amp;support_layer_storage, std::vector&lt; Polygons &gt; &amp;support_roof_storage, SupportGeneratorLayersPtr &amp;bottom_contacts, SupportGeneratorLayersPtr &amp;top_contacts, SupportGeneratorLayersPtr &amp;intermediate_layers, SupportGeneratorLayerStorage &amp;layer_storage, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Generates Support Floor, ensures Support Roof can not cut of branches, and saves the branches as supp...</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:3079</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a91f5baaed8cbc8d6f04b714f50501cef"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a91f5baaed8cbc8d6f04b714f50501cef">Slic3r::FFFTreeSupport::drop_non_gracious_areas</a></div><div class="ttdeci">static void drop_non_gracious_areas(const TreeModelVolumes &amp;volumes, const std::vector&lt; DrawArea &gt; &amp;linear_data, std::vector&lt; Polygons &gt; &amp;support_layer_storage, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Drop down areas that do rest non-gracefully on the model to ensure the branch actually rests on somet...</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:3044</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ac967237dc3f772e90e6ec13a5aaffdb1"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac967237dc3f772e90e6ec13a5aaffdb1">Slic3r::FFFTreeSupport::smooth_branch_areas</a></div><div class="ttdeci">static void smooth_branch_areas(const TreeSupportSettings &amp;config, std::vector&lt; SupportElements &gt; &amp;move_bounds, std::vector&lt; DrawArea &gt; &amp;linear_data, const std::vector&lt; size_t &gt; &amp;linear_data_layers, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Applies some smoothing to the outer wall, intended to smooth out sudden jumps as they can happen when...</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2913</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ad6b7427c147c841c0a8e34271053a0a6"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ad6b7427c147c841c0a8e34271053a0a6">Slic3r::FFFTreeSupport::generate_branch_areas</a></div><div class="ttdeci">static void generate_branch_areas(const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, const std::vector&lt; SupportElements &gt; &amp;move_bounds, std::vector&lt; DrawArea &gt; &amp;linear_data, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Draws circles around result_on_layer points of the influence areas.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2782</div></div>
<div class="ttc" id="anamespace_slic3r_html_a1d1423286c406123371c37ceada9ebae"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">Slic3r::debug_out_path</a></div><div class="ttdeci">std::string debug_out_path(const char *name,...)</div><div class="ttdef"><b>Definition</b> utils.cpp:218</div></div>
<div class="ttc" id="anamespace_slic3r_html_a37166e144522fceee41e6d8ed8245315"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">Slic3r::union_ex</a></div><div class="ttdeci">Slic3r::ExPolygons union_ex(const Slic3r::Polygons &amp;subject, ClipperLib::PolyFillType fill_type)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:774</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a2aeb0374bbb83d0a6452bca14e1bbbda"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">libnest2d::shapelike::begin</a></div><div class="ttdeci">S::iterator begin(S &amp;sh, const PathTag &amp;)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:614</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_ac9b51e95f63e38d00e5fc46bb96927c3"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">libnest2d::shapelike::end</a></div><div class="ttdeci">S::iterator end(S &amp;sh, const PathTag &amp;)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:620</div></div>
<div class="ttc" id="anamespacepriv_html_a3e6045aa7075a33d05830cc70eebdbba"><div class="ttname"><a href="../../dc/db2/namespacepriv.html#a3e6045aa7075a33d05830cc70eebdbba">priv::append</a></div><div class="ttdeci">void append(SurfaceCut &amp;sc, SurfaceCut &amp;&amp;sc_add)</div><div class="ttdoc">Merge two surface cuts together Added surface cut will be consumed.</div><div class="ttdef"><b>Definition</b> CutSurface.cpp:3550</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_adae870488e645e1ddac5ef8b2fe0f861"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#adae870488e645e1ddac5ef8b2fe0f861">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer_is_set</a></div><div class="ttdeci">bool result_on_layer_is_set() const</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:177</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00065">contains()</a>, <a class="el" href="../../#l00218">Slic3r::debug_out_path()</a>, <a class="el" href="../../#l03238">draw_areas()</a>, <a class="el" href="../../#l03044">drop_non_gracious_areas()</a>, <a class="el" href="../../#l03079">finalize_interface_and_support_areas()</a>, <a class="el" href="../../#l02782">generate_branch_areas()</a>, <a class="el" href="../../#l00177">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer_is_set()</a>, <a class="el" href="../../#l02913">smooth_branch_areas()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, and <a class="el" href="../../#l00774">Slic3r::union_ex()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03238">draw_areas()</a>, and <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aafe7894d0eaf4f718b69b4a8f4b9e999_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aafe7894d0eaf4f718b69b4a8f4b9e999_icgraph.svg" width="384" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a91f5baaed8cbc8d6f04b714f50501cef" name="a91f5baaed8cbc8d6f04b714f50501cef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f5baaed8cbc8d6f04b714f50501cef">&#9670;&#160;</a></span>drop_non_gracious_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::drop_non_gracious_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">DrawArea</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>linear_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>support_layer_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Drop down areas that do rest non-gracefully on the model to ensure the branch actually rests on something. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer_tree_polygons[in]</td><td>Resulting branch areas with the layerindex they appear on. </td></tr>
    <tr><td class="paramname">linear_data[in]</td><td>All currently existing influence areas with the layer they are on </td></tr>
    <tr><td class="paramname">dropped_down_areas[out]</td><td>Areas that have to be added to support all non-graceful areas. </td></tr>
    <tr><td class="paramname">inverse_tree_order[in]</td><td>A mapping that returns the child of every influence area. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 3049</span>{</div>
<div class="line"><span class="lineno"> 3050</span>    std::vector&lt;std::vector&lt;std::pair&lt;LayerIndex, Polygons&gt;&gt;&gt; dropped_down_areas(linear_data.size());</div>
<div class="line"><span class="lineno"> 3051</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, linear_data.size()),</div>
<div class="line"><span class="lineno"> 3052</span>        [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 3053</span>        for (size_t idx = range.begin(); idx &lt; range.end(); ++ idx) {</div>
<div class="line"><span class="lineno"> 3054</span>            <span class="comment">// If a element has no child, it connects to whatever is below as no support further down for it will exist.</span></div>
<div class="line"><span class="lineno"> 3055</span>            if (const DrawArea &amp;draw_element = linear_data[idx]; ! draw_element.element-&gt;state.to_model_gracious &amp;&amp; draw_element.child_element == nullptr) {</div>
<div class="line"><span class="lineno"> 3056</span>                Polygons rest_support;</div>
<div class="line"><span class="lineno"> 3057</span>                const LayerIndex layer_idx_first = draw_element.element-&gt;state.layer_idx - 1;</div>
<div class="line"><span class="lineno"> 3058</span>                for (LayerIndex layer_idx = layer_idx_first; area(rest_support) &gt; tiny_area_threshold &amp;&amp; layer_idx &gt;= 0; -- layer_idx) {</div>
<div class="line"><span class="lineno"> 3059</span>                    rest_support = diff_clipped(layer_idx == layer_idx_first ? draw_element.polygons : rest_support, volumes.getCollision(0, layer_idx, false));</div>
<div class="line"><span class="lineno"> 3060</span>                    dropped_down_areas[idx].emplace_back(layer_idx, rest_support);</div>
<div class="line"><span class="lineno"> 3061</span>                }</div>
<div class="line"><span class="lineno"> 3062</span>            }</div>
<div class="line"><span class="lineno"> 3063</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 3064</span>        }</div>
<div class="line"><span class="lineno"> 3065</span>    });</div>
<div class="line"><span class="lineno"> 3066</span> </div>
<div class="line"><span class="lineno"> 3067</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> i = 0; i &lt; static_cast&lt;coord_t&gt;(dropped_down_areas.size()); i++)</div>
<div class="line"><span class="lineno"> 3068</span>        <span class="keywordflow">for</span> (std::pair&lt;LayerIndex, Polygons&gt; &amp;pair : dropped_down_areas[i])</div>
<div class="line"><span class="lineno"> 3069</span>            append(support_layer_storage[pair.first], <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::move(pair.second));</div>
<div class="line"><span class="lineno"> 3070</span>}</div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l03044">drop_non_gracious_areas()</a>, and <a class="el" href="../../#l00356">Slic3r::range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03238">draw_areas()</a>, and <a class="el" href="../../#l03044">drop_non_gracious_areas()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a91f5baaed8cbc8d6f04b714f50501cef_cgraph.svg" width="331" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a91f5baaed8cbc8d6f04b714f50501cef_icgraph.svg" width="610" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a79f6974d8c9affbf8ae2f7f1963cf22d" name="a79f6974d8c9affbf8ae2f7f1963cf22d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79f6974d8c9affbf8ae2f7f1963cf22d">&#9670;&#160;</a></span>ensure_maximum_distance_polyline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> Slic3r::FFFTreeSupport::ensure_maximum_distance_polyline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>min_points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Eensures that every line segment is about distance in length. The resulting lines may differ from the original but all points are on the original. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input[in]</td><td>The lines on which evenly spaced points should be placed. </td></tr>
    <tr><td class="paramname">distance[in]</td><td>The distance the points should be from each other. </td></tr>
    <tr><td class="paramname">min_points[in]</td><td>The amount of points that have to be placed. If not enough can be placed the distance will be reduced to place this many points. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Polygons object containing the evenly spaced points. Does not represent an area, more a collection of points on lines. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  525</span>{</div>
<div class="line"><span class="lineno">  526</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> result;</div>
<div class="line"><span class="lineno">  527</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="../../d6/de0/class_slic3r_1_1_polyline.html">Polyline</a> part : <a class="code hl_function" href="../../d8/d33/lexer_8c.html#a171692544b8e065853e387755849a433">input</a>) {</div>
<div class="line"><span class="lineno">  528</span>        <span class="keywordflow">if</span> (part.empty())</div>
<div class="line"><span class="lineno">  529</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordtype">double</span> len = length(part.points);</div>
<div class="line"><span class="lineno">  532</span>        <a class="code hl_class" href="../../d6/de0/class_slic3r_1_1_polyline.html">Polyline</a> line;</div>
<div class="line"><span class="lineno">  533</span>        <span class="keywordtype">double</span> current_distance = std::max(distance, scaled&lt;double&gt;(0.1));</div>
<div class="line"><span class="lineno">  534</span>        <span class="keywordflow">if</span> (len &lt; 2 * distance &amp;&amp; min_points &lt;= 1)</div>
<div class="line"><span class="lineno">  535</span>        {</div>
<div class="line"><span class="lineno">  536</span>            <span class="comment">// Insert the opposite point of the first one.</span></div>
<div class="line"><span class="lineno">  537</span>            <span class="comment">//FIXME pretty expensive</span></div>
<div class="line"><span class="lineno">  538</span>            <a class="code hl_class" href="../../d6/de0/class_slic3r_1_1_polyline.html">Polyline</a> pl(part);</div>
<div class="line"><span class="lineno">  539</span>            pl.clip_end(len / 2);</div>
<div class="line"><span class="lineno">  540</span>            line.<a class="code hl_variable" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a5f33254e616268f728969886c4ed5d85">points</a>.emplace_back(pl.points.back());</div>
<div class="line"><span class="lineno">  541</span>        }</div>
<div class="line"><span class="lineno">  542</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  543</span>        {</div>
<div class="line"><span class="lineno">  544</span>            <span class="keywordtype">size_t</span> optimal_end_index = part.size() - 1;</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>            <span class="keywordflow">if</span> (part.front() == part.back()) {</div>
<div class="line"><span class="lineno">  547</span>                <span class="keywordtype">size_t</span> optimal_start_index = 0;</div>
<div class="line"><span class="lineno">  548</span>                <span class="comment">// If the polyline was a polygon, there is a high chance it was an overhang. Overhangs that are &lt;60 tend to be very thin areas, so lets get the beginning and end of them and ensure that they are supported.</span></div>
<div class="line"><span class="lineno">  549</span>                <span class="comment">// The first point of the line will always be supported, so rotate the order of points in this polyline that one of the two corresponding points that are furthest from each other is in the beginning.</span></div>
<div class="line"><span class="lineno">  550</span>                <span class="comment">// The other will be manually added (optimal_end_index)</span></div>
<div class="line"><span class="lineno">  551</span>                <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> max_dist2_between_vertecies = 0;</div>
<div class="line"><span class="lineno">  552</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0; idx &lt; part.size() - 1; ++ idx) {</div>
<div class="line"><span class="lineno">  553</span>                    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> inner_idx = 0; inner_idx &lt; part.size() - 1; inner_idx++) {</div>
<div class="line"><span class="lineno">  554</span>                        <span class="keywordflow">if</span> ((part[idx] - part[inner_idx]).cast&lt;double&gt;().squaredNorm() &gt; max_dist2_between_vertecies) {</div>
<div class="line"><span class="lineno">  555</span>                            optimal_start_index = idx;</div>
<div class="line"><span class="lineno">  556</span>                            optimal_end_index = inner_idx;</div>
<div class="line"><span class="lineno">  557</span>                            max_dist2_between_vertecies = (part[idx] - part[inner_idx]).cast&lt;double&gt;().squaredNorm();</div>
<div class="line"><span class="lineno">  558</span>                        }</div>
<div class="line"><span class="lineno">  559</span>                    }</div>
<div class="line"><span class="lineno">  560</span>                }</div>
<div class="line"><span class="lineno">  561</span>                std::rotate(part.begin(), part.begin() + optimal_start_index, part.end() - 1);</div>
<div class="line"><span class="lineno">  562</span>                part[part.size() - 1] = part[0]; <span class="comment">// restore that property that this polyline ends where it started.</span></div>
<div class="line"><span class="lineno">  563</span>                optimal_end_index = (part.size() + optimal_end_index - optimal_start_index - 1) % (part.size() - 1);</div>
<div class="line"><span class="lineno">  564</span>            }</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>            <span class="keywordflow">while</span> (line.<a class="code hl_function" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#af3d77ee0ed47dc3e2bf8e741d6a1e563">size</a>() &lt; min_points &amp;&amp; current_distance &gt;= scaled&lt;double&gt;(0.1))</div>
<div class="line"><span class="lineno">  567</span>            {</div>
<div class="line"><span class="lineno">  568</span>                line.<a class="code hl_function" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#aa4aa2f19e98714d5f4a72627b13e4423">clear</a>();</div>
<div class="line"><span class="lineno">  569</span>                <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> current_point = part[0];</div>
<div class="line"><span class="lineno">  570</span>                line.<a class="code hl_variable" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a5f33254e616268f728969886c4ed5d85">points</a>.emplace_back(part[0]);</div>
<div class="line"><span class="lineno">  571</span>                <span class="keywordflow">if</span> (min_points &gt; 1 || (part[0] - part[optimal_end_index]).cast&lt;<span class="keywordtype">double</span>&gt;().norm() &gt; current_distance)</div>
<div class="line"><span class="lineno">  572</span>                    line.<a class="code hl_variable" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a5f33254e616268f728969886c4ed5d85">points</a>.emplace_back(part[optimal_end_index]);</div>
<div class="line"><span class="lineno">  573</span>                <span class="keywordtype">size_t</span> current_index = 0;</div>
<div class="line"><span class="lineno">  574</span>                std::optional&lt;std::pair&lt;Point, size_t&gt;&gt; next_point;</div>
<div class="line"><span class="lineno">  575</span>                <span class="keywordtype">double</span> next_distance = current_distance;</div>
<div class="line"><span class="lineno">  576</span>                <span class="comment">// Get points so that at least min_points are added and they each are current_distance away from each other. If that is impossible, decrease current_distance a bit.</span></div>
<div class="line"><span class="lineno">  577</span>                <span class="comment">// The input are lines, that means that the line from the last to the first vertex does not have to exist, so exclude all points that are on this line!</span></div>
<div class="line"><span class="lineno">  578</span>                <span class="keywordflow">while</span> ((next_point = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa3ad982a70b3f29440da13d9c90275f0">polyline_sample_next_point_at_distance</a>(part.points, current_point, current_index, next_distance))) {</div>
<div class="line"><span class="lineno">  579</span>                    <span class="comment">// Not every point that is distance away, is valid, as it may be much closer to another point. This is especially the case when the overhang is very thin.</span></div>
<div class="line"><span class="lineno">  580</span>                    <span class="comment">// So this ensures that the points are actually a certain distance from each other.</span></div>
<div class="line"><span class="lineno">  581</span>                    <span class="comment">// This assurance is only made on a per polygon basis, as different but close polygon may not be able to use support below the other polygon.</span></div>
<div class="line"><span class="lineno">  582</span>                    <span class="keywordtype">double</span> min_distance_to_existing_point = std::numeric_limits&lt;double&gt;::max();</div>
<div class="line"><span class="lineno">  583</span>                    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> p : line)</div>
<div class="line"><span class="lineno">  584</span>                        min_distance_to_existing_point = <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a52c8391bfe74901409df09e9b1d5ac79">min</a>(min_distance_to_existing_point, (p - next_point-&gt;first).<a class="code hl_function" href="../../d5/df7/_common_cwise_unary_ops_8h.html#aa89d007196125d10fa7d6e19811aca05">cast</a>&lt;double&gt;().norm());</div>
<div class="line"><span class="lineno">  585</span>                    <span class="keywordflow">if</span> (min_distance_to_existing_point &gt;= current_distance) {</div>
<div class="line"><span class="lineno">  586</span>                        <span class="comment">// viable point was found. Add to possible result.</span></div>
<div class="line"><span class="lineno">  587</span>                        line.<a class="code hl_variable" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a5f33254e616268f728969886c4ed5d85">points</a>.emplace_back(next_point-&gt;first);</div>
<div class="line"><span class="lineno">  588</span>                        current_point = next_point-&gt;first;</div>
<div class="line"><span class="lineno">  589</span>                        current_index = next_point-&gt;second;</div>
<div class="line"><span class="lineno">  590</span>                        next_distance = current_distance;</div>
<div class="line"><span class="lineno">  591</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  592</span>                        <span class="keywordflow">if</span> (current_point == next_point-&gt;first) {</div>
<div class="line"><span class="lineno">  593</span>                            <span class="comment">// In case a fixpoint is encountered, better aggressively overcompensate so the code does not become stuck here...</span></div>
<div class="line"><span class="lineno">  594</span>                            BOOST_LOG_TRIVIAL(warning) &lt;&lt; <span class="stringliteral">&quot;Tree Support: Encountered a fixpoint in polyline_sample_next_point_at_distance. This is expected to happen if the distance (currently &quot;</span> &lt;&lt; next_distance &lt;&lt; </div>
<div class="line"><span class="lineno">  595</span>                                <span class="stringliteral">&quot;) is smaller than 100&quot;</span>;</div>
<div class="line"><span class="lineno">  596</span>                            <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5b7e3aa2dbc67c812bcd72802a8e7734">tree_supports_show_error</a>(<span class="stringliteral">&quot;Encountered issue while placing tips. Some tips may be missing.&quot;</span>sv, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  597</span>                            <span class="keywordflow">if</span> (next_distance &gt; 2 * current_distance)</div>
<div class="line"><span class="lineno">  598</span>                                <span class="comment">// This case should never happen, but better safe than sorry.</span></div>
<div class="line"><span class="lineno">  599</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  600</span>                            next_distance += current_distance;</div>
<div class="line"><span class="lineno">  601</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  602</span>                        }</div>
<div class="line"><span class="lineno">  603</span>                        <span class="comment">// if the point was too close, the next possible viable point is at least distance-min_distance_to_existing_point away from the one that was just checked.</span></div>
<div class="line"><span class="lineno">  604</span>                        next_distance = std::max(current_distance - min_distance_to_existing_point, scaled&lt;double&gt;(0.1));</div>
<div class="line"><span class="lineno">  605</span>                        current_point = next_point-&gt;first;</div>
<div class="line"><span class="lineno">  606</span>                        current_index = next_point-&gt;second;</div>
<div class="line"><span class="lineno">  607</span>                    }</div>
<div class="line"><span class="lineno">  608</span>                }</div>
<div class="line"><span class="lineno">  609</span>                current_distance *= 0.9;</div>
<div class="line"><span class="lineno">  610</span>            }</div>
<div class="line"><span class="lineno">  611</span>        }</div>
<div class="line"><span class="lineno">  612</span>        result.emplace_back(std::move(line));</div>
<div class="line"><span class="lineno">  613</span>    }</div>
<div class="line"><span class="lineno">  614</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(result);</div>
<div class="line"><span class="lineno">  615</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  616</span>}</div>
<div class="ttc" id="a_common_cwise_unary_ops_8h_html_aa89d007196125d10fa7d6e19811aca05"><div class="ttname"><a href="../../d5/df7/_common_cwise_unary_ops_8h.html#aa89d007196125d10fa7d6e19811aca05">cast</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC CastXpr&lt; NewType &gt;::Type cast() const</div><div class="ttdef"><b>Definition</b> CommonCwiseUnaryOps.h:62</div></div>
<div class="ttc" id="aclass_slic3r_1_1_multi_point_html_a5f33254e616268f728969886c4ed5d85"><div class="ttname"><a href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a5f33254e616268f728969886c4ed5d85">Slic3r::MultiPoint::points</a></div><div class="ttdeci">Points points</div><div class="ttdef"><b>Definition</b> MultiPoint.hpp:18</div></div>
<div class="ttc" id="aclass_slic3r_1_1_multi_point_html_aa4aa2f19e98714d5f4a72627b13e4423"><div class="ttname"><a href="../../d7/dd1/class_slic3r_1_1_multi_point.html#aa4aa2f19e98714d5f4a72627b13e4423">Slic3r::MultiPoint::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition</b> MultiPoint.hpp:70</div></div>
<div class="ttc" id="aclass_slic3r_1_1_multi_point_html_af3d77ee0ed47dc3e2bf8e741d6a1e563"><div class="ttname"><a href="../../d7/dd1/class_slic3r_1_1_multi_point.html#af3d77ee0ed47dc3e2bf8e741d6a1e563">Slic3r::MultiPoint::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition</b> MultiPoint.hpp:39</div></div>
<div class="ttc" id="alexer_8c_html_a171692544b8e065853e387755849a433"><div class="ttname"><a href="../../d8/d33/lexer_8c.html#a171692544b8e065853e387755849a433">input</a></div><div class="ttdeci">static int input(void)</div></div>
<div class="ttc" id="anamespace_eigen_1_1half__impl_html_a52c8391bfe74901409df09e9b1d5ac79"><div class="ttname"><a href="../../d6/d88/namespace_eigen_1_1half__impl.html#a52c8391bfe74901409df09e9b1d5ac79">Eigen::half_impl::min</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC half() min(const half &amp;a, const half &amp;b)</div><div class="ttdef"><b>Definition</b> Half.h:507</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_aa3ad982a70b3f29440da13d9c90275f0"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa3ad982a70b3f29440da13d9c90275f0">Slic3r::FFFTreeSupport::polyline_sample_next_point_at_distance</a></div><div class="ttdeci">static std::optional&lt; std::pair&lt; Point, size_t &gt; &gt; polyline_sample_next_point_at_distance(const Points &amp;polyline, const Point &amp;start_pt, size_t start_idx, double dist)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:470</div></div>
<div class="ttc" id="anamespace_slic3r_html_a498065f79ccb865fc410d4afeacffc9c"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Slic3r::Polylines</a></div><div class="ttdeci">std::vector&lt; Polyline &gt; Polylines</div><div class="ttdef"><b>Definition</b> Polyline.hpp:14</div></div>
<div class="ttc" id="apoint__areas_8cpp_html_a6a2f109ab3e0aba2f61e7d28188c3660"><div class="ttname"><a href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a></div><div class="ttdeci">Kernel::Point_2 Point</div><div class="ttdef"><b>Definition</b> point_areas.cpp:20</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00070">Slic3r::MultiPoint::clear()</a>, <a class="el" href="../../#l00043">Slic3r::Polyline::clip_end()</a>, <a class="el" href="../../d8/d33/lexer_8c.html#a171692544b8e065853e387755849a433">input()</a>, <a class="el" href="../../#l00116">Slic3r::length()</a>, <a class="el" href="../../#l00018">Slic3r::MultiPoint::points</a>, <a class="el" href="../../#l00470">polyline_sample_next_point_at_distance()</a>, <a class="el" href="../../#l00039">Slic3r::MultiPoint::size()</a>, <a class="el" href="../../#l00173">tree_supports_show_error()</a>, and <a class="el" href="../../#l00062">validate_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01062">sample_overhang_area()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a79f6974d8c9affbf8ae2f7f1963cf22d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a79f6974d8c9affbf8ae2f7f1963cf22d_icgraph.svg" width="411" height="83"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a30ddef5499fa931cd6a895477f7d480e" name="a30ddef5499fa931cd6a895477f7d480e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30ddef5499fa931cd6a895477f7d480e">&#9670;&#160;</a></span>evaluate_point_for_next_layer_function()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool Slic3r::FFFTreeSupport::evaluate_point_for_next_layer_function </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>current_layer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::pair&lt; <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2e">LineStatus</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluates if a point has to be added now. Required for a split_lines call in <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a176fb939fdb2bfcef9adb6b393771391" title="Creates the initial influence areas (that can later be propagated down) by placing them below the ove...">generate_initial_areas()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_layer[in]</td><td>The layer on which the point lies, point and its status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the point is valid. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  420</span>{</div>
<div class="line"><span class="lineno">  421</span>    <span class="keyword">using </span>AvoidanceType = <a class="code hl_enumeration" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a0ef9b0d1194548e1a1423c2cbc12349a">TreeModelVolumes::AvoidanceType</a>;</div>
<div class="line"><span class="lineno">  422</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> min_xy_dist = config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e07ec0b2df8f878e998e444d191dbfc">xy_distance</a> &gt; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a510f0b550289688a5f94753933635aa8">xy_min_distance</a>;</div>
<div class="line"><span class="lineno">  423</span>    <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), current_layer - 1, p.second == LineStatus::TO_BP_SAFE ? AvoidanceType::FastSafe : AvoidanceType::<a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#ace3a371ffb098d62bdd8084612191839ae16b5b7f26f54214445cbe38d72c2828">Fast</a>, false, min_xy_dist), p.first))</div>
<div class="line"><span class="lineno">  424</span>        return true;</div>
<div class="line"><span class="lineno">  425</span>    <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a> &amp;&amp; (p.second != LineStatus::TO_BP &amp;&amp; p.second != LineStatus::TO_BP_SAFE))</div>
<div class="line"><span class="lineno">  426</span>        <span class="keywordflow">return</span> ! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(</div>
<div class="line"><span class="lineno">  427</span>            p.second == LineStatus::TO_MODEL_GRACIOUS || p.second == LineStatus::TO_MODEL_GRACIOUS_SAFE ? </div>
<div class="line"><span class="lineno">  428</span>                volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), current_layer - 1, p.second == LineStatus::TO_MODEL_GRACIOUS_SAFE ? AvoidanceType::FastSafe : AvoidanceType::<a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#ace3a371ffb098d62bdd8084612191839ae16b5b7f26f54214445cbe38d72c2828">Fast</a>, true, min_xy_dist) :</div>
<div class="line"><span class="lineno">  429</span>                volumes.getCollision(config.getRadius(0), current_layer - 1, min_xy_dist),</div>
<div class="line"><span class="lineno">  430</span>            p.first);</div>
<div class="line"><span class="lineno">  431</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  432</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_a0ef9b0d1194548e1a1423c2cbc12349a"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a0ef9b0d1194548e1a1423c2cbc12349a">Slic3r::FFFTreeSupport::TreeModelVolumes::AvoidanceType</a></div><div class="ttdeci">AvoidanceType</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.hpp:74</div></div>
<div class="ttc" id="anamespace_slic3r_html_ace3a371ffb098d62bdd8084612191839ae16b5b7f26f54214445cbe38d72c2828"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ace3a371ffb098d62bdd8084612191839ae16b5b7f26f54214445cbe38d72c2828">Slic3r::SLAImportQuality::Fast</a></div><div class="ttdeci">@ Fast</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00247">Slic3r::contains()</a>, <a class="el" href="../../#l00327">Slic3r::FFFTreeSupport::TreeModelVolumes::getAvoidance()</a>, <a class="el" href="../../#l00291">Slic3r::FFFTreeSupport::TreeModelVolumes::getCollision()</a>, <a class="el" href="../../#l00403">Slic3r::FFFTreeSupport::TreeSupportSettings::getRadius()</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::TreeSupportSettings::support_rests_on_model</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17000f38054a1d7473b4524cfbba05c6">TO_BP</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea17e968aeab1713f65be1d61bf3c31014">TO_BP_SAFE</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2eac86025471c7d0e5b609cc69e034f0978">TO_MODEL_GRACIOUS</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a19c1b7de30dd7a8941ee1c8446e4ed2ea8f5cfba6c2529a95ba4a66a999d286bc">TO_MODEL_GRACIOUS_SAFE</a>, <a class="el" href="../../#l00276">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_distance</a>, and <a class="el" href="../../#l00293">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_min_distance</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00844">Slic3r::FFFTreeSupport::RichInterfacePlacer::add_points_along_lines()</a>, and <a class="el" href="../../#l01062">sample_overhang_area()</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a30ddef5499fa931cd6a895477f7d480e_cgraph.svg" width="100%" height="485"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a30ddef5499fa931cd6a895477f7d480e_icgraph.svg" width="602" height="100"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5b1e3e497e4086f33f972043ba757e57" name="a5b1e3e497e4086f33f972043ba757e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b1e3e497e4086f33f972043ba757e57">&#9670;&#160;</a></span>extrude_branch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::pair&lt; float, float &gt; Slic3r::FFFTreeSupport::extrude_branch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  593</span>{</div>
<div class="line"><span class="lineno">  594</span>    <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3d</a> p1, p2, p3;</div>
<div class="line"><span class="lineno">  595</span>    <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3d</a> v1, v2;</div>
<div class="line"><span class="lineno">  596</span>    <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3d</a> nprev;</div>
<div class="line"><span class="lineno">  597</span>    <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3d</a> ncurrent;</div>
<div class="line"><span class="lineno">  598</span>    assert(path.size() &gt;= 2);</div>
<div class="line"><span class="lineno">  599</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keywordtype">float</span> eps = 0.015f;</div>
<div class="line"><span class="lineno">  600</span>    std::pair&lt;int, int&gt; prev_strip;</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span><span class="comment">//    char fname[2048];</span></div>
<div class="line"><span class="lineno">  603</span><span class="comment">//    static int irun = 0;</span></div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span>    <span class="keywordtype">float</span> zmin = 0;</div>
<div class="line"><span class="lineno">  606</span>    <span class="keywordtype">float</span> zmax = 0;</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> ipath = 1; ipath &lt; path.size(); ++ ipath) {</div>
<div class="line"><span class="lineno">  609</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;prev    = *path[ipath - 1];</div>
<div class="line"><span class="lineno">  610</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;current = *path[ipath];</div>
<div class="line"><span class="lineno">  611</span>        assert(prev.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a> + 1 == current.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>);</div>
<div class="line"><span class="lineno">  612</span>        p1 = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3f60c0fef0146fe2b8ee74dee582e83d">to_3d</a>(unscaled&lt;double&gt;(prev   .state.result_on_layer), <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">layer_z</a>(slicing_params, config, prev   .state.layer_idx));</div>
<div class="line"><span class="lineno">  613</span>        p2 = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3f60c0fef0146fe2b8ee74dee582e83d">to_3d</a>(unscaled&lt;double&gt;(current.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a>), <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">layer_z</a>(slicing_params, config, current.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>));</div>
<div class="line"><span class="lineno">  614</span>        v1 = (p2 - p1).normalized();</div>
<div class="line"><span class="lineno">  615</span>        <span class="keywordflow">if</span> (ipath == 1) {</div>
<div class="line"><span class="lineno">  616</span>            nprev = v1;</div>
<div class="line"><span class="lineno">  617</span>            <span class="comment">// Extrude the bottom half sphere.</span></div>
<div class="line"><span class="lineno">  618</span>            <span class="keywordtype">float</span> radius     = unscaled&lt;float&gt;(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, prev));</div>
<div class="line"><span class="lineno">  619</span>            <span class="keywordtype">float</span> angle_step = 2. * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a4ae93c48c742ccd51e0ec59fa85b49bd">acos</a>(1. - eps / radius);</div>
<div class="line"><span class="lineno">  620</span>            <span class="keyword">auto</span>  nsteps     = int(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a>(<a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / (2. * angle_step)));</div>
<div class="line"><span class="lineno">  621</span>            angle_step       = <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / (2. * nsteps);</div>
<div class="line"><span class="lineno">  622</span>            <span class="keywordtype">int</span>   ifan       = int(result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size());</div>
<div class="line"><span class="lineno">  623</span>            result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.emplace_back((p1 - nprev * radius).cast&lt;float&gt;());</div>
<div class="line"><span class="lineno">  624</span>            zmin = result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.back().z();</div>
<div class="line"><span class="lineno">  625</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a> = angle_step;</div>
<div class="line"><span class="lineno">  626</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; nsteps; ++ i, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a> += angle_step) {</div>
<div class="line"><span class="lineno">  627</span>                std::pair&lt;int, int&gt; strip = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aaa5a62d876708f908d22ff52c6da9350">discretize_circle</a>((p1 - nprev * radius * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a92b03396990b0e9eea0731aa406e31a4">cos</a>(angle)).cast&lt;float&gt;(), nprev.cast&lt;<span class="keywordtype">float</span>&gt;(), radius * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a9cfb0ea58bd813510a9e2db18a5e49f0">sin</a>(angle), eps, result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>);</div>
<div class="line"><span class="lineno">  628</span>                <span class="keywordflow">if</span> (i == 1)</div>
<div class="line"><span class="lineno">  629</span>                    triangulate_fan&lt;false&gt;(result, ifan, strip.first, strip.second);</div>
<div class="line"><span class="lineno">  630</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  631</span>                    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a78c399addd988cbf5b23f6e3094bba97">triangulate_strip</a>(result, prev_strip.first, prev_strip.second, strip.first, strip.second);</div>
<div class="line"><span class="lineno">  632</span><span class="comment">//                sprintf(fname, &quot;d:\\temp\\meshes\\tree-partial-%d.obj&quot;, ++ irun);</span></div>
<div class="line"><span class="lineno">  633</span><span class="comment">//                its_write_obj(result, fname);</span></div>
<div class="line"><span class="lineno">  634</span>                prev_strip = strip;</div>
<div class="line"><span class="lineno">  635</span>            }</div>
<div class="line"><span class="lineno">  636</span>        }</div>
<div class="line"><span class="lineno">  637</span>        <span class="keywordflow">if</span> (ipath + 1 == path.size()) {</div>
<div class="line"><span class="lineno">  638</span>            <span class="comment">// End of the tube.</span></div>
<div class="line"><span class="lineno">  639</span>            ncurrent = v1;</div>
<div class="line"><span class="lineno">  640</span>            <span class="comment">// Extrude the top half sphere.</span></div>
<div class="line"><span class="lineno">  641</span>            <span class="keywordtype">float</span> radius = unscaled&lt;float&gt;(support_element_radius(config, current));</div>
<div class="line"><span class="lineno">  642</span>            <span class="keywordtype">float</span> angle_step = 2. * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a4ae93c48c742ccd51e0ec59fa85b49bd">acos</a>(1. - eps / radius);</div>
<div class="line"><span class="lineno">  643</span>            <span class="keyword">auto</span>  nsteps = int(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a>(<a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / (2. * angle_step)));</div>
<div class="line"><span class="lineno">  644</span>            angle_step = <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / (2. * nsteps);</div>
<div class="line"><span class="lineno">  645</span>            <span class="keyword">auto</span> angle = float(<a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 2.);</div>
<div class="line"><span class="lineno">  646</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nsteps; ++ i, angle -= angle_step) {</div>
<div class="line"><span class="lineno">  647</span>                std::pair&lt;int, int&gt; strip = discretize_circle((p2 + ncurrent * radius * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a92b03396990b0e9eea0731aa406e31a4">cos</a>(angle)).cast&lt;float&gt;(), ncurrent.cast&lt;<span class="keywordtype">float</span>&gt;(), radius * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a9cfb0ea58bd813510a9e2db18a5e49f0">sin</a>(angle), eps, result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>);</div>
<div class="line"><span class="lineno">  648</span>                triangulate_strip(result, prev_strip.first, prev_strip.second, strip.first, strip.second);</div>
<div class="line"><span class="lineno">  649</span><span class="comment">//                sprintf(fname, &quot;d:\\temp\\meshes\\tree-partial-%d.obj&quot;, ++ irun);</span></div>
<div class="line"><span class="lineno">  650</span><span class="comment">//                its_write_obj(result, fname);</span></div>
<div class="line"><span class="lineno">  651</span>                prev_strip = strip;</div>
<div class="line"><span class="lineno">  652</span>            }</div>
<div class="line"><span class="lineno">  653</span>            <span class="keywordtype">int</span> ifan = int(result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size());</div>
<div class="line"><span class="lineno">  654</span>            result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.emplace_back((p2 + ncurrent * radius).cast&lt;float&gt;());</div>
<div class="line"><span class="lineno">  655</span>            zmax = result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.back().z();</div>
<div class="line"><span class="lineno">  656</span>            triangulate_fan&lt;true&gt;(result, ifan, prev_strip.first, prev_strip.second);</div>
<div class="line"><span class="lineno">  657</span><span class="comment">//            sprintf(fname, &quot;d:\\temp\\meshes\\tree-partial-%d.obj&quot;, ++ irun);</span></div>
<div class="line"><span class="lineno">  658</span><span class="comment">//            its_write_obj(result, fname);</span></div>
<div class="line"><span class="lineno">  659</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  660</span>            <span class="keyword">const</span> SupportElement &amp;next = *path[ipath + 1];</div>
<div class="line"><span class="lineno">  661</span>            assert(current.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a> + 1 == next.state.layer_idx);</div>
<div class="line"><span class="lineno">  662</span>            p3 = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3f60c0fef0146fe2b8ee74dee582e83d">to_3d</a>(unscaled&lt;double&gt;(next.state.result_on_layer), <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">layer_z</a>(slicing_params, config, next.state.layer_idx));</div>
<div class="line"><span class="lineno">  663</span>            v2 = (p3 - p2).normalized();</div>
<div class="line"><span class="lineno">  664</span>            ncurrent = (v1 + v2).normalized();</div>
<div class="line"><span class="lineno">  665</span>            <span class="keywordtype">float</span> radius = unscaled&lt;float&gt;(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, current));</div>
<div class="line"><span class="lineno">  666</span>            std::pair&lt;int, int&gt; strip = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aaa5a62d876708f908d22ff52c6da9350">discretize_circle</a>(p2.cast&lt;<span class="keywordtype">float</span>&gt;(), ncurrent.cast&lt;<span class="keywordtype">float</span>&gt;(), radius, eps, result.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>);</div>
<div class="line"><span class="lineno">  667</span>            <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a78c399addd988cbf5b23f6e3094bba97">triangulate_strip</a>(result, prev_strip.first, prev_strip.second, strip.first, strip.second);</div>
<div class="line"><span class="lineno">  668</span>            prev_strip = strip;</div>
<div class="line"><span class="lineno">  669</span><span class="comment">//            sprintf(fname, &quot;d:\\temp\\meshes\\tree-partial-%d.obj&quot;, ++irun);</span></div>
<div class="line"><span class="lineno">  670</span><span class="comment">//            its_write_obj(result, fname);</span></div>
<div class="line"><span class="lineno">  671</span>        }</div>
<div class="line"><span class="lineno">  672</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  673</span>        <span class="keywordflow">if</span> (circles_intersect(p1, nprev, <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(settings, prev), p2, ncurrent, <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(settings, current))) {</div>
<div class="line"><span class="lineno">  674</span>            <span class="comment">// Cannot connect previous and current slice using a simple zig-zag triangulation,</span></div>
<div class="line"><span class="lineno">  675</span>            <span class="comment">// because the two circles intersect.</span></div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  678</span>            <span class="comment">// Continue with chaining.</span></div>
<div class="line"><span class="lineno">  679</span> </div>
<div class="line"><span class="lineno">  680</span>        }</div>
<div class="line"><span class="lineno">  681</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  682</span>    }</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>    <span class="keywordflow">return</span> std::make_pair(zmin, zmax);</div>
<div class="line"><span class="lineno">  685</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a78c399addd988cbf5b23f6e3094bba97"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a78c399addd988cbf5b23f6e3094bba97">Slic3r::FFFTreeSupport::triangulate_strip</a></div><div class="ttdeci">static void triangulate_strip(indexed_triangle_set &amp;its, int ibegin1, int iend1, int ibegin2, int iend2)</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:495</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_aa2d118629726e53c068e0a8c7d44eb80"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">Slic3r::FFFTreeSupport::layer_z</a></div><div class="ttdeci">double layer_z(const SlicingParameters &amp;slicing_params, const TreeSupportSettings &amp;config, const size_t layer_idx)</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:455</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_aaa5a62d876708f908d22ff52c6da9350"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aaa5a62d876708f908d22ff52c6da9350">Slic3r::FFFTreeSupport::discretize_circle</a></div><div class="ttdeci">static std::pair&lt; int, int &gt; discretize_circle(const Vec3f &amp;center, const Vec3f &amp;normal, const float radius, const float eps, std::vector&lt; Vec3f &gt; &amp;pts)</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:561</div></div>
<div class="ttc" id="anamespace_slic3r_html_a3f60c0fef0146fe2b8ee74dee582e83d"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a3f60c0fef0146fe2b8ee74dee582e83d">Slic3r::to_3d</a></div><div class="ttdeci">Eigen::Matrix&lt; typename Derived::Scalar, 3, 1, Eigen::DontAlign &gt; to_3d(const Eigen::MatrixBase&lt; Derived &gt; &amp;pt, const typename Derived::Scalar z)</div><div class="ttdef"><b>Definition</b> Point.hpp:127</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_af1e554634cb3c5fc358082f8d2c0f185"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a></div><div class="ttdeci">LayerIndex layer_idx</div><div class="ttdoc">The next height this support elements wants to reach.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:160</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_af48a0d9391fc8eefd2bf89543c381f31"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer</a></div><div class="ttdeci">Point result_on_layer</div><div class="ttdoc">The resulting center point around which a circle will be drawn later. Will be set by setPointsOnAreas...</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:176</div></div>
<div class="ttc" id="astructindexed__triangle__set_html_a86d0433f7db7abf0f94c7e3d1302b09c"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">indexed_triangle_set::vertices</a></div><div class="ttdeci">std::vector&lt; stl_vertex &gt; vertices</div><div class="ttdef"><b>Definition</b> stl.h:165</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00262">acos()</a>, <a class="el" href="../../#l00112">Slic3r::angle()</a>, <a class="el" href="../../#l00402">ceil()</a>, <a class="el" href="../../#l00202">cos()</a>, <a class="el" href="../../#l00561">discretize_circle()</a>, <a class="el" href="../../#l00160">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a>, <a class="el" href="../../#l00455">layer_z()</a>, <a class="el" href="../../#l00020">M_PI</a>, <a class="el" href="../../#l00176">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer</a>, <a class="el" href="../../#l00220">sin()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, <a class="el" href="../../#l00236">support_element_radius()</a>, <a class="el" href="../../#l00127">Slic3r::to_3d()</a>, <a class="el" href="../../#l00495">triangulate_strip()</a>, and <a class="el" href="../../#l00165">indexed_triangle_set::vertices</a>.</p>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5b1e3e497e4086f33f972043ba757e57_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a67c74ce38001bad50498bc09a6ac254a" name="a67c74ce38001bad50498bc09a6ac254a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67c74ce38001bad50498bc09a6ac254a">&#9670;&#160;</a></span>finalize_interface_and_support_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::finalize_interface_and_support_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>print_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>overhangs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>support_layer_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>support_roof_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>intermediate_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates Support Floor, ensures Support Roof can not cut of branches, and saves the branches as support to storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">support_layer_storage[in]</td><td>Areas where support should be generated. </td></tr>
    <tr><td class="paramname">support_roof_storage[in]</td><td>Areas where support was replaced with roof. </td></tr>
    <tr><td class="paramname">storage[in,out]</td><td>The storage where the support should be stored. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 3093</span>{</div>
<div class="line"><span class="lineno"> 3094</span>    assert(std::all_of(bottom_contacts.begin(), bottom_contacts.end(), [](<span class="keyword">auto</span> *p) { return p == nullptr; }));</div>
<div class="line"><span class="lineno"> 3095</span><span class="comment">//    assert(std::all_of(top_contacts.begin(), top_contacts.end(), [](auto* p) { return p == nullptr; }));</span></div>
<div class="line"><span class="lineno"> 3096</span>    assert(std::all_of(intermediate_layers.begin(), intermediate_layers.end(), [](<span class="keyword">auto</span>* p) { return p == nullptr; }));</div>
<div class="line"><span class="lineno"> 3097</span> </div>
<div class="line"><span class="lineno"> 3098</span>    <a class="code hl_enumeration" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934">InterfacePreference</a> interface_pref = config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a0f90454064d25c4cffb80c3a21f2b562">interface_preference</a>; <span class="comment">// InterfacePreference::InterfaceAreaOverwritesSupport;</span></div>
<div class="line"><span class="lineno"> 3099</span> </div>
<div class="line"><span class="lineno"> 3100</span><span class="preprocessor">#ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 3101</span>    <span class="keywordtype">double</span> progress_total = TREE_PROGRESS_PRECALC_AVO + TREE_PROGRESS_PRECALC_COLL + TREE_PROGRESS_GENERATE_NODES + TREE_PROGRESS_AREA_CALC + TREE_PROGRESS_GENERATE_BRANCH_AREAS + TREE_PROGRESS_SMOOTH_BRANCH_AREAS;</div>
<div class="line"><span class="lineno"> 3102</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 3103</span> </div>
<div class="line"><span class="lineno"> 3104</span>    <span class="comment">// Iterate over the generated circles in parallel and clean them up. Also add support floor.</span></div>
<div class="line"><span class="lineno"> 3105</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, support_layer_storage.size()),</div>
<div class="line"><span class="lineno"> 3106</span>        [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 3107</span>        for (size_t layer_idx = range.begin(); layer_idx &lt; range.end(); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 3108</span>            <span class="comment">// Subtract support lines of the branches from the roof</span></div>
<div class="line"><span class="lineno"> 3109</span>            SupportGeneratorLayer *support_roof = top_contacts[layer_idx];</div>
<div class="line"><span class="lineno"> 3110</span>            Polygons               support_roof_polygons;</div>
<div class="line"><span class="lineno"> 3111</span> </div>
<div class="line"><span class="lineno"> 3112</span>            if (Polygons &amp;src = support_roof_storage[layer_idx]; ! src.empty()) {</div>
<div class="line"><span class="lineno"> 3113</span>                if (support_roof != nullptr &amp;&amp; ! support_roof-&gt;polygons.empty()) {</div>
<div class="line"><span class="lineno"> 3114</span>                    support_roof_polygons = union_(src, support_roof-&gt;polygons);</div>
<div class="line"><span class="lineno"> 3115</span>                    support_roof-&gt;polygons.clear();</div>
<div class="line"><span class="lineno"> 3116</span>                } else</div>
<div class="line"><span class="lineno"> 3117</span>                    support_roof_polygons = std::move(src);</div>
<div class="line"><span class="lineno"> 3118</span>            } else if (support_roof != nullptr) {</div>
<div class="line"><span class="lineno"> 3119</span>                support_roof_polygons = std::move(support_roof-&gt;polygons);</div>
<div class="line"><span class="lineno"> 3120</span>                support_roof-&gt;polygons.clear();</div>
<div class="line"><span class="lineno"> 3121</span>            }</div>
<div class="line"><span class="lineno"> 3122</span> </div>
<div class="line"><span class="lineno"> 3123</span>            assert(intermediate_layers[layer_idx] == nullptr);</div>
<div class="line"><span class="lineno"> 3124</span>            Polygons                base_layer_polygons = std::move(support_layer_storage[layer_idx]);</div>
<div class="line"><span class="lineno"> 3125</span> </div>
<div class="line"><span class="lineno"> 3126</span>            if (! base_layer_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 3127</span>                <span class="comment">// Most of the time in this function is this union call. Can take 300+ ms when a lot of areas are to be unioned.</span></div>
<div class="line"><span class="lineno"> 3128</span>                base_layer_polygons = smooth_outward(union_(base_layer_polygons), config.support_line_width); <span class="comment">//FIXME was .smooth(50);</span></div>
<div class="line"><span class="lineno"> 3129</span>                <span class="comment">//smooth_outward(closing(std::move(bottom), closing_distance + minimum_island_radius, closing_distance, SUPPORT_SURFACES_OFFSET_PARAMETERS), smoothing_distance) :</span></div>
<div class="line"><span class="lineno"> 3130</span>                <span class="comment">// simplify a bit, to ensure the output does not contain outrageous amounts of vertices. Should not be necessary, just a precaution.</span></div>
<div class="line"><span class="lineno"> 3131</span>                base_layer_polygons = polygons_simplify(base_layer_polygons, std::min(scaled&lt;double&gt;(0.03), double(config.resolution)), polygons_strictly_simple);</div>
<div class="line"><span class="lineno"> 3132</span>            }</div>
<div class="line"><span class="lineno"> 3133</span> </div>
<div class="line"><span class="lineno"> 3134</span>            if (! support_roof_polygons.empty() &amp;&amp; ! base_layer_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 3135</span><span class="comment">//              if (area(intersection(base_layer_polygons, support_roof_polygons)) &gt; tiny_area_threshold)</span></div>
<div class="line"><span class="lineno"> 3136</span>                {</div>
<div class="line"><span class="lineno"> 3137</span>                    switch (interface_pref) {</div>
<div class="line"><span class="lineno"> 3138</span>                        case InterfacePreference::InterfaceAreaOverwritesSupport:</div>
<div class="line"><span class="lineno"> 3139</span>                            base_layer_polygons = diff(base_layer_polygons, support_roof_polygons);</div>
<div class="line"><span class="lineno"> 3140</span>                            break;</div>
<div class="line"><span class="lineno"> 3141</span>                        case InterfacePreference::SupportAreaOverwritesInterface:</div>
<div class="line"><span class="lineno"> 3142</span>                            support_roof_polygons = diff(support_roof_polygons, base_layer_polygons);</div>
<div class="line"><span class="lineno"> 3143</span>                            break;</div>
<div class="line"><span class="lineno"> 3144</span>    <span class="comment">//FIXME</span></div>
<div class="line"><span class="lineno"> 3145</span>    #if 1</div>
<div class="line"><span class="lineno"> 3146</span>                        case InterfacePreference::InterfaceLinesOverwriteSupport:</div>
<div class="line"><span class="lineno"> 3147</span>                        case InterfacePreference::SupportLinesOverwriteInterface:</div>
<div class="line"><span class="lineno"> 3148</span>                            assert(false);</div>
<div class="line"><span class="lineno"> 3149</span>                            [[fallthrough]];</div>
<div class="line"><span class="lineno"> 3150</span>    #else</div>
<div class="line"><span class="lineno"> 3151</span>                        case InterfacePreference::InterfaceLinesOverwriteSupport:</div>
<div class="line"><span class="lineno"> 3152</span>                        {</div>
<div class="line"><span class="lineno"> 3153</span>                            <span class="comment">// Hatch the support roof interfaces, offset them by their line width and subtract them from support base.</span></div>
<div class="line"><span class="lineno"> 3154</span>                            Polygons interface_lines = offset(to_polylines(</div>
<div class="line"><span class="lineno"> 3155</span>                                generate_support_infill_lines(support_roof-&gt;polygons, true, layer_idx, config.support_roof_line_distance)),</div>
<div class="line"><span class="lineno"> 3156</span>                                config.support_roof_line_width / 2);</div>
<div class="line"><span class="lineno"> 3157</span>                            base_layer_polygons = diff(base_layer_polygons, interface_lines);</div>
<div class="line"><span class="lineno"> 3158</span>                            break;</div>
<div class="line"><span class="lineno"> 3159</span>                        }</div>
<div class="line"><span class="lineno"> 3160</span>                        case InterfacePreference::SupportLinesOverwriteInterface:</div>
<div class="line"><span class="lineno"> 3161</span>                        {</div>
<div class="line"><span class="lineno"> 3162</span>                            <span class="comment">// Hatch the support roof interfaces, offset them by their line width and subtract them from support base.</span></div>
<div class="line"><span class="lineno"> 3163</span>                            Polygons tree_lines = union_(offset(to_polylines(</div>
<div class="line"><span class="lineno"> 3164</span>                                generate_support_infill_lines(base_layer_polygons, false, layer_idx, config.support_line_distance, true)),</div>
<div class="line"><span class="lineno"> 3165</span>                                config.support_line_width / 2));</div>
<div class="line"><span class="lineno"> 3166</span>                            <span class="comment">// do not draw roof where the tree is. I prefer it this way as otherwise the roof may cut of a branch from its support below.</span></div>
<div class="line"><span class="lineno"> 3167</span>                            support_roof-&gt;polygons = diff(support_roof-&gt;polygons, tree_lines);</div>
<div class="line"><span class="lineno"> 3168</span>                            break;</div>
<div class="line"><span class="lineno"> 3169</span>                        }</div>
<div class="line"><span class="lineno"> 3170</span>    #endif</div>
<div class="line"><span class="lineno"> 3171</span>                        case InterfacePreference::Nothing:</div>
<div class="line"><span class="lineno"> 3172</span>                            break;</div>
<div class="line"><span class="lineno"> 3173</span>                    }</div>
<div class="line"><span class="lineno"> 3174</span>                }</div>
<div class="line"><span class="lineno"> 3175</span>            }</div>
<div class="line"><span class="lineno"> 3176</span> </div>
<div class="line"><span class="lineno"> 3177</span>            <span class="comment">// Subtract support floors from the support area and add them to the support floor instead.</span></div>
<div class="line"><span class="lineno"> 3178</span>            if (config.support_bottom_layers &gt; 0 &amp;&amp; ! base_layer_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 3179</span>                SupportGeneratorLayer*&amp; support_bottom = bottom_contacts[layer_idx];</div>
<div class="line"><span class="lineno"> 3180</span>                Polygons layer_outset = diff_clipped(</div>
<div class="line"><span class="lineno"> 3181</span>                    config.support_bottom_offset &gt; 0 ? offset(base_layer_polygons, config.support_bottom_offset, jtMiter, 1.2) : base_layer_polygons,</div>
<div class="line"><span class="lineno"> 3182</span>                    volumes.getCollision(0, layer_idx, false));</div>
<div class="line"><span class="lineno"> 3183</span>                Polygons floor_layer;</div>
<div class="line"><span class="lineno"> 3184</span>                size_t layers_below = 0;</div>
<div class="line"><span class="lineno"> 3185</span>                while (layers_below &lt;= config.support_bottom_layers) {</div>
<div class="line"><span class="lineno"> 3186</span>                    <span class="comment">// one sample at 0 layers below, another at config.support_bottom_layers. In-between samples at config.performance_interface_skip_layers distance from each other.</span></div>
<div class="line"><span class="lineno"> 3187</span>                    const size_t sample_layer = static_cast&lt;size_t&gt;(std::max(0, (static_cast&lt;int&gt;(layer_idx) - static_cast&lt;int&gt;(layers_below)) - static_cast&lt;int&gt;(config.z_distance_bottom_layers)));</div>
<div class="line"><span class="lineno"> 3188</span>                    <span class="comment">//FIXME subtract the wipe tower </span></div>
<div class="line"><span class="lineno"> 3189</span>                    append(floor_layer, intersection(layer_outset, overhangs[sample_layer]));</div>
<div class="line"><span class="lineno"> 3190</span>                    if (layers_below &lt; config.support_bottom_layers)</div>
<div class="line"><span class="lineno"> 3191</span>                        layers_below = std::min(layers_below + 1, config.support_bottom_layers);</div>
<div class="line"><span class="lineno"> 3192</span>                    else</div>
<div class="line"><span class="lineno"> 3193</span>                        break;</div>
<div class="line"><span class="lineno"> 3194</span>                }</div>
<div class="line"><span class="lineno"> 3195</span>                if (! floor_layer.empty()) {</div>
<div class="line"><span class="lineno"> 3196</span>                    if (support_bottom == nullptr)</div>
<div class="line"><span class="lineno"> 3197</span>                        support_bottom = &amp;layer_allocate(layer_storage, SupporLayerType::BottomContact, print_object.slicing_parameters(), config, layer_idx);</div>
<div class="line"><span class="lineno"> 3198</span>                    support_bottom-&gt;polygons = union_(floor_layer, support_bottom-&gt;polygons);</div>
<div class="line"><span class="lineno"> 3199</span>                    base_layer_polygons = diff_clipped(base_layer_polygons, offset(support_bottom-&gt;polygons, scaled&lt;float&gt;(0.01), jtMiter, 1.2)); <span class="comment">// Subtract the support floor from the normal support.</span></div>
<div class="line"><span class="lineno"> 3200</span>                }</div>
<div class="line"><span class="lineno"> 3201</span>            }</div>
<div class="line"><span class="lineno"> 3202</span> </div>
<div class="line"><span class="lineno"> 3203</span>            if (! support_roof_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 3204</span>                if (support_roof == nullptr)</div>
<div class="line"><span class="lineno"> 3205</span>                    support_roof = top_contacts[layer_idx] = &amp;layer_allocate(layer_storage, SupporLayerType::TopContact, print_object.slicing_parameters(), config, layer_idx);</div>
<div class="line"><span class="lineno"> 3206</span>                support_roof-&gt;polygons = union_(support_roof_polygons);</div>
<div class="line"><span class="lineno"> 3207</span>            }</div>
<div class="line"><span class="lineno"> 3208</span>            if (! base_layer_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 3209</span>                SupportGeneratorLayer *base_layer = intermediate_layers[layer_idx] = &amp;layer_allocate(layer_storage, SupporLayerType::Base, print_object.slicing_parameters(), config, layer_idx);</div>
<div class="line"><span class="lineno"> 3210</span>                base_layer-&gt;polygons = union_(base_layer_polygons);</div>
<div class="line"><span class="lineno"> 3211</span>            }</div>
<div class="line"><span class="lineno"> 3212</span> </div>
<div class="line"><span class="lineno"> 3213</span>#ifdef SLIC3R_TREESUPPORTS_PROGRESS</div>
<div class="line"><span class="lineno"> 3214</span>            {</div>
<div class="line"><span class="lineno"> 3215</span>                std::lock_guard&lt;std::mutex&gt; critical_section_progress(critical_sections);</div>
<div class="line"><span class="lineno"> 3216</span>                progress_total += TREE_PROGRESS_FINALIZE_BRANCH_AREAS / support_layer_storage.size();</div>
<div class="line"><span class="lineno"> 3217</span>                Progress::messageProgress(Progress::Stage::SUPPORT, progress_total * m_progress_multiplier + m_progress_offset, TREE_PROGRESS_TOTAL);</div>
<div class="line"><span class="lineno"> 3218</span>            }</div>
<div class="line"><span class="lineno"> 3219</span>#endif</div>
<div class="line"><span class="lineno"> 3220</span>#if 0</div>
<div class="line"><span class="lineno"> 3221</span>            {</div>
<div class="line"><span class="lineno"> 3222</span>                std::lock_guard&lt;std::mutex&gt; lock(critical_sections);</div>
<div class="line"><span class="lineno"> 3223</span>                if (!storage.support.supportLayers[layer_idx].support_infill_parts.empty() || !storage.support.supportLayers[layer_idx].support_roof.empty())</div>
<div class="line"><span class="lineno"> 3224</span>                    storage.support.layer_nr_max_filled_layer = std::max(storage.support.layer_nr_max_filled_layer, static_cast&lt;int&gt;(layer_idx));</div>
<div class="line"><span class="lineno"> 3225</span>            }</div>
<div class="line"><span class="lineno"> 3226</span>#endif</div>
<div class="line"><span class="lineno"> 3227</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 3228</span>        }</div>
<div class="line"><span class="lineno"> 3229</span>    });</div>
<div class="line"><span class="lineno"> 3230</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab6de0fe0d580b1d4a0c1bd7ab947a934"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab6de0fe0d580b1d4a0c1bd7ab947a934">Slic3r::FFFTreeSupport::InterfacePreference</a></div><div class="ttdeci">InterfacePreference</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:29</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a0f90454064d25c4cffb80c3a21f2b562"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a0f90454064d25c4cffb80c3a21f2b562">Slic3r::FFFTreeSupport::TreeSupportSettings::interface_preference</a></div><div class="ttdeci">InterfacePreference interface_preference</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:345</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l03079">finalize_interface_and_support_areas()</a>, <a class="el" href="../../#l00345">Slic3r::FFFTreeSupport::TreeSupportSettings::interface_preference</a>, and <a class="el" href="../../#l00356">Slic3r::range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03238">draw_areas()</a>, and <a class="el" href="../../#l03079">finalize_interface_and_support_areas()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a67c74ce38001bad50498bc09a6ac254a_cgraph.svg" width="311" height="91"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a67c74ce38001bad50498bc09a6ac254a_icgraph.svg" width="590" height="91"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a68cf66066ce35e90b7d041ec4af865f4" name="a68cf66066ce35e90b7d041ec4af865f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68cf66066ce35e90b7d041ec4af865f4">&#9670;&#160;</a></span>finalize_raft_contact()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::finalize_raft_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>print_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>raft_contact_layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1005</span>{</div>
<div class="line"><span class="lineno"> 1006</span>    <span class="keywordflow">if</span> (raft_contact_layer_idx &gt;= 0) {</div>
<div class="line"><span class="lineno"> 1007</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> first_tree_layer = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#ad6d151e7f62600dc1439ebad6e198108">slicing_parameters</a>().<a class="code hl_function" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">raft_layers</a>() - 1;</div>
<div class="line"><span class="lineno"> 1008</span>        <span class="comment">// Remove tree tips that start below the raft contact,</span></div>
<div class="line"><span class="lineno"> 1009</span>        <span class="comment">// remove interface layers below the raft contact.</span></div>
<div class="line"><span class="lineno"> 1010</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; first_tree_layer; ++i) {</div>
<div class="line"><span class="lineno"> 1011</span>            top_contacts[i] = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1012</span>            move_bounds[i].clear();</div>
<div class="line"><span class="lineno"> 1013</span>        }</div>
<div class="line"><span class="lineno"> 1014</span>        <span class="keywordflow">if</span> (raft_contact_layer_idx &gt;= 0 &amp;&amp; print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#abde3ac4f19e1f9d342423a7643e17266">config</a>().raft_expansion.value &gt; 0) {</div>
<div class="line"><span class="lineno"> 1015</span>            <span class="comment">// If any tips at first_tree_layer now are completely inside the expanded raft layer, remove them as well before they are propagated to the ground.</span></div>
<div class="line"><span class="lineno"> 1016</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;raft_polygons = top_contacts[raft_contact_layer_idx]-&gt;polygons;</div>
<div class="line"><span class="lineno"> 1017</span>            <a class="code hl_class" href="../../d2/da7/class_slic3r_1_1_edge_grid_1_1_grid.html">EdgeGrid::Grid</a> grid(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(raft_polygons).inflated(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>));</div>
<div class="line"><span class="lineno"> 1018</span>            grid.create(raft_polygons, <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a>{}, <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(10.)));</div>
<div class="line"><span class="lineno"> 1019</span>            SupportElements &amp;first_layer_move_bounds = move_bounds[first_tree_layer];</div>
<div class="line"><span class="lineno"> 1020</span>            <span class="keywordtype">double</span> threshold = scaled&lt;double&gt;(print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#abde3ac4f19e1f9d342423a7643e17266">config</a>().raft_expansion.value) * 2.;</div>
<div class="line"><span class="lineno"> 1021</span>            first_layer_move_bounds.erase(std::remove_if(first_layer_move_bounds.begin(), first_layer_move_bounds.end(),</div>
<div class="line"><span class="lineno"> 1022</span>                [&amp;grid, threshold](<span class="keyword">const</span> SupportElement &amp;el) {</div>
<div class="line"><span class="lineno"> 1023</span>                    coordf_t dist;</div>
<div class="line"><span class="lineno"> 1024</span>                    if (grid.signed_distance_edges(el.state.result_on_layer, threshold, dist)) {</div>
<div class="line"><span class="lineno"> 1025</span>                        assert(std::abs(dist) &lt; threshold + SCALED_EPSILON);</div>
<div class="line"><span class="lineno"> 1026</span>                        <span class="comment">// Support point is inside the expanded raft, remove it.</span></div>
<div class="line"><span class="lineno"> 1027</span>                        return dist &lt; - 0.;</div>
<div class="line"><span class="lineno"> 1028</span>                    }</div>
<div class="line"><span class="lineno"> 1029</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1030</span>                }), first_layer_move_bounds.end());</div>
<div class="line"><span class="lineno"> 1031</span><span class="preprocessor">    #if 0</span></div>
<div class="line"><span class="lineno"> 1032</span>            <span class="comment">// Remove the remaining tips from the raft: Closing operation on tip circles.</span></div>
<div class="line"><span class="lineno"> 1033</span>            <span class="keywordflow">if</span> (! first_layer_move_bounds.empty()) {</div>
<div class="line"><span class="lineno"> 1034</span>                <span class="keyword">const</span> <span class="keywordtype">double</span> eps = 0.1;</div>
<div class="line"><span class="lineno"> 1035</span>                <span class="comment">// All tips supporting this layer are expected to have the same radius.</span></div>
<div class="line"><span class="lineno"> 1036</span>                <span class="keywordtype">double</span>       radius = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, first_layer_move_bounds.front());</div>
<div class="line"><span class="lineno"> 1037</span>                <span class="comment">// Connect the tips with the following closing radius.</span></div>
<div class="line"><span class="lineno"> 1038</span>                <span class="keywordtype">double</span>       closing_distance = radius;</div>
<div class="line"><span class="lineno"> 1039</span>                <a class="code hl_typedef" href="../../dc/db2/namespacepriv.html#af88c142a935f18fc3794a6a8f2bebaf7">Polygon</a>      circle = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2ee29be186ca1964637c245478d29ead">make_circle</a>(radius + closing_distance, eps);</div>
<div class="line"><span class="lineno"> 1040</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>     circles;</div>
<div class="line"><span class="lineno"> 1041</span>                circles.reserve(first_layer_move_bounds.size());</div>
<div class="line"><span class="lineno"> 1042</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> SupportElement &amp;el : first_layer_move_bounds) {</div>
<div class="line"><span class="lineno"> 1043</span>                    circles.emplace_back(circle);</div>
<div class="line"><span class="lineno"> 1044</span>                    circles.back().translate(el.state.result_on_layer);</div>
<div class="line"><span class="lineno"> 1045</span>                }</div>
<div class="line"><span class="lineno"> 1046</span>                raft_polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(raft_polygons, <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(circles), - closing_distance));</div>
<div class="line"><span class="lineno"> 1047</span>            }</div>
<div class="line"><span class="lineno"> 1048</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno"> 1049</span>        }</div>
<div class="line"><span class="lineno"> 1050</span>    }</div>
<div class="line"><span class="lineno"> 1051</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_edge_grid_1_1_grid_html"><div class="ttname"><a href="../../d2/da7/class_slic3r_1_1_edge_grid_1_1_grid.html">Slic3r::EdgeGrid::Grid</a></div><div class="ttdef"><b>Definition</b> EdgeGrid.hpp:92</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_abde3ac4f19e1f9d342423a7643e17266"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#abde3ac4f19e1f9d342423a7643e17266">Slic3r::PrintObject::config</a></div><div class="ttdeci">const PrintObjectConfig &amp; config() const</div><div class="ttdef"><b>Definition</b> Print.hpp:246</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_ad6d151e7f62600dc1439ebad6e198108"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#ad6d151e7f62600dc1439ebad6e198108">Slic3r::PrintObject::slicing_parameters</a></div><div class="ttdeci">const SlicingParameters &amp; slicing_parameters() const</div><div class="ttdef"><b>Definition</b> Print.hpp:309</div></div>
<div class="ttc" id="alibslic3r_8h_html_a57f3510310e75de35abd65c9650b49f7"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a></div><div class="ttdeci">#define SCALED_EPSILON</div><div class="ttdef"><b>Definition</b> libslic3r.h:71</div></div>
<div class="ttc" id="alibslic3r_8h_html_a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a></div><div class="ttdeci">#define scale_(val)</div><div class="ttdef"><b>Definition</b> libslic3r.h:69</div></div>
<div class="ttc" id="anamespace_slic3r_html_a015388ff0752a25649a975078f7a5431"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">Slic3r::union_</a></div><div class="ttdeci">Slic3r::Polygons union_(const Slic3r::Polygons &amp;subject)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:704</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2ee29be186ca1964637c245478d29ead"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2ee29be186ca1964637c245478d29ead">Slic3r::make_circle</a></div><div class="ttdeci">Polygon make_circle(double radius, double error)</div><div class="ttdef"><b>Definition</b> Polygon.cpp:659</div></div>
<div class="ttc" id="anamespace_slic3r_html_a6e3ba75aef7600dbb0a294a47d88ecb8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">Slic3r::get_extents</a></div><div class="ttdeci">BoundingBox get_extents(const ExPolygon &amp;expolygon)</div><div class="ttdef"><b>Definition</b> ExPolygon.cpp:352</div></div>
<div class="ttc" id="anamespace_slic3r_html_aed0434d42d75979bb4d469ff41de7158"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">Slic3r::diff</a></div><div class="ttdeci">Slic3r::Polygons diff(const Slic3r::Polygon &amp;subject, const Slic3r::Polygon &amp;clip, ApplySafetyOffset do_safety_offset)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:672</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_ab29201ea713e88d9d709ae4fa8f2576f"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">libnest2d::shapelike::offset</a></div><div class="ttdeci">void offset(Slic3r::ExPolygon &amp;sh, coord_t distance, const PolygonTag &amp;)</div><div class="ttdef"><b>Definition</b> geometries.hpp:132</div></div>
<div class="ttc" id="anamespacepriv_html_af88c142a935f18fc3794a6a8f2bebaf7"><div class="ttname"><a href="../../dc/db2/namespacepriv.html#af88c142a935f18fc3794a6a8f2bebaf7">priv::Polygon</a></div><div class="ttdeci">Slic3r::Polygon Polygon</div><div class="ttdef"><b>Definition</b> Emboss.cpp:34</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_acea524a90dabe50ccbd21e34e9547928"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">Slic3r::SlicingParameters::raft_layers</a></div><div class="ttdeci">size_t raft_layers() const</div><div class="ttdef"><b>Definition</b> Slicing.hpp:39</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00246">Slic3r::PrintObject::config()</a>, <a class="el" href="../../#l00672">Slic3r::diff()</a>, <a class="el" href="../../#l00352">Slic3r::get_extents()</a>, <a class="el" href="../../#l00125">Slic3r::grid()</a>, <a class="el" href="../../#l00659">Slic3r::make_circle()</a>, <a class="el" href="../../#l00416">Slic3r::offset()</a>, <a class="el" href="../../#l00039">Slic3r::SlicingParameters::raft_layers()</a>, <a class="el" href="../../#l00069">scale_</a>, <a class="el" href="../../#l00071">SCALED_EPSILON</a>, <a class="el" href="../../#l00309">Slic3r::PrintObject::slicing_parameters()</a>, <a class="el" href="../../#l00236">support_element_radius()</a>, and <a class="el" href="../../#l00704">Slic3r::union_()</a>.</p>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a68cf66066ce35e90b7d041ec4af865f4_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ad6b7427c147c841c0a8e34271053a0a6" name="ad6b7427c147c841c0a8e34271053a0a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6b7427c147c841c0a8e34271053a0a6">&#9670;&#160;</a></span>generate_branch_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::generate_branch_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">DrawArea</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>linear_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Draws circles around result_on_layer points of the influence areas. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">linear_data[in]</td><td>All currently existing influence areas with the layer they are on </td></tr>
    <tr><td class="paramname">layer_tree_polygons[out]</td><td>Resulting branch areas with the layerindex they appear on. layer_tree_polygons.size() has to be at least linear_data.size() as each Influence area in linear_data will save have at least one (that's why it's a vector&lt;vector&gt;) corresponding branch area in layer_tree_polygons. </td></tr>
    <tr><td class="paramname">inverse_tree_order[in]</td><td>A mapping that returns the child of every influence area. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 2788</span>{</div>
<div class="line"><span class="lineno"> 2789</span><span class="preprocessor">#ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 2790</span>    <span class="keywordtype">double</span> progress_total = TREE_PROGRESS_PRECALC_AVO + TREE_PROGRESS_PRECALC_COLL + TREE_PROGRESS_GENERATE_NODES + TREE_PROGRESS_AREA_CALC;</div>
<div class="line"><span class="lineno"> 2791</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> progress_report_steps = 10;</div>
<div class="line"><span class="lineno"> 2792</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> progress_inserts_check_interval = linear_data.size() / progress_report_steps;</div>
<div class="line"><span class="lineno"> 2793</span>    std::mutex critical_sections;</div>
<div class="line"><span class="lineno"> 2794</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 2795</span> </div>
<div class="line"><span class="lineno"> 2796</span>    <span class="comment">// Pre-generate a circle with correct diameter so that we don&#39;t have to recompute those (co)sines every time.</span></div>
<div class="line"><span class="lineno"> 2797</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../d8/d90/class_slic3r_1_1_polygon.html">Polygon</a> branch_circle = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2ee29be186ca1964637c245478d29ead">make_circle</a>(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a5de5cde86718e2ce9a86befa855b1c5b">branch_radius</a>, SUPPORT_TREE_CIRCLE_RESOLUTION);</div>
<div class="line"><span class="lineno"> 2798</span> </div>
<div class="line"><span class="lineno"> 2799</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, linear_data.size()),</div>
<div class="line"><span class="lineno"> 2800</span>        [&amp;volumes, &amp;config, &amp;move_bounds, &amp;linear_data, &amp;branch_circle, &amp;throw_on_cancel](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 2801</span>        for (size_t idx = range.begin(); idx &lt; range.end(); ++ idx) {</div>
<div class="line"><span class="lineno"> 2802</span>            DrawArea             &amp;draw_area  = linear_data[idx];</div>
<div class="line"><span class="lineno"> 2803</span>            const LayerIndex      layer_idx  = draw_area.element-&gt;state.layer_idx;</div>
<div class="line"><span class="lineno"> 2804</span>            const coord_t         radius     = support_element_radius(config, *draw_area.element);</div>
<div class="line"><span class="lineno"> 2805</span>            bool                  parent_uses_min = false;</div>
<div class="line"><span class="lineno"> 2806</span> </div>
<div class="line"><span class="lineno"> 2807</span>            <span class="comment">// Calculate multiple ovalized circles, to connect with every parent and child. Also generate regular circle for the current layer. Merge all these into one area.</span></div>
<div class="line"><span class="lineno"> 2808</span>            std::vector&lt;std::pair&lt;Point, coord_t&gt;&gt; movement_directions{ std::pair&lt;Point, coord_t&gt;(Point(0, 0), radius) };</div>
<div class="line"><span class="lineno"> 2809</span>            if (! draw_area.element-&gt;state.skip_ovalisation) {</div>
<div class="line"><span class="lineno"> 2810</span>                if (draw_area.child_element != nullptr) {</div>
<div class="line"><span class="lineno"> 2811</span>                    const Point movement = draw_area.child_element-&gt;state.result_on_layer - draw_area.element-&gt;state.result_on_layer;</div>
<div class="line"><span class="lineno"> 2812</span>                    movement_directions.emplace_back(movement, radius);</div>
<div class="line"><span class="lineno"> 2813</span>                }</div>
<div class="line"><span class="lineno"> 2814</span>                const SupportElements *layer_above = layer_idx + 1 &lt; LayerIndex(move_bounds.size()) ? &amp;move_bounds[layer_idx + 1] : nullptr;</div>
<div class="line"><span class="lineno"> 2815</span>                for (int32_t parent_idx : draw_area.element-&gt;parents) {</div>
<div class="line"><span class="lineno"> 2816</span>                    const SupportElement &amp;parent = (*layer_above)[parent_idx];</div>
<div class="line"><span class="lineno"> 2817</span>                    const Point movement = parent.state.result_on_layer - draw_area.element-&gt;state.result_on_layer;</div>
<div class="line"><span class="lineno"> 2818</span>                    <span class="comment">//FIXME why max(..., config.support_line_width)?</span></div>
<div class="line"><span class="lineno"> 2819</span>                    movement_directions.emplace_back(movement, std::max(support_element_radius(config, parent), config.support_line_width));</div>
<div class="line"><span class="lineno"> 2820</span>                    parent_uses_min |= parent.state.use_min_xy_dist;</div>
<div class="line"><span class="lineno"> 2821</span>                }</div>
<div class="line"><span class="lineno"> 2822</span>            }</div>
<div class="line"><span class="lineno"> 2823</span> </div>
<div class="line"><span class="lineno"> 2824</span>            const Polygons &amp;collision = volumes.getCollision(0, layer_idx, parent_uses_min || draw_area.element-&gt;state.use_min_xy_dist);</div>
<div class="line"><span class="lineno"> 2825</span>            auto generateArea = [&amp;collision, &amp;draw_area, &amp;branch_circle, branch_radius = config.branch_radius, support_line_width = config.support_line_width, &amp;movement_directions]</div>
<div class="line"><span class="lineno"> 2826</span>                    (coord_t aoffset, double &amp;max_speed) {</div>
<div class="line"><span class="lineno"> 2827</span>                Polygons poly;</div>
<div class="line"><span class="lineno"> 2828</span>                max_speed = 0;</div>
<div class="line"><span class="lineno"> 2829</span>                for (std::pair&lt;Point, coord_t&gt; movement : movement_directions) {</div>
<div class="line"><span class="lineno"> 2830</span>                    max_speed = std::max(max_speed, movement.first.cast&lt;double&gt;().norm());</div>
<div class="line"><span class="lineno"> 2831</span> </div>
<div class="line"><span class="lineno"> 2832</span>                    <span class="comment">// Visualization: https://jsfiddle.net/0zvcq39L/2/</span></div>
<div class="line"><span class="lineno"> 2833</span>                    <span class="comment">// Ovalizes the circle to an ellipse, that contains both old center and new target position.</span></div>
<div class="line"><span class="lineno"> 2834</span>                    double used_scale = (movement.second + aoffset) / (1.0 * branch_radius);</div>
<div class="line"><span class="lineno"> 2835</span>                    Point center_position = draw_area.element-&gt;state.result_on_layer + movement.first / 2;</div>
<div class="line"><span class="lineno"> 2836</span>                    const double moveX = movement.first.x() / (used_scale * branch_radius);</div>
<div class="line"><span class="lineno"> 2837</span>                    const double moveY = movement.first.y() / (used_scale * branch_radius);</div>
<div class="line"><span class="lineno"> 2838</span>                    const double vsize_inv = 0.5 / (0.01 + std::sqrt(moveX * moveX + moveY * moveY));</div>
<div class="line"><span class="lineno"> 2839</span> </div>
<div class="line"><span class="lineno"> 2840</span>                    double matrix[] = {</div>
<div class="line"><span class="lineno"> 2841</span>                        used_scale * (1 + moveX * moveX * vsize_inv),</div>
<div class="line"><span class="lineno"> 2842</span>                        used_scale * (0 + moveX * moveY * vsize_inv),</div>
<div class="line"><span class="lineno"> 2843</span>                        used_scale * (0 + moveX * moveY * vsize_inv),</div>
<div class="line"><span class="lineno"> 2844</span>                        used_scale * (1 + moveY * moveY * vsize_inv),</div>
<div class="line"><span class="lineno"> 2845</span>                    };</div>
<div class="line"><span class="lineno"> 2846</span>                    Polygon circle;</div>
<div class="line"><span class="lineno"> 2847</span>                    for (Point vertex : branch_circle)</div>
<div class="line"><span class="lineno"> 2848</span>                        circle.points.emplace_back(center_position + Point(matrix[0] * vertex.x() + matrix[1] * vertex.y(), matrix[2] * vertex.x() + matrix[3] * vertex.y()));</div>
<div class="line"><span class="lineno"> 2849</span>                    poly.emplace_back(std::move(circle));</div>
<div class="line"><span class="lineno"> 2850</span>                }</div>
<div class="line"><span class="lineno"> 2851</span> </div>
<div class="line"><span class="lineno"> 2852</span>                <span class="comment">// There seem to be some rounding errors, causing a branch to be a tiny bit further away from the model that it has to be.</span></div>
<div class="line"><span class="lineno"> 2853</span>                <span class="comment">// This can cause the tip to be slightly further away front the overhang (x/y wise) than optimal. This fixes it, and for every other part, 0.05mm will not be noticed.</span></div>
<div class="line"><span class="lineno"> 2854</span>                poly = diff_clipped(offset(union_(poly), std::min(coord_t(50), support_line_width / 4), jtMiter, 1.2), collision);</div>
<div class="line"><span class="lineno"> 2855</span>                return poly;</div>
<div class="line"><span class="lineno"> 2856</span>            };</div>
<div class="line"><span class="lineno"> 2857</span> </div>
<div class="line"><span class="lineno"> 2858</span>            <span class="comment">// Ensure branch area will not overlap with model/collision. This can happen because of e.g. ovalization or increase_until_radius.</span></div>
<div class="line"><span class="lineno"> 2859</span>            double     max_speed;</div>
<div class="line"><span class="lineno"> 2860</span>            Polygons   polygons = generateArea(0, max_speed);</div>
<div class="line"><span class="lineno"> 2861</span>            const bool fast_relative_movement = max_speed &gt; radius * 0.75;</div>
<div class="line"><span class="lineno"> 2862</span> </div>
<div class="line"><span class="lineno"> 2863</span>            if (fast_relative_movement || support_element_radius(config, *draw_area.element) - support_element_collision_radius(config, draw_area.element-&gt;state) &gt; config.support_line_width) {</div>
<div class="line"><span class="lineno"> 2864</span>                <span class="comment">// Simulate the path the nozzle will take on the outermost wall.</span></div>
<div class="line"><span class="lineno"> 2865</span>                <span class="comment">// If multiple parts exist, the outer line will not go all around the support part potentially causing support material to be printed mid air.</span></div>
<div class="line"><span class="lineno"> 2866</span>                ExPolygons nozzle_path = offset_ex(polygons, - config.support_line_width / 2);</div>
<div class="line"><span class="lineno"> 2867</span>                if (nozzle_path.size() &gt; 1) {</div>
<div class="line"><span class="lineno"> 2868</span>                    <span class="comment">// Just try to make the area a tiny bit larger.</span></div>
<div class="line"><span class="lineno"> 2869</span>                    polygons = generateArea(config.support_line_width / 2, max_speed);</div>
<div class="line"><span class="lineno"> 2870</span>                    nozzle_path = offset_ex(polygons, -config.support_line_width / 2);</div>
<div class="line"><span class="lineno"> 2871</span>                    <span class="comment">// If larger area did not fix the problem, all parts off the nozzle path that do not contain the center point are removed, hoping for the best.</span></div>
<div class="line"><span class="lineno"> 2872</span>                    if (nozzle_path.size() &gt; 1) {</div>
<div class="line"><span class="lineno"> 2873</span>                        ExPolygons polygons_with_correct_center;</div>
<div class="line"><span class="lineno"> 2874</span>                        for (ExPolygon &amp;part : nozzle_path) {</div>
<div class="line"><span class="lineno"> 2875</span>                            bool drop = false;</div>
<div class="line"><span class="lineno"> 2876</span>                            if (! part.contains(draw_area.element-&gt;state.result_on_layer)) {</div>
<div class="line"><span class="lineno"> 2877</span>                                <span class="comment">// try a fuzzy inside as sometimes the point should be on the border, but is not because of rounding errors...</span></div>
<div class="line"><span class="lineno"> 2878</span>                                Point pt = draw_area.element-&gt;state.result_on_layer;</div>
<div class="line"><span class="lineno"> 2879</span>                                move_inside(to_polygons(part), pt, 0);</div>
<div class="line"><span class="lineno"> 2880</span>                                drop = (draw_area.element-&gt;state.result_on_layer - pt).cast&lt;double&gt;().norm() &gt;= scaled&lt;double&gt;(0.025);</div>
<div class="line"><span class="lineno"> 2881</span>                            }</div>
<div class="line"><span class="lineno"> 2882</span>                            if (! drop)</div>
<div class="line"><span class="lineno"> 2883</span>                                polygons_with_correct_center.emplace_back(std::move(part));</div>
<div class="line"><span class="lineno"> 2884</span>                        }</div>
<div class="line"><span class="lineno"> 2885</span>                        <span class="comment">// Increase the area again, to ensure the nozzle path when calculated later is very similar to the one assumed above.</span></div>
<div class="line"><span class="lineno"> 2886</span>                        assert(contains(polygons, draw_area.element-&gt;state.result_on_layer));</div>
<div class="line"><span class="lineno"> 2887</span>                        polygons = diff_clipped(offset(polygons_with_correct_center, config.support_line_width / 2, jtMiter, 1.2),</div>
<div class="line"><span class="lineno"> 2888</span>                            <span class="comment">//FIXME Vojtech: Clipping may split the region into multiple pieces again, reversing the fixing effort.</span></div>
<div class="line"><span class="lineno"> 2889</span>                            collision);</div>
<div class="line"><span class="lineno"> 2890</span>                    }</div>
<div class="line"><span class="lineno"> 2891</span>                }</div>
<div class="line"><span class="lineno"> 2892</span>            }</div>
<div class="line"><span class="lineno"> 2893</span> </div>
<div class="line"><span class="lineno"> 2894</span>            draw_area.polygons = std::move(polygons);</div>
<div class="line"><span class="lineno"> 2895</span> </div>
<div class="line"><span class="lineno"> 2896</span>#ifdef SLIC3R_TREESUPPORTS_PROGRESS</div>
<div class="line"><span class="lineno"> 2897</span>            if (idx % progress_inserts_check_interval == 0) {</div>
<div class="line"><span class="lineno"> 2898</span>                std::lock_guard&lt;std::mutex&gt; critical_section_progress(critical_sections);</div>
<div class="line"><span class="lineno"> 2899</span>                progress_total += TREE_PROGRESS_GENERATE_BRANCH_AREAS / progress_report_steps;</div>
<div class="line"><span class="lineno"> 2900</span>                Progress::messageProgress(Progress::Stage::SUPPORT, progress_total * m_progress_multiplier + m_progress_offset, TREE_PROGRESS_TOTAL);</div>
<div class="line"><span class="lineno"> 2901</span>            }</div>
<div class="line"><span class="lineno"> 2902</span>#endif</div>
<div class="line"><span class="lineno"> 2903</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2904</span>        }</div>
<div class="line"><span class="lineno"> 2905</span>    });</div>
<div class="line"><span class="lineno"> 2906</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_polygon_html"><div class="ttname"><a href="../../d8/d90/class_slic3r_1_1_polygon.html">Slic3r::Polygon</a></div><div class="ttdef"><b>Definition</b> Polygon.hpp:24</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a5de5cde86718e2ce9a86befa855b1c5b"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a5de5cde86718e2ce9a86befa855b1c5b">Slic3r::FFFTreeSupport::TreeSupportSettings::branch_radius</a></div><div class="ttdeci">coord_t branch_radius</div><div class="ttdoc">Radius of a branch when it has left the tip.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:228</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00228">Slic3r::FFFTreeSupport::TreeSupportSettings::branch_radius</a>, <a class="el" href="../../#l02782">generate_branch_areas()</a>, <a class="el" href="../../#l00659">Slic3r::make_circle()</a>, and <a class="el" href="../../#l00356">Slic3r::range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03238">draw_areas()</a>, and <a class="el" href="../../#l02782">generate_branch_areas()</a>.</p>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ad6b7427c147c841c0a8e34271053a0a6_cgraph.svg" width="100%" height="464"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ad6b7427c147c841c0a8e34271053a0a6_icgraph.svg" width="598" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a176fb939fdb2bfcef9adb6b393771391" name="a176fb939fdb2bfcef9adb6b393771391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176fb939fdb2bfcef9adb6b393771391">&#9670;&#160;</a></span>generate_initial_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::generate_initial_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>print_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>overhangs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html">InterfacePlacer</a> &amp;&#160;</td>
          <td class="paramname"><em>interface_placer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the initial influence areas (that can later be propagated down) by placing them below the overhang. </p>
<p>Generates Points where the <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> should be supported and creates the areas where these points have to be placed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mesh[in]</td><td>The mesh that is currently processed. </td></tr>
    <tr><td class="paramname">move_bounds[out]</td><td>Storage for the influence areas. </td></tr>
    <tr><td class="paramname">storage[in]</td><td>Background storage, required for adding roofs. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 1217</span>{</div>
<div class="line"><span class="lineno"> 1218</span>    <span class="keyword">using                           </span>AvoidanceType = <a class="code hl_enumeration" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a0ef9b0d1194548e1a1423c2cbc12349a">TreeModelVolumes::AvoidanceType</a>;</div>
<div class="line"><span class="lineno"> 1219</span>    <a class="code hl_struct" href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html">TreeSupportMeshGroupSettings</a>    mesh_group_settings(print_object);</div>
<div class="line"><span class="lineno"> 1220</span> </div>
<div class="line"><span class="lineno"> 1221</span>    <span class="comment">// To ensure z_distance_top_layers are left empty between the overhang (zeroth empty layer), the support has to be added z_distance_top_layers+1 layers below</span></div>
<div class="line"><span class="lineno"> 1222</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> z_distance_delta = config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e96bc0b46b362062f64b7dc276c959b">z_distance_top_layers</a> + 1;</div>
<div class="line"><span class="lineno"> 1223</span> </div>
<div class="line"><span class="lineno"> 1224</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> min_xy_dist = config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e07ec0b2df8f878e998e444d191dbfc">xy_distance</a> &gt; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a510f0b550289688a5f94753933635aa8">xy_min_distance</a>;</div>
<div class="line"><span class="lineno"> 1225</span> </div>
<div class="line"><span class="lineno"> 1226</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 1227</span>    <span class="keywordflow">if</span> (mesh.overhang_areas.size() &lt;= z_distance_delta)</div>
<div class="line"><span class="lineno"> 1228</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1229</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1230</span> </div>
<div class="line"><span class="lineno"> 1231</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> connect_length = (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a> * 100. / mesh_group_settings.support_tree_top_rate) + std::max(2. * config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2bb45e2fb91055c56330da2bb7abec02">min_radius</a> - 1.0 * config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a>, 0.0);</div>
<div class="line"><span class="lineno"> 1232</span>    <span class="comment">// As r*r=x*x+y*y (circle equation): If a circle with center at (0,0) the top most point is at (0,r) as in y=r.</span></div>
<div class="line"><span class="lineno"> 1233</span>    <span class="comment">// This calculates how far one has to move on the x-axis so that y=r-support_line_width/2. </span></div>
<div class="line"><span class="lineno"> 1234</span>    <span class="comment">// In other words how far does one need to move on the x-axis to be support_line_width/2 away from the circle line.</span></div>
<div class="line"><span class="lineno"> 1235</span>    <span class="comment">// As a circle is round this length is identical for every axis as long as the 90 degrees angle between both remains.</span></div>
<div class="line"><span class="lineno"> 1236</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> circle_length_to_half_linewidth_change = config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2bb45e2fb91055c56330da2bb7abec02">min_radius</a> &lt; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a> ? </div>
<div class="line"><span class="lineno"> 1237</span>        config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2bb45e2fb91055c56330da2bb7abec02">min_radius</a> / 2 : </div>
<div class="line"><span class="lineno"> 1238</span>        <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a656b9217a2fcb6de59dc8d1eb3079cc7">sqrt</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(unscale&lt;double&gt;(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2bb45e2fb91055c56330da2bb7abec02">min_radius</a>)) - <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(unscale&lt;double&gt;(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2bb45e2fb91055c56330da2bb7abec02">min_radius</a> - config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a> / 2))));</div>
<div class="line"><span class="lineno"> 1239</span>    <span class="comment">// Extra support offset to compensate for larger tip radiis. Also outset a bit more when z overwrites xy, because supporting something with a part of a support line is better than not supporting it at all.</span></div>
<div class="line"><span class="lineno"> 1240</span>    <span class="comment">//FIXME Vojtech: This is not sufficient for support enforcers to work.</span></div>
<div class="line"><span class="lineno"> 1241</span>    <span class="comment">//FIXME There is no account for the support overhang angle.</span></div>
<div class="line"><span class="lineno"> 1242</span>    <span class="comment">//FIXME There is no account for the width of the collision regions.</span></div>
<div class="line"><span class="lineno"> 1243</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> extra_outset = std::max(<a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(0), config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2bb45e2fb91055c56330da2bb7abec02">min_radius</a> - config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a> / 2) + (min_xy_dist ? config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a> / 2 : 0)</div>
<div class="line"><span class="lineno"> 1244</span>        <span class="comment">//FIXME this is a heuristic value for support enforcers to work.</span></div>
<div class="line"><span class="lineno"> 1245</span><span class="comment">//        + 10 * config.support_line_width;</span></div>
<div class="line"><span class="lineno"> 1246</span>        ;</div>
<div class="line"><span class="lineno"> 1247</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span>  num_support_roof_layers = mesh_group_settings.support_roof_layers;</div>
<div class="line"><span class="lineno"> 1248</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span>    roof_enabled        = num_support_roof_layers &gt; 0;</div>
<div class="line"><span class="lineno"> 1249</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span>    force_tip_to_roof   = roof_enabled &amp;&amp; (interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a8dcae058c1af8be2da701a178a0aa35a">support_parameters</a>.<a class="code hl_variable" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#ad8b9b8abf60ca7ee95a151a21f679afe">soluble_interface</a> || sqr&lt;double&gt;(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2bb45e2fb91055c56330da2bb7abec02">min_radius</a>) * <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> &gt; mesh_group_settings.minimum_roof_area);</div>
<div class="line"><span class="lineno"> 1250</span>    <span class="comment">// cap for how much layer below the overhang a new support point may be added, as other than with regular support every new inserted point </span></div>
<div class="line"><span class="lineno"> 1251</span>    <span class="comment">// may cause extra material and time cost.  Could also be an user setting or differently calculated. Idea is that if an overhang </span></div>
<div class="line"><span class="lineno"> 1252</span>    <span class="comment">// does not turn valid in double the amount of layers a slope of support angle would take to travel xy_distance, nothing reasonable will come from it. </span></div>
<div class="line"><span class="lineno"> 1253</span>    <span class="comment">// The 2*z_distance_delta is only a catch for when the support angle is very high.</span></div>
<div class="line"><span class="lineno"> 1254</span>    <span class="comment">// Used only if not min_xy_dist.</span></div>
<div class="line"><span class="lineno"> 1255</span>    <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> max_overhang_insert_lag = 0;</div>
<div class="line"><span class="lineno"> 1256</span>    <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e96bc0b46b362062f64b7dc276c959b">z_distance_top_layers</a> &gt; 0) {</div>
<div class="line"><span class="lineno"> 1257</span>        max_overhang_insert_lag = 2 * config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e96bc0b46b362062f64b7dc276c959b">z_distance_top_layers</a>;</div>
<div class="line"><span class="lineno"> 1258</span>        <span class="keywordflow">if</span> (mesh_group_settings.support_angle &gt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a> &amp;&amp; mesh_group_settings.support_angle &lt; 0.5 * <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>) {</div>
<div class="line"><span class="lineno"> 1259</span>            <span class="comment">//FIXME mesh_group_settings.support_angle does not apply to enforcers and also it does not apply to automatic support angle (by half the external perimeter width).</span></div>
<div class="line"><span class="lineno"> 1260</span>            <span class="comment">//used by max_overhang_insert_lag, only if not min_xy_dist.</span></div>
<div class="line"><span class="lineno"> 1261</span>            <span class="keyword">const</span> <span class="keyword">auto</span> max_overhang_speed  = <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a0c32a3874bfc5438d11b75c9f40256d1">tan</a>(mesh_group_settings.support_angle) * config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a1987508509a360f10adc9e341ac0fc34">layer_height</a>);</div>
<div class="line"><span class="lineno"> 1262</span>            max_overhang_insert_lag = std::max(max_overhang_insert_lag, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a8870f72845efadf9af6ae0b424297aae">round_up_divide</a>(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e07ec0b2df8f878e998e444d191dbfc">xy_distance</a>, max_overhang_speed / 2));</div>
<div class="line"><span class="lineno"> 1263</span>        }</div>
<div class="line"><span class="lineno"> 1264</span>    }</div>
<div class="line"><span class="lineno"> 1265</span> </div>
<div class="line"><span class="lineno"> 1266</span>    <span class="keywordtype">size_t</span>                                          num_support_layers;</div>
<div class="line"><span class="lineno"> 1267</span>    <span class="keywordtype">int</span>                                             raft_contact_layer_idx;</div>
<div class="line"><span class="lineno"> 1268</span>    <span class="comment">// Layers with their overhang regions.</span></div>
<div class="line"><span class="lineno"> 1269</span>    std::vector&lt;std::pair&lt;size_t, const Polygons*&gt;&gt;  raw_overhangs;</div>
<div class="line"><span class="lineno"> 1270</span> </div>
<div class="line"><span class="lineno"> 1271</span>    {</div>
<div class="line"><span class="lineno"> 1272</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_raft_layers     = config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size();</div>
<div class="line"><span class="lineno"> 1273</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> first_support_layer = std::max(<span class="keywordtype">int</span>(num_raft_layers) - <span class="keywordtype">int</span>(z_distance_delta), 1);</div>
<div class="line"><span class="lineno"> 1274</span>        num_support_layers  = size_t(std::max(0, <span class="keywordtype">int</span>(print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#aea3e7f3fc4b46b4290105f655edcde47">layer_count</a>()) + <span class="keywordtype">int</span>(num_raft_layers) - <span class="keywordtype">int</span>(z_distance_delta)));</div>
<div class="line"><span class="lineno"> 1275</span>        raft_contact_layer_idx = generate_raft_contact(print_object, config, interface_placer);</div>
<div class="line"><span class="lineno"> 1276</span>        <span class="comment">// Enumerate layers for which the support tips may be generated from overhangs above.</span></div>
<div class="line"><span class="lineno"> 1277</span>        raw_overhangs.reserve(num_support_layers - first_support_layer);</div>
<div class="line"><span class="lineno"> 1278</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_idx = first_support_layer; layer_idx &lt; num_support_layers; ++ layer_idx)</div>
<div class="line"><span class="lineno"> 1279</span>            <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keywordtype">size_t</span> overhang_idx = layer_idx + z_distance_delta; ! overhangs[overhang_idx].empty())</div>
<div class="line"><span class="lineno"> 1280</span>                raw_overhangs.push_back({ layer_idx, &amp;overhangs[overhang_idx] });</div>
<div class="line"><span class="lineno"> 1281</span>    }</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>    RichInterfacePlacer rich_interface_placer{ interface_placer, volumes, force_tip_to_roof, num_support_layers, move_bounds };</div>
<div class="line"><span class="lineno"> 1284</span> </div>
<div class="line"><span class="lineno"> 1285</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, raw_overhangs.size()),</div>
<div class="line"><span class="lineno"> 1286</span>        [&amp;volumes, &amp;config, &amp;raw_overhangs, &amp;mesh_group_settings,</div>
<div class="line"><span class="lineno"> 1287</span>         min_xy_dist, roof_enabled, num_support_roof_layers, extra_outset, circle_length_to_half_linewidth_change, connect_length,</div>
<div class="line"><span class="lineno"> 1288</span>         &amp;rich_interface_placer, &amp;throw_on_cancel](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 1289</span>        for (size_t raw_overhang_idx = range.begin(); raw_overhang_idx &lt; range.end(); ++ raw_overhang_idx) {</div>
<div class="line"><span class="lineno"> 1290</span>            size_t           layer_idx    = raw_overhangs[raw_overhang_idx].first;</div>
<div class="line"><span class="lineno"> 1291</span>            const Polygons  &amp;overhang_raw = *raw_overhangs[raw_overhang_idx].second;</div>
<div class="line"><span class="lineno"> 1292</span> </div>
<div class="line"><span class="lineno"> 1293</span>            <span class="comment">// take the least restrictive avoidance possible</span></div>
<div class="line"><span class="lineno"> 1294</span>            Polygons relevant_forbidden;</div>
<div class="line"><span class="lineno"> 1295</span>            {</div>
<div class="line"><span class="lineno"> 1296</span>                const Polygons &amp;relevant_forbidden_raw = config.support_rests_on_model ?</div>
<div class="line"><span class="lineno"> 1297</span>                    volumes.getCollision(config.getRadius(0), layer_idx, min_xy_dist) :</div>
<div class="line"><span class="lineno"> 1298</span>                    volumes.getAvoidance(config.getRadius(0), layer_idx, AvoidanceType::Fast, false, min_xy_dist);</div>
<div class="line"><span class="lineno"> 1299</span>                <span class="comment">// prevent rounding errors down the line, points placed directly on the line of the forbidden area may not be added otherwise.</span></div>
<div class="line"><span class="lineno"> 1300</span>                relevant_forbidden = offset(union_ex(relevant_forbidden_raw), scaled&lt;float&gt;(0.005), jtMiter, 1.2);</div>
<div class="line"><span class="lineno"> 1301</span>            }</div>
<div class="line"><span class="lineno"> 1302</span> </div>
<div class="line"><span class="lineno"> 1303</span>            <span class="comment">// every overhang has saved if a roof should be generated for it. This can NOT be done in the for loop as an area may NOT have a roof </span></div>
<div class="line"><span class="lineno"> 1304</span>            <span class="comment">// even if it is larger than the minimum_roof_area when it is only larger because of the support horizontal expansion and </span></div>
<div class="line"><span class="lineno"> 1305</span>            <span class="comment">// it would not have a roof if the overhang is offset by support roof horizontal expansion instead. (At least this is the current behavior of the regular support)</span></div>
<div class="line"><span class="lineno"> 1306</span>            Polygons overhang_regular;</div>
<div class="line"><span class="lineno"> 1307</span>            {</div>
<div class="line"><span class="lineno"> 1308</span>                <span class="comment">// When support_offset = 0 safe_offset_inc will only be the difference between overhang_raw and relevant_forbidden, that has to be calculated anyway. </span></div>
<div class="line"><span class="lineno"> 1309</span>                overhang_regular = safe_offset_inc(overhang_raw, mesh_group_settings.support_offset, relevant_forbidden, config.min_radius * 1.75 + config.xy_min_distance, 0, 1);</div>
<div class="line"><span class="lineno"> 1310</span>                <span class="comment">//check_self_intersections(overhang_regular, &quot;overhang_regular1&quot;);</span></div>
<div class="line"><span class="lineno"> 1311</span> </div>
<div class="line"><span class="lineno"> 1312</span>                <span class="comment">// offset ensures that areas that could be supported by a part of a support line, are not considered unsupported overhang</span></div>
<div class="line"><span class="lineno"> 1313</span>                Polygons remaining_overhang = intersection(</div>
<div class="line"><span class="lineno"> 1314</span>                    diff(mesh_group_settings.support_offset == 0 ?</div>
<div class="line"><span class="lineno"> 1315</span>                            overhang_raw :</div>
<div class="line"><span class="lineno"> 1316</span>                            offset(union_ex(overhang_raw), mesh_group_settings.support_offset, jtMiter, 1.2),</div>
<div class="line"><span class="lineno"> 1317</span>                         offset(union_ex(overhang_regular), config.support_line_width * 0.5, jtMiter, 1.2)),</div>
<div class="line"><span class="lineno"> 1318</span>                    relevant_forbidden);</div>
<div class="line"><span class="lineno"> 1319</span> </div>
<div class="line"><span class="lineno"> 1320</span>                <span class="comment">// Offset the area to compensate for large tip radiis. Offset happens in multiple steps to ensure the tip is as close to the original overhang as possible.</span></div>
<div class="line"><span class="lineno"> 1321</span>                <span class="comment">//+config.support_line_width / 80  to avoid calculating very small (useless) offsets because of rounding errors.</span></div>
<div class="line"><span class="lineno"> 1322</span>                <span class="comment">//FIXME likely a better approach would be to find correspondences between the full overhang and the trimmed overhang</span></div>
<div class="line"><span class="lineno"> 1323</span>                <span class="comment">// and if there is no correspondence, project the missing points to the clipping curve.</span></div>
<div class="line"><span class="lineno"> 1324</span>                for (coord_t extra_total_offset_acc = 0; ! remaining_overhang.empty() &amp;&amp; extra_total_offset_acc + config.support_line_width / 8 &lt; extra_outset; ) {</div>
<div class="line"><span class="lineno"> 1325</span>                    const coord_t offset_current_step = std::min(</div>
<div class="line"><span class="lineno"> 1326</span>                        extra_total_offset_acc + 2 * config.support_line_width &gt; config.min_radius ?</div>
<div class="line"><span class="lineno"> 1327</span>                            config.support_line_width / 8 : </div>
<div class="line"><span class="lineno"> 1328</span>                            circle_length_to_half_linewidth_change,</div>
<div class="line"><span class="lineno"> 1329</span>                        extra_outset - extra_total_offset_acc);</div>
<div class="line"><span class="lineno"> 1330</span>                    extra_total_offset_acc += offset_current_step;</div>
<div class="line"><span class="lineno"> 1331</span>                    const Polygons &amp;raw_collision = volumes.getCollision(0, layer_idx, true);</div>
<div class="line"><span class="lineno"> 1332</span>                    const coord_t   offset_step   = config.xy_min_distance + config.support_line_width;</div>
<div class="line"><span class="lineno"> 1333</span>                    <span class="comment">// Reducing the remaining overhang by the areas already supported.</span></div>
<div class="line"><span class="lineno"> 1334</span>                    <span class="comment">//FIXME 1.5 * extra_total_offset_acc seems to be too much, it may remove some remaining overhang without being supported at all.</span></div>
<div class="line"><span class="lineno"> 1335</span>                    remaining_overhang = diff(remaining_overhang, safe_offset_inc(overhang_regular, 1.5 * extra_total_offset_acc, raw_collision, offset_step, 0, 1));</div>
<div class="line"><span class="lineno"> 1336</span>                    <span class="comment">// Extending the overhangs by the inflated remaining overhangs.</span></div>
<div class="line"><span class="lineno"> 1337</span>                    overhang_regular   = union_(overhang_regular, diff(safe_offset_inc(remaining_overhang, extra_total_offset_acc, raw_collision, offset_step, 0, 1), relevant_forbidden));</div>
<div class="line"><span class="lineno"> 1338</span>                    <span class="comment">//check_self_intersections(overhang_regular, &quot;overhang_regular2&quot;);</span></div>
<div class="line"><span class="lineno"> 1339</span>                }</div>
<div class="line"><span class="lineno"> 1340</span>#if 0</div>
<div class="line"><span class="lineno"> 1341</span>                <span class="comment">// If the xy distance overrides the z distance, some support needs to be inserted further down.</span></div>
<div class="line"><span class="lineno"> 1342</span>                <span class="comment">//=&gt; Analyze which support points do not fit on this layer and check if they will fit a few layers down (while adding them an infinite amount of layers down would technically be closer the the setting description, it would not produce reasonable results. )</span></div>
<div class="line"><span class="lineno"> 1343</span>                if (! min_xy_dist) {</div>
<div class="line"><span class="lineno"> 1344</span>                    LineInformations overhang_lines;</div>
<div class="line"><span class="lineno"> 1345</span>                    {</div>
<div class="line"><span class="lineno"> 1346</span>                        <span class="comment">//Vojtech: Generate support heads at support_tree_branch_distance spacing by producing a zig-zag infill at support_tree_branch_distance spacing,</span></div>
<div class="line"><span class="lineno"> 1347</span>                        <span class="comment">// which is then resmapled </span></div>
<div class="line"><span class="lineno"> 1348</span>                        <span class="comment">// support_line_width to form a line here as otherwise most will be unsupported. Technically this violates branch distance, </span></div>
<div class="line"><span class="lineno"> 1349</span>                        <span class="comment">// mbut not only is this the only reasonable choice, but it ensures consistent behavior as some infill patterns generate </span></div>
<div class="line"><span class="lineno"> 1350</span>                        <span class="comment">// each line segment as its own polyline part causing a similar line forming behavior. Also it is assumed that </span></div>
<div class="line"><span class="lineno"> 1351</span>                        <span class="comment">// the area that is valid a layer below is to small for support roof.</span></div>
<div class="line"><span class="lineno"> 1352</span>                        Polylines polylines = ensure_maximum_distance_polyline(</div>
<div class="line"><span class="lineno"> 1353</span>                            generate_support_infill_lines(remaining_overhang, support_params, false, layer_idx, mesh_group_settings.support_tree_branch_distance),</div>
<div class="line"><span class="lineno"> 1354</span>                            config.min_radius, 1);</div>
<div class="line"><span class="lineno"> 1355</span>                        if (polylines.size() &lt;= 3)</div>
<div class="line"><span class="lineno"> 1356</span>                            <span class="comment">// add the outer wall to ensure it is correct supported instead</span></div>
<div class="line"><span class="lineno"> 1357</span>                            polylines = ensure_maximum_distance_polyline(to_polylines(remaining_overhang), connect_length, 3);</div>
<div class="line"><span class="lineno"> 1358</span>                        for (const auto &amp;line : polylines) {</div>
<div class="line"><span class="lineno"> 1359</span>                            LineInformation res_line;</div>
<div class="line"><span class="lineno"> 1360</span>                            for (Point p : line)</div>
<div class="line"><span class="lineno"> 1361</span>                                res_line.emplace_back(p, LineStatus::INVALID);</div>
<div class="line"><span class="lineno"> 1362</span>                            overhang_lines.emplace_back(res_line);</div>
<div class="line"><span class="lineno"> 1363</span>                        }</div>
<div class="line"><span class="lineno"> 1364</span>                        validate_range(overhang_lines);</div>
<div class="line"><span class="lineno"> 1365</span>                    }</div>
<div class="line"><span class="lineno"> 1366</span>                    for (size_t lag_ctr = 1; lag_ctr &lt;= max_overhang_insert_lag &amp;&amp; !overhang_lines.empty() &amp;&amp; layer_idx - coord_t(lag_ctr) &gt;= 1; lag_ctr++) {</div>
<div class="line"><span class="lineno"> 1367</span>                        <span class="comment">// get least restricted avoidance for layer_idx-lag_ctr</span></div>
<div class="line"><span class="lineno"> 1368</span>                        const Polygons &amp;relevant_forbidden_below = config.support_rests_on_model ? </div>
<div class="line"><span class="lineno"> 1369</span>                            volumes.getCollision(config.getRadius(0), layer_idx - lag_ctr, min_xy_dist) :</div>
<div class="line"><span class="lineno"> 1370</span>                            volumes.getAvoidance(config.getRadius(0), layer_idx - lag_ctr, AvoidanceType::Fast, false, min_xy_dist);</div>
<div class="line"><span class="lineno"> 1371</span>                        <span class="comment">// it is not required to offset the forbidden area here as the points wont change: If points here are not inside the forbidden area neither will they be later when placing these points, as these are the same points.</span></div>
<div class="line"><span class="lineno"> 1372</span>                        auto evaluatePoint = [&amp;](std::pair&lt;Point, LineStatus&gt; p) { return contains(relevant_forbidden_below, p.first); };</div>
<div class="line"><span class="lineno"> 1373</span> </div>
<div class="line"><span class="lineno"> 1374</span>                        std::pair&lt;LineInformations, LineInformations&gt; split = split_lines(overhang_lines, evaluatePoint); <span class="comment">// keep all lines that are invalid</span></div>
<div class="line"><span class="lineno"> 1375</span>                        overhang_lines = split.first;</div>
<div class="line"><span class="lineno"> 1376</span>                        <span class="comment">// Set all now valid lines to their correct LineStatus. Easiest way is to just discard Avoidance information for each point and evaluate them again.</span></div>
<div class="line"><span class="lineno"> 1377</span>                        LineInformations fresh_valid_points = convert_lines_to_internal(volumes, config, convert_internal_to_lines(split.second), layer_idx - lag_ctr);</div>
<div class="line"><span class="lineno"> 1378</span>                        validate_range(fresh_valid_points);</div>
<div class="line"><span class="lineno"> 1379</span> </div>
<div class="line"><span class="lineno"> 1380</span>                        rich_interface_placer.add_points_along_lines(fresh_valid_points, (force_tip_to_roof &amp;&amp; lag_ctr &lt;= num_support_roof_layers) ? num_support_roof_layers : 0, layer_idx - lag_ctr, false, roof_enabled ? num_support_roof_layers : 0);</div>
<div class="line"><span class="lineno"> 1381</span>                    }</div>
<div class="line"><span class="lineno"> 1382</span>                }</div>
<div class="line"><span class="lineno"> 1383</span>#endif</div>
<div class="line"><span class="lineno"> 1384</span>            }</div>
<div class="line"><span class="lineno"> 1385</span> </div>
<div class="line"><span class="lineno"> 1386</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 1387</span> </div>
<div class="line"><span class="lineno"> 1388</span>            if (roof_enabled) {</div>
<div class="line"><span class="lineno"> 1389</span>                <span class="comment">// Try to support the overhangs by dense interfaces for num_support_roof_layers, cover the bottom most interface with tree tips.</span></div>
<div class="line"><span class="lineno"> 1390</span>                static constexpr const coord_t support_roof_offset = 0;</div>
<div class="line"><span class="lineno"> 1391</span>                Polygons overhang_roofs = safe_offset_inc(overhang_raw, support_roof_offset, relevant_forbidden, config.min_radius * 2 + config.xy_min_distance, 0, 1);</div>
<div class="line"><span class="lineno"> 1392</span>                if (mesh_group_settings.minimum_support_area &gt; 0)</div>
<div class="line"><span class="lineno"> 1393</span>                    remove_small(overhang_roofs, mesh_group_settings.minimum_roof_area);</div>
<div class="line"><span class="lineno"> 1394</span>                overhang_regular = diff(overhang_regular, overhang_roofs, ApplySafetyOffset::Yes);</div>
<div class="line"><span class="lineno"> 1395</span>                <span class="comment">//check_self_intersections(overhang_regular, &quot;overhang_regular3&quot;);</span></div>
<div class="line"><span class="lineno"> 1396</span>                for (ExPolygon &amp;roof_part : union_ex(overhang_roofs)) {</div>
<div class="line"><span class="lineno"> 1397</span>                    sample_overhang_area(to_polygons(std::move(roof_part)), true, layer_idx, num_support_roof_layers, connect_length,</div>
<div class="line"><span class="lineno"> 1398</span>                        mesh_group_settings, rich_interface_placer);</div>
<div class="line"><span class="lineno"> 1399</span>                    throw_on_cancel();</div>
<div class="line"><span class="lineno"> 1400</span>                }</div>
<div class="line"><span class="lineno"> 1401</span>            }</div>
<div class="line"><span class="lineno"> 1402</span>            <span class="comment">// Either the roof is not enabled, then these are all the overhangs to be supported,</span></div>
<div class="line"><span class="lineno"> 1403</span>            <span class="comment">// or roof is enabled and these are the thin overhangs at object slopes (not horizontal overhangs).</span></div>
<div class="line"><span class="lineno"> 1404</span>            if (mesh_group_settings.minimum_support_area &gt; 0)</div>
<div class="line"><span class="lineno"> 1405</span>                remove_small(overhang_regular, mesh_group_settings.minimum_support_area);</div>
<div class="line"><span class="lineno"> 1406</span>            for (ExPolygon &amp;support_part : union_ex(overhang_regular)) {</div>
<div class="line"><span class="lineno"> 1407</span>                sample_overhang_area(to_polygons(std::move(support_part)), </div>
<div class="line"><span class="lineno"> 1408</span>                    false, layer_idx, num_support_roof_layers, connect_length,</div>
<div class="line"><span class="lineno"> 1409</span>                    mesh_group_settings, rich_interface_placer);</div>
<div class="line"><span class="lineno"> 1410</span>                throw_on_cancel();</div>
<div class="line"><span class="lineno"> 1411</span>            }</div>
<div class="line"><span class="lineno"> 1412</span>        }</div>
<div class="line"><span class="lineno"> 1413</span>    });</div>
<div class="line"><span class="lineno"> 1414</span> </div>
<div class="line"><span class="lineno"> 1415</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a68cf66066ce35e90b7d041ec4af865f4">finalize_raft_contact</a>(print_object, raft_contact_layer_idx, interface_placer.<a class="code hl_function" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a4ee7580f2f06b40775d9e797ec1a58c0">top_contacts_mutable</a>(), move_bounds);</div>
<div class="line"><span class="lineno"> 1416</span>}</div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a0c32a3874bfc5438d11b75c9f40256d1"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a0c32a3874bfc5438d11b75c9f40256d1">tan</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const TanReturnType tan() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:234</div></div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a656b9217a2fcb6de59dc8d1eb3079cc7"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a656b9217a2fcb6de59dc8d1eb3079cc7">sqrt</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const SqrtReturnType sqrt() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:152</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer_html_a4ee7580f2f06b40775d9e797ec1a58c0"><div class="ttname"><a href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a4ee7580f2f06b40775d9e797ec1a58c0">Slic3r::FFFTreeSupport::InterfacePlacer::top_contacts_mutable</a></div><div class="ttdeci">SupportGeneratorLayersPtr &amp; top_contacts_mutable()</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:534</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer_html_a8dcae058c1af8be2da701a178a0aa35a"><div class="ttname"><a href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a8dcae058c1af8be2da701a178a0aa35a">Slic3r::FFFTreeSupport::InterfacePlacer::support_parameters</a></div><div class="ttdeci">const SupportParameters &amp; support_parameters</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:532</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_aea3e7f3fc4b46b4290105f655edcde47"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#aea3e7f3fc4b46b4290105f655edcde47">Slic3r::PrintObject::layer_count</a></div><div class="ttdeci">size_t layer_count() const</div><div class="ttdef"><b>Definition</b> Print.hpp:278</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a68cf66066ce35e90b7d041ec4af865f4"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a68cf66066ce35e90b7d041ec4af865f4">Slic3r::FFFTreeSupport::finalize_raft_contact</a></div><div class="ttdeci">void finalize_raft_contact(const PrintObject &amp;print_object, const int raft_contact_layer_idx, SupportGeneratorLayersPtr &amp;top_contacts, std::vector&lt; SupportElements &gt; &amp;move_bounds)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1000</div></div>
<div class="ttc" id="anamespace_slic3r_html_a8870f72845efadf9af6ae0b424297aae"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a8870f72845efadf9af6ae0b424297aae">Slic3r::round_up_divide</a></div><div class="ttdeci">INDEX_TYPE round_up_divide(const INDEX_TYPE dividend, const INDEX_TYPE divisor)</div><div class="ttdef"><b>Definition</b> Utils.hpp:213</div></div>
<div class="ttc" id="anamespace_slic3r_html_a9f09756940b3eb2052058460bf07e4a3"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">Slic3r::sqr</a></div><div class="ttdeci">constexpr T sqr(T x)</div><div class="ttdef"><b>Definition</b> libslic3r.h:258</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_support_1_1_support_parameters_html_ad8b9b8abf60ca7ee95a151a21f679afe"><div class="ttname"><a href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#ad8b9b8abf60ca7ee95a151a21f679afe">Slic3r::FFFSupport::SupportParameters::soluble_interface</a></div><div class="ttdeci">bool soluble_interface</div><div class="ttdef"><b>Definition</b> SupportParameters.hpp:18</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings_html"><div class="ttname"><a href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings</a></div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:37</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a2bb45e2fb91055c56330da2bb7abec02"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2bb45e2fb91055c56330da2bb7abec02">Slic3r::FFFTreeSupport::TreeSupportSettings::min_radius</a></div><div class="ttdeci">coord_t min_radius</div><div class="ttdoc">smallest allowed radius, required to ensure that even at DTT 0 every circle will still be printed</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:232</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a2e96bc0b46b362062f64b7dc276c959b"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e96bc0b46b362062f64b7dc276c959b">Slic3r::FFFTreeSupport::TreeSupportSettings::z_distance_top_layers</a></div><div class="ttdeci">size_t z_distance_top_layers</div><div class="ttdoc">Amount of layers distance required the top of the support to the model.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:297</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_aaea24167882a3e568a7a93d7922f6ab4"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a></div><div class="ttdeci">std::vector&lt; coordf_t &gt; raft_layers</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:358</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_ac8307cf32d0d6f362e1c34eb7753b74d"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">Slic3r::FFFTreeSupport::TreeSupportSettings::support_line_width</a></div><div class="ttdeci">coord_t support_line_width</div><div class="ttdoc">Width of a single line of support.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:220</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00051">EPSILON</a>, <a class="el" href="../../#l01209">generate_initial_areas()</a>, <a class="el" href="../../#l00979">generate_raft_contact()</a>, <a class="el" href="../../#l00278">Slic3r::PrintObject::layer_count()</a>, <a class="el" href="../../#l00224">Slic3r::FFFTreeSupport::TreeSupportSettings::layer_height</a>, <a class="el" href="../../#l00020">M_PI</a>, <a class="el" href="../../#l00232">Slic3r::FFFTreeSupport::TreeSupportSettings::min_radius</a>, <a class="el" href="../../#l00107">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::minimum_roof_area</a>, <a class="el" href="../../#l00358">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a>, <a class="el" href="../../#l00356">Slic3r::range()</a>, <a class="el" href="../../#l00213">Slic3r::round_up_divide()</a>, <a class="el" href="../../#l00069">scale_</a>, <a class="el" href="../../#l00018">Slic3r::FFFSupport::SupportParameters::soluble_interface</a>, <a class="el" href="../../#l00258">Slic3r::sqr()</a>, <a class="el" href="../../#l00152">sqrt()</a>, <a class="el" href="../../#l00061">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::support_angle</a>, <a class="el" href="../../#l00220">Slic3r::FFFTreeSupport::TreeSupportSettings::support_line_width</a>, <a class="el" href="../../#l00532">Slic3r::FFFTreeSupport::InterfacePlacer::support_parameters</a>, <a class="el" href="../../#l00102">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::support_roof_layers</a>, <a class="el" href="../../#l00194">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::support_tree_top_rate</a>, <a class="el" href="../../#l00234">tan()</a>, <a class="el" href="../../#l00276">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_distance</a>, <a class="el" href="../../#l00293">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_min_distance</a>, and <a class="el" href="../../#l00297">Slic3r::FFFTreeSupport::TreeSupportSettings::z_distance_top_layers</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01209">generate_initial_areas()</a>, and <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a176fb939fdb2bfcef9adb6b393771391_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a176fb939fdb2bfcef9adb6b393771391_icgraph.svg" width="384" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac3e3c47728795e00a4099047c5ebc5a7" name="ac3e3c47728795e00a4099047c5ebc5a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3e3c47728795e00a4099047c5ebc5a7">&#9670;&#160;</a></span>generate_overhangs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; Slic3r::FFFTreeSupport::generate_overhangs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>print_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  193</span>{</div>
<div class="line"><span class="lineno">  194</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_raft_layers   = settings.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size();</div>
<div class="line"><span class="lineno">  195</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_object_layers = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#aea3e7f3fc4b46b4290105f655edcde47">layer_count</a>();</div>
<div class="line"><span class="lineno">  196</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_layers        = num_object_layers + num_raft_layers;</div>
<div class="line"><span class="lineno">  197</span>    std::vector&lt;Polygons&gt; out(num_layers, <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>{});</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <span class="keyword">const</span> PrintConfig       &amp;print_config           = print_object.<a class="code hl_function" href="../../d6/d0d/class_slic3r_1_1_print_object_base_with_state.html#aac73b24e3c0c005584ab03214116041e">print</a>()-&gt;<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#af1937a680d19c7dd8d3c24e5ff7332b8">config</a>();</div>
<div class="line"><span class="lineno">  200</span>    <span class="keyword">const</span> <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a341d40f47c645aae18d24a020fd3c01c">PrintObjectConfig</a> &amp;config                 = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#abde3ac4f19e1f9d342423a7643e17266">config</a>();</div>
<div class="line"><span class="lineno">  201</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span>               support_auto           = config.support_material.value &amp;&amp; config.support_material_auto.value;</div>
<div class="line"><span class="lineno">  202</span>    <span class="keyword">const</span> <span class="keywordtype">int</span>                support_enforce_layers = config.support_material_enforce_layers.value;</div>
<div class="line"><span class="lineno">  203</span>    std::vector&lt;Polygons&gt;    enforcers_layers{ print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a9d8f15c559b04e238ac1066bc20975ab">slice_support_enforcers</a>() };</div>
<div class="line"><span class="lineno">  204</span>    std::vector&lt;Polygons&gt;    blockers_layers{ print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#ae96af7161a2c596e832879eea8e95f5c">slice_support_blockers</a>() };</div>
<div class="line"><span class="lineno">  205</span>    print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a3b3906b04b6ef3f958b5cc95f4720a30">project_and_append_custom_facets</a>(<span class="keyword">false</span>, EnforcerBlockerType::ENFORCER, enforcers_layers);</div>
<div class="line"><span class="lineno">  206</span>    print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a3b3906b04b6ef3f958b5cc95f4720a30">project_and_append_custom_facets</a>(<span class="keyword">false</span>, EnforcerBlockerType::BLOCKER, blockers_layers);</div>
<div class="line"><span class="lineno">  207</span>    <span class="keyword">const</span> <span class="keywordtype">int</span>                support_threshold      = config.support_material_threshold.value;</div>
<div class="line"><span class="lineno">  208</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span>               support_threshold_auto = support_threshold == 0;</div>
<div class="line"><span class="lineno">  209</span>    <span class="comment">// +1 makes the threshold inclusive</span></div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordtype">double</span>                   tan_threshold          = support_threshold_auto ? 0. : <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a0c32a3874bfc5438d11b75c9f40256d1">tan</a>(<a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * <span class="keywordtype">double</span>(support_threshold + 1) / 180.);</div>
<div class="line"><span class="lineno">  211</span>    <span class="comment">//FIXME this is a fudge constant!</span></div>
<div class="line"><span class="lineno">  212</span>    <span class="keyword">auto</span>                     enforcer_overhang_offset = scaled&lt;double&gt;(config.support_tree_tip_diameter.value);</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordtype">size_t</span> num_overhang_layers = support_auto ? num_object_layers : std::min(num_object_layers, std::max(<span class="keywordtype">size_t</span>(support_enforce_layers), enforcers_layers.size()));</div>
<div class="line"><span class="lineno">  215</span>    tbb::parallel_for(tbb::blocked_range&lt;LayerIndex&gt;(1, num_overhang_layers),</div>
<div class="line"><span class="lineno">  216</span>        [&amp;print_object, &amp;config, &amp;print_config, &amp;enforcers_layers, &amp;blockers_layers, </div>
<div class="line"><span class="lineno">  217</span>         support_auto, support_enforce_layers, support_threshold_auto, tan_threshold, enforcer_overhang_offset, num_raft_layers, &amp;throw_on_cancel, &amp;out]</div>
<div class="line"><span class="lineno">  218</span>        (<span class="keyword">const</span> tbb::blocked_range&lt;LayerIndex&gt; &amp;range) {</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">for</span> (LayerIndex layer_id = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.begin(); layer_id &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.end(); ++ layer_id) {</div>
<div class="line"><span class="lineno">  220</span>            <span class="keyword">const</span> Layer   &amp;current_layer  = *print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#aeb29a80908c06dd8644112f4cfff9354">get_layer</a>(layer_id);</div>
<div class="line"><span class="lineno">  221</span>            <span class="keyword">const</span> Layer   &amp;lower_layer    = *print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#aeb29a80908c06dd8644112f4cfff9354">get_layer</a>(layer_id - 1);</div>
<div class="line"><span class="lineno">  222</span>            <span class="comment">// Full overhangs with zero lower_layer_offset and no blockers applied.</span></div>
<div class="line"><span class="lineno">  223</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>       raw_overhangs;</div>
<div class="line"><span class="lineno">  224</span>            <span class="keywordtype">bool</span>           raw_overhangs_calculated = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  225</span>            <span class="comment">// Final overhangs.</span></div>
<div class="line"><span class="lineno">  226</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>       overhangs;</div>
<div class="line"><span class="lineno">  227</span>            <span class="comment">// For how many layers full overhangs shall be supported.</span></div>
<div class="line"><span class="lineno">  228</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span>     enforced_layer = layer_id &lt; support_enforce_layers;</div>
<div class="line"><span class="lineno">  229</span>            <span class="keywordflow">if</span> (support_auto || enforced_layer) {</div>
<div class="line"><span class="lineno">  230</span>                <span class="keywordtype">float</span> lower_layer_offset;</div>
<div class="line"><span class="lineno">  231</span>                <span class="keywordflow">if</span> (enforced_layer)</div>
<div class="line"><span class="lineno">  232</span>                    lower_layer_offset = 0;</div>
<div class="line"><span class="lineno">  233</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (support_threshold_auto) {</div>
<div class="line"><span class="lineno">  234</span>                    <span class="keywordtype">float</span> external_perimeter_width = 0;</div>
<div class="line"><span class="lineno">  235</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> LayerRegion *layerm : lower_layer.regions())</div>
<div class="line"><span class="lineno">  236</span>                        external_perimeter_width += layerm-&gt;flow(<a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a4bcb312043a874462f942e362c16567aa73b23230c5b13dd721893c50d09a9d5f">frExternalPerimeter</a>).scaled_width();</div>
<div class="line"><span class="lineno">  237</span>                    external_perimeter_width /= lower_layer.region_count();</div>
<div class="line"><span class="lineno">  238</span>                    lower_layer_offset = float(0.5 * external_perimeter_width);</div>
<div class="line"><span class="lineno">  239</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  240</span>                    lower_layer_offset = scaled&lt;float&gt;(lower_layer.height / tan_threshold);</div>
<div class="line"><span class="lineno">  241</span>                overhangs = lower_layer_offset == 0 ?</div>
<div class="line"><span class="lineno">  242</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(current_layer.lslices, lower_layer.lslices) :</div>
<div class="line"><span class="lineno">  243</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(current_layer.lslices, <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(lower_layer.lslices, lower_layer_offset));</div>
<div class="line"><span class="lineno">  244</span>                <span class="keywordflow">if</span> (lower_layer_offset == 0) {</div>
<div class="line"><span class="lineno">  245</span>                    raw_overhangs = overhangs;</div>
<div class="line"><span class="lineno">  246</span>                    raw_overhangs_calculated = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  247</span>                }</div>
<div class="line"><span class="lineno">  248</span>                <span class="keywordflow">if</span> (! (enforced_layer || blockers_layers.empty() || blockers_layers[layer_id].empty()))</div>
<div class="line"><span class="lineno">  249</span>                    overhangs = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(overhangs, blockers_layers[layer_id], ApplySafetyOffset::Yes);</div>
<div class="line"><span class="lineno">  250</span>                <span class="keywordflow">if</span> (config.dont_support_bridges) {</div>
<div class="line"><span class="lineno">  251</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> LayerRegion *layerm : current_layer.regions())</div>
<div class="line"><span class="lineno">  252</span>                        <a class="code hl_function" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#af1fbff97a61de865b1f37a292a0fda11">remove_bridges_from_contacts</a>(print_config, lower_layer, *layerm, </div>
<div class="line"><span class="lineno">  253</span>                            float(layerm-&gt;flow(<a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a4bcb312043a874462f942e362c16567aa73b23230c5b13dd721893c50d09a9d5f">frExternalPerimeter</a>).scaled_width()), overhangs);</div>
<div class="line"><span class="lineno">  254</span>                }</div>
<div class="line"><span class="lineno">  255</span>            }</div>
<div class="line"><span class="lineno">  256</span>            <span class="comment">//check_self_intersections(overhangs, &quot;generate_overhangs1&quot;);</span></div>
<div class="line"><span class="lineno">  257</span>            <span class="keywordflow">if</span> (! enforcers_layers.empty() &amp;&amp; ! enforcers_layers[layer_id].empty()) {</div>
<div class="line"><span class="lineno">  258</span>                <span class="comment">// Has some support enforcers at this layer, apply them to the overhangs, don&#39;t apply the support threshold angle.</span></div>
<div class="line"><span class="lineno">  259</span>                <span class="comment">//enforcers_layers[layer_id] = union_(enforcers_layers[layer_id]);</span></div>
<div class="line"><span class="lineno">  260</span>                <span class="comment">//check_self_intersections(enforcers_layers[layer_id], &quot;generate_overhangs - enforcers&quot;);</span></div>
<div class="line"><span class="lineno">  261</span>                <span class="comment">//check_self_intersections(to_polygons(lower_layer.lslices), &quot;generate_overhangs - lowerlayers&quot;);</span></div>
<div class="line"><span class="lineno">  262</span>                <span class="keywordflow">if</span> (Polygons enforced_overhangs = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">intersection</a>(raw_overhangs_calculated ? raw_overhangs : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(current_layer.lslices, lower_layer.lslices), enforcers_layers[layer_id] <span class="comment">/*, ApplySafetyOffset::Yes */</span>);</div>
<div class="line"><span class="lineno">  263</span>                    ! enforced_overhangs.empty()) {</div>
<div class="line"><span class="lineno">  264</span>                    <span class="comment">//FIXME this is a hack to make enforcers work on steep overhangs.</span></div>
<div class="line"><span class="lineno">  265</span>                    <span class="comment">//check_self_intersections(enforced_overhangs, &quot;generate_overhangs - enforced overhangs1&quot;);</span></div>
<div class="line"><span class="lineno">  266</span>                    <span class="comment">//Polygons enforced_overhangs_prev = enforced_overhangs;</span></div>
<div class="line"><span class="lineno">  267</span>                    <span class="comment">//check_self_intersections(to_polygons(union_ex(enforced_overhangs)), &quot;generate_overhangs - enforced overhangs11&quot;);</span></div>
<div class="line"><span class="lineno">  268</span>                    <span class="comment">//check_self_intersections(offset(union_ex(enforced_overhangs),</span></div>
<div class="line"><span class="lineno">  269</span>                    <span class="comment">//FIXME enforcer_overhang_offset is a fudge constant!</span></div>
<div class="line"><span class="lineno">  270</span>                    enforced_overhangs = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(enforced_overhangs), enforcer_overhang_offset),</div>
<div class="line"><span class="lineno">  271</span>                        lower_layer.lslices);</div>
<div class="line"><span class="lineno">  272</span><span class="preprocessor">#ifdef TREESUPPORT_DEBUG_SVG</span></div>
<div class="line"><span class="lineno">  273</span><span class="comment">//                    if (! intersecting_edges(enforced_overhangs).empty()) </span></div>
<div class="line"><span class="lineno">  274</span>                    {</div>
<div class="line"><span class="lineno">  275</span>                        <span class="keyword">static</span> <span class="keywordtype">int</span> irun = 0;</div>
<div class="line"><span class="lineno">  276</span>                        SVG::export_expolygons(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;treesupport-self-intersections-%d.svg&quot;</span>, ++irun),</div>
<div class="line"><span class="lineno">  277</span>                            { { { current_layer.lslices },        { <span class="stringliteral">&quot;current_layer.lslices&quot;</span>, <span class="stringliteral">&quot;yellow&quot;</span>, 0.5f } },</div>
<div class="line"><span class="lineno">  278</span>                              { { lower_layer.lslices },          { <span class="stringliteral">&quot;lower_layer.lslices&quot;</span>, <span class="stringliteral">&quot;gray&quot;</span>, 0.5f } },</div>
<div class="line"><span class="lineno">  279</span>                              { { <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(enforced_overhangs) }, { <span class="stringliteral">&quot;enforced_overhangs&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>,  <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, scaled&lt;coord_t&gt;(0.1f), 0.5f } } });</div>
<div class="line"><span class="lineno">  280</span>                    }</div>
<div class="line"><span class="lineno">  281</span><span class="preprocessor">#endif </span><span class="comment">// TREESUPPORT_DEBUG_SVG</span></div>
<div class="line"><span class="lineno">  282</span>                    <span class="comment">//check_self_intersections(enforced_overhangs, &quot;generate_overhangs - enforced overhangs2&quot;);</span></div>
<div class="line"><span class="lineno">  283</span>                    overhangs = overhangs.empty() ? std::move(enforced_overhangs) : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(overhangs, enforced_overhangs);</div>
<div class="line"><span class="lineno">  284</span>                    <span class="comment">//check_self_intersections(overhangs, &quot;generate_overhangs - enforcers&quot;);</span></div>
<div class="line"><span class="lineno">  285</span>                }</div>
<div class="line"><span class="lineno">  286</span>            }   </div>
<div class="line"><span class="lineno">  287</span>            out[layer_id + num_raft_layers] = std::move(overhangs);</div>
<div class="line"><span class="lineno">  288</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno">  289</span>        }</div>
<div class="line"><span class="lineno">  290</span>    });</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">if</span> (num_raft_layers &gt; 0) {</div>
<div class="line"><span class="lineno">  294</span>        <span class="keyword">const</span> Layer   &amp;first_layer = *print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#aeb29a80908c06dd8644112f4cfff9354">get_layer</a>(0);</div>
<div class="line"><span class="lineno">  295</span>        <span class="comment">// Final overhangs.</span></div>
<div class="line"><span class="lineno">  296</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>       overhangs = </div>
<div class="line"><span class="lineno">  297</span>            <span class="comment">// Don&#39;t apply blockes on raft layer.</span></div>
<div class="line"><span class="lineno">  298</span>            <span class="comment">//(! blockers_layers.empty() &amp;&amp; ! blockers_layers[layer_id].empty() ? </span></div>
<div class="line"><span class="lineno">  299</span>            <span class="comment">//    diff(first_layer.lslices, blockers_layers[layer_id], ApplySafetyOffset::Yes) :</span></div>
<div class="line"><span class="lineno">  300</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">to_polygons</a>(first_layer.lslices);</div>
<div class="line"><span class="lineno">  301</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  302</span>        <span class="keywordflow">if</span> (! enforcers_layers.empty() &amp;&amp; ! enforcers_layers[layer_id].empty()) {</div>
<div class="line"><span class="lineno">  303</span>            <span class="keywordflow">if</span> (Polygons enforced_overhangs = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">intersection</a>(first_layer.lslices, enforcers_layers[layer_id] <span class="comment">/*, ApplySafetyOffset::Yes */</span>);</div>
<div class="line"><span class="lineno">  304</span>                ! enforced_overhangs.empty()) {</div>
<div class="line"><span class="lineno">  305</span>                <span class="comment">//FIXME this is a hack to make enforcers work on steep overhangs.</span></div>
<div class="line"><span class="lineno">  306</span>                <span class="comment">//FIXME enforcer_overhang_offset is a fudge constant!</span></div>
<div class="line"><span class="lineno">  307</span>                enforced_overhangs = <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(enforced_overhangs), enforcer_overhang_offset);</div>
<div class="line"><span class="lineno">  308</span>                overhangs = overhangs.empty() ? std::move(enforced_overhangs) : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(overhangs, enforced_overhangs);</div>
<div class="line"><span class="lineno">  309</span>            }</div>
<div class="line"><span class="lineno">  310</span>        }   </div>
<div class="line"><span class="lineno">  311</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  312</span>        out[num_raft_layers] = std::move(overhangs);</div>
<div class="line"><span class="lineno">  313</span>        throw_on_cancel();</div>
<div class="line"><span class="lineno">  314</span>    }</div>
<div class="line"><span class="lineno">  315</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  318</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_print_html_af1937a680d19c7dd8d3c24e5ff7332b8"><div class="ttname"><a href="../../d5/d8f/class_slic3r_1_1_print.html#af1937a680d19c7dd8d3c24e5ff7332b8">Slic3r::Print::config</a></div><div class="ttdeci">const PrintConfig &amp; config() const</div><div class="ttdef"><b>Definition</b> Print.hpp:597</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_base_with_state_html_aac73b24e3c0c005584ab03214116041e"><div class="ttname"><a href="../../d6/d0d/class_slic3r_1_1_print_object_base_with_state.html#aac73b24e3c0c005584ab03214116041e">Slic3r::PrintObjectBaseWithState::print</a></div><div class="ttdeci">PrintType * print()</div><div class="ttdef"><b>Definition</b> PrintBase.hpp:735</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_a3b3906b04b6ef3f958b5cc95f4720a30"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#a3b3906b04b6ef3f958b5cc95f4720a30">Slic3r::PrintObject::project_and_append_custom_facets</a></div><div class="ttdeci">void project_and_append_custom_facets(bool seam, EnforcerBlockerType type, std::vector&lt; Polygons &gt; &amp;expolys) const</div><div class="ttdef"><b>Definition</b> PrintObject.cpp:3066</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_a9d8f15c559b04e238ac1066bc20975ab"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#a9d8f15c559b04e238ac1066bc20975ab">Slic3r::PrintObject::slice_support_enforcers</a></div><div class="ttdeci">std::vector&lt; Polygons &gt; slice_support_enforcers() const</div><div class="ttdef"><b>Definition</b> Print.hpp:333</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_ae96af7161a2c596e832879eea8e95f5c"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#ae96af7161a2c596e832879eea8e95f5c">Slic3r::PrintObject::slice_support_blockers</a></div><div class="ttdeci">std::vector&lt; Polygons &gt; slice_support_blockers() const</div><div class="ttdef"><b>Definition</b> Print.hpp:332</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_aeb29a80908c06dd8644112f4cfff9354"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#aeb29a80908c06dd8644112f4cfff9354">Slic3r::PrintObject::get_layer</a></div><div class="ttdeci">const Layer * get_layer(int idx) const</div><div class="ttdef"><b>Definition</b> Print.hpp:280</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_support_html_af1fbff97a61de865b1f37a292a0fda11"><div class="ttname"><a href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#af1fbff97a61de865b1f37a292a0fda11">Slic3r::FFFSupport::remove_bridges_from_contacts</a></div><div class="ttdeci">void remove_bridges_from_contacts(const PrintConfig &amp;print_config, const Layer &amp;lower_layer, const LayerRegion &amp;layerm, float fw, Polygons &amp;contact_polygons)</div><div class="ttdef"><b>Definition</b> SupportCommon.cpp:43</div></div>
<div class="ttc" id="anamespace_slic3r_html_a341d40f47c645aae18d24a020fd3c01c"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a341d40f47c645aae18d24a020fd3c01c">Slic3r::PrintObjectConfig</a></div><div class="ttdeci">PrintObjectConfig</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:840</div></div>
<div class="ttc" id="anamespace_slic3r_html_a4bcb312043a874462f942e362c16567aa73b23230c5b13dd721893c50d09a9d5f"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a4bcb312043a874462f942e362c16567aa73b23230c5b13dd721893c50d09a9d5f">Slic3r::frExternalPerimeter</a></div><div class="ttdeci">@ frExternalPerimeter</div><div class="ttdef"><b>Definition</b> Flow.hpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_html_a51e1ea9708d6434aae1e8394bef8acdc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">Slic3r::range</a></div><div class="ttdeci">auto range(Cont &amp;&amp;cont)</div><div class="ttdef"><b>Definition</b> libslic3r.h:356</div></div>
<div class="ttc" id="anamespace_slic3r_html_a57c612ab2aa7dd29f1e7ece220e3af82"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">Slic3r::intersection</a></div><div class="ttdeci">Slic3r::Polygons intersection(const Slic3r::Polygon &amp;subject, const Slic3r::Polygon &amp;clip, ApplySafetyOffset do_safety_offset)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:686</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/db8/namespace_slic3r.html#a5ce80416d9bd655d2fb946edf0f602f0a95a95df0c5337385356cd00cbd59a000">Slic3r::BLOCKER</a>, <a class="el" href="../../#l00246">Slic3r::PrintObject::config()</a>, <a class="el" href="../../#l00597">Slic3r::Print::config()</a>, <a class="el" href="../../#l00218">Slic3r::debug_out_path()</a>, <a class="el" href="../../#l00672">Slic3r::diff()</a>, <a class="el" href="../../de/db8/namespace_slic3r.html#a5ce80416d9bd655d2fb946edf0f602f0a66623df40a88662bfd8a271edb488841">Slic3r::ENFORCER</a>, <a class="el" href="../../#l00309">Slic3r::SVG::export_expolygons()</a>, <a class="el" href="../../#l00017">Slic3r::frExternalPerimeter</a>, <a class="el" href="../../#l00280">Slic3r::PrintObject::get_layer()</a>, <a class="el" href="../../#l00325">Slic3r::Layer::height</a>, <a class="el" href="../../#l00686">Slic3r::intersection()</a>, <a class="el" href="../../#l00278">Slic3r::PrintObject::layer_count()</a>, <a class="el" href="../../#l00339">Slic3r::Layer::lslices</a>, <a class="el" href="../../#l00020">M_PI</a>, <a class="el" href="../../#l00416">Slic3r::offset()</a>, <a class="el" href="../../#l00735">Slic3r::PrintObjectBaseWithState&lt; PrintType, PrintObjectStepEnumType, COUNT &gt;::print()</a>, <a class="el" href="../../#l00840">Slic3r::PrintObjectConfig</a>, <a class="el" href="../../#l03066">Slic3r::PrintObject::project_and_append_custom_facets()</a>, <a class="el" href="../../#l00358">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a>, <a class="el" href="../../#l00356">Slic3r::range()</a>, <a class="el" href="../../#l00343">Slic3r::Layer::region_count()</a>, <a class="el" href="../../#l00347">Slic3r::Layer::regions()</a>, <a class="el" href="../../#l00043">Slic3r::FFFSupport::remove_bridges_from_contacts()</a>, <a class="el" href="../../#l00332">Slic3r::PrintObject::slice_support_blockers()</a>, <a class="el" href="../../#l00333">Slic3r::PrintObject::slice_support_enforcers()</a>, <a class="el" href="../../#l00234">tan()</a>, <a class="el" href="../../#l00281">Slic3r::to_polygons()</a>, <a class="el" href="../../#l00704">Slic3r::union_()</a>, <a class="el" href="../../#l00774">Slic3r::union_ex()</a>, and <a class="el" href="../../de/db8/namespace_slic3r.html#abc7114acd0870edd5d927289d0810309a93cba07454f06a4a960172bbd6e2a435">Slic3r::Yes</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ac3e3c47728795e00a4099047c5ebc5a7_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ac3e3c47728795e00a4099047c5ebc5a7_icgraph.svg" width="384" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a41c75893bf8acfd3cf9c90cfa06b2487" name="a41c75893bf8acfd3cf9c90cfa06b2487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c75893bf8acfd3cf9c90cfa06b2487">&#9670;&#160;</a></span>generate_raft_contact()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Slic3r::FFFTreeSupport::generate_raft_contact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>print_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html">InterfacePlacer</a> &amp;&#160;</td>
          <td class="paramname"><em>interface_placer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  983</span>{</div>
<div class="line"><span class="lineno">  984</span>    <span class="keywordtype">int</span> raft_contact_layer_idx = -1;</div>
<div class="line"><span class="lineno">  985</span>    <span class="keywordflow">if</span> (print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a03d53e81253f667df2cd8ced6527ee5d">has_raft</a>() &amp;&amp; print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#aea3e7f3fc4b46b4290105f655edcde47">layer_count</a>() &gt; 0) {</div>
<div class="line"><span class="lineno">  986</span>        <span class="comment">// Produce raft contact layer outside of the tree support loop, so that no trees will be generated for the raft contact layer.</span></div>
<div class="line"><span class="lineno">  987</span>        <span class="comment">// Raft layers supporting raft contact interface will be produced by the classic raft generator.</span></div>
<div class="line"><span class="lineno">  988</span>        <span class="comment">// Find the raft contact layer.</span></div>
<div class="line"><span class="lineno">  989</span>        raft_contact_layer_idx = int(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size()) - 1;</div>
<div class="line"><span class="lineno">  990</span>        <span class="keywordflow">while</span> (raft_contact_layer_idx &gt; 0 &amp;&amp; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>[raft_contact_layer_idx] &gt; print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#ad6d151e7f62600dc1439ebad6e198108">slicing_parameters</a>().<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae716f6f022aa86c9be6a7f05717c5287">raft_contact_top_z</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno">  991</span>            -- raft_contact_layer_idx;</div>
<div class="line"><span class="lineno">  992</span>        <span class="comment">// Create the raft contact layer.</span></div>
<div class="line"><span class="lineno">  993</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a517930244d210021577457148f9a49e3">ExPolygons</a> &amp;lslices   = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#aeb29a80908c06dd8644112f4cfff9354">get_layer</a>(0)-&gt;<a class="code hl_variable" href="../../d1/d68/class_slic3r_1_1_layer.html#a3052da5e28b9b358d43ad43d7e9173ed">lslices</a>;</div>
<div class="line"><span class="lineno">  994</span>        <span class="keywordtype">double</span>            expansion = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#abde3ac4f19e1f9d342423a7643e17266">config</a>().raft_expansion.value;</div>
<div class="line"><span class="lineno">  995</span>        interface_placer.<a class="code hl_function" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a0c7091361a618ab5188b9ffef1885531">add_roof_unguarded</a>(expansion &gt; 0 ? <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">expand</a>(lslices, scaled&lt;float&gt;(expansion)) : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">to_polygons</a>(lslices), raft_contact_layer_idx, 0);</div>
<div class="line"><span class="lineno">  996</span>    }</div>
<div class="line"><span class="lineno">  997</span>    <span class="keywordflow">return</span> raft_contact_layer_idx;</div>
<div class="line"><span class="lineno">  998</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer_html_a0c7091361a618ab5188b9ffef1885531"><div class="ttname"><a href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a0c7091361a618ab5188b9ffef1885531">Slic3r::FFFTreeSupport::InterfacePlacer::add_roof_unguarded</a></div><div class="ttdeci">void add_roof_unguarded(Polygons &amp;&amp;new_roofs, const size_t insert_layer_idx, const size_t dtt_roof)</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:561</div></div>
<div class="ttc" id="aclass_slic3r_1_1_layer_html_a3052da5e28b9b358d43ad43d7e9173ed"><div class="ttname"><a href="../../d1/d68/class_slic3r_1_1_layer.html#a3052da5e28b9b358d43ad43d7e9173ed">Slic3r::Layer::lslices</a></div><div class="ttdeci">ExPolygons lslices</div><div class="ttdef"><b>Definition</b> Layer.hpp:339</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_a03d53e81253f667df2cd8ced6527ee5d"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#a03d53e81253f667df2cd8ced6527ee5d">Slic3r::PrintObject::has_raft</a></div><div class="ttdeci">bool has_raft() const</div><div class="ttdef"><b>Definition</b> Print.hpp:319</div></div>
<div class="ttc" id="anamespace_slic3r_html_a3139b5c30f46b41a991edc50308554f6"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">Slic3r::expand</a></div><div class="ttdeci">Slic3r::Polygons expand(const Slic3r::Polygon &amp;polygon, const float delta, ClipperLib::JoinType joinType=DefaultJoinType, double miterLimit=DefaultMiterLimit)</div><div class="ttdef"><b>Definition</b> ClipperUtils.hpp:363</div></div>
<div class="ttc" id="anamespace_slic3r_html_a517930244d210021577457148f9a49e3"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a517930244d210021577457148f9a49e3">Slic3r::ExPolygons</a></div><div class="ttdeci">std::vector&lt; ExPolygon &gt; ExPolygons</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:13</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_ae716f6f022aa86c9be6a7f05717c5287"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae716f6f022aa86c9be6a7f05717c5287">Slic3r::SlicingParameters::raft_contact_top_z</a></div><div class="ttdeci">coordf_t raft_contact_top_z</div><div class="ttdef"><b>Definition</b> Slicing.hpp:95</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00561">Slic3r::FFFTreeSupport::InterfacePlacer::add_roof_unguarded()</a>, <a class="el" href="../../#l00246">Slic3r::PrintObject::config()</a>, <a class="el" href="../../#l00051">EPSILON</a>, <a class="el" href="../../#l00363">Slic3r::expand()</a>, <a class="el" href="../../#l00280">Slic3r::PrintObject::get_layer()</a>, <a class="el" href="../../#l00319">Slic3r::PrintObject::has_raft()</a>, <a class="el" href="../../#l00278">Slic3r::PrintObject::layer_count()</a>, <a class="el" href="../../#l00339">Slic3r::Layer::lslices</a>, <a class="el" href="../../#l00095">Slic3r::SlicingParameters::raft_contact_top_z</a>, <a class="el" href="../../#l00358">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a>, <a class="el" href="../../#l00309">Slic3r::PrintObject::slicing_parameters()</a>, and <a class="el" href="../../#l00281">Slic3r::to_polygons()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01209">generate_initial_areas()</a>, and <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a41c75893bf8acfd3cf9c90cfa06b2487_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a41c75893bf8acfd3cf9c90cfa06b2487_icgraph.svg" width="590" height="106"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab26bc295197117d2d20bc72c33be92f6" name="ab26bc295197117d2d20bc72c33be92f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab26bc295197117d2d20bc72c33be92f6">&#9670;&#160;</a></span>generate_support_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::generate_support_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d8f/class_slic3r_1_1_print.html">Print</a> &amp;&#160;</td>
          <td class="paramname"><em>print</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d33/class_slic3r_1_1_build_volume.html">BuildVolume</a> &amp;&#160;</td>
          <td class="paramname"><em>build_volume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>print_object_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the areas that need support. </p>
<p>These areas are stored inside the given SliceDataStorage object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storage</td><td>The data storage where the mesh data is gotten from and where the resulting support areas are stored. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 3400</span>{</div>
<div class="line"><span class="lineno"> 3401</span>    <a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aad99b24bb16e78e513e22aeff7ce50ea">g_showed_critical_error</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3402</span>    <a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af5e44c1ba8a01d2910f6bfd9941520db">g_showed_performance_warning</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3403</span> </div>
<div class="line"><span class="lineno"> 3404</span>    <span class="comment">// Settings with the indexes of meshes that use these settings.</span></div>
<div class="line"><span class="lineno"> 3405</span>    std::vector&lt;std::pair&lt;TreeSupportSettings, std::vector&lt;size_t&gt;&gt;&gt; grouped_meshes = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aeed21f68c33581eb7f3bc0b326a6bfc2">group_meshes</a>(print, print_object_ids);</div>
<div class="line"><span class="lineno"> 3406</span>    <span class="keywordflow">if</span> (grouped_meshes.empty())</div>
<div class="line"><span class="lineno"> 3407</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3408</span> </div>
<div class="line"><span class="lineno"> 3409</span>    <span class="keywordtype">size_t</span> counter = 0;</div>
<div class="line"><span class="lineno"> 3410</span> </div>
<div class="line"><span class="lineno"> 3411</span>    <span class="comment">// Process every mesh group. These groups can not be processed parallel, as the processing in each group is parallelized, and nested parallelization is disables and slow.</span></div>
<div class="line"><span class="lineno"> 3412</span>    <span class="keywordflow">for</span> (std::pair&lt;<a class="code hl_struct" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a>, std::vector&lt;size_t&gt;&gt; &amp;processing : grouped_meshes)</div>
<div class="line"><span class="lineno"> 3413</span>    {</div>
<div class="line"><span class="lineno"> 3414</span>        <span class="comment">// process each combination of meshes</span></div>
<div class="line"><span class="lineno"> 3415</span>        <span class="comment">// this struct is used to easy retrieve setting. No other function except those in TreeModelVolumes and generate_initial_areas() have knowledge of the existence of multiple meshes being processed.</span></div>
<div class="line"><span class="lineno"> 3416</span>        <span class="comment">//FIXME this is a copy</span></div>
<div class="line"><span class="lineno"> 3417</span>        <span class="comment">// Contains config settings to avoid loading them in every function. This was done to improve readability of the code.</span></div>
<div class="line"><span class="lineno"> 3418</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;config = processing.first;</div>
<div class="line"><span class="lineno"> 3419</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Processing support tree mesh group &quot;</span> &lt;&lt; counter + 1 &lt;&lt; <span class="stringliteral">&quot; of &quot;</span> &lt;&lt; grouped_meshes.size() &lt;&lt; <span class="stringliteral">&quot; containing &quot;</span> &lt;&lt; grouped_meshes[counter].second.size() &lt;&lt; <span class="stringliteral">&quot; meshes.&quot;</span>;</div>
<div class="line"><span class="lineno"> 3420</span>        <span class="keyword">auto</span> t_start = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3421</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 3422</span>        std::vector&lt;Polygons&gt; exclude(num_support_layers);</div>
<div class="line"><span class="lineno"> 3423</span>        <span class="comment">// get all already existing support areas and exclude them</span></div>
<div class="line"><span class="lineno"> 3424</span>        tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, num_support_layers),</div>
<div class="line"><span class="lineno"> 3425</span>            [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 3426</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_idx = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.begin(); layer_idx &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.end(); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 3427</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> exlude_at_layer;</div>
<div class="line"><span class="lineno"> 3428</span>                append(exlude_at_layer, storage.support.supportLayers[layer_idx].support_bottom);</div>
<div class="line"><span class="lineno"> 3429</span>                append(exlude_at_layer, storage.support.supportLayers[layer_idx].support_roof);</div>
<div class="line"><span class="lineno"> 3430</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> part : storage.support.supportLayers[layer_idx].support_infill_parts)</div>
<div class="line"><span class="lineno"> 3431</span>                    append(exlude_at_layer, part.outline);</div>
<div class="line"><span class="lineno"> 3432</span>                exclude[layer_idx] = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(exlude_at_layer);</div>
<div class="line"><span class="lineno"> 3433</span>            }</div>
<div class="line"><span class="lineno"> 3434</span>        });</div>
<div class="line"><span class="lineno"> 3435</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3436</span><span class="preprocessor">#ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 3437</span>        m_progress_multiplier = 1.0 / double(grouped_meshes.size());</div>
<div class="line"><span class="lineno"> 3438</span>        m_progress_offset = counter == 0 ? 0 : TREE_PROGRESS_TOTAL * (double(counter) * m_progress_multiplier);</div>
<div class="line"><span class="lineno"> 3439</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_TREESUPPORT_PROGRESS</span></div>
<div class="line"><span class="lineno"> 3440</span>        PrintObject &amp;print_object = *print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(processing.second.front());</div>
<div class="line"><span class="lineno"> 3441</span>        <span class="comment">// Generator for model collision, avoidance and internal guide volumes.</span></div>
<div class="line"><span class="lineno"> 3442</span>        TreeModelVolumes volumes{ print_object, build_volume, config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a4e8e1d27ede43a52b1f87b413d286f0d">maximum_move_distance</a>, config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a52f7f214759712af60e5c3cd5bf38286">maximum_move_distance_slow</a>, processing.second.front(),</div>
<div class="line"><span class="lineno"> 3443</span><span class="preprocessor">#ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 3444</span>            m_progress_multiplier, m_progress_offset, </div>
<div class="line"><span class="lineno"> 3445</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 3446</span>            <span class="comment">/* additional_excluded_areas */</span>{} };</div>
<div class="line"><span class="lineno"> 3447</span> </div>
<div class="line"><span class="lineno"> 3448</span>        <span class="comment">//FIXME generating overhangs just for the furst mesh of the group.</span></div>
<div class="line"><span class="lineno"> 3449</span>        assert(processing.second.size() == 1);</div>
<div class="line"><span class="lineno"> 3450</span>        std::vector&lt;Polygons&gt;        overhangs = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac3e3c47728795e00a4099047c5ebc5a7">generate_overhangs</a>(config, *print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(processing.second.front()), throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3451</span> </div>
<div class="line"><span class="lineno"> 3452</span>        <span class="comment">// ### Precalculate avoidances, collision etc.</span></div>
<div class="line"><span class="lineno"> 3453</span>        <span class="keywordtype">size_t</span> num_support_layers = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dda71b81c82e359530c91128bcd7abd">precalculate</a>(print, overhangs, processing.first, processing.second, volumes, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3454</span>        <span class="keywordtype">bool</span>   has_support = num_support_layers &gt; 0;</div>
<div class="line"><span class="lineno"> 3455</span>        <span class="keywordtype">bool</span>   has_raft    = config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size() &gt; 0;</div>
<div class="line"><span class="lineno"> 3456</span>        num_support_layers = std::max(num_support_layers, config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size());</div>
<div class="line"><span class="lineno"> 3457</span> </div>
<div class="line"><span class="lineno"> 3458</span>        <a class="code hl_struct" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html">SupportParameters</a>            support_params(print_object);</div>
<div class="line"><span class="lineno"> 3459</span>        support_params.with_sheath = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3460</span>        support_params.support_density = 0;</div>
<div class="line"><span class="lineno"> 3461</span> </div>
<div class="line"><span class="lineno"> 3462</span>        <a class="code hl_class" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> layer_storage;</div>
<div class="line"><span class="lineno"> 3463</span>        <a class="code hl_typedef" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a>    top_contacts;</div>
<div class="line"><span class="lineno"> 3464</span>        <a class="code hl_typedef" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a>    bottom_contacts;</div>
<div class="line"><span class="lineno"> 3465</span>        <a class="code hl_typedef" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a>    interface_layers;</div>
<div class="line"><span class="lineno"> 3466</span>        <a class="code hl_typedef" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a>    base_interface_layers;</div>
<div class="line"><span class="lineno"> 3467</span>        <a class="code hl_typedef" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a>    intermediate_layers(num_support_layers, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 3468</span>        <span class="keywordflow">if</span> (support_params.has_top_contacts || has_raft)</div>
<div class="line"><span class="lineno"> 3469</span>            top_contacts.assign(num_support_layers, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 3470</span>        <span class="keywordflow">if</span> (support_params.has_bottom_contacts)</div>
<div class="line"><span class="lineno"> 3471</span>            bottom_contacts.assign(num_support_layers, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 3472</span>        <span class="keywordflow">if</span> (support_params.has_interfaces() || has_raft)</div>
<div class="line"><span class="lineno"> 3473</span>            interface_layers.assign(num_support_layers, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 3474</span>        <span class="keywordflow">if</span> (support_params.has_base_interfaces() || has_raft)</div>
<div class="line"><span class="lineno"> 3475</span>            base_interface_layers.assign(num_support_layers, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 3476</span> </div>
<div class="line"><span class="lineno"> 3477</span>        <span class="keyword">auto</span> remove_undefined_layers = [&amp;bottom_contacts, &amp;top_contacts, &amp;interface_layers, &amp;base_interface_layers, &amp;intermediate_layers]() {</div>
<div class="line"><span class="lineno"> 3478</span>            <span class="keyword">auto</span> doit = [](<a class="code hl_typedef" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a>&amp; layers) {</div>
<div class="line"><span class="lineno"> 3479</span>                layers.erase(std::remove_if(layers.begin(), layers.end(), [](<span class="keyword">const</span> <a class="code hl_class" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a>* ptr) { <span class="keywordflow">return</span> ptr == <span class="keyword">nullptr</span>; }), layers.end());</div>
<div class="line"><span class="lineno"> 3480</span>            };</div>
<div class="line"><span class="lineno"> 3481</span>            doit(bottom_contacts);</div>
<div class="line"><span class="lineno"> 3482</span>            doit(top_contacts);</div>
<div class="line"><span class="lineno"> 3483</span>            doit(interface_layers);</div>
<div class="line"><span class="lineno"> 3484</span>            doit(base_interface_layers);</div>
<div class="line"><span class="lineno"> 3485</span>            doit(intermediate_layers);</div>
<div class="line"><span class="lineno"> 3486</span>        };</div>
<div class="line"><span class="lineno"> 3487</span> </div>
<div class="line"><span class="lineno"> 3488</span>        InterfacePlacer              interface_placer{</div>
<div class="line"><span class="lineno"> 3489</span>            print_object.slicing_parameters(), support_params, config,</div>
<div class="line"><span class="lineno"> 3490</span>            <span class="comment">// Outputs</span></div>
<div class="line"><span class="lineno"> 3491</span>            layer_storage, top_contacts, interface_layers, base_interface_layers };</div>
<div class="line"><span class="lineno"> 3492</span> </div>
<div class="line"><span class="lineno"> 3493</span>        <span class="keywordflow">if</span> (has_support) {</div>
<div class="line"><span class="lineno"> 3494</span>            <span class="keyword">auto</span> t_precalc = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3495</span> </div>
<div class="line"><span class="lineno"> 3496</span>            <span class="comment">// value is the area where support may be placed. As this is calculated in CreateLayerPathing it is saved and reused in draw_areas</span></div>
<div class="line"><span class="lineno"> 3497</span>            std::vector&lt;SupportElements&gt; move_bounds(num_support_layers);</div>
<div class="line"><span class="lineno"> 3498</span> </div>
<div class="line"><span class="lineno"> 3499</span>            <span class="comment">// ### Place tips of the support tree</span></div>
<div class="line"><span class="lineno"> 3500</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> mesh_idx : processing.second)</div>
<div class="line"><span class="lineno"> 3501</span>                <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a176fb939fdb2bfcef9adb6b393771391">generate_initial_areas</a>(*print.get_object(mesh_idx), volumes, config, overhangs, </div>
<div class="line"><span class="lineno"> 3502</span>                    move_bounds, interface_placer, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3503</span>            <span class="keyword">auto</span> t_gen = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3504</span> </div>
<div class="line"><span class="lineno"> 3505</span><span class="preprocessor">    #ifdef TREESUPPORT_DEBUG_SVG</span></div>
<div class="line"><span class="lineno"> 3506</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_idx = 0; layer_idx &lt; move_bounds.size(); ++layer_idx) {</div>
<div class="line"><span class="lineno"> 3507</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> polys;</div>
<div class="line"><span class="lineno"> 3508</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; area : move_bounds[layer_idx])</div>
<div class="line"><span class="lineno"> 3509</span>                    <a class="code hl_function" href="../../dc/db2/namespacepriv.html#a3e6045aa7075a33d05830cc70eebdbba">append</a>(polys, <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>.influence_area);</div>
<div class="line"><span class="lineno"> 3510</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> begin = move_bounds[layer_idx].<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a>(); <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a> != move_bounds[layer_idx].end())</div>
<div class="line"><span class="lineno"> 3511</span>                    SVG::export_expolygons(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;treesupport-initial_areas-%d.svg&quot;</span>, layer_idx),</div>
<div class="line"><span class="lineno"> 3512</span>                        { { { <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(volumes.getWallRestriction(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a>-&gt;state), layer_idx, <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a>-&gt;state.use_min_xy_dist)) },</div>
<div class="line"><span class="lineno"> 3513</span>                            { <span class="stringliteral">&quot;wall_restricrictions&quot;</span>, <span class="stringliteral">&quot;gray&quot;</span>, 0.5f } },</div>
<div class="line"><span class="lineno"> 3514</span>                          { { <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(polys) }, { <span class="stringliteral">&quot;parent&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>,  <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, scaled&lt;coord_t&gt;(0.1f), 0.5f } } });</div>
<div class="line"><span class="lineno"> 3515</span>            }</div>
<div class="line"><span class="lineno"> 3516</span><span class="preprocessor">    #endif </span><span class="comment">// TREESUPPORT_DEBUG_SVG</span></div>
<div class="line"><span class="lineno"> 3517</span> </div>
<div class="line"><span class="lineno"> 3518</span>            <span class="comment">// ### Propagate the influence areas downwards. This is an inherently serial operation.</span></div>
<div class="line"><span class="lineno"> 3519</span>            <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aeb49cf1fc20a86890b55d203812fd7bb">create_layer_pathing</a>(volumes, config, move_bounds, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3520</span>            <span class="keyword">auto</span> t_path = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3521</span> </div>
<div class="line"><span class="lineno"> 3522</span>            <span class="comment">// ### Set a point in each influence area</span></div>
<div class="line"><span class="lineno"> 3523</span>            <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a92615f6c41e6b6715175c0ad1b804864">create_nodes_from_area</a>(volumes, config, move_bounds, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3524</span>            <span class="keyword">auto</span> t_place = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3525</span> </div>
<div class="line"><span class="lineno"> 3526</span>            <span class="comment">// ### draw these points as circles</span></div>
<div class="line"><span class="lineno"> 3527</span>            </div>
<div class="line"><span class="lineno"> 3528</span>            <span class="keywordflow">if</span> (print_object.config().support_material_style == smsTree)</div>
<div class="line"><span class="lineno"> 3529</span>                <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aafe7894d0eaf4f718b69b4a8f4b9e999">draw_areas</a>(*print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(processing.second.front()), volumes, config, overhangs, move_bounds, </div>
<div class="line"><span class="lineno"> 3530</span>                    bottom_contacts, top_contacts, intermediate_layers, layer_storage, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3531</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3532</span>                assert(print_object.config().support_material_style == smsOrganic);</div>
<div class="line"><span class="lineno"> 3533</span>                <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5f3c278c734d77924e1f29d285aa971c">organic_draw_branches</a>(</div>
<div class="line"><span class="lineno"> 3534</span>                    *print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(processing.second.front()), volumes, config, move_bounds, </div>
<div class="line"><span class="lineno"> 3535</span>                    bottom_contacts, top_contacts, interface_placer, intermediate_layers, layer_storage, </div>
<div class="line"><span class="lineno"> 3536</span>                    throw_on_cancel);</div>
<div class="line"><span class="lineno"> 3537</span>            }</div>
<div class="line"><span class="lineno"> 3538</span> </div>
<div class="line"><span class="lineno"> 3539</span>            remove_undefined_layers();</div>
<div class="line"><span class="lineno"> 3540</span> </div>
<div class="line"><span class="lineno"> 3541</span>            std::tie(interface_layers, base_interface_layers) = <a class="code hl_function" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#af3adc36c8306333cabb6c5ffe3ac937b">generate_interface_layers</a>(print_object.config(), support_params,</div>
<div class="line"><span class="lineno"> 3542</span>                bottom_contacts, top_contacts, interface_layers, base_interface_layers, intermediate_layers, layer_storage);</div>
<div class="line"><span class="lineno"> 3543</span> </div>
<div class="line"><span class="lineno"> 3544</span>            <span class="keyword">auto</span> t_draw = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno"> 3545</span>            <span class="keyword">auto</span> dur_pre_gen = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_precalc - t_start).count();</div>
<div class="line"><span class="lineno"> 3546</span>            <span class="keyword">auto</span> dur_gen = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_gen - t_precalc).count();</div>
<div class="line"><span class="lineno"> 3547</span>            <span class="keyword">auto</span> dur_path = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_path - t_gen).count();</div>
<div class="line"><span class="lineno"> 3548</span>            <span class="keyword">auto</span> dur_place = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_place - t_path).count();</div>
<div class="line"><span class="lineno"> 3549</span>            <span class="keyword">auto</span> dur_draw = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_draw - t_place).count();</div>
<div class="line"><span class="lineno"> 3550</span>            <span class="keyword">auto</span> dur_total = 0.001 * std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(t_draw - t_start).count();</div>
<div class="line"><span class="lineno"> 3551</span>            BOOST_LOG_TRIVIAL(info) &lt;&lt;</div>
<div class="line"><span class="lineno"> 3552</span>                <span class="stringliteral">&quot;Total time used creating Tree support for the currently grouped meshes: &quot;</span> &lt;&lt; dur_total &lt;&lt; <span class="stringliteral">&quot; ms. &quot;</span></div>
<div class="line"><span class="lineno"> 3553</span>                <span class="stringliteral">&quot;Different subtasks:\nCalculating Avoidance: &quot;</span> &lt;&lt; dur_pre_gen &lt;&lt; <span class="stringliteral">&quot; ms &quot;</span></div>
<div class="line"><span class="lineno"> 3554</span>                <span class="stringliteral">&quot;Creating inital influence areas: &quot;</span> &lt;&lt; dur_gen &lt;&lt; <span class="stringliteral">&quot; ms &quot;</span></div>
<div class="line"><span class="lineno"> 3555</span>                <span class="stringliteral">&quot;Influence area creation: &quot;</span> &lt;&lt; dur_path &lt;&lt; <span class="stringliteral">&quot;ms &quot;</span></div>
<div class="line"><span class="lineno"> 3556</span>                <span class="stringliteral">&quot;Placement of Points in InfluenceAreas: &quot;</span> &lt;&lt; dur_place &lt;&lt; <span class="stringliteral">&quot;ms &quot;</span></div>
<div class="line"><span class="lineno"> 3557</span>                <span class="stringliteral">&quot;Drawing result as support &quot;</span> &lt;&lt; dur_draw &lt;&lt; <span class="stringliteral">&quot; ms&quot;</span>;</div>
<div class="line"><span class="lineno"> 3558</span>    <span class="comment">//        if (config.branch_radius==2121)</span></div>
<div class="line"><span class="lineno"> 3559</span>    <span class="comment">//            BOOST_LOG_TRIVIAL(error) &lt;&lt; &quot;Why ask questions when you already know the answer twice.\n (This is not a real bug, please dont report it.)&quot;;</span></div>
<div class="line"><span class="lineno"> 3560</span>            </div>
<div class="line"><span class="lineno"> 3561</span>            move_bounds.clear();</div>
<div class="line"><span class="lineno"> 3562</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a41c75893bf8acfd3cf9c90cfa06b2487">generate_raft_contact</a>(print_object, config, interface_placer) &gt;= 0) {</div>
<div class="line"><span class="lineno"> 3563</span>            remove_undefined_layers();</div>
<div class="line"><span class="lineno"> 3564</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3565</span>            <span class="comment">// No raft.</span></div>
<div class="line"><span class="lineno"> 3566</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3567</span> </div>
<div class="line"><span class="lineno"> 3568</span>        <span class="comment">// Produce the support G-code.</span></div>
<div class="line"><span class="lineno"> 3569</span>        <span class="comment">// Used by both classic and tree supports.</span></div>
<div class="line"><span class="lineno"> 3570</span>        <a class="code hl_typedef" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> raft_layers = <a class="code hl_function" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#aabb429f039204c9918fee484047a03d8">generate_raft_base</a>(print_object, support_params, print_object.slicing_parameters(), </div>
<div class="line"><span class="lineno"> 3571</span>            top_contacts, interface_layers, base_interface_layers, intermediate_layers, layer_storage);</div>
<div class="line"><span class="lineno"> 3572</span><span class="preprocessor">#if 1 </span><span class="comment">//#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 3573</span>        <a class="code hl_typedef" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> layers_sorted =</div>
<div class="line"><span class="lineno"> 3574</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 3575</span>            <a class="code hl_function" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#aaa01245b5f63f83e500ce50b9a39d7ca">generate_support_layers</a>(print_object, raft_layers, bottom_contacts, top_contacts, intermediate_layers, interface_layers, base_interface_layers);</div>
<div class="line"><span class="lineno"> 3576</span>        <span class="comment">// Don&#39;t fill in the tree supports, make them hollow with just a single sheath line.</span></div>
<div class="line"><span class="lineno"> 3577</span>        <a class="code hl_function" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a0f530121ad8d1d3ab8a89b2b5b33f57b">generate_support_toolpaths</a>(print_object.support_layers(), print_object.config(), support_params, print_object.slicing_parameters(),</div>
<div class="line"><span class="lineno"> 3578</span>            raft_layers, bottom_contacts, top_contacts, intermediate_layers, interface_layers, base_interface_layers);</div>
<div class="line"><span class="lineno"> 3579</span> </div>
<div class="line"><span class="lineno"> 3580</span><span class="preprocessor"> #if 0</span></div>
<div class="line"><span class="lineno"> 3581</span><span class="comment">//#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 3582</span>        {</div>
<div class="line"><span class="lineno"> 3583</span>            <span class="keyword">static</span> <span class="keywordtype">int</span> iRun = 0;</div>
<div class="line"><span class="lineno"> 3584</span>            ++ iRun;</div>
<div class="line"><span class="lineno"> 3585</span>            <span class="keywordtype">size_t</span> layer_id = 0;</div>
<div class="line"><span class="lineno"> 3586</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; int(layers_sorted.size());) {</div>
<div class="line"><span class="lineno"> 3587</span>                <span class="comment">// Find the last layer with roughly the same print_z, find the minimum layer height of all.</span></div>
<div class="line"><span class="lineno"> 3588</span>                <span class="comment">// Due to the floating point inaccuracies, the print_z may not be the same even if in theory they should.</span></div>
<div class="line"><span class="lineno"> 3589</span>                <span class="keywordtype">int</span> j = i + 1;</div>
<div class="line"><span class="lineno"> 3590</span>                <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> zmax = layers_sorted[i]-&gt;print_z + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>;</div>
<div class="line"><span class="lineno"> 3591</span>                <span class="keywordtype">bool</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">empty</a> = layers_sorted[i]-&gt;polygons.empty();</div>
<div class="line"><span class="lineno"> 3592</span>                <span class="keywordflow">for</span> (; j &lt; layers_sorted.size() &amp;&amp; layers_sorted[j]-&gt;print_z &lt;= zmax; ++j)</div>
<div class="line"><span class="lineno"> 3593</span>                    <span class="keywordflow">if</span> (!layers_sorted[j]-&gt;polygons.empty())</div>
<div class="line"><span class="lineno"> 3594</span>                        empty = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3595</span>                <span class="keywordflow">if</span> (!empty) {</div>
<div class="line"><span class="lineno"> 3596</span>                    <a class="code hl_function" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#aef7cb47d3bf651f519cda18941b06ae9">export_print_z_polygons_to_svg</a>(</div>
<div class="line"><span class="lineno"> 3597</span>                        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-%d-%lf.svg&quot;</span>, iRun, layers_sorted[i]-&gt;print_z).c_str(),</div>
<div class="line"><span class="lineno"> 3598</span>                        layers_sorted.data() + i, j - i);</div>
<div class="line"><span class="lineno"> 3599</span>                    <a class="code hl_function" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#ac9ac7ce60cd3371e88217c6b4cd9d0de">export_print_z_polygons_and_extrusions_to_svg</a>(</div>
<div class="line"><span class="lineno"> 3600</span>                        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-w-fills-%d-%lf.svg&quot;</span>, iRun, layers_sorted[i]-&gt;print_z).c_str(),</div>
<div class="line"><span class="lineno"> 3601</span>                        layers_sorted.data() + i, j - i,</div>
<div class="line"><span class="lineno"> 3602</span>                        *print_object.support_layers()[layer_id]);</div>
<div class="line"><span class="lineno"> 3603</span>                    ++layer_id;</div>
<div class="line"><span class="lineno"> 3604</span>                }</div>
<div class="line"><span class="lineno"> 3605</span>                i = j;</div>
<div class="line"><span class="lineno"> 3606</span>            }</div>
<div class="line"><span class="lineno"> 3607</span>        }</div>
<div class="line"><span class="lineno"> 3608</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3609</span> </div>
<div class="line"><span class="lineno"> 3610</span>        ++ counter;</div>
<div class="line"><span class="lineno"> 3611</span>    }</div>
<div class="line"><span class="lineno"> 3612</span> </div>
<div class="line"><span class="lineno"> 3613</span><span class="comment">//   storage.support.generated = true;</span></div>
<div class="line"><span class="lineno"> 3614</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_html"><div class="ttname"><a href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">Slic3r::FFFSupport::SupportGeneratorLayer</a></div><div class="ttdef"><b>Definition</b> SupportLayer.hpp:41</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage_html"><div class="ttname"><a href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">Slic3r::FFFSupport::SupportGeneratorLayerStorage</a></div><div class="ttdef"><b>Definition</b> SupportLayer.hpp:118</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_html_a4cce12ce1ab8a9154376e2211cc0362f"><div class="ttname"><a href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">Slic3r::Print::get_object</a></div><div class="ttdeci">PrintObject * get_object(size_t idx)</div><div class="ttdef"><b>Definition</b> Print.hpp:601</div></div>
<div class="ttc" id="alibslic3r_8h_html_a95c875c81df33d788132374e2b57c6c1"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a></div><div class="ttdeci">double coordf_t</div><div class="ttdef"><b>Definition</b> libslic3r.h:45</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_support_html_a0f530121ad8d1d3ab8a89b2b5b33f57b"><div class="ttname"><a href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a0f530121ad8d1d3ab8a89b2b5b33f57b">Slic3r::FFFSupport::generate_support_toolpaths</a></div><div class="ttdeci">void generate_support_toolpaths(SupportLayerPtrs &amp;support_layers, const PrintObjectConfig &amp;config, const SupportParameters &amp;support_params, const SlicingParameters &amp;slicing_params, const SupportGeneratorLayersPtr &amp;raft_layers, const SupportGeneratorLayersPtr &amp;bottom_contacts, const SupportGeneratorLayersPtr &amp;top_contacts, const SupportGeneratorLayersPtr &amp;intermediate_layers, const SupportGeneratorLayersPtr &amp;interface_layers, const SupportGeneratorLayersPtr &amp;base_interface_layers)</div><div class="ttdef"><b>Definition</b> SupportCommon.cpp:1458</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_support_html_a9f779e7589bece4b83a5376a95769db3"><div class="ttname"><a href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">Slic3r::FFFSupport::SupportGeneratorLayersPtr</a></div><div class="ttdeci">std::vector&lt; SupportGeneratorLayer * &gt; SupportGeneratorLayersPtr</div><div class="ttdef"><b>Definition</b> SupportLayer.hpp:142</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_support_html_aaa01245b5f63f83e500ce50b9a39d7ca"><div class="ttname"><a href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#aaa01245b5f63f83e500ce50b9a39d7ca">Slic3r::FFFSupport::generate_support_layers</a></div><div class="ttdeci">SupportGeneratorLayersPtr generate_support_layers(PrintObject &amp;object, const SupportGeneratorLayersPtr &amp;raft_layers, const SupportGeneratorLayersPtr &amp;bottom_contacts, const SupportGeneratorLayersPtr &amp;top_contacts, const SupportGeneratorLayersPtr &amp;intermediate_layers, const SupportGeneratorLayersPtr &amp;interface_layers, const SupportGeneratorLayersPtr &amp;base_interface_layers)</div><div class="ttdef"><b>Definition</b> SupportCommon.cpp:1381</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_support_html_aabb429f039204c9918fee484047a03d8"><div class="ttname"><a href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#aabb429f039204c9918fee484047a03d8">Slic3r::FFFSupport::generate_raft_base</a></div><div class="ttdeci">SupportGeneratorLayersPtr generate_raft_base(const PrintObject &amp;object, const SupportParameters &amp;support_params, const SlicingParameters &amp;slicing_params, const SupportGeneratorLayersPtr &amp;top_contacts, const SupportGeneratorLayersPtr &amp;interface_layers, const SupportGeneratorLayersPtr &amp;base_interface_layers, const SupportGeneratorLayersPtr &amp;base_layers, SupportGeneratorLayerStorage &amp;layer_storage)</div><div class="ttdef"><b>Definition</b> SupportCommon.cpp:312</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_support_html_ac9ac7ce60cd3371e88217c6b4cd9d0de"><div class="ttname"><a href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#ac9ac7ce60cd3371e88217c6b4cd9d0de">Slic3r::FFFSupport::export_print_z_polygons_and_extrusions_to_svg</a></div><div class="ttdeci">void export_print_z_polygons_and_extrusions_to_svg(const char *path, SupportGeneratorLayer **const layers, int n_layers, SupportLayer &amp;support_layer)</div><div class="ttdef"><b>Definition</b> SupportDebug.cpp:77</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_support_html_aef7cb47d3bf651f519cda18941b06ae9"><div class="ttname"><a href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#aef7cb47d3bf651f519cda18941b06ae9">Slic3r::FFFSupport::export_print_z_polygons_to_svg</a></div><div class="ttdeci">void export_print_z_polygons_to_svg(const char *path, SupportGeneratorLayer **const layers, int n_layers)</div><div class="ttdef"><b>Definition</b> SupportDebug.cpp:59</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_support_html_af3adc36c8306333cabb6c5ffe3ac937b"><div class="ttname"><a href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#af3adc36c8306333cabb6c5ffe3ac937b">Slic3r::FFFSupport::generate_interface_layers</a></div><div class="ttdeci">std::pair&lt; SupportGeneratorLayersPtr, SupportGeneratorLayersPtr &gt; generate_interface_layers(const PrintObjectConfig &amp;config, const SupportParameters &amp;support_params, const SupportGeneratorLayersPtr &amp;bottom_contacts, const SupportGeneratorLayersPtr &amp;top_contacts, SupportGeneratorLayersPtr &amp;top_interface_layers, SupportGeneratorLayersPtr &amp;top_base_interface_layers, SupportGeneratorLayersPtr &amp;intermediate_layers, SupportGeneratorLayerStorage &amp;layer_storage)</div><div class="ttdef"><b>Definition</b> SupportCommon.cpp:124</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a0fe6563863279b24725d47874451e250"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">Slic3r::FFFTreeSupport::support_element_collision_radius</a></div><div class="ttdeci">coord_t support_element_collision_radius(const TreeSupportSettings &amp;settings, const SupportElementState &amp;elem)</div><div class="ttdoc">Get the collision Radius of this Element. This can be smaller then the actual radius,...</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:246</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a176fb939fdb2bfcef9adb6b393771391"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a176fb939fdb2bfcef9adb6b393771391">Slic3r::FFFTreeSupport::generate_initial_areas</a></div><div class="ttdeci">static void generate_initial_areas(const PrintObject &amp;print_object, const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, const std::vector&lt; Polygons &gt; &amp;overhangs, std::vector&lt; SupportElements &gt; &amp;move_bounds, InterfacePlacer &amp;interface_placer, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Creates the initial influence areas (that can later be propagated down) by placing them below the ove...</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1209</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a41c75893bf8acfd3cf9c90cfa06b2487"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a41c75893bf8acfd3cf9c90cfa06b2487">Slic3r::FFFTreeSupport::generate_raft_contact</a></div><div class="ttdeci">int generate_raft_contact(const PrintObject &amp;print_object, const TreeSupportSettings &amp;config, InterfacePlacer &amp;interface_placer)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:979</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a5f3c278c734d77924e1f29d285aa971c"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5f3c278c734d77924e1f29d285aa971c">Slic3r::FFFTreeSupport::organic_draw_branches</a></div><div class="ttdeci">void organic_draw_branches(PrintObject &amp;print_object, TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, std::vector&lt; SupportElements &gt; &amp;move_bounds, SupportGeneratorLayersPtr &amp;bottom_contacts, SupportGeneratorLayersPtr &amp;top_contacts, InterfacePlacer &amp;interface_placer, SupportGeneratorLayersPtr &amp;intermediate_layers, SupportGeneratorLayerStorage &amp;layer_storage, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:1006</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a92615f6c41e6b6715175c0ad1b804864"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a92615f6c41e6b6715175c0ad1b804864">Slic3r::FFFTreeSupport::create_nodes_from_area</a></div><div class="ttdeci">static void create_nodes_from_area(const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, std::vector&lt; SupportElements &gt; &amp;move_bounds, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Set the result_on_layer point for all influence areas.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2647</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a9dda71b81c82e359530c91128bcd7abd"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dda71b81c82e359530c91128bcd7abd">Slic3r::FFFTreeSupport::precalculate</a></div><div class="ttdeci">static LayerIndex precalculate(const Print &amp;print, const std::vector&lt; Polygons &gt; &amp;overhangs, const TreeSupportSettings &amp;config, const std::vector&lt; size_t &gt; &amp;object_ids, TreeModelVolumes &amp;volumes, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Precalculates all avoidances, that could be required.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:326</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_aad99b24bb16e78e513e22aeff7ce50ea"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aad99b24bb16e78e513e22aeff7ce50ea">Slic3r::FFFTreeSupport::g_showed_critical_error</a></div><div class="ttdeci">bool g_showed_critical_error</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.cpp:170</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_aafe7894d0eaf4f718b69b4a8f4b9e999"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aafe7894d0eaf4f718b69b4a8f4b9e999">Slic3r::FFFTreeSupport::draw_areas</a></div><div class="ttdeci">static void draw_areas(PrintObject &amp;print_object, const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, const std::vector&lt; Polygons &gt; &amp;overhangs, std::vector&lt; SupportElements &gt; &amp;move_bounds, SupportGeneratorLayersPtr &amp;bottom_contacts, SupportGeneratorLayersPtr &amp;top_contacts, SupportGeneratorLayersPtr &amp;intermediate_layers, SupportGeneratorLayerStorage &amp;layer_storage, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Draws circles around result_on_layer points of the influence areas and applies some post processing.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:3238</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ac3e3c47728795e00a4099047c5ebc5a7"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac3e3c47728795e00a4099047c5ebc5a7">Slic3r::FFFTreeSupport::generate_overhangs</a></div><div class="ttdeci">static const std::vector&lt; Polygons &gt; generate_overhangs(const TreeSupportSettings &amp;settings, const PrintObject &amp;print_object, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:192</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_aeb49cf1fc20a86890b55d203812fd7bb"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aeb49cf1fc20a86890b55d203812fd7bb">Slic3r::FFFTreeSupport::create_layer_pathing</a></div><div class="ttdeci">static void create_layer_pathing(const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, std::vector&lt; SupportElements &gt; &amp;move_bounds, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Propagates influence downwards, and merges overlapping ones.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2405</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_aeed21f68c33581eb7f3bc0b326a6bfc2"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aeed21f68c33581eb7f3bc0b326a6bfc2">Slic3r::FFFTreeSupport::group_meshes</a></div><div class="ttdeci">static std::vector&lt; std::pair&lt; TreeSupportSettings, std::vector&lt; size_t &gt; &gt; &gt; group_meshes(const Print &amp;print, const std::vector&lt; size_t &gt; &amp;print_object_ids)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:118</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_af5e44c1ba8a01d2910f6bfd9941520db"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af5e44c1ba8a01d2910f6bfd9941520db">Slic3r::FFFTreeSupport::g_showed_performance_warning</a></div><div class="ttdeci">bool g_showed_performance_warning</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.cpp:171</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_support_1_1_support_parameters_html"><div class="ttname"><a href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html">Slic3r::FFFSupport::SupportParameters</a></div><div class="ttdef"><b>Definition</b> SupportParameters.hpp:14</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">Slic3r::FFFTreeSupport::TreeSupportSettings</a></div><div class="ttdoc">This struct contains settings used in the tree support. Thanks to this most functions do not need to ...</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:209</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02405">create_layer_pathing()</a>, <a class="el" href="../../#l02647">create_nodes_from_area()</a>, <a class="el" href="../../#l00218">Slic3r::debug_out_path()</a>, <a class="el" href="../../#l03238">draw_areas()</a>, <a class="el" href="../../#l00229">Slic3r::empty()</a>, <a class="el" href="../../#l00051">EPSILON</a>, <a class="el" href="../../#l00077">Slic3r::FFFSupport::export_print_z_polygons_and_extrusions_to_svg()</a>, <a class="el" href="../../#l00059">Slic3r::FFFSupport::export_print_z_polygons_to_svg()</a>, <a class="el" href="../../#l00170">g_showed_critical_error</a>, <a class="el" href="../../#l00171">g_showed_performance_warning</a>, <a class="el" href="../../#l01209">generate_initial_areas()</a>, <a class="el" href="../../#l00124">Slic3r::FFFSupport::generate_interface_layers()</a>, <a class="el" href="../../#l00192">generate_overhangs()</a>, <a class="el" href="../../#l00312">Slic3r::FFFSupport::generate_raft_base()</a>, <a class="el" href="../../#l00979">generate_raft_contact()</a>, <a class="el" href="../../#l03399">generate_support_areas()</a>, <a class="el" href="../../#l01381">Slic3r::FFFSupport::generate_support_layers()</a>, <a class="el" href="../../#l01458">Slic3r::FFFSupport::generate_support_toolpaths()</a>, <a class="el" href="../../#l00601">Slic3r::Print::get_object()</a>, <a class="el" href="../../#l00373">Slic3r::FFFTreeSupport::TreeModelVolumes::getWallRestriction()</a>, <a class="el" href="../../#l00118">group_meshes()</a>, <a class="el" href="../../#l00037">Slic3r::FFFSupport::SupportParameters::has_base_interfaces()</a>, <a class="el" href="../../#l00025">Slic3r::FFFSupport::SupportParameters::has_bottom_contacts</a>, <a class="el" href="../../#l00036">Slic3r::FFFSupport::SupportParameters::has_interfaces()</a>, <a class="el" href="../../#l00023">Slic3r::FFFSupport::SupportParameters::has_top_contacts</a>, <a class="el" href="../../#l00236">Slic3r::FFFTreeSupport::TreeSupportSettings::maximum_move_distance</a>, <a class="el" href="../../#l00240">Slic3r::FFFTreeSupport::TreeSupportSettings::maximum_move_distance_slow</a>, <a class="el" href="../../#l01006">organic_draw_branches()</a>, <a class="el" href="../../#l00326">precalculate()</a>, <a class="el" href="../../#l00358">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a>, <a class="el" href="../../#l00356">Slic3r::range()</a>, <a class="el" href="../../#l00531">Slic3r::FFFTreeSupport::InterfacePlacer::slicing_parameters</a>, <a class="el" href="../../#l00090">Slic3r::smsOrganic</a>, <a class="el" href="../../#l00090">Slic3r::smsTree</a>, <a class="el" href="../../#l00068">Slic3r::FFFSupport::SupportParameters::support_density</a>, <a class="el" href="../../#l00246">support_element_collision_radius()</a>, <a class="el" href="../../#l00704">Slic3r::union_()</a>, <a class="el" href="../../#l00774">Slic3r::union_ex()</a>, and <a class="el" href="../../#l00079">Slic3r::FFFSupport::SupportParameters::with_sheath</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ab26bc295197117d2d20bc72c33be92f6_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ab26bc295197117d2d20bc72c33be92f6_icgraph.svg" width="179" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af3db90eed67f0d35149aa2b62a56c618" name="af3db90eed67f0d35149aa2b62a56c618"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3db90eed67f0d35149aa2b62a56c618">&#9670;&#160;</a></span>generate_support_infill_lines()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> Slic3r::FFFTreeSupport::generate_support_infill_lines </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>polygon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html">SupportParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>support_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>roof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td>
          <td class="paramname"><em>support_infill_distance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns Polylines representing the (infill) lines that will result in slicing the given area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">area[in]</td><td>The area that has to be filled with infill. </td></tr>
    <tr><td class="paramname">roof[in]</td><td>Whether the roofing or regular support settings should be used. </td></tr>
    <tr><td class="paramname">layer_idx[in]</td><td>The current layer index. </td></tr>
    <tr><td class="paramname">support_infill_distance[in]</td><td>The distance that should be between the infill lines.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Polygons object that represents the resulting infill lines. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  633</span>{</div>
<div class="line"><span class="lineno">  634</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  635</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> gaps;</div>
<div class="line"><span class="lineno">  636</span>    <span class="comment">// as we effectivly use lines to place our supportPoints we may use the Infill class for it, while not made for it it works perfect</span></div>
<div class="line"><span class="lineno">  637</span> </div>
<div class="line"><span class="lineno">  638</span>    <span class="keyword">const</span> EFillMethod pattern = roof ? config.roof_pattern : config.support_pattern;</div>
<div class="line"><span class="lineno">  639</span> </div>
<div class="line"><span class="lineno">  640</span><span class="comment">//    const bool zig_zaggify_infill = roof ? pattern == EFillMethod::ZIG_ZAG : config.zig_zaggify_support;</span></div>
<div class="line"><span class="lineno">  641</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> connect_polygons = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  642</span>    <span class="keyword">constexpr</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> support_roof_overlap = 0;</div>
<div class="line"><span class="lineno">  643</span>    <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> infill_multiplier = 1;</div>
<div class="line"><span class="lineno">  644</span>    <span class="keyword">constexpr</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> outline_offset = 0;</div>
<div class="line"><span class="lineno">  645</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> support_shift = roof ? 0 : support_infill_distance / 2;</div>
<div class="line"><span class="lineno">  646</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> wall_line_count = include_walls &amp;&amp; !roof ? config.support_wall_count : 0;</div>
<div class="line"><span class="lineno">  647</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> infill_origin;</div>
<div class="line"><span class="lineno">  648</span>    <span class="keyword">constexpr</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>* perimeter_gaps = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  649</span>    <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> use_endpieces = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  650</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> connected_zigzags = roof ? false : config.connect_zigzags;</div>
<div class="line"><span class="lineno">  651</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> zag_skip_count = roof ? 0 : config.zag_skip_count;</div>
<div class="line"><span class="lineno">  652</span>    <span class="keyword">constexpr</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> pocket_size = 0;</div>
<div class="line"><span class="lineno">  653</span>    std::vector&lt;AngleRadians&gt; angles = roof ? config.support_roof_angles : config.support_infill_angles;</div>
<div class="line"><span class="lineno">  654</span>    std::vector&lt;VariableWidthLines&gt; toolpaths;</div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> z = config.getActualZ(layer_idx);</div>
<div class="line"><span class="lineno">  657</span>    <span class="keywordtype">int</span> divisor = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(angles.size());</div>
<div class="line"><span class="lineno">  658</span>    <span class="keywordtype">int</span> index = ((layer_idx % divisor) + divisor) % divisor;</div>
<div class="line"><span class="lineno">  659</span>    <span class="keyword">const</span> AngleRadians fill_angle = angles[index];</div>
<div class="line"><span class="lineno">  660</span>    <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5fce7bc9edd40ba9583d64a67fe15275aa891c3eba989133601fb3fd161becdef">Infill</a> roof_computation(pattern, <span class="keyword">true</span> <span class="comment">/* zig_zaggify_infill */</span>, connect_polygons, polygon, </div>
<div class="line"><span class="lineno">  661</span>        roof ? config.support_roof_line_width : config.support_line_width, support_infill_distance, support_roof_overlap, infill_multiplier, </div>
<div class="line"><span class="lineno">  662</span>        fill_angle, z, support_shift, config.resolution, wall_line_count, infill_origin, </div>
<div class="line"><span class="lineno">  663</span>        perimeter_gaps, connected_zigzags, use_endpieces, false <span class="comment">/* skip_some_zags */</span>, zag_skip_count, pocket_size);</div>
<div class="line"><span class="lineno">  664</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> polygons;</div>
<div class="line"><span class="lineno">  665</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> lines;</div>
<div class="line"><span class="lineno">  666</span>    roof_computation.generate(toolpaths, polygons, lines, config.settings);</div>
<div class="line"><span class="lineno">  667</span>    append(lines, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a24e03dece45435264ec1e112e7ae03dc">to_polylines</a>(polygons));</div>
<div class="line"><span class="lineno">  668</span>    <span class="keywordflow">return</span> lines;</div>
<div class="line"><span class="lineno">  669</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  670</span><span class="comment">//    const bool connected_zigzags = roof ? false : config.connect_zigzags;</span></div>
<div class="line"><span class="lineno">  671</span><span class="comment">//    const int support_shift = roof ? 0 : support_infill_distance / 2;</span></div>
<div class="line"><span class="lineno">  672</span> </div>
<div class="line"><span class="lineno">  673</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../d6/d0f/class_slic3r_1_1_flow.html">Flow</a>            &amp;flow   = roof ? support_params.<a class="code hl_variable" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#aa77a41759fcfb93f6a11212acb449e2c">support_material_interface_flow</a> : support_params.<a class="code hl_variable" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#a70d63e9aa6e04b89189016bc73ce974e">support_material_flow</a>;</div>
<div class="line"><span class="lineno">  674</span>    std::unique_ptr&lt;Fill&gt;  filler = std::unique_ptr&lt;Fill&gt;(Fill::new_from_type(roof ? support_params.<a class="code hl_variable" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#aece111e9837229bcb6196a530990abab">interface_fill_pattern</a> : support_params.base_fill_pattern));</div>
<div class="line"><span class="lineno">  675</span>    <a class="code hl_struct" href="../../dd/da4/struct_slic3r_1_1_fill_params.html">FillParams</a>             fill_params;</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span>    filler-&gt;layer_id = layer_idx;</div>
<div class="line"><span class="lineno">  678</span>    filler-&gt;spacing  = flow.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a>();</div>
<div class="line"><span class="lineno">  679</span>    filler-&gt;angle = roof ? </div>
<div class="line"><span class="lineno">  680</span>        <span class="comment">//fixme support_layer.interface_id() instead of layer_idx</span></div>
<div class="line"><span class="lineno">  681</span>        (support_params.<a class="code hl_variable" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#ac0479c3b191bd794a743b0747b32ff79">interface_angle</a> + (layer_idx &amp; 1) ? <span class="keywordtype">float</span>(- <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 4.) : float(+ <a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 4.)) :</div>
<div class="line"><span class="lineno">  682</span>        support_params.base_angle;</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>    fill_params.<a class="code hl_variable" href="../../dd/da4/struct_slic3r_1_1_fill_params.html#a76ef999f6ec68d719f69d1077e028434">density</a>     = float(roof ? support_params.<a class="code hl_variable" href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#a55f67e584d03a1dd893bfe5123cc285c">interface_density</a> : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>&lt;float&gt;(filler-&gt;spacing) / (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>&lt;float&gt;(filler-&gt;spacing) + float(support_infill_distance)));</div>
<div class="line"><span class="lineno">  685</span>    fill_params.<a class="code hl_variable" href="../../dd/da4/struct_slic3r_1_1_fill_params.html#a070c593f868ffcee2098228d9e7f82dc">dont_adjust</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> out;</div>
<div class="line"><span class="lineno">  688</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="../../db/dc4/class_slic3r_1_1_ex_polygon.html">ExPolygon</a> &amp;expoly : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(polygon)) {</div>
<div class="line"><span class="lineno">  689</span>        <span class="comment">// The surface type does not matter.</span></div>
<div class="line"><span class="lineno">  690</span>        assert(area(expoly) &gt; 0.);</div>
<div class="line"><span class="lineno">  691</span><span class="preprocessor">#ifdef TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  692</span>        <span class="keywordflow">if</span> (area(expoly) &lt;= 0.)</div>
<div class="line"><span class="lineno">  693</span>            ::MessageBoxA(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;TreeSupport infill negative area&quot;</span>, <span class="stringliteral">&quot;Bug detected!&quot;</span>, MB_OK | MB_SYSTEMMODAL | MB_SETFOREGROUND | MB_ICONWARNING);</div>
<div class="line"><span class="lineno">  694</span><span class="preprocessor">#endif </span><span class="comment">// TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  695</span>        assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a59f3fa35e6f1b18cd26ffffb33a04d96">intersecting_edges</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">to_polygons</a>(expoly)).<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">empty</a>());</div>
<div class="line"><span class="lineno">  696</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a389a6c48fa824f1c3b5af80d510eae2c">check_self_intersections</a>(expoly, <span class="stringliteral">&quot;generate_support_infill_lines&quot;</span>);</div>
<div class="line"><span class="lineno">  697</span>        <a class="code hl_class" href="../../dd/d26/class_slic3r_1_1_surface.html">Surface</a> surface(stInternal, std::move(expoly));</div>
<div class="line"><span class="lineno">  698</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  699</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> pl = filler-&gt;fill_surface(&amp;surface, fill_params);</div>
<div class="line"><span class="lineno">  700</span>            assert(pl.empty() || <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(surface.expolygon).<a class="code hl_function" href="../../d4/d2d/class_slic3r_1_1_bounding_box.html#afdf8cd62dd83f934bac9758e302c3bd1">inflated</a>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>).<a class="code hl_function" href="../../dc/d28/class_slic3r_1_1_bounding_box_base.html#a95f665e7b8a5036c835f1bdb55d5bc59">contains</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(pl)));</div>
<div class="line"><span class="lineno">  701</span><span class="preprocessor">#ifdef TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  702</span>            <span class="keywordflow">if</span> (! pl.empty() &amp;&amp; ! <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(surface.expolygon).<a class="code hl_function" href="../../d4/d2d/class_slic3r_1_1_bounding_box.html#afdf8cd62dd83f934bac9758e302c3bd1">inflated</a>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>).<a class="code hl_function" href="../../dc/d28/class_slic3r_1_1_bounding_box_base.html#a95f665e7b8a5036c835f1bdb55d5bc59">contains</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(pl)))</div>
<div class="line"><span class="lineno">  703</span>                ::MessageBoxA(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;TreeSupport infill failure&quot;</span>, <span class="stringliteral">&quot;Bug detected!&quot;</span>, MB_OK | MB_SYSTEMMODAL | MB_SETFOREGROUND | MB_ICONWARNING);</div>
<div class="line"><span class="lineno">  704</span><span class="preprocessor">#endif </span><span class="comment">// TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  705</span>            append(out, std::move(pl));</div>
<div class="line"><span class="lineno">  706</span>        } <span class="keywordflow">catch</span> (<a class="code hl_class" href="../../d0/d74/class_slic3r_1_1_infill_failed_exception.html">InfillFailedException</a> &amp;) {</div>
<div class="line"><span class="lineno">  707</span>        }</div>
<div class="line"><span class="lineno">  708</span>    }</div>
<div class="line"><span class="lineno">  709</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(out);</div>
<div class="line"><span class="lineno">  710</span>    <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  711</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  712</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_bounding_box_base_html_a95f665e7b8a5036c835f1bdb55d5bc59"><div class="ttname"><a href="../../dc/d28/class_slic3r_1_1_bounding_box_base.html#a95f665e7b8a5036c835f1bdb55d5bc59">Slic3r::BoundingBoxBase::contains</a></div><div class="ttdeci">bool contains(const PointType &amp;point) const</div><div class="ttdef"><b>Definition</b> BoundingBox.hpp:46</div></div>
<div class="ttc" id="aclass_slic3r_1_1_bounding_box_html_afdf8cd62dd83f934bac9758e302c3bd1"><div class="ttname"><a href="../../d4/d2d/class_slic3r_1_1_bounding_box.html#afdf8cd62dd83f934bac9758e302c3bd1">Slic3r::BoundingBox::inflated</a></div><div class="ttdeci">BoundingBox inflated(coordf_t delta) const</div><div class="ttdef"><b>Definition</b> BoundingBox.hpp:197</div></div>
<div class="ttc" id="aclass_slic3r_1_1_ex_polygon_html"><div class="ttname"><a href="../../db/dc4/class_slic3r_1_1_ex_polygon.html">Slic3r::ExPolygon</a></div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:16</div></div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html">Slic3r::Flow</a></div><div class="ttdef"><b>Definition</b> Flow.hpp:52</div></div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html_a42ec487a6853ed58d3deff0ce060abd9"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">Slic3r::Flow::spacing</a></div><div class="ttdeci">float spacing() const</div><div class="ttdef"><b>Definition</b> Flow.hpp:66</div></div>
<div class="ttc" id="aclass_slic3r_1_1_infill_failed_exception_html"><div class="ttname"><a href="../../d0/d74/class_slic3r_1_1_infill_failed_exception.html">Slic3r::InfillFailedException</a></div><div class="ttdef"><b>Definition</b> FillBase.hpp:29</div></div>
<div class="ttc" id="aclass_slic3r_1_1_surface_html"><div class="ttname"><a href="../../dd/d26/class_slic3r_1_1_surface.html">Slic3r::Surface</a></div><div class="ttdef"><b>Definition</b> Surface.hpp:32</div></div>
<div class="ttc" id="anamespace_slic3r_html_a20c9ce8050ad12a2fbc3d2e07937a1e8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">Slic3r::scaled</a></div><div class="ttdeci">BoundingBox scaled(const BoundingBoxf &amp;bb)</div><div class="ttdef"><b>Definition</b> BoundingBox.hpp:240</div></div>
<div class="ttc" id="anamespace_slic3r_html_a24e03dece45435264ec1e112e7ae03dc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a24e03dece45435264ec1e112e7ae03dc">Slic3r::to_polylines</a></div><div class="ttdeci">Polylines to_polylines(const ExPolygon &amp;src)</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:209</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5fce7bc9edd40ba9583d64a67fe15275aa891c3eba989133601fb3fd161becdef"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5fce7bc9edd40ba9583d64a67fe15275aa891c3eba989133601fb3fd161becdef">Slic3r::ExtrusionRoleModifier::Infill</a></div><div class="ttdeci">@ Infill</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_support_1_1_support_parameters_html_a55f67e584d03a1dd893bfe5123cc285c"><div class="ttname"><a href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#a55f67e584d03a1dd893bfe5123cc285c">Slic3r::FFFSupport::SupportParameters::interface_density</a></div><div class="ttdeci">coordf_t interface_density</div><div class="ttdef"><b>Definition</b> SupportParameters.hpp:64</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_support_1_1_support_parameters_html_a70d63e9aa6e04b89189016bc73ce974e"><div class="ttname"><a href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#a70d63e9aa6e04b89189016bc73ce974e">Slic3r::FFFSupport::SupportParameters::support_material_flow</a></div><div class="ttdeci">Flow support_material_flow</div><div class="ttdef"><b>Definition</b> SupportParameters.hpp:45</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_support_1_1_support_parameters_html_aa77a41759fcfb93f6a11212acb449e2c"><div class="ttname"><a href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#aa77a41759fcfb93f6a11212acb449e2c">Slic3r::FFFSupport::SupportParameters::support_material_interface_flow</a></div><div class="ttdeci">Flow support_material_interface_flow</div><div class="ttdef"><b>Definition</b> SupportParameters.hpp:47</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_support_1_1_support_parameters_html_ac0479c3b191bd794a743b0747b32ff79"><div class="ttname"><a href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#ac0479c3b191bd794a743b0747b32ff79">Slic3r::FFFSupport::SupportParameters::interface_angle</a></div><div class="ttdeci">float interface_angle</div><div class="ttdef"><b>Definition</b> SupportParameters.hpp:61</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_support_1_1_support_parameters_html_aece111e9837229bcb6196a530990abab"><div class="ttname"><a href="../../d7/df4/struct_slic3r_1_1_f_f_f_support_1_1_support_parameters.html#aece111e9837229bcb6196a530990abab">Slic3r::FFFSupport::SupportParameters::interface_fill_pattern</a></div><div class="ttdeci">InfillPattern interface_fill_pattern</div><div class="ttdef"><b>Definition</b> SupportParameters.hpp:73</div></div>
<div class="ttc" id="astruct_slic3r_1_1_fill_params_html"><div class="ttname"><a href="../../dd/da4/struct_slic3r_1_1_fill_params.html">Slic3r::FillParams</a></div><div class="ttdef"><b>Definition</b> FillBase.hpp:35</div></div>
<div class="ttc" id="astruct_slic3r_1_1_fill_params_html_a070c593f868ffcee2098228d9e7f82dc"><div class="ttname"><a href="../../dd/da4/struct_slic3r_1_1_fill_params.html#a070c593f868ffcee2098228d9e7f82dc">Slic3r::FillParams::dont_adjust</a></div><div class="ttdeci">bool dont_adjust</div><div class="ttdef"><b>Definition</b> FillBase.hpp:52</div></div>
<div class="ttc" id="astruct_slic3r_1_1_fill_params_html_a76ef999f6ec68d719f69d1077e028434"><div class="ttname"><a href="../../dd/da4/struct_slic3r_1_1_fill_params.html#a76ef999f6ec68d719f69d1077e028434">Slic3r::FillParams::density</a></div><div class="ttdeci">float density</div><div class="ttdef"><b>Definition</b> FillBase.hpp:41</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00110">Slic3r::append()</a>, <a class="el" href="../../#l00467">Slic3r::area()</a>, <a class="el" href="../../#l00060">Slic3r::FFFSupport::SupportParameters::base_angle</a>, <a class="el" href="../../#l00071">Slic3r::FFFSupport::SupportParameters::base_fill_pattern</a>, <a class="el" href="../../#l00104">check_self_intersections()</a>, <a class="el" href="../../#l00046">Slic3r::BoundingBoxBase&lt; PointType, APointsType &gt;::contains()</a>, <a class="el" href="../../#l00041">Slic3r::FillParams::density</a>, <a class="el" href="../../#l00052">Slic3r::FillParams::dont_adjust</a>, <a class="el" href="../../#l00229">Slic3r::empty()</a>, <a class="el" href="../../#l00035">Slic3r::Surface::expolygon</a>, <a class="el" href="../../#l00352">Slic3r::get_extents()</a>, <a class="el" href="../../de/db8/namespace_slic3r.html#a5fce7bc9edd40ba9583d64a67fe15275aa891c3eba989133601fb3fd161becdef">Slic3r::Infill</a>, <a class="el" href="../../#l00197">Slic3r::BoundingBox::inflated()</a>, <a class="el" href="../../#l00061">Slic3r::FFFSupport::SupportParameters::interface_angle</a>, <a class="el" href="../../#l00064">Slic3r::FFFSupport::SupportParameters::interface_density</a>, <a class="el" href="../../#l00073">Slic3r::FFFSupport::SupportParameters::interface_fill_pattern</a>, <a class="el" href="../../#l01568">Slic3r::intersecting_edges()</a>, <a class="el" href="../../#l00020">M_PI</a>, <a class="el" href="../../#l00031">Slic3r::Fill::new_from_type()</a>, <a class="el" href="../../#l00337">Slic3r::FFFTreeSupport::TreeSupportSettings::resolution</a>, <a class="el" href="../../#l00313">Slic3r::FFFTreeSupport::TreeSupportSettings::roof_pattern</a>, <a class="el" href="../../#l00071">SCALED_EPSILON</a>, <a class="el" href="../../#l00350">Slic3r::FFFTreeSupport::TreeSupportSettings::settings</a>, <a class="el" href="../../#l00066">Slic3r::Flow::spacing()</a>, <a class="el" href="../../#l00017">Slic3r::stInternal</a>, <a class="el" href="../../#l00220">Slic3r::FFFTreeSupport::TreeSupportSettings::support_line_width</a>, <a class="el" href="../../#l00045">Slic3r::FFFSupport::SupportParameters::support_material_flow</a>, <a class="el" href="../../#l00047">Slic3r::FFFSupport::SupportParameters::support_material_interface_flow</a>, <a class="el" href="../../#l00317">Slic3r::FFFTreeSupport::TreeSupportSettings::support_pattern</a>, <a class="el" href="../../#l00309">Slic3r::FFFTreeSupport::TreeSupportSettings::support_roof_angles</a>, <a class="el" href="../../#l00321">Slic3r::FFFTreeSupport::TreeSupportSettings::support_roof_line_width</a>, <a class="el" href="../../#l00333">Slic3r::FFFTreeSupport::TreeSupportSettings::support_wall_count</a>, <a class="el" href="../../#l00281">Slic3r::to_polygons()</a>, <a class="el" href="../../#l00209">Slic3r::to_polylines()</a>, <a class="el" href="../../#l00774">Slic3r::union_ex()</a>, and <a class="el" href="../../#l00062">validate_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00844">Slic3r::FFFTreeSupport::RichInterfacePlacer::add_points_along_lines()</a>, and <a class="el" href="../../#l01062">sample_overhang_area()</a>.</p>
<div id="dynsection-38" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af3db90eed67f0d35149aa2b62a56c618_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-39" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af3db90eed67f0d35149aa2b62a56c618_icgraph.svg" width="628" height="92"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac0b43fc4eb70422b92722063157736e0" name="ac0b43fc4eb70422b92722063157736e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0b43fc4eb70422b92722063157736e0">&#9670;&#160;</a></span>getEffectiveDTT()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Slic3r::FFFTreeSupport::getEffectiveDTT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the Distance to top regarding the real radius this part will have. This is different from distance_to_top, which is can be used to calculate the top most layer of the branch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elem[in]</td><td>The <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> one wants to know the effectiveDTT </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The Effective DTT. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  225</span>{</div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">return</span> elem.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a222c73eef54306197d4bc0ec291dc120">effective_radius_height</a> &lt; settings.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a6529564d1cc4d108ea194b9181efb624">increase_radius_until_layer</a> ? </div>
<div class="line"><span class="lineno">  227</span>        (elem.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a324613f5478944fb2c25d4b786ec967a">distance_to_top</a> &lt; settings.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a6529564d1cc4d108ea194b9181efb624">increase_radius_until_layer</a> ? elem.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a324613f5478944fb2c25d4b786ec967a">distance_to_top</a> : settings.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a6529564d1cc4d108ea194b9181efb624">increase_radius_until_layer</a>) : </div>
<div class="line"><span class="lineno">  228</span>        elem.effective_radius_height;</div>
<div class="line"><span class="lineno">  229</span>}</div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_a222c73eef54306197d4bc0ec291dc120"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a222c73eef54306197d4bc0ec291dc120">Slic3r::FFFTreeSupport::SupportElementState::effective_radius_height</a></div><div class="ttdeci">uint32_t effective_radius_height</div><div class="ttdoc">The Effective distance to top of this element regarding radius increases and collision calculations.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:165</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_a324613f5478944fb2c25d4b786ec967a"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a324613f5478944fb2c25d4b786ec967a">Slic3r::FFFTreeSupport::SupportElementState::distance_to_top</a></div><div class="ttdeci">uint32_t distance_to_top</div><div class="ttdoc">The amount of layers this element is below the topmost layer of this branch.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:170</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a6529564d1cc4d108ea194b9181efb624"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a6529564d1cc4d108ea194b9181efb624">Slic3r::FFFTreeSupport::TreeSupportSettings::increase_radius_until_layer</a></div><div class="ttdeci">size_t increase_radius_until_layer</div><div class="ttdoc">Same as increase_radius_until_radius, but contains the DTT at which the radius will be reached.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:268</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00170">Slic3r::FFFTreeSupport::SupportElementState::distance_to_top</a>, <a class="el" href="../../#l00165">Slic3r::FFFTreeSupport::SupportElementState::effective_radius_height</a>, and <a class="el" href="../../#l00268">Slic3r::FFFTreeSupport::TreeSupportSettings::increase_radius_until_layer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00236">support_element_radius()</a>.</p>
<div id="dynsection-40" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ac0b43fc4eb70422b92722063157736e0_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aeed21f68c33581eb7f3bc0b326a6bfc2" name="aeed21f68c33581eb7f3bc0b326a6bfc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeed21f68c33581eb7f3bc0b326a6bfc2">&#9670;&#160;</a></span>group_meshes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::vector&lt; std::pair&lt; <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a>, std::vector&lt; size_t &gt; &gt; &gt; Slic3r::FFFTreeSupport::group_meshes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d8f/class_slic3r_1_1_print.html">Print</a> &amp;&#160;</td>
          <td class="paramname"><em>print</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>print_object_ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  119</span>{</div>
<div class="line"><span class="lineno">  120</span>    std::vector&lt;std::pair&lt;TreeSupportSettings, std::vector&lt;size_t&gt;&gt;&gt; grouped_meshes;</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="comment">//FIXME this is ugly, it does not belong here.</span></div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> object_id : print_object_ids) {</div>
<div class="line"><span class="lineno">  124</span>        <span class="keyword">const</span> <a class="code hl_class" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a>       &amp;print_object  = *print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(object_id);</div>
<div class="line"><span class="lineno">  125</span>        <span class="keyword">const</span> <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a341d40f47c645aae18d24a020fd3c01c">PrintObjectConfig</a> &amp;object_config = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#abde3ac4f19e1f9d342423a7643e17266">config</a>();</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> (object_config.support_material_contact_distance &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno">  127</span>            <span class="comment">// || min_feature_size &lt; scaled&lt;coord_t&gt;(0.1) that is the minimum line width</span></div>
<div class="line"><span class="lineno">  128</span>            TreeSupportSettings::soluble = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  129</span>    }</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    <span class="keywordtype">size_t</span> largest_printed_mesh_idx = 0;</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    <span class="comment">// Group all meshes that can be processed together. NOTE this is different from mesh-groups! Only one setting object is needed per group, </span></div>
<div class="line"><span class="lineno">  134</span>    <span class="comment">// as different settings in the same group may only occur in the tip, which uses the original settings objects from the meshes.</span></div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> object_id : print_object_ids) {</div>
<div class="line"><span class="lineno">  136</span>        <span class="keyword">const</span> <a class="code hl_class" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a>       &amp;print_object  = *print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(object_id);</div>
<div class="line"><span class="lineno">  137</span><span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><span class="lineno">  138</span>        <span class="keyword">const</span> <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a341d40f47c645aae18d24a020fd3c01c">PrintObjectConfig</a> &amp;object_config = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#abde3ac4f19e1f9d342423a7643e17266">config</a>();</div>
<div class="line"><span class="lineno">  139</span><span class="preprocessor">#endif </span><span class="comment">// NDEBUG</span></div>
<div class="line"><span class="lineno">  140</span>        <span class="comment">// Support must be enabled and set to Tree style.</span></div>
<div class="line"><span class="lineno">  141</span>        assert(object_config.support_material || object_config.support_material_enforce_layers &gt; 0);</div>
<div class="line"><span class="lineno">  142</span>        assert(object_config.support_material_style == smsTree || object_config.support_material_style == smsOrganic);</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>        <span class="keywordtype">bool</span> found_existing_group = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  145</span>        TreeSupportSettings next_settings{ TreeSupportMeshGroupSettings{ print_object }, print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#ad6d151e7f62600dc1439ebad6e198108">slicing_parameters</a>() };</div>
<div class="line"><span class="lineno">  146</span>        <span class="comment">//FIXME for now only a single object per group is enabled.</span></div>
<div class="line"><span class="lineno">  147</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0; idx &lt; grouped_meshes.size(); ++ idx)</div>
<div class="line"><span class="lineno">  149</span>            <span class="keywordflow">if</span> (next_settings == grouped_meshes[idx].first) {</div>
<div class="line"><span class="lineno">  150</span>                found_existing_group = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  151</span>                grouped_meshes[idx].second.emplace_back(object_id);</div>
<div class="line"><span class="lineno">  152</span>                <span class="comment">// handle some settings that are only used for performance reasons. This ensures that a horrible set setting intended to improve performance can not reduce it drastically.</span></div>
<div class="line"><span class="lineno">  153</span>                grouped_meshes[idx].first.performance_interface_skip_layers = std::min(grouped_meshes[idx].first.performance_interface_skip_layers, next_settings.performance_interface_skip_layers);</div>
<div class="line"><span class="lineno">  154</span>            }</div>
<div class="line"><span class="lineno">  155</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  156</span>        <span class="keywordflow">if</span> (! found_existing_group)</div>
<div class="line"><span class="lineno">  157</span>            grouped_meshes.emplace_back(next_settings, std::vector&lt;size_t&gt;{ object_id });</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        <span class="comment">// no need to do this per mesh group as adaptive layers and raft setting are not setable per mesh.</span></div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">if</span> (print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(largest_printed_mesh_idx)-&gt;<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a87efeb10e5c2f77fd40701ee71512a61">layers</a>().back()-&gt;print_z &lt; print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a87efeb10e5c2f77fd40701ee71512a61">layers</a>().back()-&gt;print_z)</div>
<div class="line"><span class="lineno">  161</span>            largest_printed_mesh_idx = object_id;</div>
<div class="line"><span class="lineno">  162</span>    }</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  165</span>    {</div>
<div class="line"><span class="lineno">  166</span>        std::vector&lt;coord_t&gt; known_z(storage.meshes[largest_printed_mesh_idx].layers.size());</div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> z = 0; z &lt; storage.meshes[largest_printed_mesh_idx].layers.size(); z++)</div>
<div class="line"><span class="lineno">  168</span>            known_z[z] = storage.meshes[largest_printed_mesh_idx].layers[z].printZ;</div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0; idx &lt; grouped_meshes.size(); ++ idx)</div>
<div class="line"><span class="lineno">  170</span>            grouped_meshes[idx].first.setActualZ(known_z);</div>
<div class="line"><span class="lineno">  171</span>    }</div>
<div class="line"><span class="lineno">  172</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>    <span class="keywordflow">return</span> grouped_meshes;</div>
<div class="line"><span class="lineno">  175</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html">Slic3r::PrintObject</a></div><div class="ttdef"><b>Definition</b> Print.hpp:239</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_a87efeb10e5c2f77fd40701ee71512a61"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#a87efeb10e5c2f77fd40701ee71512a61">Slic3r::PrintObject::layers</a></div><div class="ttdeci">auto layers() const</div><div class="ttdef"><b>Definition</b> Print.hpp:247</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00246">Slic3r::PrintObject::config()</a>, <a class="el" href="../../#l00051">EPSILON</a>, <a class="el" href="../../#l00601">Slic3r::Print::get_object()</a>, <a class="el" href="../../#l00247">Slic3r::PrintObject::layers()</a>, <a class="el" href="../../#l00840">Slic3r::PrintObjectConfig</a>, <a class="el" href="../../#l00309">Slic3r::PrintObject::slicing_parameters()</a>, <a class="el" href="../../#l00090">Slic3r::smsOrganic</a>, <a class="el" href="../../#l00090">Slic3r::smsTree</a>, and <a class="el" href="../../#l00216">Slic3r::FFFTreeSupport::TreeSupportSettings::soluble</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-41" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aeed21f68c33581eb7f3bc0b326a6bfc2_cgraph.svg" width="355" height="248"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-42" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aeed21f68c33581eb7f3bc0b326a6bfc2_icgraph.svg" width="384" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a57466ec994792782e529655de103ab91" name="a57466ec994792782e529655de103ab91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57466ec994792782e529655de103ab91">&#9670;&#160;</a></span>increase_areas_one_layer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::increase_areas_one_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>merging_areas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_elements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool&#160;</td>
          <td class="paramname"><em>mergelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases influence areas as far as required. </p>
<p>Calculates influence areas of the layer below, based on the influence areas of the current layer. Increases every influence area by maximum_move_distance_slow. If this is not enough, as in it would change the gracious or to_buildplate status, the influence areas are instead increased by maximum_move_distance. Also ensures that increasing the radius of a branch, does not cause it to change its status (like to_buildplate ). If this were the case, the radius is not increased instead.</p>
<p>Warning: The used format inside this is different as the <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> does not have a valid area member. Instead this area is saved as value of the dictionary. This was done to avoid not needed heap allocations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to_bp_areas[out]</td><td>Influence areas that can reach the buildplate </td></tr>
    <tr><td class="paramname">to_model_areas[out]</td><td>Influence areas that do not have to reach the buildplate. This has overlap with new_layer_data, as areas that can reach the buildplate are also considered valid areas to the model. This redundancy is required if a to_buildplate influence area is allowed to merge with a to model influence area. </td></tr>
    <tr><td class="paramname">influence_areas[out]</td><td>Area than can reach all further up support points. No assurance is made that the buildplate or the model can be reached in accordance to the user-supplied settings. </td></tr>
    <tr><td class="paramname">bypass_merge_areas[out]</td><td>Influence areas ready to be added to the layer below that do not need merging. </td></tr>
    <tr><td class="paramname">last_layer[in]</td><td>Influence areas of the current layer. </td></tr>
    <tr><td class="paramname">layer_idx[in]</td><td>Number of the current layer. </td></tr>
    <tr><td class="paramname">mergelayer[in]</td><td>Will the merge method be called on this layer. This information is required as some calculation can be avoided if they are not required for merging. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 1747</span>{</div>
<div class="line"><span class="lineno"> 1748</span>    <span class="keyword">using </span>AvoidanceType = <a class="code hl_enumeration" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a0ef9b0d1194548e1a1423c2cbc12349a">TreeModelVolumes::AvoidanceType</a>;</div>
<div class="line"><span class="lineno"> 1749</span> </div>
<div class="line"><span class="lineno"> 1750</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, merging_areas.size(), 1),</div>
<div class="line"><span class="lineno"> 1751</span>        [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 1752</span>        for (size_t merging_area_idx = range.begin(); merging_area_idx &lt; range.end(); ++ merging_area_idx) {</div>
<div class="line"><span class="lineno"> 1753</span>            SupportElementMerging   &amp;merging_area   = merging_areas[merging_area_idx];</div>
<div class="line"><span class="lineno"> 1754</span>            assert(merging_area.parents.size() == 1);</div>
<div class="line"><span class="lineno"> 1755</span>            SupportElement          &amp;parent         = layer_elements[merging_area.parents.front()];</div>
<div class="line"><span class="lineno"> 1756</span>            SupportElementState      elem           = SupportElementState::propagate_down(parent.state);</div>
<div class="line"><span class="lineno"> 1757</span>            const Polygons          &amp;wall_restriction = </div>
<div class="line"><span class="lineno"> 1758</span>                <span class="comment">// Abstract representation of the model outline. If an influence area would move through it, it could teleport through a wall.</span></div>
<div class="line"><span class="lineno"> 1759</span>                volumes.getWallRestriction(support_element_collision_radius(config, parent.state), layer_idx, parent.state.use_min_xy_dist);</div>
<div class="line"><span class="lineno"> 1760</span> </div>
<div class="line"><span class="lineno"> 1761</span>#ifdef TREESUPPORT_DEBUG_SVG</div>
<div class="line"><span class="lineno"> 1762</span>            SVG::export_expolygons(debug_out_path(<span class="stringliteral">&quot;treesupport-increase_areas_one_layer-%d-%ld.svg&quot;</span>, layer_idx, int(merging_area_idx)),</div>
<div class="line"><span class="lineno"> 1763</span>                { { { union_ex(wall_restriction) },      { <span class="stringliteral">&quot;wall_restricrictions&quot;</span>, <span class="stringliteral">&quot;gray&quot;</span>, 0.5f } },</div>
<div class="line"><span class="lineno"> 1764</span>                  { { union_ex(parent.influence_area) }, { <span class="stringliteral">&quot;parent&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>,  <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, scaled&lt;coord_t&gt;(0.1f), 0.5f } } });</div>
<div class="line"><span class="lineno"> 1765</span>#endif <span class="comment">// TREESUPPORT_DEBUG_SVG</span></div>
<div class="line"><span class="lineno"> 1766</span> </div>
<div class="line"><span class="lineno"> 1767</span>            Polygons to_bp_data, to_model_data;</div>
<div class="line"><span class="lineno"> 1768</span>            coord_t radius = support_element_collision_radius(config, elem);</div>
<div class="line"><span class="lineno"> 1769</span> </div>
<div class="line"><span class="lineno"> 1770</span>            <span class="comment">// When the radius increases, the outer &quot;support wall&quot; of the branch will have been moved farther away from the center (as this is the definition of radius).</span></div>
<div class="line"><span class="lineno"> 1771</span>            <span class="comment">// As it is not specified that the support_tree_angle has to be one of the center of the branch, it is here seen as the smaller angle of the outer wall of the branch, to the outer wall of the same branch one layer above.</span></div>
<div class="line"><span class="lineno"> 1772</span>            <span class="comment">// As the branch may have become larger the distance between these 2 walls is smaller than the distance of the center points.</span></div>
<div class="line"><span class="lineno"> 1773</span>            <span class="comment">// These extra distance is added to the movement distance possible for this layer.</span></div>
<div class="line"><span class="lineno"> 1774</span> </div>
<div class="line"><span class="lineno"> 1775</span>            coord_t extra_speed = 5; <span class="comment">// The extra speed is added to both movement distances. Also move 5 microns faster than allowed to avoid rounding errors, this may cause issues at VERY VERY small layer heights.</span></div>
<div class="line"><span class="lineno"> 1776</span>            coord_t extra_slow_speed = 0; <span class="comment">// Only added to the slow movement distance.</span></div>
<div class="line"><span class="lineno"> 1777</span>            const coord_t ceiled_parent_radius = volumes.ceilRadius(support_element_collision_radius(config, parent.state), parent.state.use_min_xy_dist);</div>
<div class="line"><span class="lineno"> 1778</span>            coord_t projected_radius_increased = config.getRadius(parent.state.effective_radius_height + 1, parent.state.elephant_foot_increases);</div>
<div class="line"><span class="lineno"> 1779</span>            coord_t projected_radius_delta = projected_radius_increased - support_element_collision_radius(config, parent.state);</div>
<div class="line"><span class="lineno"> 1780</span> </div>
<div class="line"><span class="lineno"> 1781</span>            <span class="comment">// When z distance is more than one layer up and down the Collision used to calculate the wall restriction will always include the wall (and not just the xy_min_distance) of the layer above and below like this (d = blocked area because of z distance):</span></div>
<div class="line"><span class="lineno"> 1782</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1783</span><span class="comment">             *  layer z+1:dddddiiiiiioooo</span></div>
<div class="line"><span class="lineno"> 1784</span><span class="comment">             *  layer z+0:xxxxxdddddddddd</span></div>
<div class="line"><span class="lineno"> 1785</span><span class="comment">             *  layer z-1:dddddxxxxxxxxxx</span></div>
<div class="line"><span class="lineno"> 1786</span><span class="comment">             *  For more detailed visualisation see calculateWallRestrictions</span></div>
<div class="line"><span class="lineno"> 1787</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1788</span>            const coord_t safe_movement_distance = </div>
<div class="line"><span class="lineno"> 1789</span>                (elem.use_min_xy_dist ? config.xy_min_distance : config.xy_distance) + </div>
<div class="line"><span class="lineno"> 1790</span>                (std::min(config.z_distance_top_layers, config.z_distance_bottom_layers) &gt; 0 ? config.min_feature_size : 0);</div>
<div class="line"><span class="lineno"> 1791</span>            if (ceiled_parent_radius == volumes.ceilRadius(projected_radius_increased, parent.state.use_min_xy_dist) || </div>
<div class="line"><span class="lineno"> 1792</span>                projected_radius_increased &lt; config.increase_radius_until_radius)</div>
<div class="line"><span class="lineno"> 1793</span>                <span class="comment">// If it is guaranteed possible to increase the radius, the maximum movement speed can be increased, as it is assumed that the maximum movement speed is the one of the slower moving wall</span></div>
<div class="line"><span class="lineno"> 1794</span>                extra_speed += projected_radius_delta;</div>
<div class="line"><span class="lineno"> 1795</span>            else</div>
<div class="line"><span class="lineno"> 1796</span>                <span class="comment">// if a guaranteed radius increase is not possible, only increase the slow speed</span></div>
<div class="line"><span class="lineno"> 1797</span>                <span class="comment">// Ensure that the slow movement distance can not become larger than the fast one.</span></div>
<div class="line"><span class="lineno"> 1798</span>                extra_slow_speed += std::min(projected_radius_delta, (config.maximum_move_distance + extra_speed) - (config.maximum_move_distance_slow + extra_slow_speed));</div>
<div class="line"><span class="lineno"> 1799</span> </div>
<div class="line"><span class="lineno"> 1800</span>            if (config.layer_start_bp_radius &gt; layer_idx &amp;&amp; </div>
<div class="line"><span class="lineno"> 1801</span>                config.recommendedMinRadius(layer_idx - 1) &lt; config.getRadius(elem.effective_radius_height + 1, elem.elephant_foot_increases)) {</div>
<div class="line"><span class="lineno"> 1802</span>                <span class="comment">// can guarantee elephant foot radius increase</span></div>
<div class="line"><span class="lineno"> 1803</span>                if (ceiled_parent_radius == volumes.ceilRadius(config.getRadius(parent.state.effective_radius_height + 1, parent.state.elephant_foot_increases + 1), parent.state.use_min_xy_dist))</div>
<div class="line"><span class="lineno"> 1804</span>                    extra_speed += config.bp_radius_increase_per_layer;</div>
<div class="line"><span class="lineno"> 1805</span>                else</div>
<div class="line"><span class="lineno"> 1806</span>                    extra_slow_speed += std::min(coord_t(config.bp_radius_increase_per_layer),</div>
<div class="line"><span class="lineno"> 1807</span>                                                 config.maximum_move_distance - (config.maximum_move_distance_slow + extra_slow_speed));</div>
<div class="line"><span class="lineno"> 1808</span>            }</div>
<div class="line"><span class="lineno"> 1809</span> </div>
<div class="line"><span class="lineno"> 1810</span>            const coord_t fast_speed = config.maximum_move_distance + extra_speed;</div>
<div class="line"><span class="lineno"> 1811</span>            const coord_t slow_speed = config.maximum_move_distance_slow + extra_speed + extra_slow_speed;</div>
<div class="line"><span class="lineno"> 1812</span> </div>
<div class="line"><span class="lineno"> 1813</span>            Polygons offset_slow, offset_fast;</div>
<div class="line"><span class="lineno"> 1814</span> </div>
<div class="line"><span class="lineno"> 1815</span>            bool add = false;</div>
<div class="line"><span class="lineno"> 1816</span>            bool bypass_merge = false;</div>
<div class="line"><span class="lineno"> 1817</span>            constexpr bool increase_radius = true, no_error = true, use_min_radius = true, move = true; <span class="comment">// aliases for better readability</span></div>
<div class="line"><span class="lineno"> 1818</span> </div>
<div class="line"><span class="lineno"> 1819</span>            <span class="comment">// Determine in which order configurations are checked if they result in a valid influence area. Check will stop if a valid area is found</span></div>
<div class="line"><span class="lineno"> 1820</span>            std::vector&lt;AreaIncreaseSettings&gt; order;</div>
<div class="line"><span class="lineno"> 1821</span>            auto insertSetting = [&amp;](AreaIncreaseSettings settings, bool back) {</div>
<div class="line"><span class="lineno"> 1822</span>                if (std::find(order.begin(), order.end(), settings) == order.end()) {</div>
<div class="line"><span class="lineno"> 1823</span>                    if (back)</div>
<div class="line"><span class="lineno"> 1824</span>                        order.emplace_back(settings);</div>
<div class="line"><span class="lineno"> 1825</span>                    else</div>
<div class="line"><span class="lineno"> 1826</span>                        order.insert(order.begin(), settings);</div>
<div class="line"><span class="lineno"> 1827</span>                }</div>
<div class="line"><span class="lineno"> 1828</span>            };</div>
<div class="line"><span class="lineno"> 1829</span> </div>
<div class="line"><span class="lineno"> 1830</span>            const bool parent_moved_slow = elem.last_area_increase.increase_speed &lt; config.maximum_move_distance;</div>
<div class="line"><span class="lineno"> 1831</span>            const bool avoidance_speed_mismatch = parent_moved_slow &amp;&amp; elem.last_area_increase.type != AvoidanceType::Slow;</div>
<div class="line"><span class="lineno"> 1832</span>            if (elem.last_area_increase.move &amp;&amp; elem.last_area_increase.no_error &amp;&amp; elem.can_use_safe_radius &amp;&amp; !mergelayer &amp;&amp;</div>
<div class="line"><span class="lineno"> 1833</span>                !avoidance_speed_mismatch &amp;&amp; (elem.distance_to_top &gt;= config.tip_layers || parent_moved_slow)) {</div>
<div class="line"><span class="lineno"> 1834</span>                <span class="comment">// assume that the avoidance type that was best for the parent is best for me. Makes this function about 7% faster.</span></div>
<div class="line"><span class="lineno"> 1835</span>                insertSetting({ elem.last_area_increase.type, elem.last_area_increase.increase_speed &lt; config.maximum_move_distance ? slow_speed : fast_speed, </div>
<div class="line"><span class="lineno"> 1836</span>                    increase_radius, elem.last_area_increase.no_error, !use_min_radius, elem.last_area_increase.move }, true);</div>
<div class="line"><span class="lineno"> 1837</span>                insertSetting({ elem.last_area_increase.type, elem.last_area_increase.increase_speed &lt; config.maximum_move_distance ? slow_speed : fast_speed,</div>
<div class="line"><span class="lineno"> 1838</span>                    !increase_radius, elem.last_area_increase.no_error, !use_min_radius, elem.last_area_increase.move }, true);</div>
<div class="line"><span class="lineno"> 1839</span>            }</div>
<div class="line"><span class="lineno"> 1840</span>            <span class="comment">// branch may still go though a hole, so a check has to be done whether the hole was already passed, and the regular avoidance can be used.</span></div>
<div class="line"><span class="lineno"> 1841</span>            if (!elem.can_use_safe_radius) {</div>
<div class="line"><span class="lineno"> 1842</span>                <span class="comment">// if the radius until which it is always increased can not be guaranteed, move fast. This is to avoid holes smaller than the real branch radius.</span></div>
<div class="line"><span class="lineno"> 1843</span>                <span class="comment">// This does not guarantee the avoidance of such holes, but ensures they are avoided if possible.</span></div>
<div class="line"><span class="lineno"> 1844</span>                <span class="comment">// order.emplace_back(AvoidanceType::Slow,!increase_radius,no_error,!use_min_radius,move);</span></div>
<div class="line"><span class="lineno"> 1845</span>                insertSetting({ AvoidanceType::Slow, slow_speed, increase_radius, no_error, !use_min_radius, !move }, true); <span class="comment">// did we go through the hole</span></div>
<div class="line"><span class="lineno"> 1846</span>                <span class="comment">// in many cases the definition of hole is overly restrictive, so to avoid unnecessary fast movement in the tip, it is ignored there for a bit.</span></div>
<div class="line"><span class="lineno"> 1847</span>                <span class="comment">// This CAN cause a branch to go though a hole it otherwise may have avoided.</span></div>
<div class="line"><span class="lineno"> 1848</span>                if (elem.distance_to_top &lt; round_up_divide(config.tip_layers, size_t(2)))</div>
<div class="line"><span class="lineno"> 1849</span>                    insertSetting({ AvoidanceType::Fast, slow_speed, increase_radius, no_error, !use_min_radius, !move }, true);</div>
<div class="line"><span class="lineno"> 1850</span>                insertSetting({ AvoidanceType::FastSafe, fast_speed, increase_radius, no_error, !use_min_radius, !move }, true); <span class="comment">// did we manage to avoid the hole</span></div>
<div class="line"><span class="lineno"> 1851</span>                insertSetting({ AvoidanceType::FastSafe, fast_speed, !increase_radius, no_error, !use_min_radius, move }, true);</div>
<div class="line"><span class="lineno"> 1852</span>                insertSetting({ AvoidanceType::Fast, fast_speed, !increase_radius, no_error, !use_min_radius, move }, true);</div>
<div class="line"><span class="lineno"> 1853</span>            } else {</div>
<div class="line"><span class="lineno"> 1854</span>                insertSetting({ AvoidanceType::Slow, slow_speed, increase_radius, no_error, !use_min_radius, move }, true);</div>
<div class="line"><span class="lineno"> 1855</span>                <span class="comment">// while moving fast to be able to increase the radius (b) may seems preferable (over a) this can cause the a sudden skip in movement, </span></div>
<div class="line"><span class="lineno"> 1856</span>                <span class="comment">// which looks similar to a layer shift and can reduce stability.</span></div>
<div class="line"><span class="lineno"> 1857</span>                <span class="comment">// as such idx have chosen to only use the user setting for radius increases as a friendly recommendation.</span></div>
<div class="line"><span class="lineno"> 1858</span>                insertSetting({ AvoidanceType::Slow, slow_speed, !increase_radius, no_error, !use_min_radius, move }, true); <span class="comment">// a</span></div>
<div class="line"><span class="lineno"> 1859</span>                if (elem.distance_to_top &lt; config.tip_layers)</div>
<div class="line"><span class="lineno"> 1860</span>                    insertSetting({ AvoidanceType::FastSafe, slow_speed, increase_radius, no_error, !use_min_radius, move }, true);</div>
<div class="line"><span class="lineno"> 1861</span>                insertSetting({ AvoidanceType::FastSafe, fast_speed, increase_radius, no_error, !use_min_radius, move }, true); <span class="comment">// b</span></div>
<div class="line"><span class="lineno"> 1862</span>                insertSetting({ AvoidanceType::FastSafe, fast_speed, !increase_radius, no_error, !use_min_radius, move }, true);</div>
<div class="line"><span class="lineno"> 1863</span>            }</div>
<div class="line"><span class="lineno"> 1864</span> </div>
<div class="line"><span class="lineno"> 1865</span>            if (elem.use_min_xy_dist) {</div>
<div class="line"><span class="lineno"> 1866</span>                std::vector&lt;AreaIncreaseSettings&gt; new_order;</div>
<div class="line"><span class="lineno"> 1867</span>                <span class="comment">// if the branch currently has to use min_xy_dist check if the configuration would also be valid</span></div>
<div class="line"><span class="lineno"> 1868</span>                <span class="comment">// with the regular xy_distance before checking with use_min_radius (Only happens when Support Distance priority is z overrides xy )</span></div>
<div class="line"><span class="lineno"> 1869</span>                for (AreaIncreaseSettings settings : order) {</div>
<div class="line"><span class="lineno"> 1870</span>                    new_order.emplace_back(settings);</div>
<div class="line"><span class="lineno"> 1871</span>                    new_order.push_back({ settings.type, settings.increase_speed, settings.increase_radius, settings.no_error, use_min_radius, settings.move });</div>
<div class="line"><span class="lineno"> 1872</span>                }</div>
<div class="line"><span class="lineno"> 1873</span>                order = new_order;</div>
<div class="line"><span class="lineno"> 1874</span>            }</div>
<div class="line"><span class="lineno"> 1875</span>            if (elem.to_buildplate || (elem.to_model_gracious &amp;&amp; intersection(parent.influence_area, volumes.getPlaceableAreas(radius, layer_idx, throw_on_cancel)).empty())) {</div>
<div class="line"><span class="lineno"> 1876</span>                <span class="comment">// error case</span></div>
<div class="line"><span class="lineno"> 1877</span>                <span class="comment">// it is normal that we wont be able to find a new area at some point in time if we wont be able to reach layer 0 aka have to connect with the model</span></div>
<div class="line"><span class="lineno"> 1878</span>                insertSetting({ AvoidanceType::Fast, fast_speed, !increase_radius, !no_error, elem.use_min_xy_dist, move }, true);</div>
<div class="line"><span class="lineno"> 1879</span>            }</div>
<div class="line"><span class="lineno"> 1880</span>            if (elem.distance_to_top &lt; elem.dont_move_until &amp;&amp; elem.can_use_safe_radius) <span class="comment">// only do not move when holes would be avoided in every case.</span></div>
<div class="line"><span class="lineno"> 1881</span>                <span class="comment">// Only do not move when already in a no hole avoidance with the regular xy distance.</span></div>
<div class="line"><span class="lineno"> 1882</span>                insertSetting({ AvoidanceType::Slow, 0, increase_radius, no_error, !use_min_radius, !move }, false);</div>
<div class="line"><span class="lineno"> 1883</span> </div>
<div class="line"><span class="lineno"> 1884</span>            Polygons inc_wo_collision;</div>
<div class="line"><span class="lineno"> 1885</span>            <span class="comment">// Check whether it is faster to calculate the area increased with the fast speed independently from the slow area, or time could be saved by reusing the slow area to calculate the fast one.</span></div>
<div class="line"><span class="lineno"> 1886</span>            <span class="comment">// Calculated by comparing the steps saved when calcualting idependently with the saved steps when not.</span></div>
<div class="line"><span class="lineno"> 1887</span>            bool offset_independant_faster = radius / safe_movement_distance - int(config.maximum_move_distance + extra_speed &lt; radius + safe_movement_distance) &gt;</div>
<div class="line"><span class="lineno"> 1888</span>                                             round_up_divide((extra_speed + extra_slow_speed + config.maximum_move_distance_slow), safe_movement_distance);</div>
<div class="line"><span class="lineno"> 1889</span>            for (const AreaIncreaseSettings &amp;settings : order) {</div>
<div class="line"><span class="lineno"> 1890</span>                if (settings.move) {</div>
<div class="line"><span class="lineno"> 1891</span>                    if (offset_slow.empty() &amp;&amp; (settings.increase_speed == slow_speed || ! offset_independant_faster)) {</div>
<div class="line"><span class="lineno"> 1892</span>                        <span class="comment">// offsetting in 2 steps makes our offsetted area rounder preventing (rounding) errors created by to pointy areas. At this point one can see that the Polygons class </span></div>
<div class="line"><span class="lineno"> 1893</span>                        <span class="comment">// was never made for precision in the single digit micron range.</span></div>
<div class="line"><span class="lineno"> 1894</span>                        offset_slow = safe_offset_inc(parent.influence_area, extra_speed + extra_slow_speed + config.maximum_move_distance_slow, </div>
<div class="line"><span class="lineno"> 1895</span>                            wall_restriction, safe_movement_distance, offset_independant_faster ? safe_movement_distance + radius : 0, 2);</div>
<div class="line"><span class="lineno"> 1896</span>#ifdef TREESUPPORT_DEBUG_SVG</div>
<div class="line"><span class="lineno"> 1897</span>                        SVG::export_expolygons(debug_out_path(<span class="stringliteral">&quot;treesupport-increase_areas_one_layer-slow-%d-%ld.svg&quot;</span>, layer_idx, int(merging_area_idx)),</div>
<div class="line"><span class="lineno"> 1898</span>                            { { { union_ex(wall_restriction) }, { <span class="stringliteral">&quot;wall_restricrictions&quot;</span>, <span class="stringliteral">&quot;gray&quot;</span>, 0.5f } },</div>
<div class="line"><span class="lineno"> 1899</span>                              { { union_ex(offset_slow) },      { <span class="stringliteral">&quot;offset_slow&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>,  <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, scaled&lt;coord_t&gt;(0.1f), 0.5f } } });</div>
<div class="line"><span class="lineno"> 1900</span>#endif <span class="comment">// TREESUPPORT_DEBUG_SVG</span></div>
<div class="line"><span class="lineno"> 1901</span>                    }</div>
<div class="line"><span class="lineno"> 1902</span>                    if (offset_fast.empty() &amp;&amp; settings.increase_speed != slow_speed) {</div>
<div class="line"><span class="lineno"> 1903</span>                        if (offset_independant_faster)</div>
<div class="line"><span class="lineno"> 1904</span>                            offset_fast = safe_offset_inc(parent.influence_area, extra_speed + config.maximum_move_distance, </div>
<div class="line"><span class="lineno"> 1905</span>                                wall_restriction, safe_movement_distance, offset_independant_faster ? safe_movement_distance + radius : 0, 1);</div>
<div class="line"><span class="lineno"> 1906</span>                        else {</div>
<div class="line"><span class="lineno"> 1907</span>                            const coord_t delta_slow_fast = config.maximum_move_distance - (config.maximum_move_distance_slow + extra_slow_speed);</div>
<div class="line"><span class="lineno"> 1908</span>                            offset_fast = safe_offset_inc(offset_slow, delta_slow_fast, wall_restriction, safe_movement_distance, safe_movement_distance + radius, offset_independant_faster ? 2 : 1);</div>
<div class="line"><span class="lineno"> 1909</span>                        }</div>
<div class="line"><span class="lineno"> 1910</span>#ifdef TREESUPPORT_DEBUG_SVG</div>
<div class="line"><span class="lineno"> 1911</span>                        SVG::export_expolygons(debug_out_path(<span class="stringliteral">&quot;treesupport-increase_areas_one_layer-fast-%d-%ld.svg&quot;</span>, layer_idx, int(merging_area_idx)),</div>
<div class="line"><span class="lineno"> 1912</span>                            { { { union_ex(wall_restriction) }, { <span class="stringliteral">&quot;wall_restricrictions&quot;</span>, <span class="stringliteral">&quot;gray&quot;</span>, 0.5f } },</div>
<div class="line"><span class="lineno"> 1913</span>                              { { union_ex(offset_fast) },      { <span class="stringliteral">&quot;offset_fast&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>,  <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, scaled&lt;coord_t&gt;(0.1f), 0.5f } } });</div>
<div class="line"><span class="lineno"> 1914</span>#endif <span class="comment">// TREESUPPORT_DEBUG_SVG</span></div>
<div class="line"><span class="lineno"> 1915</span>                    }</div>
<div class="line"><span class="lineno"> 1916</span>                }</div>
<div class="line"><span class="lineno"> 1917</span>                std::optional&lt;SupportElementState&gt; result;</div>
<div class="line"><span class="lineno"> 1918</span>                inc_wo_collision.clear();</div>
<div class="line"><span class="lineno"> 1919</span>                if (!settings.no_error) { </div>
<div class="line"><span class="lineno"> 1920</span>                    <span class="comment">// ERROR CASE</span></div>
<div class="line"><span class="lineno"> 1921</span>                    <span class="comment">// if the area becomes for whatever reason something that clipper sees as a line, offset would stop working, so ensure that even if if wrongly would be a line, it still actually has an area that can be increased</span></div>
<div class="line"><span class="lineno"> 1922</span>                    Polygons lines_offset = offset(to_polylines(parent.influence_area), scaled&lt;float&gt;(0.005), jtMiter, 1.2);</div>
<div class="line"><span class="lineno"> 1923</span>                    Polygons base_error_area = union_(parent.influence_area, lines_offset);</div>
<div class="line"><span class="lineno"> 1924</span>                    result = increase_single_area(volumes, config, settings, layer_idx, parent, </div>
<div class="line"><span class="lineno"> 1925</span>                        base_error_area, to_bp_data, to_model_data, inc_wo_collision, (config.maximum_move_distance + extra_speed) * 1.5, mergelayer);</div>
<div class="line"><span class="lineno"> 1926</span>#ifdef TREE_SUPPORT_SHOW_ERRORS</div>
<div class="line"><span class="lineno"> 1927</span>                    BOOST_LOG_TRIVIAL(error)</div>
<div class="line"><span class="lineno"> 1928</span>#else <span class="comment">// TREE_SUPPORT_SHOW_ERRORS</span></div>
<div class="line"><span class="lineno"> 1929</span>                    BOOST_LOG_TRIVIAL(warning)</div>
<div class="line"><span class="lineno"> 1930</span>#endif <span class="comment">// TREE_SUPPORT_SHOW_ERRORS</span></div>
<div class="line"><span class="lineno"> 1931</span>                          &lt;&lt; <span class="stringliteral">&quot;Influence area could not be increased! Data about the Influence area: &quot;</span></div>
<div class="line"><span class="lineno"> 1932</span>                             <span class="stringliteral">&quot;Radius: &quot;</span> &lt;&lt; radius &lt;&lt; <span class="stringliteral">&quot; at layer: &quot;</span> &lt;&lt; layer_idx - 1 &lt;&lt; <span class="stringliteral">&quot; NextTarget: &quot;</span> &lt;&lt; elem.layer_idx &lt;&lt; <span class="stringliteral">&quot; Distance to top: &quot;</span> &lt;&lt; elem.distance_to_top &lt;&lt;</div>
<div class="line"><span class="lineno"> 1933</span>                             <span class="stringliteral">&quot; Elephant foot increases &quot;</span> &lt;&lt; elem.elephant_foot_increases &lt;&lt; <span class="stringliteral">&quot; use_min_xy_dist &quot;</span> &lt;&lt; elem.use_min_xy_dist &lt;&lt; <span class="stringliteral">&quot; to buildplate &quot;</span> &lt;&lt; elem.to_buildplate &lt;&lt; </div>
<div class="line"><span class="lineno"> 1934</span>                             <span class="stringliteral">&quot; gracious &quot;</span> &lt;&lt; elem.to_model_gracious &lt;&lt; <span class="stringliteral">&quot; safe &quot;</span> &lt;&lt; elem.can_use_safe_radius &lt;&lt; <span class="stringliteral">&quot; until move &quot;</span> &lt;&lt; elem.dont_move_until &lt;&lt; <span class="stringliteral">&quot; \n &quot;</span></div>
<div class="line"><span class="lineno"> 1935</span>                             <span class="stringliteral">&quot;Parent &quot;</span> &lt;&lt; &amp;parent &lt;&lt; <span class="stringliteral">&quot;: Radius: &quot;</span> &lt;&lt; support_element_collision_radius(config, parent.state) &lt;&lt; <span class="stringliteral">&quot; at layer: &quot;</span> &lt;&lt; layer_idx &lt;&lt; <span class="stringliteral">&quot; NextTarget: &quot;</span> &lt;&lt; parent.state.layer_idx &lt;&lt;</div>
<div class="line"><span class="lineno"> 1936</span>                             <span class="stringliteral">&quot; Distance to top: &quot;</span> &lt;&lt; parent.state.distance_to_top &lt;&lt; <span class="stringliteral">&quot; Elephant foot increases &quot;</span> &lt;&lt; parent.state.elephant_foot_increases &lt;&lt; <span class="stringliteral">&quot;  use_min_xy_dist &quot;</span> &lt;&lt; parent.state.use_min_xy_dist &lt;&lt;</div>
<div class="line"><span class="lineno"> 1937</span>                             <span class="stringliteral">&quot; to buildplate &quot;</span> &lt;&lt; parent.state.to_buildplate &lt;&lt; <span class="stringliteral">&quot; gracious &quot;</span> &lt;&lt; parent.state.to_model_gracious &lt;&lt; <span class="stringliteral">&quot; safe &quot;</span> &lt;&lt; parent.state.can_use_safe_radius &lt;&lt; <span class="stringliteral">&quot; until move &quot;</span> &lt;&lt; parent.state.dont_move_until;</div>
<div class="line"><span class="lineno"> 1938</span>                    tree_supports_show_error(<span class="stringliteral">&quot;Potentially lost branch!&quot;</span>sv, true);</div>
<div class="line"><span class="lineno"> 1939</span>#ifdef TREE_SUPPORTS_TRACK_LOST</div>
<div class="line"><span class="lineno"> 1940</span>                    if (result)</div>
<div class="line"><span class="lineno"> 1941</span>                        result-&gt;lost = true;</div>
<div class="line"><span class="lineno"> 1942</span>#endif <span class="comment">// TREE_SUPPORTS_TRACK_LOST</span></div>
<div class="line"><span class="lineno"> 1943</span>                } else</div>
<div class="line"><span class="lineno"> 1944</span>                    result = increase_single_area(volumes, config, settings, layer_idx, parent,</div>
<div class="line"><span class="lineno"> 1945</span>                        settings.increase_speed == slow_speed ? offset_slow : offset_fast, to_bp_data, to_model_data, inc_wo_collision, 0, mergelayer);</div>
<div class="line"><span class="lineno"> 1946</span> </div>
<div class="line"><span class="lineno"> 1947</span>                if (result) {</div>
<div class="line"><span class="lineno"> 1948</span>                    elem = *result;</div>
<div class="line"><span class="lineno"> 1949</span>                    radius = support_element_collision_radius(config, elem);</div>
<div class="line"><span class="lineno"> 1950</span>                    elem.last_area_increase = settings;</div>
<div class="line"><span class="lineno"> 1951</span>                    add = true;</div>
<div class="line"><span class="lineno"> 1952</span>                    <span class="comment">// do not merge if the branch should not move or the priority has to be to get farther away from the model.</span></div>
<div class="line"><span class="lineno"> 1953</span>                    bypass_merge = !settings.move || (settings.use_min_distance &amp;&amp; elem.distance_to_top &lt; config.tip_layers);</div>
<div class="line"><span class="lineno"> 1954</span>                    if (settings.move)</div>
<div class="line"><span class="lineno"> 1955</span>                        elem.dont_move_until = 0;</div>
<div class="line"><span class="lineno"> 1956</span>                    else</div>
<div class="line"><span class="lineno"> 1957</span>                        elem.result_on_layer = parent.state.result_on_layer;</div>
<div class="line"><span class="lineno"> 1958</span> </div>
<div class="line"><span class="lineno"> 1959</span>                    elem.can_use_safe_radius = settings.type != AvoidanceType::Fast;</div>
<div class="line"><span class="lineno"> 1960</span> </div>
<div class="line"><span class="lineno"> 1961</span>                    if (!settings.use_min_distance)</div>
<div class="line"><span class="lineno"> 1962</span>                        elem.use_min_xy_dist = false;</div>
<div class="line"><span class="lineno"> 1963</span>                    if (!settings.no_error)</div>
<div class="line"><span class="lineno"> 1964</span>#ifdef TREE_SUPPORT_SHOW_ERRORS</div>
<div class="line"><span class="lineno"> 1965</span>                        BOOST_LOG_TRIVIAL(error) </div>
<div class="line"><span class="lineno"> 1966</span>#else <span class="comment">// TREE_SUPPORT_SHOW_ERRORS</span></div>
<div class="line"><span class="lineno"> 1967</span>                        BOOST_LOG_TRIVIAL(info)</div>
<div class="line"><span class="lineno"> 1968</span>#endif <span class="comment">// TREE_SUPPORT_SHOW_ERRORS</span></div>
<div class="line"><span class="lineno"> 1969</span>                            &lt;&lt; <span class="stringliteral">&quot;Trying to keep area by moving faster than intended: Success&quot;</span>;</div>
<div class="line"><span class="lineno"> 1970</span>                    break;</div>
<div class="line"><span class="lineno"> 1971</span>                } else if (!settings.no_error)</div>
<div class="line"><span class="lineno"> 1972</span>                    BOOST_LOG_TRIVIAL(error) &lt;&lt; <span class="stringliteral">&quot;Trying to keep area by moving faster than intended: FAILURE! WRONG BRANCHES LIKLY!&quot;</span>;</div>
<div class="line"><span class="lineno"> 1973</span>            }</div>
<div class="line"><span class="lineno"> 1974</span> </div>
<div class="line"><span class="lineno"> 1975</span>            if (add) {</div>
<div class="line"><span class="lineno"> 1976</span>                <span class="comment">// Union seems useless, but some rounding errors somewhere can cause to_bp_data to be slightly bigger than it should be.</span></div>
<div class="line"><span class="lineno"> 1977</span>                assert(! inc_wo_collision.empty() || ! to_bp_data.empty() || ! to_model_data.empty());</div>
<div class="line"><span class="lineno"> 1978</span>                Polygons max_influence_area = safe_union(</div>
<div class="line"><span class="lineno"> 1979</span>                    diff_clipped(inc_wo_collision, volumes.getCollision(radius, layer_idx - 1, elem.use_min_xy_dist)),</div>
<div class="line"><span class="lineno"> 1980</span>                    safe_union(to_bp_data, to_model_data));</div>
<div class="line"><span class="lineno"> 1981</span>                merging_area.state = elem;</div>
<div class="line"><span class="lineno"> 1982</span>                assert(!max_influence_area.empty());</div>
<div class="line"><span class="lineno"> 1983</span>                merging_area.set_bbox(get_extents(max_influence_area));</div>
<div class="line"><span class="lineno"> 1984</span>                merging_area.areas.influence_areas = std::move(max_influence_area);</div>
<div class="line"><span class="lineno"> 1985</span>                if (! bypass_merge) {</div>
<div class="line"><span class="lineno"> 1986</span>                    if (elem.to_buildplate)</div>
<div class="line"><span class="lineno"> 1987</span>                        merging_area.areas.to_bp_areas = std::move(to_bp_data);</div>
<div class="line"><span class="lineno"> 1988</span>                    if (config.support_rests_on_model)</div>
<div class="line"><span class="lineno"> 1989</span>                        merging_area.areas.to_model_areas = std::move(to_model_data);</div>
<div class="line"><span class="lineno"> 1990</span>                }</div>
<div class="line"><span class="lineno"> 1991</span>            } else {</div>
<div class="line"><span class="lineno"> 1992</span>                <span class="comment">// If the bottom most point of a branch is set, later functions will assume that the position is valid, and ignore it. </span></div>
<div class="line"><span class="lineno"> 1993</span>                <span class="comment">// But as branches connecting with the model that are to small have to be culled, the bottom most point has to be not set.</span></div>
<div class="line"><span class="lineno"> 1994</span>                <span class="comment">// A point can be set on the top most tip layer (maybe more if it should not move for a few layers).</span></div>
<div class="line"><span class="lineno"> 1995</span>                parent.state.result_on_layer_reset();</div>
<div class="line"><span class="lineno"> 1996</span>                parent.state.to_model_gracious = false;</div>
<div class="line"><span class="lineno"> 1997</span>#ifdef TREE_SUPPORTS_TRACK_LOST</div>
<div class="line"><span class="lineno"> 1998</span>                parent.state.verylost = true;</div>
<div class="line"><span class="lineno"> 1999</span>#endif <span class="comment">// TREE_SUPPORTS_TRACK_LOST</span></div>
<div class="line"><span class="lineno"> 2000</span>            }</div>
<div class="line"><span class="lineno"> 2001</span> </div>
<div class="line"><span class="lineno"> 2002</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2003</span>        }</div>
<div class="line"><span class="lineno"> 2004</span>    }, tbb::simple_partitioner());</div>
<div class="line"><span class="lineno"> 2005</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01735">increase_areas_one_layer()</a>, and <a class="el" href="../../#l00356">Slic3r::range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02405">create_layer_pathing()</a>, and <a class="el" href="../../#l01735">increase_areas_one_layer()</a>.</p>
<div id="dynsection-43" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a57466ec994792782e529655de103ab91_cgraph.svg" width="334" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-44" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a57466ec994792782e529655de103ab91_icgraph.svg" width="614" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0931050cec7937180b5b2cb962c64fde" name="a0931050cec7937180b5b2cb962c64fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0931050cec7937180b5b2cb962c64fde">&#9670;&#160;</a></span>increase_single_area()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::optional&lt; <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &gt; Slic3r::FFFTreeSupport::increase_single_area </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html">AreaIncreaseSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>relevant_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>to_bp_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>to_model_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>increased</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td>
          <td class="paramname"><em>overspeed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool&#160;</td>
          <td class="paramname"><em>mergelayer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if an influence area contains a valid subsection and returns the corresponding metadata and the new Influence area. </p>
<p>Calculates an influence areas of the layer below, based on the influence area of one element on the current layer. Increases every influence area by maximum_move_distance_slow. If this is not enough, as in we would change our gracious or to_buildplate status the influence areas are instead increased by maximum_move_distance_slow. Also ensures that increasing the radius of a branch, does not cause it to change its status (like to_buildplate ). If this were the case, the radius is not increased instead.</p>
<p>Warning: The used format inside this is different as the <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> does not have a valid area member. Instead this area is saved as value of the dictionary. This was done to avoid not needed heap allocations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">settings[in]</td><td>Which settings have to be used to check validity. </td></tr>
    <tr><td class="paramname">layer_idx[in]</td><td>Number of the current layer. </td></tr>
    <tr><td class="paramname">parent[in]</td><td>The metadata of the parents influence area. </td></tr>
    <tr><td class="paramname">relevant_offset[in]</td><td>The maximal possible influence area. No guarantee regarding validity with current layer collision required, as it is ensured in-function! </td></tr>
    <tr><td class="paramname">to_bp_data[out]</td><td>The part of the Influence area that can reach the buildplate. </td></tr>
    <tr><td class="paramname">to_model_data[out]</td><td>The part of the Influence area that do not have to reach the buildplate. This has overlap with new_layer_data. </td></tr>
    <tr><td class="paramname">increased[out]</td><td>Area than can reach all further up support points. No assurance is made that the buildplate or the model can be reached in accordance to the user-supplied settings. </td></tr>
    <tr><td class="paramname">overspeed[in]</td><td>How much should the already offset area be offset again. Usually this is 0. </td></tr>
    <tr><td class="paramname">mergelayer[in]</td><td>Will the merge method be called on this layer. This information is required as some calculation can be avoided if they are not required for merging. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid support element for the next layer regarding the calculated influence areas. Empty if no influence are can be created using the supplied influence area and settings. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1560</span>{</div>
<div class="line"><span class="lineno"> 1561</span>    <a class="code hl_struct" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> current_elem{ SupportElementState::propagate_down(parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>) };</div>
<div class="line"><span class="lineno"> 1562</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> check_layer_data;</div>
<div class="line"><span class="lineno"> 1563</span>    <span class="keywordflow">if</span> (settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ae9dd5c260a9ffd563b9a1cfe66c4708e">increase_radius</a>)</div>
<div class="line"><span class="lineno"> 1564</span>        current_elem.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a222c73eef54306197d4bc0ec291dc120">effective_radius_height</a> += 1;</div>
<div class="line"><span class="lineno"> 1565</span>    <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> radius = support_element_collision_radius(config, current_elem);</div>
<div class="line"><span class="lineno"> 1566</span> </div>
<div class="line"><span class="lineno"> 1567</span>    <span class="keywordflow">if</span> (settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#aec935687d9d75ae8c8c7f4c12380805e">move</a>) {</div>
<div class="line"><span class="lineno"> 1568</span>        increased = relevant_offset;</div>
<div class="line"><span class="lineno"> 1569</span>        <span class="keywordflow">if</span> (overspeed &gt; 0) {</div>
<div class="line"><span class="lineno"> 1570</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> safe_movement_distance = </div>
<div class="line"><span class="lineno"> 1571</span>                (current_elem.use_min_xy_dist ? config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a510f0b550289688a5f94753933635aa8">xy_min_distance</a> : config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e07ec0b2df8f878e998e444d191dbfc">xy_distance</a>) + </div>
<div class="line"><span class="lineno"> 1572</span>                (std::min(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e96bc0b46b362062f64b7dc276c959b">z_distance_top_layers</a>, config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aca0d5a017698e829e9e04a55a601cfb5">z_distance_bottom_layers</a>) &gt; 0 ? config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a4b54002283ea9803ca8b00a1d06fe404">min_feature_size</a> : 0);</div>
<div class="line"><span class="lineno"> 1573</span>            <span class="comment">// The difference to ensure that the result not only conforms to wall_restriction, but collision/avoidance is done later.</span></div>
<div class="line"><span class="lineno"> 1574</span>            <span class="comment">// The higher last_safe_step_movement_distance comes exactly from the fact that the collision will be subtracted later.</span></div>
<div class="line"><span class="lineno"> 1575</span>            increased = safe_offset_inc(increased, overspeed, volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#acef503499bda1c89dcda124a408ca6b2">getWallRestriction</a>(support_element_collision_radius(config, parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>), layer_idx, parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">use_min_xy_dist</a>), </div>
<div class="line"><span class="lineno"> 1576</span>                safe_movement_distance, safe_movement_distance + radius, 1);</div>
<div class="line"><span class="lineno"> 1577</span>        }</div>
<div class="line"><span class="lineno"> 1578</span>        <span class="keywordflow">if</span> (settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ab8e412f49f318cb72367de30f71a4c1b">no_error</a> &amp;&amp; settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#aec935687d9d75ae8c8c7f4c12380805e">move</a>)</div>
<div class="line"><span class="lineno"> 1579</span>            <span class="comment">// as ClipperLib::jtRound has to be used for offsets this simplify is VERY important for performance.</span></div>
<div class="line"><span class="lineno"> 1580</span>            polygons_simplify(increased, scaled&lt;float&gt;(0.025), polygons_strictly_simple);</div>
<div class="line"><span class="lineno"> 1581</span>    } <span class="keywordflow">else</span> </div>
<div class="line"><span class="lineno"> 1582</span>        <span class="comment">// if no movement is done the areas keep parent area as no move == offset(0)</span></div>
<div class="line"><span class="lineno"> 1583</span>        increased = parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ab91ca9359c684859675f7f26e6d3cd01">influence_area</a>;</div>
<div class="line"><span class="lineno"> 1584</span> </div>
<div class="line"><span class="lineno"> 1585</span>    <span class="keywordflow">if</span> (mergelayer || current_elem.to_buildplate) {</div>
<div class="line"><span class="lineno"> 1586</span>        to_bp_data = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a19ec6e494752f6d4b4513279cb3f873e">diff_clipped</a>(increased, volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(radius, layer_idx - 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">type</a>, <span class="keyword">false</span>, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>)));</div>
<div class="line"><span class="lineno"> 1587</span>        <span class="keywordflow">if</span> (! current_elem.to_buildplate &amp;&amp; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(to_bp_data) &gt; tiny_area_threshold) {</div>
<div class="line"><span class="lineno"> 1588</span>            <span class="comment">// mostly happening in the tip, but with merges one should check every time, just to be sure.</span></div>
<div class="line"><span class="lineno"> 1589</span>            current_elem.to_buildplate = <span class="keyword">true</span>; <span class="comment">// sometimes nodes that can reach the buildplate are marked as cant reach, tainting subtrees. This corrects it.</span></div>
<div class="line"><span class="lineno"> 1590</span>            BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;Corrected taint leading to a wrong to model value on layer &quot;</span> &lt;&lt; layer_idx - 1 &lt;&lt; <span class="stringliteral">&quot; targeting &quot;</span> &lt;&lt; </div>
<div class="line"><span class="lineno"> 1591</span>                current_elem.target_height &lt;&lt; <span class="stringliteral">&quot; with radius &quot;</span> &lt;&lt; radius;</div>
<div class="line"><span class="lineno"> 1592</span>        }</div>
<div class="line"><span class="lineno"> 1593</span>    }</div>
<div class="line"><span class="lineno"> 1594</span>    <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a>) {</div>
<div class="line"><span class="lineno"> 1595</span>        <span class="keywordflow">if</span> (mergelayer || current_elem.to_model_gracious)</div>
<div class="line"><span class="lineno"> 1596</span>            to_model_data = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a19ec6e494752f6d4b4513279cb3f873e">diff_clipped</a>(increased, volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(radius, layer_idx - 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">type</a>, <span class="keyword">true</span>, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>)));</div>
<div class="line"><span class="lineno"> 1597</span> </div>
<div class="line"><span class="lineno"> 1598</span>        <span class="keywordflow">if</span> (!current_elem.to_model_gracious) {</div>
<div class="line"><span class="lineno"> 1599</span>            <span class="keywordflow">if</span> (mergelayer &amp;&amp; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(to_model_data) &gt;= tiny_area_threshold) {</div>
<div class="line"><span class="lineno"> 1600</span>                current_elem.to_model_gracious = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1601</span>                BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;Corrected taint leading to a wrong non gracious value on layer &quot;</span> &lt;&lt; layer_idx - 1 &lt;&lt; <span class="stringliteral">&quot; targeting &quot;</span> &lt;&lt; </div>
<div class="line"><span class="lineno"> 1602</span>                    current_elem.target_height &lt;&lt; <span class="stringliteral">&quot; with radius &quot;</span> &lt;&lt; radius;</div>
<div class="line"><span class="lineno"> 1603</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1604</span>                <span class="comment">// Cannot route to gracious areas. Push the tree away from object and route it down anyways.</span></div>
<div class="line"><span class="lineno"> 1605</span>                to_model_data = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a19ec6e494752f6d4b4513279cb3f873e">diff_clipped</a>(increased, volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#af880ece6544ec2816bc0444aeec378bb">getCollision</a>(radius, layer_idx - 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>)));</div>
<div class="line"><span class="lineno"> 1606</span>        }</div>
<div class="line"><span class="lineno"> 1607</span>    }</div>
<div class="line"><span class="lineno"> 1608</span> </div>
<div class="line"><span class="lineno"> 1609</span>    check_layer_data = current_elem.to_buildplate ? to_bp_data : to_model_data;</div>
<div class="line"><span class="lineno"> 1610</span> </div>
<div class="line"><span class="lineno"> 1611</span>    <span class="keywordflow">if</span> (settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ae9dd5c260a9ffd563b9a1cfe66c4708e">increase_radius</a> &amp;&amp; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(check_layer_data) &gt; tiny_area_threshold) {</div>
<div class="line"><span class="lineno"> 1612</span>        <span class="keyword">auto</span> validWithRadius = [&amp;](<a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> next_radius) {</div>
<div class="line"><span class="lineno"> 1613</span>            <span class="keywordflow">if</span> (volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a28c2bc02895f75829a19a688021ec809">ceilRadius</a>(next_radius, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>) &lt;= volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a28c2bc02895f75829a19a688021ec809">ceilRadius</a>(radius, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>))</div>
<div class="line"><span class="lineno"> 1614</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1615</span> </div>
<div class="line"><span class="lineno"> 1616</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> to_bp_data_2;</div>
<div class="line"><span class="lineno"> 1617</span>            <span class="keywordflow">if</span> (current_elem.to_buildplate)</div>
<div class="line"><span class="lineno"> 1618</span>                <span class="comment">// regular union as output will not be used later =&gt; this area should always be a subset of the safe_union one (i think)</span></div>
<div class="line"><span class="lineno"> 1619</span>                to_bp_data_2 = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a19ec6e494752f6d4b4513279cb3f873e">diff_clipped</a>(increased, volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(next_radius, layer_idx - 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">type</a>, <span class="keyword">false</span>, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>));</div>
<div class="line"><span class="lineno"> 1620</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> to_model_data_2;</div>
<div class="line"><span class="lineno"> 1621</span>            <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a> &amp;&amp; !current_elem.to_buildplate)</div>
<div class="line"><span class="lineno"> 1622</span>                to_model_data_2 = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a19ec6e494752f6d4b4513279cb3f873e">diff_clipped</a>(increased, </div>
<div class="line"><span class="lineno"> 1623</span>                    current_elem.to_model_gracious ? </div>
<div class="line"><span class="lineno"> 1624</span>                        volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(next_radius, layer_idx - 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">type</a>, <span class="keyword">true</span>, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>) :</div>
<div class="line"><span class="lineno"> 1625</span>                        volumes.getCollision(next_radius, layer_idx - 1, settings.use_min_distance));</div>
<div class="line"><span class="lineno"> 1626</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> check_layer_data_2 = current_elem.to_buildplate ? to_bp_data_2 : to_model_data_2;</div>
<div class="line"><span class="lineno"> 1627</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(check_layer_data_2) &gt; tiny_area_threshold;</div>
<div class="line"><span class="lineno"> 1628</span>        };</div>
<div class="line"><span class="lineno"> 1629</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> ceil_radius_before = volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a28c2bc02895f75829a19a688021ec809">ceilRadius</a>(radius, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>);</div>
<div class="line"><span class="lineno"> 1630</span> </div>
<div class="line"><span class="lineno"> 1631</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, current_elem) &lt; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a40020ffaca89a2ef53140fabb1cfa86c">increase_radius_until_radius</a> &amp;&amp; <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, current_elem) &lt; <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, current_elem)) {</div>
<div class="line"><span class="lineno"> 1632</span>            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> target_radius = std::min(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, current_elem), config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a40020ffaca89a2ef53140fabb1cfa86c">increase_radius_until_radius</a>);</div>
<div class="line"><span class="lineno"> 1633</span>            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> current_ceil_radius = volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a3d1ab1532a772926fcbb02fbc5f78895">getRadiusNextCeil</a>(radius, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>);</div>
<div class="line"><span class="lineno"> 1634</span> </div>
<div class="line"><span class="lineno"> 1635</span>            <span class="keywordflow">while</span> (current_ceil_radius &lt; target_radius &amp;&amp; validWithRadius(volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a3d1ab1532a772926fcbb02fbc5f78895">getRadiusNextCeil</a>(current_ceil_radius + 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>)))</div>
<div class="line"><span class="lineno"> 1636</span>                current_ceil_radius = volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a3d1ab1532a772926fcbb02fbc5f78895">getRadiusNextCeil</a>(current_ceil_radius + 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>);</div>
<div class="line"><span class="lineno"> 1637</span>            <span class="keywordtype">size_t</span> resulting_eff_dtt = current_elem.effective_radius_height;</div>
<div class="line"><span class="lineno"> 1638</span>            <span class="keywordflow">while</span> (resulting_eff_dtt + 1 &lt; current_elem.distance_to_top &amp;&amp; </div>
<div class="line"><span class="lineno"> 1639</span>                config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(resulting_eff_dtt + 1, current_elem.elephant_foot_increases) &lt;= current_ceil_radius &amp;&amp; </div>
<div class="line"><span class="lineno"> 1640</span>                config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(resulting_eff_dtt + 1, current_elem.elephant_foot_increases) &lt;= <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, current_elem))</div>
<div class="line"><span class="lineno"> 1641</span>                ++ resulting_eff_dtt;</div>
<div class="line"><span class="lineno"> 1642</span>            current_elem.effective_radius_height = resulting_eff_dtt;</div>
<div class="line"><span class="lineno"> 1643</span>        }</div>
<div class="line"><span class="lineno"> 1644</span>        radius = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, current_elem);</div>
<div class="line"><span class="lineno"> 1645</span> </div>
<div class="line"><span class="lineno"> 1646</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> foot_radius_increase = std::max(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a069aeea9e00c5920b0f0cb521098ceff">bp_radius_increase_per_layer</a> - config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ad7a8bb6fc40e37b8f964bfd1aa1b0875">branch_radius_increase_per_layer</a>, 0.0);</div>
<div class="line"><span class="lineno"> 1647</span>        <span class="comment">// Is nearly all of the time 1, but sometimes an increase of 1 could cause the radius to become bigger than recommendedMinRadius, </span></div>
<div class="line"><span class="lineno"> 1648</span>        <span class="comment">// which could cause the radius to become bigger than precalculated.</span></div>
<div class="line"><span class="lineno"> 1649</span>        <span class="keywordtype">double</span> planned_foot_increase = std::min(1.0, <span class="keywordtype">double</span>(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a46ea6760b5c74250909d836be237e55d">recommendedMinRadius</a>(layer_idx - 1) - <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, current_elem)) / foot_radius_increase);</div>
<div class="line"><span class="lineno"> 1650</span><span class="comment">//FIXME</span></div>
<div class="line"><span class="lineno"> 1651</span>        <span class="keywordtype">bool</span> increase_bp_foot = planned_foot_increase &gt; 0 &amp;&amp; current_elem.to_buildplate;</div>
<div class="line"><span class="lineno"> 1652</span><span class="comment">//        bool increase_bp_foot = false;</span></div>
<div class="line"><span class="lineno"> 1653</span> </div>
<div class="line"><span class="lineno"> 1654</span>        <span class="keywordflow">if</span> (increase_bp_foot &amp;&amp; <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, current_elem) &gt;= config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a5de5cde86718e2ce9a86befa855b1c5b">branch_radius</a> &amp;&amp; <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, current_elem) &gt;= config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a40020ffaca89a2ef53140fabb1cfa86c">increase_radius_until_radius</a>)</div>
<div class="line"><span class="lineno"> 1655</span>            <span class="keywordflow">if</span> (validWithRadius(config.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(current_elem.effective_radius_height, current_elem.elephant_foot_increases + planned_foot_increase))) {</div>
<div class="line"><span class="lineno"> 1656</span>                current_elem.elephant_foot_increases += planned_foot_increase;</div>
<div class="line"><span class="lineno"> 1657</span>                radius = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, current_elem);</div>
<div class="line"><span class="lineno"> 1658</span>            }</div>
<div class="line"><span class="lineno"> 1659</span> </div>
<div class="line"><span class="lineno"> 1660</span>        <span class="keywordflow">if</span> (ceil_radius_before != volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a28c2bc02895f75829a19a688021ec809">ceilRadius</a>(radius, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>)) {</div>
<div class="line"><span class="lineno"> 1661</span>            <span class="keywordflow">if</span> (current_elem.to_buildplate)</div>
<div class="line"><span class="lineno"> 1662</span>                to_bp_data = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a19ec6e494752f6d4b4513279cb3f873e">diff_clipped</a>(increased, volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(radius, layer_idx - 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">type</a>, <span class="keyword">false</span>, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>)));</div>
<div class="line"><span class="lineno"> 1663</span>            <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a> &amp;&amp; (!current_elem.to_buildplate || mergelayer))</div>
<div class="line"><span class="lineno"> 1664</span>                to_model_data = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a19ec6e494752f6d4b4513279cb3f873e">diff_clipped</a>(increased, </div>
<div class="line"><span class="lineno"> 1665</span>                    current_elem.to_model_gracious ? </div>
<div class="line"><span class="lineno"> 1666</span>                        volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(radius, layer_idx - 1, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">type</a>, <span class="keyword">true</span>, settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>) :</div>
<div class="line"><span class="lineno"> 1667</span>                        volumes.getCollision(radius, layer_idx - 1, settings.use_min_distance)</div>
<div class="line"><span class="lineno"> 1668</span>                ));</div>
<div class="line"><span class="lineno"> 1669</span>            check_layer_data = current_elem.to_buildplate ? to_bp_data : to_model_data;</div>
<div class="line"><span class="lineno"> 1670</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(check_layer_data) &lt; tiny_area_threshold) {</div>
<div class="line"><span class="lineno"> 1671</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Lost area by doing catch up from &quot;</span> &lt;&lt; ceil_radius_before &lt;&lt; <span class="stringliteral">&quot; to radius &quot;</span> &lt;&lt; </div>
<div class="line"><span class="lineno"> 1672</span>                    volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a28c2bc02895f75829a19a688021ec809">ceilRadius</a>(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, current_elem), settings.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>);</div>
<div class="line"><span class="lineno"> 1673</span>                <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5b7e3aa2dbc67c812bcd72802a8e7734">tree_supports_show_error</a>(<span class="stringliteral">&quot;Area lost catching up radius. May not cause visible malformation.&quot;</span>sv, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1674</span>            }</div>
<div class="line"><span class="lineno"> 1675</span>        }</div>
<div class="line"><span class="lineno"> 1676</span>    }</div>
<div class="line"><span class="lineno"> 1677</span> </div>
<div class="line"><span class="lineno"> 1678</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(check_layer_data) &gt; tiny_area_threshold ? std::optional&lt;SupportElementState&gt;(current_elem) : <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::optional&lt;SupportElementState&gt;();</div>
<div class="line"><span class="lineno"> 1679</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_a28c2bc02895f75829a19a688021ec809"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a28c2bc02895f75829a19a688021ec809">Slic3r::FFFTreeSupport::TreeModelVolumes::ceilRadius</a></div><div class="ttdeci">coord_t ceilRadius(const coord_t radius, const bool min_xy_dist) const</div><div class="ttdoc">Round radius upwards to either a multiple of m_radius_sample_resolution or a exponentially increasing...</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.hpp:149</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_a3d1ab1532a772926fcbb02fbc5f78895"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a3d1ab1532a772926fcbb02fbc5f78895">Slic3r::FFFTreeSupport::TreeModelVolumes::getRadiusNextCeil</a></div><div class="ttdeci">coord_t getRadiusNextCeil(coord_t radius, bool min_xy_dist) const</div><div class="ttdoc">Round radius upwards to the maximum that would still round up to the same value as the provided one.</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.hpp:163</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_acef503499bda1c89dcda124a408ca6b2"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#acef503499bda1c89dcda124a408ca6b2">Slic3r::FFFTreeSupport::TreeModelVolumes::getWallRestriction</a></div><div class="ttdeci">const Polygons &amp; getWallRestriction(coord_t radius, LayerIndex layer_idx, bool min_xy_dist) const</div><div class="ttdoc">Provides the area that represents the walls, as in the printed area, of the model....</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.cpp:373</div></div>
<div class="ttc" id="anamespace_slic3r_html_a19ec6e494752f6d4b4513279cb3f873e"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a19ec6e494752f6d4b4513279cb3f873e">Slic3r::diff_clipped</a></div><div class="ttdeci">Slic3r::Polygons diff_clipped(const Slic3r::Polygons &amp;subject, const Slic3r::Polygons &amp;clip, ApplySafetyOffset do_safety_offset)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:676</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings_html_a2b3379f3a4d0afb09f84165db1e4663f"><div class="ttname"><a href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">Slic3r::FFFTreeSupport::AreaIncreaseSettings::type</a></div><div class="ttdeci">TreeModelVolumes::AvoidanceType type</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:62</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings_html_a522921428518857b6207464049235c4a"><div class="ttname"><a href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">Slic3r::FFFTreeSupport::AreaIncreaseSettings::use_min_distance</a></div><div class="ttdeci">bool use_min_distance</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:65</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings_html_ab8e412f49f318cb72367de30f71a4c1b"><div class="ttname"><a href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ab8e412f49f318cb72367de30f71a4c1b">Slic3r::FFFTreeSupport::AreaIncreaseSettings::no_error</a></div><div class="ttdeci">bool no_error</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:64</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings_html_ae9dd5c260a9ffd563b9a1cfe66c4708e"><div class="ttname"><a href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ae9dd5c260a9ffd563b9a1cfe66c4708e">Slic3r::FFFTreeSupport::AreaIncreaseSettings::increase_radius</a></div><div class="ttdeci">bool increase_radius</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:63</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings_html_aec935687d9d75ae8c8c7f4c12380805e"><div class="ttname"><a href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#aec935687d9d75ae8c8c7f4c12380805e">Slic3r::FFFTreeSupport::AreaIncreaseSettings::move</a></div><div class="ttdeci">bool move</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:66</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_a57f903b921491c48a1241f161078dea0"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">Slic3r::FFFTreeSupport::SupportElementStateBits::use_min_xy_dist</a></div><div class="ttdeci">bool use_min_xy_dist</div><div class="ttdoc">Whether the min_xy_distance can be used to get avoidance or similar. Will only be true if support_xy_...</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:110</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">Slic3r::FFFTreeSupport::SupportElementState</a></div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:141</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a069aeea9e00c5920b0f0cb521098ceff"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a069aeea9e00c5920b0f0cb521098ceff">Slic3r::FFFTreeSupport::TreeSupportSettings::bp_radius_increase_per_layer</a></div><div class="ttdeci">double bp_radius_increase_per_layer</div><div class="ttdoc">How much one is allowed to increase the tree branch radius close to print bed to reach the required b...</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:289</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a40020ffaca89a2ef53140fabb1cfa86c"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a40020ffaca89a2ef53140fabb1cfa86c">Slic3r::FFFTreeSupport::TreeSupportSettings::increase_radius_until_radius</a></div><div class="ttdeci">coord_t increase_radius_until_radius</div><div class="ttdoc">Increase radius in the resulting drawn branches, even if the avoidance does not allow it....</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:264</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a46ea6760b5c74250909d836be237e55d"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a46ea6760b5c74250909d836be237e55d">Slic3r::FFFTreeSupport::TreeSupportSettings::recommendedMinRadius</a></div><div class="ttdeci">coord_t recommendedMinRadius(LayerIndex layer_idx) const</div><div class="ttdoc">Get the Radius an element should at least have at a given layer.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:417</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a4b54002283ea9803ca8b00a1d06fe404"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a4b54002283ea9803ca8b00a1d06fe404">Slic3r::FFFTreeSupport::TreeSupportSettings::min_feature_size</a></div><div class="ttdeci">coord_t min_feature_size</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:355</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_aca0d5a017698e829e9e04a55a601cfb5"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aca0d5a017698e829e9e04a55a601cfb5">Slic3r::FFFTreeSupport::TreeSupportSettings::z_distance_bottom_layers</a></div><div class="ttdeci">size_t z_distance_bottom_layers</div><div class="ttdoc">Amount of layers distance required from the top of the model to the bottom of a support structure.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:301</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_ad7a8bb6fc40e37b8f964bfd1aa1b0875"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ad7a8bb6fc40e37b8f964bfd1aa1b0875">Slic3r::FFFTreeSupport::TreeSupportSettings::branch_radius_increase_per_layer</a></div><div class="ttdeci">double branch_radius_increase_per_layer</div><div class="ttdoc">How much a branch radius increases with each layer to guarantee the prescribed tree widening.</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:252</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00289">Slic3r::FFFTreeSupport::TreeSupportSettings::bp_radius_increase_per_layer</a>, <a class="el" href="../../#l00228">Slic3r::FFFTreeSupport::TreeSupportSettings::branch_radius</a>, <a class="el" href="../../#l00252">Slic3r::FFFTreeSupport::TreeSupportSettings::branch_radius_increase_per_layer</a>, <a class="el" href="../../#l00149">Slic3r::FFFTreeSupport::TreeModelVolumes::ceilRadius()</a>, <a class="el" href="../../#l00676">Slic3r::diff_clipped()</a>, <a class="el" href="../../#l00165">Slic3r::FFFTreeSupport::SupportElementState::effective_radius_height</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00327">Slic3r::FFFTreeSupport::TreeModelVolumes::getAvoidance()</a>, <a class="el" href="../../#l00291">Slic3r::FFFTreeSupport::TreeModelVolumes::getCollision()</a>, <a class="el" href="../../#l00403">Slic3r::FFFTreeSupport::TreeSupportSettings::getRadius()</a>, <a class="el" href="../../#l00163">Slic3r::FFFTreeSupport::TreeModelVolumes::getRadiusNextCeil()</a>, <a class="el" href="../../#l00373">Slic3r::FFFTreeSupport::TreeModelVolumes::getWallRestriction()</a>, <a class="el" href="../../#l00063">Slic3r::FFFTreeSupport::AreaIncreaseSettings::increase_radius</a>, <a class="el" href="../../#l00264">Slic3r::FFFTreeSupport::TreeSupportSettings::increase_radius_until_radius</a>, <a class="el" href="../../#l01548">increase_single_area()</a>, <a class="el" href="../../#l00278">Slic3r::FFFTreeSupport::SupportElement::influence_area</a>, <a class="el" href="../../#l00355">Slic3r::FFFTreeSupport::TreeSupportSettings::min_feature_size</a>, <a class="el" href="../../#l00066">Slic3r::FFFTreeSupport::AreaIncreaseSettings::move</a>, <a class="el" href="../../#l00064">Slic3r::FFFTreeSupport::AreaIncreaseSettings::no_error</a>, <a class="el" href="../../#l00595">Slic3r::polygons_simplify()</a>, <a class="el" href="../../#l00417">Slic3r::FFFTreeSupport::TreeSupportSettings::recommendedMinRadius()</a>, <a class="el" href="../../#l00763">safe_offset_inc()</a>, <a class="el" href="../../#l00720">safe_union()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, <a class="el" href="../../#l00246">support_element_collision_radius()</a>, <a class="el" href="../../#l00236">support_element_radius()</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::TreeSupportSettings::support_rests_on_model</a>, <a class="el" href="../../#l00173">tree_supports_show_error()</a>, <a class="el" href="../../#l00062">Slic3r::FFFTreeSupport::AreaIncreaseSettings::type</a>, <a class="el" href="../../#l00065">Slic3r::FFFTreeSupport::AreaIncreaseSettings::use_min_distance</a>, <a class="el" href="../../#l00110">Slic3r::FFFTreeSupport::SupportElementStateBits::use_min_xy_dist</a>, <a class="el" href="../../#l00276">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_distance</a>, <a class="el" href="../../#l00293">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_min_distance</a>, <a class="el" href="../../#l00301">Slic3r::FFFTreeSupport::TreeSupportSettings::z_distance_bottom_layers</a>, and <a class="el" href="../../#l00297">Slic3r::FFFTreeSupport::TreeSupportSettings::z_distance_top_layers</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01548">increase_single_area()</a>.</p>
<div id="dynsection-45" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a0931050cec7937180b5b2cb962c64fde_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-46" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a0931050cec7937180b5b2cb962c64fde_icgraph.svg" width="168" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8c6c9af32e09eb3e442c8ac6d9363003" name="a8c6c9af32e09eb3e442c8ac6d9363003"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c6c9af32e09eb3e442c8ac6d9363003">&#9670;&#160;</a></span>layer_allocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp; Slic3r::FFFTreeSupport::layer_allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a1fa4d196f7a343766004aaa786d148bd">SupporLayerType</a>&#160;</td>
          <td class="paramname"><em>layer_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>layer_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  506</span>{</div>
<div class="line"><span class="lineno">  507</span>    <a class="code hl_class" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp;layer = layer_storage.<a class="code hl_function" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html#a6388b2805be0110bfba84e113c9b815f">allocate</a>(layer_type);</div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#acaa1be873e2e3f6f7a9869feca2fcf78">layer_initialize</a>(layer, slicing_params, config, layer_idx);</div>
<div class="line"><span class="lineno">  509</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage_html_a6388b2805be0110bfba84e113c9b815f"><div class="ttname"><a href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html#a6388b2805be0110bfba84e113c9b815f">Slic3r::FFFSupport::SupportGeneratorLayerStorage::allocate</a></div><div class="ttdeci">SupportGeneratorLayer &amp; allocate(SupporLayerType layer_type)</div><div class="ttdef"><b>Definition</b> SupportLayer.hpp:126</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_acaa1be873e2e3f6f7a9869feca2fcf78"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#acaa1be873e2e3f6f7a9869feca2fcf78">Slic3r::FFFTreeSupport::layer_initialize</a></div><div class="ttdeci">SupportGeneratorLayer &amp; layer_initialize(SupportGeneratorLayer &amp;layer_new, const SlicingParameters &amp;slicing_params, const TreeSupportSettings &amp;config, const size_t layer_idx)</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:476</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00126">Slic3r::FFFSupport::SupportGeneratorLayerStorage::allocate()</a>, and <a class="el" href="../../#l00476">layer_initialize()</a>.</p>
<div id="dynsection-47" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a8c6c9af32e09eb3e442c8ac6d9363003_cgraph.svg" width="630" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af0a7d9e844215a555a30eef3dd925d9e" name="af0a7d9e844215a555a30eef3dd925d9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0a7d9e844215a555a30eef3dd925d9e">&#9670;&#160;</a></span>layer_allocate_unguarded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp; Slic3r::FFFTreeSupport::layer_allocate_unguarded </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a1fa4d196f7a343766004aaa786d148bd">SupporLayerType</a>&#160;</td>
          <td class="paramname"><em>layer_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>layer_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  495</span>{</div>
<div class="line"><span class="lineno">  496</span>    <a class="code hl_class" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp;layer = layer_storage.<a class="code hl_function" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html#a056abec18197eb1197b712545574cad5">allocate_unguarded</a>(layer_type);</div>
<div class="line"><span class="lineno">  497</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#acaa1be873e2e3f6f7a9869feca2fcf78">layer_initialize</a>(layer, slicing_params, config, layer_idx);</div>
<div class="line"><span class="lineno">  498</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage_html_a056abec18197eb1197b712545574cad5"><div class="ttname"><a href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html#a056abec18197eb1197b712545574cad5">Slic3r::FFFSupport::SupportGeneratorLayerStorage::allocate_unguarded</a></div><div class="ttdeci">SupportGeneratorLayer &amp; allocate_unguarded(SupporLayerType layer_type)</div><div class="ttdef"><b>Definition</b> SupportLayer.hpp:120</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00120">Slic3r::FFFSupport::SupportGeneratorLayerStorage::allocate_unguarded()</a>, and <a class="el" href="../../#l00476">layer_initialize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00561">Slic3r::FFFTreeSupport::InterfacePlacer::add_roof_unguarded()</a>.</p>
<div id="dynsection-48" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af0a7d9e844215a555a30eef3dd925d9e_cgraph.svg" width="650" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-49" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af0a7d9e844215a555a30eef3dd925d9e_icgraph.svg" width="100%" height="535"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="acf81f5493356198ef1d10a851d40e994" name="acf81f5493356198ef1d10a851d40e994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf81f5493356198ef1d10a851d40e994">&#9670;&#160;</a></span>layer_idx_ceil()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> Slic3r::FFFTreeSupport::layer_idx_ceil </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> double&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  463</span>{</div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">return</span> </div>
<div class="line"><span class="lineno">  465</span>        <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size()) +</div>
<div class="line"><span class="lineno">  466</span>        std::max&lt;LayerIndex&gt;(0, <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a>((z - slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6339c74eff90432e3b7ea380898a6c75">object_print_z_min</a> - slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6cca7a111a818a332a501cc9467c722e">first_object_layer_height</a>) / slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a4e9e7e96af55db823c04201bee40292e">layer_height</a>));</div>
<div class="line"><span class="lineno">  467</span>}</div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a4e9e7e96af55db823c04201bee40292e"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a4e9e7e96af55db823c04201bee40292e">Slic3r::SlicingParameters::layer_height</a></div><div class="ttdeci">coordf_t layer_height</div><div class="ttdef"><b>Definition</b> Slicing.hpp:61</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a6339c74eff90432e3b7ea380898a6c75"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6339c74eff90432e3b7ea380898a6c75">Slic3r::SlicingParameters::object_print_z_min</a></div><div class="ttdeci">coordf_t object_print_z_min</div><div class="ttdef"><b>Definition</b> Slicing.hpp:97</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a6cca7a111a818a332a501cc9467c722e"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6cca7a111a818a332a501cc9467c722e">Slic3r::SlicingParameters::first_object_layer_height</a></div><div class="ttdeci">coordf_t first_object_layer_height</div><div class="ttdef"><b>Definition</b> Slicing.hpp:75</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00402">ceil()</a>, <a class="el" href="../../#l00075">Slic3r::SlicingParameters::first_object_layer_height</a>, <a class="el" href="../../#l00061">Slic3r::SlicingParameters::layer_height</a>, <a class="el" href="../../#l00097">Slic3r::SlicingParameters::object_print_z_min</a>, and <a class="el" href="../../#l00358">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a>.</p>
<div id="dynsection-50" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_acf81f5493356198ef1d10a851d40e994_cgraph.svg" width="258" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a66c42b1b74f00331d423f2a4b4c5361a" name="a66c42b1b74f00331d423f2a4b4c5361a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66c42b1b74f00331d423f2a4b4c5361a">&#9670;&#160;</a></span>layer_idx_floor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> Slic3r::FFFTreeSupport::layer_idx_floor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> double&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  470</span>{</div>
<div class="line"><span class="lineno">  471</span>    <span class="keywordflow">return</span> </div>
<div class="line"><span class="lineno">  472</span>        <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size()) + </div>
<div class="line"><span class="lineno">  473</span>        std::max&lt;LayerIndex&gt;(0, <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a3230e10964844c34fb73eaccc84dc8a7">floor</a>((z - slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6339c74eff90432e3b7ea380898a6c75">object_print_z_min</a> - slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6cca7a111a818a332a501cc9467c722e">first_object_layer_height</a>) / slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a4e9e7e96af55db823c04201bee40292e">layer_height</a>));</div>
<div class="line"><span class="lineno">  474</span>}</div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a3230e10964844c34fb73eaccc84dc8a7"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a3230e10964844c34fb73eaccc84dc8a7">floor</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const FloorReturnType floor() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:388</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00075">Slic3r::SlicingParameters::first_object_layer_height</a>, <a class="el" href="../../#l00388">floor()</a>, <a class="el" href="../../#l00061">Slic3r::SlicingParameters::layer_height</a>, <a class="el" href="../../#l00097">Slic3r::SlicingParameters::object_print_z_min</a>, and <a class="el" href="../../#l00358">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a>.</p>
<div id="dynsection-51" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a66c42b1b74f00331d423f2a4b4c5361a_cgraph.svg" width="263" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="acaa1be873e2e3f6f7a9869feca2fcf78" name="acaa1be873e2e3f6f7a9869feca2fcf78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaa1be873e2e3f6f7a9869feca2fcf78">&#9670;&#160;</a></span>layer_initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp; Slic3r::FFFTreeSupport::layer_initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html">SupportGeneratorLayer</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t&#160;</td>
          <td class="paramname"><em>layer_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  481</span>{</div>
<div class="line"><span class="lineno">  482</span>    layer_new.<a class="code hl_variable" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html#a81425a80008a6abab8e4796be7c002b3">print_z</a>  = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">layer_z</a>(slicing_params, config, layer_idx);</div>
<div class="line"><span class="lineno">  483</span>    layer_new.<a class="code hl_variable" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html#a75401d86c73cac62381d7ed037f8887c">bottom_z</a> = layer_idx &gt; 0 ? <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">layer_z</a>(slicing_params, config, layer_idx - 1) : 0;</div>
<div class="line"><span class="lineno">  484</span>    layer_new.<a class="code hl_variable" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html#a0a8d091b49c5c92eec7c7a09251192e9">height</a>   = layer_new.<a class="code hl_variable" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html#a81425a80008a6abab8e4796be7c002b3">print_z</a> - layer_new.<a class="code hl_variable" href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html#a75401d86c73cac62381d7ed037f8887c">bottom_z</a>;</div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordflow">return</span> layer_new;</div>
<div class="line"><span class="lineno">  486</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_html_a0a8d091b49c5c92eec7c7a09251192e9"><div class="ttname"><a href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html#a0a8d091b49c5c92eec7c7a09251192e9">Slic3r::FFFSupport::SupportGeneratorLayer::height</a></div><div class="ttdeci">coordf_t height</div><div class="ttdef"><b>Definition</b> SupportLayer.hpp:96</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_html_a75401d86c73cac62381d7ed037f8887c"><div class="ttname"><a href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html#a75401d86c73cac62381d7ed037f8887c">Slic3r::FFFSupport::SupportGeneratorLayer::bottom_z</a></div><div class="ttdeci">coordf_t bottom_z</div><div class="ttdef"><b>Definition</b> SupportLayer.hpp:94</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_html_a81425a80008a6abab8e4796be7c002b3"><div class="ttname"><a href="../../df/dd3/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer.html#a81425a80008a6abab8e4796be7c002b3">Slic3r::FFFSupport::SupportGeneratorLayer::print_z</a></div><div class="ttdeci">coordf_t print_z</div><div class="ttdef"><b>Definition</b> SupportLayer.hpp:91</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00094">Slic3r::FFFSupport::SupportGeneratorLayer::bottom_z</a>, <a class="el" href="../../#l00096">Slic3r::FFFSupport::SupportGeneratorLayer::height</a>, <a class="el" href="../../#l00455">layer_z()</a>, and <a class="el" href="../../#l00091">Slic3r::FFFSupport::SupportGeneratorLayer::print_z</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00500">layer_allocate()</a>, and <a class="el" href="../../#l00489">layer_allocate_unguarded()</a>.</p>
<div id="dynsection-52" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-52-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-52-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-52-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_acaa1be873e2e3f6f7a9869feca2fcf78_cgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-53" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-53-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-53-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-53-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_acaa1be873e2e3f6f7a9869feca2fcf78_icgraph.svg" width="100%" height="535"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa2d118629726e53c068e0a8c7d44eb80" name="aa2d118629726e53c068e0a8c7d44eb80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d118629726e53c068e0a8c7d44eb80">&#9670;&#160;</a></span>layer_z()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double Slic3r::FFFTreeSupport::layer_z </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t&#160;</td>
          <td class="paramname"><em>layer_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  456</span>{</div>
<div class="line"><span class="lineno">  457</span>    <span class="keywordflow">return</span> layer_idx &gt;= config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size() ? </div>
<div class="line"><span class="lineno">  458</span>        slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6339c74eff90432e3b7ea380898a6c75">object_print_z_min</a> + slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6cca7a111a818a332a501cc9467c722e">first_object_layer_height</a> + (layer_idx - config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size()) * slicing_params.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a4e9e7e96af55db823c04201bee40292e">layer_height</a> :</div>
<div class="line"><span class="lineno">  459</span>        config.raft_layers[layer_idx];</div>
<div class="line"><span class="lineno">  460</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00075">Slic3r::SlicingParameters::first_object_layer_height</a>, <a class="el" href="../../#l00061">Slic3r::SlicingParameters::layer_height</a>, <a class="el" href="../../#l00097">Slic3r::SlicingParameters::object_print_z_min</a>, and <a class="el" href="../../#l00358">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00587">extrude_branch()</a>, <a class="el" href="../../#l00476">layer_initialize()</a>, and <a class="el" href="../../#l00128">to_tree_element()</a>.</p>
<div id="dynsection-54" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-54-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-54-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-54-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aa2d118629726e53c068e0a8c7d44eb80_icgraph.svg" width="100%" height="535"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa8e234e92ef7e4c1d6f24ce0e7cf53cb" name="aa8e234e92ef7e4c1d6f24ce0e7cf53cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8e234e92ef7e4c1d6f24ce0e7cf53cb">&#9670;&#160;</a></span>make_forest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9ffddd79a33474301413b3501818dd09">Forest</a> Slic3r::FFFTreeSupport::make_forest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  142</span>{</div>
<div class="line"><span class="lineno">  143</span>    <span class="keyword">struct </span>TreeVisitor {</div>
<div class="line"><span class="lineno">  144</span>        <span class="keywordtype">void</span> visit_recursive(std::vector&lt;SupportElements&gt; &amp;move_bounds, <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;start_element, <a class="code hl_struct" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Branch</a> *parent_branch, <a class="code hl_struct" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html">Tree</a> &amp;out)<span class="keyword"> const </span>{</div>
<div class="line"><span class="lineno">  145</span>            assert(! start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">marked</a> &amp;&amp; ! start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.empty());</div>
<div class="line"><span class="lineno">  146</span>            <span class="comment">// Collect elements up to a bifurcation above.</span></div>
<div class="line"><span class="lineno">  147</span>            start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">marked</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  148</span>            <span class="comment">// For each branch bifurcating from this point:</span></div>
<div class="line"><span class="lineno">  149</span><span class="comment">//            SupportElements &amp;layer       = move_bounds[start_element.state.layer_idx];</span></div>
<div class="line"><span class="lineno">  150</span>            <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;layer_above = move_bounds[start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a> + 1];</div>
<div class="line"><span class="lineno">  151</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> parent_idx = 0; parent_idx &lt; start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.size(); ++ parent_idx) {</div>
<div class="line"><span class="lineno">  152</span>                <a class="code hl_struct" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Branch</a> branch;</div>
<div class="line"><span class="lineno">  153</span>                <span class="keywordflow">if</span> (parent_branch)</div>
<div class="line"><span class="lineno">  154</span>                    <span class="comment">// Duplicate the last element of the trunk below.</span></div>
<div class="line"><span class="lineno">  155</span>                    <span class="comment">// If this branch has a smaller diameter than the trunk below, its centerline will not be aligned with the centerline of the trunk.</span></div>
<div class="line"><span class="lineno">  156</span>                    branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.emplace_back(parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.back());</div>
<div class="line"><span class="lineno">  157</span>                branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.emplace_back(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a58708375463e99b2adb77d839339f51e">to_tree_element</a>(config, slicing_params, start_element, parent_branch == <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno">  158</span>                <span class="comment">// Traverse each branch until it branches again.</span></div>
<div class="line"><span class="lineno">  159</span>                <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;first_parent = layer_above[start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>[parent_idx]];</div>
<div class="line"><span class="lineno">  160</span>                assert(! first_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">marked</a>);</div>
<div class="line"><span class="lineno">  161</span>                assert(branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.back().layer_idx + 1 == first_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>);</div>
<div class="line"><span class="lineno">  162</span>                branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.emplace_back(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a58708375463e99b2adb77d839339f51e">to_tree_element</a>(config, slicing_params, first_parent, <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno">  163</span>                <span class="keywordflow">if</span> (first_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.size() &lt; 2)</div>
<div class="line"><span class="lineno">  164</span>                    first_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">marked</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  165</span>                <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *next_branch = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  166</span>                <span class="keywordflow">if</span> (first_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.size() == 1) {</div>
<div class="line"><span class="lineno">  167</span>                    <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *parent = &amp;first_parent;;) {</div>
<div class="line"><span class="lineno">  168</span>                        assert(parent-&gt;state.marked);</div>
<div class="line"><span class="lineno">  169</span>                        <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;next_parent = move_bounds[parent-&gt;state.layer_idx + 1][parent-&gt;parents.front()];</div>
<div class="line"><span class="lineno">  170</span>                        assert(! next_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">marked</a>);</div>
<div class="line"><span class="lineno">  171</span>                        assert(branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.back().layer_idx + 1 == next_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>);</div>
<div class="line"><span class="lineno">  172</span>                        branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.emplace_back(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a58708375463e99b2adb77d839339f51e">to_tree_element</a>(config, slicing_params, next_parent, <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno">  173</span>                        <span class="keywordflow">if</span> (next_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.size() &gt; 1) {</div>
<div class="line"><span class="lineno">  174</span>                            <span class="comment">// Branching point was reached.</span></div>
<div class="line"><span class="lineno">  175</span>                            next_branch = &amp;next_parent;</div>
<div class="line"><span class="lineno">  176</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  177</span>                        }</div>
<div class="line"><span class="lineno">  178</span>                        next_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">marked</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  179</span>                        <span class="keywordflow">if</span> (next_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.size() == 0)</div>
<div class="line"><span class="lineno">  180</span>                            <span class="comment">// Tip is reached.</span></div>
<div class="line"><span class="lineno">  181</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  182</span>                        parent = &amp;next_parent;</div>
<div class="line"><span class="lineno">  183</span>                    }</div>
<div class="line"><span class="lineno">  184</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (first_parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.size() &gt; 1)</div>
<div class="line"><span class="lineno">  185</span>                    <span class="comment">// Branching point was reached.</span></div>
<div class="line"><span class="lineno">  186</span>                    next_branch = &amp;first_parent;</div>
<div class="line"><span class="lineno">  187</span>                assert(branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.size() &gt;= 2);</div>
<div class="line"><span class="lineno">  188</span>                assert(next_branch == <span class="keyword">nullptr</span> || ! next_branch-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">marked</a>);</div>
<div class="line"><span class="lineno">  189</span>                out.<a class="code hl_variable" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html#a7462585e4d9fc85d92d12096e0e5cce4">branches</a>.emplace_back(std::move(branch));</div>
<div class="line"><span class="lineno">  190</span>                Branch *pbranch = &amp;out.<a class="code hl_variable" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html#a7462585e4d9fc85d92d12096e0e5cce4">branches</a>.back();</div>
<div class="line"><span class="lineno">  191</span>                <span class="keywordflow">if</span> (parent_branch) {</div>
<div class="line"><span class="lineno">  192</span>                    parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#ad8f9aded683021c3c26079309f5e4c4d">up</a>.push_back({ pbranch });</div>
<div class="line"><span class="lineno">  193</span>                    pbranch-&gt;down = { parent_branch };</div>
<div class="line"><span class="lineno">  194</span>                }</div>
<div class="line"><span class="lineno">  195</span>                <span class="keywordflow">if</span> (next_branch)</div>
<div class="line"><span class="lineno">  196</span>                    this-&gt;visit_recursive(move_bounds, *next_branch, pbranch, out);</div>
<div class="line"><span class="lineno">  197</span>            }</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>            <span class="keywordflow">if</span> (parent_branch) {</div>
<div class="line"><span class="lineno">  200</span>                <span class="comment">// Update initial radii of thin branches merging with a trunk.</span></div>
<div class="line"><span class="lineno">  201</span>                <span class="keyword">auto</span> it_up_max_r = std::max_element(parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#ad8f9aded683021c3c26079309f5e4c4d">up</a>.begin(), parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#ad8f9aded683021c3c26079309f5e4c4d">up</a>.end(), </div>
<div class="line"><span class="lineno">  202</span>                    [](<span class="keyword">const</span> Bifurcation &amp;l, <span class="keyword">const</span> Bifurcation &amp;r){ return l.branch-&gt;path[1].radius &lt; r.branch-&gt;path[1].radius; });</div>
<div class="line"><span class="lineno">  203</span>                <span class="keyword">const</span> <span class="keywordtype">float</span> r1               = it_up_max_r-&gt;branch-&gt;path[1].radius;</div>
<div class="line"><span class="lineno">  204</span>                <span class="keyword">const</span> <span class="keywordtype">float</span> radius_increment = unscaled&lt;float&gt;(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ad7a8bb6fc40e37b8f964bfd1aa1b0875">branch_radius_increase_per_layer</a>);</div>
<div class="line"><span class="lineno">  205</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#ad8f9aded683021c3c26079309f5e4c4d">up</a>.begin(); it != parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#ad8f9aded683021c3c26079309f5e4c4d">up</a>.end(); ++ it)</div>
<div class="line"><span class="lineno">  206</span>                    <span class="keywordflow">if</span> (it != it_up_max_r) {</div>
<div class="line"><span class="lineno">  207</span>                        Element &amp;el  = it-&gt;branch-&gt;path.front();</div>
<div class="line"><span class="lineno">  208</span>                        Element &amp;el2 = it-&gt;branch-&gt;path[1];</div>
<div class="line"><span class="lineno">  209</span>                        <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">is_approx</a>(r1, el2.radius))</div>
<div class="line"><span class="lineno">  210</span>                            el.radius = std::min(el.radius, el2.radius + radius_increment);</div>
<div class="line"><span class="lineno">  211</span>                    }</div>
<div class="line"><span class="lineno">  212</span>                <span class="comment">// Sort children of parent_branch by decreasing radius.</span></div>
<div class="line"><span class="lineno">  213</span>                std::sort(parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#ad8f9aded683021c3c26079309f5e4c4d">up</a>.begin(), parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#ad8f9aded683021c3c26079309f5e4c4d">up</a>.end(), </div>
<div class="line"><span class="lineno">  214</span>                    [](<span class="keyword">const</span> Bifurcation &amp;l, <span class="keyword">const</span> Bifurcation &amp;r){ return l.branch-&gt;path.front().radius &gt; r.branch-&gt;path.front().radius; });</div>
<div class="line"><span class="lineno">  215</span>                <span class="comment">// Update number of branches to be considered a continuation of the trunk during smoothing.</span></div>
<div class="line"><span class="lineno">  216</span>                {</div>
<div class="line"><span class="lineno">  217</span>                    <span class="keyword">const</span> <span class="keywordtype">float</span> r_trunk = 0.75 * it_up_max_r-&gt;branch-&gt;path.front().radius;</div>
<div class="line"><span class="lineno">  218</span>                    parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#aa9ff1d6c18cb94956f7a9543ed2a82e4">num_up_trunk</a> = 0;</div>
<div class="line"><span class="lineno">  219</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> Bifurcation&amp; up : parent_branch-&gt;<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a46c48bec0d282018b9d167eef7711b2c">up</a>)</div>
<div class="line"><span class="lineno">  220</span>                        <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a46c48bec0d282018b9d167eef7711b2c">up</a>.branch-&gt;path.<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a9bbafef5b59a31bd6049a3aee20d760b">front</a>().radius &lt; r_trunk)</div>
<div class="line"><span class="lineno">  221</span>                            break;</div>
<div class="line"><span class="lineno">  222</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  223</span>                            ++ parent_branch-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#aa9ff1d6c18cb94956f7a9543ed2a82e4">num_up_trunk</a>;</div>
<div class="line"><span class="lineno">  224</span>                }</div>
<div class="line"><span class="lineno">  225</span>            }</div>
<div class="line"><span class="lineno">  226</span>        }</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>        <span class="keyword">const</span> TreeSupportSettings &amp;config;</div>
<div class="line"><span class="lineno">  229</span>        <span class="keyword">const</span> SlicingParameters   &amp;slicing_params;</div>
<div class="line"><span class="lineno">  230</span>    };</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>    TreeVisitor visitor{ config, slicing_params };</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">for</span> (SupportElements &amp;elements : move_bounds)</div>
<div class="line"><span class="lineno">  235</span>        for (SupportElement &amp;el : elements)</div>
<div class="line"><span class="lineno">  236</span>            el.state.marked = false;</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>    <a class="code hl_typedef" href="../../dc/db2/namespacepriv.html#acdb0ac0ef194e3d185439a7fe70007e6">Trees</a> trees;</div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">for</span> (LayerIndex layer_idx = 0; layer_idx + 1 &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()); ++ layer_idx) {</div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordflow">for</span> (SupportElement &amp;start_element : move_bounds[layer_idx]) {</div>
<div class="line"><span class="lineno">  241</span>            <span class="keywordflow">if</span> (! start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">marked</a> &amp;&amp; ! start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.empty()) {</div>
<div class="line"><span class="lineno">  242</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  243</span>                {</div>
<div class="line"><span class="lineno">  244</span>                    <span class="comment">// Verify that this node is a root, such that there is no element in the layer below</span></div>
<div class="line"><span class="lineno">  245</span>                    <span class="comment">// that points to it.</span></div>
<div class="line"><span class="lineno">  246</span>                    <span class="keywordtype">int</span> ielement = &amp;start_element - move_bounds.data();</div>
<div class="line"><span class="lineno">  247</span>                    <span class="keywordtype">int</span> found = 0;</div>
<div class="line"><span class="lineno">  248</span>                    <span class="keywordflow">if</span> (layer_idx &gt; 0) {</div>
<div class="line"><span class="lineno">  249</span>                        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;el : move_bounds[layer_idx - 1]) {</div>
<div class="line"><span class="lineno">  250</span>                            <span class="keywordflow">for</span> (<span class="keyword">auto</span> iparent : el.parents)</div>
<div class="line"><span class="lineno">  251</span>                                <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (iparent == ielement)</div>
<div class="line"><span class="lineno">  252</span>                                    ++ found;</div>
<div class="line"><span class="lineno">  253</span>                        }</div>
<div class="line"><span class="lineno">  254</span>                        <span class="keywordflow">if</span> (found != 0)</div>
<div class="line"><span class="lineno">  255</span>                            printf(<span class="stringliteral">&quot;Found: %d\n&quot;</span>, found);</div>
<div class="line"><span class="lineno">  256</span>                    }</div>
<div class="line"><span class="lineno">  257</span>                }</div>
<div class="line"><span class="lineno">  258</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  259</span>                trees.push_back({});</div>
<div class="line"><span class="lineno">  260</span>                visitor.visit_recursive(move_bounds, start_element, <span class="keyword">nullptr</span>, trees.back());</div>
<div class="line"><span class="lineno">  261</span>                assert(! trees.back().branches.empty());</div>
<div class="line"><span class="lineno">  262</span>                assert(! trees.back().branches.front().path.empty());</div>
<div class="line"><span class="lineno">  263</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  264</span>                <span class="comment">// Debugging: Only build trees with specific properties.</span></div>
<div class="line"><span class="lineno">  265</span>                <span class="keywordflow">if</span> (start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a351fa966797acabd95fc3f70106e85df">lost</a>) {</div>
<div class="line"><span class="lineno">  266</span>                }</div>
<div class="line"><span class="lineno">  267</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (start_element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a927a88f45704b8f5e384552e5cac4461">verylost</a>) {</div>
<div class="line"><span class="lineno">  268</span>                }</div>
<div class="line"><span class="lineno">  269</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  270</span>                    trees.pop_back();</div>
<div class="line"><span class="lineno">  271</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  272</span>            }</div>
<div class="line"><span class="lineno">  273</span>        }</div>
<div class="line"><span class="lineno">  274</span>    }</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span><span class="preprocessor">#if 1</span></div>
<div class="line"><span class="lineno">  277</span>    move_bounds.clear();</div>
<div class="line"><span class="lineno">  278</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordflow">for</span> (SupportElements &amp;elements : move_bounds)</div>
<div class="line"><span class="lineno">  280</span>        for (SupportElement &amp;el : elements)</div>
<div class="line"><span class="lineno">  281</span>            el.state.marked = false;</div>
<div class="line"><span class="lineno">  282</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">return</span> trees;</div>
<div class="line"><span class="lineno">  285</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a58708375463e99b2adb77d839339f51e"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a58708375463e99b2adb77d839339f51e">Slic3r::FFFTreeSupport::to_tree_element</a></div><div class="ttdeci">Element to_tree_element(const TreeSupportSettings &amp;config, const SlicingParameters &amp;slicing_params, SupportElement &amp;element, bool is_root)</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:128</div></div>
<div class="ttc" id="anamespace_slic3r_html_a93b359a57ef07c110b0f8c62d0a15045"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">Slic3r::is_approx</a></div><div class="ttdeci">constexpr bool is_approx(Number value, Number test_value, Number precision=EPSILON)</div><div class="ttdef"><b>Definition</b> libslic3r.h:271</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a9bbafef5b59a31bd6049a3aee20d760b"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a9bbafef5b59a31bd6049a3aee20d760b">libnest2d::shapelike::front</a></div><div class="ttdeci">TPoint&lt; P &gt; front(const P &amp;p)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:872</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_ad1b266b182e7c12ec61378819e3785f1a46c48bec0d282018b9d167eef7711b2c"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a46c48bec0d282018b9d167eef7711b2c">marchsq::__impl::Dir::up</a></div><div class="ttdeci">@ up</div></div>
<div class="ttc" id="anamespacepriv_html_acdb0ac0ef194e3d185439a7fe70007e6"><div class="ttname"><a href="../../dc/db2/namespacepriv.html#acdb0ac0ef194e3d185439a7fe70007e6">priv::Trees</a></div><div class="ttdeci">std::vector&lt; Tree &gt; Trees</div><div class="ttdef"><b>Definition</b> CutSurface.cpp:2733</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_branch_html"><div class="ttname"><a href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Slic3r::FFFTreeSupport::Branch</a></div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:87</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_branch_html_a5abc3c6326edc881686ff0d59bdef64a"><div class="ttname"><a href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">Slic3r::FFFTreeSupport::Branch::path</a></div><div class="ttdeci">std::vector&lt; Element &gt; path</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:88</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_branch_html_aa9ff1d6c18cb94956f7a9543ed2a82e4"><div class="ttname"><a href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#aa9ff1d6c18cb94956f7a9543ed2a82e4">Slic3r::FFFTreeSupport::Branch::num_up_trunk</a></div><div class="ttdeci">size_t num_up_trunk</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:104</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_branch_html_ad8f9aded683021c3c26079309f5e4c4d"><div class="ttname"><a href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#ad8f9aded683021c3c26079309f5e4c4d">Slic3r::FFFTreeSupport::Branch::up</a></div><div class="ttdeci">Bifurcations up</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:99</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_html_a43c1cbbb46c9c01e48a71e9cba0d24df"><div class="ttname"><a href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">Slic3r::FFFTreeSupport::SupportElement::parents</a></div><div class="ttdeci">ParentIndices parents</div><div class="ttdoc">All elements in the layer above the current one that are supported by this element.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:272</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_a351fa966797acabd95fc3f70106e85df"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a351fa966797acabd95fc3f70106e85df">Slic3r::FFFTreeSupport::SupportElementStateBits::lost</a></div><div class="ttdeci">bool lost</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:129</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_a927a88f45704b8f5e384552e5cac4461"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a927a88f45704b8f5e384552e5cac4461">Slic3r::FFFTreeSupport::SupportElementStateBits::verylost</a></div><div class="ttdeci">bool verylost</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:130</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_ae18d4d6ee0fd270d5f5d08812f4976cf"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ae18d4d6ee0fd270d5f5d08812f4976cf">Slic3r::FFFTreeSupport::SupportElementStateBits::marked</a></div><div class="ttdeci">bool marked</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:137</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_html"><div class="ttname"><a href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html">Slic3r::FFFTreeSupport::Tree</a></div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:111</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_html_a7462585e4d9fc85d92d12096e0e5cce4"><div class="ttname"><a href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html#a7462585e4d9fc85d92d12096e0e5cce4">Slic3r::FFFTreeSupport::Tree::branches</a></div><div class="ttdeci">Slic3r::deque&lt; Branch &gt; branches</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:114</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00252">Slic3r::FFFTreeSupport::TreeSupportSettings::branch_radius_increase_per_layer</a>, <a class="el" href="../../#l00114">Slic3r::FFFTreeSupport::Tree::branches</a>, <a class="el" href="../../#l00100">Slic3r::FFFTreeSupport::Branch::down</a>, <a class="el" href="../../#l00271">Slic3r::is_approx()</a>, <a class="el" href="../../#l00160">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a>, <a class="el" href="../../#l00137">Slic3r::FFFTreeSupport::SupportElementStateBits::marked</a>, <a class="el" href="../../#l00104">Slic3r::FFFTreeSupport::Branch::num_up_trunk</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::SupportElement::parents</a>, <a class="el" href="../../#l00088">Slic3r::FFFTreeSupport::Branch::path</a>, <a class="el" href="../../#l00044">Slic3r::FFFTreeSupport::Element::radius</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, <a class="el" href="../../#l00128">to_tree_element()</a>, and <a class="el" href="../../#l00099">Slic3r::FFFTreeSupport::Branch::up</a>.</p>
<div id="dynsection-55" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-55-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-55-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-55-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aa8e234e92ef7e4c1d6f24ce0e7cf53cb_cgraph.svg" width="100%" height="484"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a072f8fb61613be20955808d6ea3da0eb" name="a072f8fb61613be20955808d6ea3da0eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a072f8fb61613be20955808d6ea3da0eb">&#9670;&#160;</a></span>merge_influence_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::merge_influence_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>influence_areas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Merges Influence Areas at one layer if possible. </p>
<p>Branches which do overlap have to be merged. This manages the helper and uses a divide and conquer approach to parallelize this problem. This parallelization can at most accelerate the merging by a factor of 2.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to_bp_areas[in]</td><td>The Elements of the current <a class="el" href="../../d1/d68/class_slic3r_1_1_layer.html">Layer</a> that will reach the buildplate. Value is the influence area where the center of a circle of support may be placed. </td></tr>
    <tr><td class="paramname">to_model_areas[in]</td><td>The Elements of the current <a class="el" href="../../d1/d68/class_slic3r_1_1_layer.html">Layer</a> that do not have to reach the buildplate. Also contains main as every element that can reach the buildplate is not forced to. Value is the influence area where the center of a circle of support may be placed. </td></tr>
    <tr><td class="paramname">influence_areas[in]</td><td>The Elements of the current <a class="el" href="../../d1/d68/class_slic3r_1_1_layer.html">Layer</a> without avoidances removed. This is the largest possible influence area for this layer. Value is the influence area where the center of a circle of support may be placed. </td></tr>
    <tr><td class="paramname">layer_idx[in]</td><td>The current layer. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 2316</span>{</div>
<div class="line"><span class="lineno"> 2317</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> input_size = influence_areas.size();</div>
<div class="line"><span class="lineno"> 2318</span>    <span class="keywordflow">if</span> (input_size == 0)</div>
<div class="line"><span class="lineno"> 2319</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2320</span> </div>
<div class="line"><span class="lineno"> 2321</span>    <span class="comment">// Merging by divide &amp; conquer.</span></div>
<div class="line"><span class="lineno"> 2322</span>    <span class="comment">// The majority of time is consumed by Clipper polygon operations, intersection is accelerated by bounding boxes.</span></div>
<div class="line"><span class="lineno"> 2323</span>    <span class="comment">// Sorting input into an AABB tree helps to perform most of the intersections at first iterations,</span></div>
<div class="line"><span class="lineno"> 2324</span>    <span class="comment">// thus reducing computation when merging larger subtrees.</span></div>
<div class="line"><span class="lineno"> 2325</span>    <span class="comment">// The actual merge logic is found in merge_influence_areas_two_sets.</span></div>
<div class="line"><span class="lineno"> 2326</span> </div>
<div class="line"><span class="lineno"> 2327</span>    <span class="comment">// Build an AABB tree over the influence areas.</span></div>
<div class="line"><span class="lineno"> 2328</span>    <span class="comment">//FIXME A full tree does not need to be built, the lowest level branches will be always bucketed.</span></div>
<div class="line"><span class="lineno"> 2329</span>    <span class="comment">// However the additional time consumed is negligible.</span></div>
<div class="line"><span class="lineno"> 2330</span>    <a class="code hl_class" href="../../db/d1d/class_slic3r_1_1_a_a_b_b_tree_indirect_1_1_tree.html">AABBTreeIndirect::Tree&lt;2, coord_t&gt;</a> tree;</div>
<div class="line"><span class="lineno"> 2331</span>    <span class="comment">// Sort influence_areas in place.</span></div>
<div class="line"><span class="lineno"> 2332</span>    tree.<a class="code hl_function" href="../../db/d1d/class_slic3r_1_1_a_a_b_b_tree_indirect_1_1_tree.html#a9f32e7bd37e378a65339c235cd3bcb47">build_modify_input</a>(influence_areas);</div>
<div class="line"><span class="lineno"> 2333</span> </div>
<div class="line"><span class="lineno"> 2334</span>    throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2335</span> </div>
<div class="line"><span class="lineno"> 2336</span>    <span class="comment">// Prepare the initial buckets as ranges of influence areas. The initial buckets contain power of 2 influence areas to follow</span></div>
<div class="line"><span class="lineno"> 2337</span>    <span class="comment">// the branching of the AABB tree.</span></div>
<div class="line"><span class="lineno"> 2338</span>    <span class="comment">// Vectors of ranges of influence areas, following the branching of the AABB tree:</span></div>
<div class="line"><span class="lineno"> 2339</span>    std::vector&lt;std::pair&lt;SupportElementMerging*, SupportElementMerging*&gt;&gt; buckets;</div>
<div class="line"><span class="lineno"> 2340</span>    <span class="comment">// Initial number of buckets for 1st round of merging.</span></div>
<div class="line"><span class="lineno"> 2341</span>    <span class="keywordtype">size_t</span> num_buckets_initial;</div>
<div class="line"><span class="lineno"> 2342</span>    {</div>
<div class="line"><span class="lineno"> 2343</span>        <span class="comment">// How many buckets per first merge iteration?</span></div>
<div class="line"><span class="lineno"> 2344</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_threads     = tbb::this_task_arena::max_concurrency();</div>
<div class="line"><span class="lineno"> 2345</span>        <span class="comment">// 4 buckets per thread if possible,</span></div>
<div class="line"><span class="lineno"> 2346</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_buckets_min = (input_size + 2) / 4;</div>
<div class="line"><span class="lineno"> 2347</span>        <span class="comment">// 2 buckets per thread otherwise.</span></div>
<div class="line"><span class="lineno"> 2348</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_buckets_max = input_size / 2;</div>
<div class="line"><span class="lineno"> 2349</span>        num_buckets_initial          = num_buckets_min &gt;= num_threads ? num_buckets_min : num_buckets_max;</div>
<div class="line"><span class="lineno"> 2350</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> bucket_size     = num_buckets_min &gt;= num_threads ? 4 : 2;</div>
<div class="line"><span class="lineno"> 2351</span>        <span class="comment">// Fill in the buckets.</span></div>
<div class="line"><span class="lineno"> 2352</span>        <a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *it = influence_areas.data();</div>
<div class="line"><span class="lineno"> 2353</span>        <span class="comment">// Reserve one more bucket to keep a single influence area which will not be merged in the first iteration.</span></div>
<div class="line"><span class="lineno"> 2354</span>        buckets.reserve(num_buckets_initial + 1);</div>
<div class="line"><span class="lineno"> 2355</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; num_buckets_initial; ++ i, it += bucket_size)</div>
<div class="line"><span class="lineno"> 2356</span>            buckets.emplace_back(std::make_pair(it, it + bucket_size));</div>
<div class="line"><span class="lineno"> 2357</span>        <a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *it_end = influence_areas.data() + influence_areas.size();</div>
<div class="line"><span class="lineno"> 2358</span>        <span class="keywordflow">if</span> (buckets.back().second &gt;= it_end) {</div>
<div class="line"><span class="lineno"> 2359</span>            <span class="comment">// Last bucket is less than size 4, but bigger than size 1.</span></div>
<div class="line"><span class="lineno"> 2360</span>            buckets.back().second = std::min(buckets.back().second, it_end);</div>
<div class="line"><span class="lineno"> 2361</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2362</span>            <span class="comment">// Last bucket is size 1, it will not be merged in the first iteration.</span></div>
<div class="line"><span class="lineno"> 2363</span>            assert(it + 1 == it_end);</div>
<div class="line"><span class="lineno"> 2364</span>            buckets.emplace_back(std::make_pair(it, it_end));</div>
<div class="line"><span class="lineno"> 2365</span>        }</div>
<div class="line"><span class="lineno"> 2366</span>    }</div>
<div class="line"><span class="lineno"> 2367</span> </div>
<div class="line"><span class="lineno"> 2368</span>    <span class="comment">// 1st merge iteration, merge one with each other.</span></div>
<div class="line"><span class="lineno"> 2369</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, num_buckets_initial),</div>
<div class="line"><span class="lineno"> 2370</span>        [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 2371</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.begin(); idx &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.end(); ++ idx) {</div>
<div class="line"><span class="lineno"> 2372</span>            <span class="comment">// Merge bucket_count adjacent to each other, merging uneven bucket numbers into even buckets</span></div>
<div class="line"><span class="lineno"> 2373</span>            buckets[idx].second = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ad858edd51a19e644532ce4d00379fb76">merge_influence_areas_leaves</a>(volumes, config, layer_idx, buckets[idx].first, buckets[idx].second);</div>
<div class="line"><span class="lineno"> 2374</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2375</span>        }</div>
<div class="line"><span class="lineno"> 2376</span>    });</div>
<div class="line"><span class="lineno"> 2377</span> </div>
<div class="line"><span class="lineno"> 2378</span>    <span class="comment">// Further merge iterations, merging one AABB subtree with another one, hopefully minimizing intersections between the elements</span></div>
<div class="line"><span class="lineno"> 2379</span>    <span class="comment">// of each of the subtree.</span></div>
<div class="line"><span class="lineno"> 2380</span>    <span class="keywordflow">while</span> (buckets.size() &gt; 1) {</div>
<div class="line"><span class="lineno"> 2381</span>        tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, buckets.size() / 2),</div>
<div class="line"><span class="lineno"> 2382</span>            [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 2383</span>            for (size_t idx = range.begin(); idx &lt; range.end(); ++ idx) {</div>
<div class="line"><span class="lineno"> 2384</span>                const size_t bucket_pair_idx = idx * 2;</div>
<div class="line"><span class="lineno"> 2385</span>                <span class="comment">// Merge bucket_count adjacent to each other, merging uneven bucket numbers into even buckets</span></div>
<div class="line"><span class="lineno"> 2386</span>                buckets[bucket_pair_idx].second = merge_influence_areas_two_sets(volumes, config, layer_idx,</div>
<div class="line"><span class="lineno"> 2387</span>                    buckets[bucket_pair_idx].first, buckets[bucket_pair_idx].second,</div>
<div class="line"><span class="lineno"> 2388</span>                    buckets[bucket_pair_idx + 1].first, buckets[bucket_pair_idx + 1].second);</div>
<div class="line"><span class="lineno"> 2389</span>                throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2390</span>            }</div>
<div class="line"><span class="lineno"> 2391</span>        });</div>
<div class="line"><span class="lineno"> 2392</span>        <span class="comment">// Remove odd buckets, which were merged into even buckets.</span></div>
<div class="line"><span class="lineno"> 2393</span>        <span class="keywordtype">size_t</span> new_size = (buckets.size() + 1) / 2;</div>
<div class="line"><span class="lineno"> 2394</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; new_size; ++ i)</div>
<div class="line"><span class="lineno"> 2395</span>            buckets[i] = std::move(buckets[i * 2]);</div>
<div class="line"><span class="lineno"> 2396</span>        buckets.erase(buckets.begin() + new_size, buckets.end());</div>
<div class="line"><span class="lineno"> 2397</span>    }</div>
<div class="line"><span class="lineno"> 2398</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_a_a_b_b_tree_indirect_1_1_tree_html"><div class="ttname"><a href="../../db/d1d/class_slic3r_1_1_a_a_b_b_tree_indirect_1_1_tree.html">Slic3r::AABBTreeIndirect::Tree</a></div><div class="ttdef"><b>Definition</b> AABBTreeIndirect.hpp:40</div></div>
<div class="ttc" id="aclass_slic3r_1_1_a_a_b_b_tree_indirect_1_1_tree_html_a9f32e7bd37e378a65339c235cd3bcb47"><div class="ttname"><a href="../../db/d1d/class_slic3r_1_1_a_a_b_b_tree_indirect_1_1_tree.html#a9f32e7bd37e378a65339c235cd3bcb47">Slic3r::AABBTreeIndirect::Tree::build_modify_input</a></div><div class="ttdeci">void build_modify_input(std::vector&lt; SourceNode &gt; &amp;input)</div><div class="ttdef"><b>Definition</b> AABBTreeIndirect.hpp:93</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ad858edd51a19e644532ce4d00379fb76"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ad858edd51a19e644532ce4d00379fb76">Slic3r::FFFTreeSupport::merge_influence_areas_leaves</a></div><div class="ttdeci">static SupportElementMerging * merge_influence_areas_leaves(const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, const LayerIndex layer_idx, SupportElementMerging *const dst_begin, SupportElementMerging *dst_end)</div><div class="ttdoc">Merges Influence Areas if possible.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2230</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging_html"><div class="ttname"><a href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">Slic3r::FFFTreeSupport::SupportElementMerging</a></div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1696</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00093">Slic3r::AABBTreeIndirect::Tree&lt; ANumDimensions, ACoordType &gt;::build_modify_input()</a>, <a class="el" href="../../#l02310">merge_influence_areas()</a>, <a class="el" href="../../#l02230">merge_influence_areas_leaves()</a>, and <a class="el" href="../../#l00356">Slic3r::range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02405">create_layer_pathing()</a>, and <a class="el" href="../../#l02310">merge_influence_areas()</a>.</p>
<div id="dynsection-56" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-56-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-56-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-56-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a072f8fb61613be20955808d6ea3da0eb_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-57" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-57-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-57-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-57-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a072f8fb61613be20955808d6ea3da0eb_icgraph.svg" width="596" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad858edd51a19e644532ce4d00379fb76" name="ad858edd51a19e644532ce4d00379fb76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad858edd51a19e644532ce4d00379fb76">&#9670;&#160;</a></span>merge_influence_areas_leaves()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> * Slic3r::FFFTreeSupport::merge_influence_areas_leaves </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a>&#160;</td>
          <td class="paramname"><em>dst_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *&#160;</td>
          <td class="paramname"><em>dst_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Merges Influence Areas if possible. </p>
<p>Branches which do overlap have to be merged. This helper merges all elements in input with the elements into reduced_new_layer. Elements in input_aabb are merged together if possible, while elements reduced_new_layer_aabb are not checked against each other.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reduced_aabb[in,out]</td><td>The already processed elements. </td></tr>
    <tr><td class="paramname">input_aabb[in]</td><td>Not yet processed elements </td></tr>
    <tr><td class="paramname">to_bp_areas[in]</td><td>The Elements of the current <a class="el" href="../../d1/d68/class_slic3r_1_1_layer.html">Layer</a> that will reach the buildplate. Value is the influence area where the center of a circle of support may be placed. </td></tr>
    <tr><td class="paramname">to_model_areas[in]</td><td>The Elements of the current <a class="el" href="../../d1/d68/class_slic3r_1_1_layer.html">Layer</a> that do not have to reach the buildplate. Also contains main as every element that can reach the buildplate is not forced to. Value is the influence area where the center of a circle of support may be placed. </td></tr>
    <tr><td class="paramname">influence_areas[in]</td><td>The influence areas without avoidance removed. </td></tr>
    <tr><td class="paramname">insert_bp_areas[out]</td><td>Elements to be inserted into the main dictionary after the Helper terminates. </td></tr>
    <tr><td class="paramname">insert_model_areas[out]</td><td>Elements to be inserted into the secondary dictionary after the Helper terminates. </td></tr>
    <tr><td class="paramname">insert_influence[out]</td><td>Elements to be inserted into the dictionary containing the largest possibly valid influence area (ignoring if the area may not be there because of avoidance) </td></tr>
    <tr><td class="paramname">erase[out]</td><td>Elements that should be deleted from the above dictionaries. </td></tr>
    <tr><td class="paramname">layer_idx[in]</td><td>The Index of the current <a class="el" href="../../d1/d68/class_slic3r_1_1_layer.html">Layer</a>. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 2233</span>{</div>
<div class="line"><span class="lineno"> 2234</span>    <span class="comment">// Merging at the lowest level of the AABB tree. Checking one against each other, O(n^2).</span></div>
<div class="line"><span class="lineno"> 2235</span>    assert(dst_begin &lt; dst_end);</div>
<div class="line"><span class="lineno"> 2236</span>    <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *i = dst_begin; i + 1 &lt; dst_end;) {</div>
<div class="line"><span class="lineno"> 2237</span>        <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *j = i + 1; j != dst_end;)</div>
<div class="line"><span class="lineno"> 2238</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#abb175d116e2dfb6bc27c8f0005bfd906">merge_influence_areas_two_elements</a>(volumes, config, layer_idx, *i, *j)) {</div>
<div class="line"><span class="lineno"> 2239</span>                <span class="comment">// i was merged with j, j is empty.</span></div>
<div class="line"><span class="lineno"> 2240</span>                <span class="keywordflow">if</span> (j != -- dst_end)</div>
<div class="line"><span class="lineno"> 2241</span>                    *j = std::move(*dst_end);</div>
<div class="line"><span class="lineno"> 2242</span>                <span class="keywordflow">goto</span> merged;</div>
<div class="line"><span class="lineno"> 2243</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2244</span>                ++ j;</div>
<div class="line"><span class="lineno"> 2245</span>        <span class="comment">// not merged</span></div>
<div class="line"><span class="lineno"> 2246</span>        ++ i;</div>
<div class="line"><span class="lineno"> 2247</span>    merged:</div>
<div class="line"><span class="lineno"> 2248</span>        ;</div>
<div class="line"><span class="lineno"> 2249</span>    }</div>
<div class="line"><span class="lineno"> 2250</span>    <span class="keywordflow">return</span> dst_end;</div>
<div class="line"><span class="lineno"> 2251</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_abb175d116e2dfb6bc27c8f0005bfd906"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#abb175d116e2dfb6bc27c8f0005bfd906">Slic3r::FFFTreeSupport::merge_influence_areas_two_elements</a></div><div class="ttdeci">static bool merge_influence_areas_two_elements(const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, const LayerIndex layer_idx, SupportElementMerging &amp;dst, SupportElementMerging &amp;src)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2053</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02230">merge_influence_areas_leaves()</a>, and <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02310">merge_influence_areas()</a>, and <a class="el" href="../../#l02230">merge_influence_areas_leaves()</a>.</p>
<div id="dynsection-58" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-58-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-58-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-58-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ad858edd51a19e644532ce4d00379fb76_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-59" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-59-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-59-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-59-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ad858edd51a19e644532ce4d00379fb76_icgraph.svg" width="100%" height="368"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="abb175d116e2dfb6bc27c8f0005bfd906" name="abb175d116e2dfb6bc27c8f0005bfd906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb175d116e2dfb6bc27c8f0005bfd906">&#9670;&#160;</a></span>merge_influence_areas_two_elements()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool Slic3r::FFFTreeSupport::merge_influence_areas_two_elements </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2056</span>{</div>
<div class="line"><span class="lineno"> 2057</span>    <span class="comment">// Don&#39;t merge gracious with a non gracious area as bad placement could negatively impact reliability of the whole subtree.</span></div>
<div class="line"><span class="lineno"> 2058</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> merging_gracious_and_non_gracious = dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ac6a36d011e98b3c92ca37790a97abb6b">to_model_gracious</a> != src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ac6a36d011e98b3c92ca37790a97abb6b">to_model_gracious</a>;</div>
<div class="line"><span class="lineno"> 2059</span>    <span class="comment">// Could cause some issues with the increase of one area, as it is assumed that if the smaller is increased </span></div>
<div class="line"><span class="lineno"> 2060</span>    <span class="comment">// by the delta to the larger it is engulfed by it already. But because a different collision </span></div>
<div class="line"><span class="lineno"> 2061</span>    <span class="comment">// may be removed from the in draw_area() generated circles, this assumption could be wrong.</span></div>
<div class="line"><span class="lineno"> 2062</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> merging_min_and_regular_xy        = dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">use_min_xy_dist</a> != src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">use_min_xy_dist</a>;</div>
<div class="line"><span class="lineno"> 2063</span> </div>
<div class="line"><span class="lineno"> 2064</span>    <span class="keywordflow">if</span> (merging_gracious_and_non_gracious || merging_min_and_regular_xy)</div>
<div class="line"><span class="lineno"> 2065</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2066</span> </div>
<div class="line"><span class="lineno"> 2067</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> dst_radius_bigger = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>) &gt; <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>);</div>
<div class="line"><span class="lineno"> 2068</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &amp;smaller_rad = dst_radius_bigger ? src : dst;</div>
<div class="line"><span class="lineno"> 2069</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> &amp;bigger_rad  = dst_radius_bigger ? dst : src;</div>
<div class="line"><span class="lineno"> 2070</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> real_radius_delta = std::abs(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, bigger_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>) - <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, smaller_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>));</div>
<div class="line"><span class="lineno"> 2071</span>    {</div>
<div class="line"><span class="lineno"> 2072</span>        <span class="comment">// Testing intersection of bounding boxes.</span></div>
<div class="line"><span class="lineno"> 2073</span>        <span class="comment">// Expand the smaller radius branch bounding box to match the lambda intersect_small_with_bigger() below.</span></div>
<div class="line"><span class="lineno"> 2074</span>        <span class="comment">// Because the lambda intersect_small_with_bigger() applies a rounded offset, a snug offset of the bounding box</span></div>
<div class="line"><span class="lineno"> 2075</span>        <span class="comment">// is sufficient. On the other side, if a mitered offset was used by the lambda,</span></div>
<div class="line"><span class="lineno"> 2076</span>        <span class="comment">// the bounding box expansion would have to account for the mitered extension of the sharp corners.</span></div>
<div class="line"><span class="lineno"> 2077</span>        <a class="code hl_class" href="../../d5/d00/group___geometry___module.html#d6/d9a/class_eigen_1_1_aligned_box">Eigen::AlignedBox&lt;coord_t, 2&gt;</a> smaller_bbox = smaller_rad.<a class="code hl_function" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a659007fa467ec72d5d43e758fdc9345d">bbox</a>();</div>
<div class="line"><span class="lineno"> 2078</span>        smaller_bbox.<a class="code hl_function" href="../../d5/d00/group___geometry___module.html#a6ba58dd9c5561b33dfd3a470694cef28">min</a>() -= <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>{ real_radius_delta, real_radius_delta };</div>
<div class="line"><span class="lineno"> 2079</span>        smaller_bbox.<a class="code hl_function" href="../../d5/d00/group___geometry___module.html#ac7d4e5452722585bf69164473ec1afa6">max</a>() += <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>{ real_radius_delta, real_radius_delta };</div>
<div class="line"><span class="lineno"> 2080</span>        <span class="keywordflow">if</span> (! smaller_bbox.<a class="code hl_function" href="../../d5/d00/group___geometry___module.html#a75a5af80f40892bfa267c0245f0d4d12">intersects</a>(bigger_rad.<a class="code hl_function" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a659007fa467ec72d5d43e758fdc9345d">bbox</a>()))</div>
<div class="line"><span class="lineno"> 2081</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2082</span>    }</div>
<div class="line"><span class="lineno"> 2083</span> </div>
<div class="line"><span class="lineno"> 2084</span>    <span class="comment">// Accumulator of a radius increase of a &quot;to model&quot; branch by merging in a &quot;to build plate&quot; branch.</span></div>
<div class="line"><span class="lineno"> 2085</span>    <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> increased_to_model_radius = 0;</div>
<div class="line"><span class="lineno"> 2086</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> merging_to_bp                     = dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">to_buildplate</a> &amp;&amp; src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">to_buildplate</a>;</div>
<div class="line"><span class="lineno"> 2087</span>    <span class="keywordflow">if</span> (! merging_to_bp) {</div>
<div class="line"><span class="lineno"> 2088</span>        <span class="comment">// Get the real radius increase as the user does not care for the collision model.</span></div>
<div class="line"><span class="lineno"> 2089</span>        <span class="keywordflow">if</span> (dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">to_buildplate</a> != src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">to_buildplate</a>) {</div>
<div class="line"><span class="lineno"> 2090</span>            <span class="comment">// Merging a &quot;to build plate&quot; branch with a &quot;to model&quot; branch.</span></div>
<div class="line"><span class="lineno"> 2091</span>            <span class="comment">// Don&#39;t allow merging a thick &quot;to build plate&quot; branch into a thinner &quot;to model&quot; branch.</span></div>
<div class="line"><span class="lineno"> 2092</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> rdst = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>);</div>
<div class="line"><span class="lineno"> 2093</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> rsrc = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>);</div>
<div class="line"><span class="lineno"> 2094</span>            <span class="keywordflow">if</span> (dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">to_buildplate</a>) {</div>
<div class="line"><span class="lineno"> 2095</span>                <span class="keywordflow">if</span> (rsrc &lt; rdst)</div>
<div class="line"><span class="lineno"> 2096</span>                    increased_to_model_radius = src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ad9cfa3d7c00ec5498a5a3547bc994449">increased_to_model_radius</a> + rdst - rsrc;</div>
<div class="line"><span class="lineno"> 2097</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2098</span>                <span class="keywordflow">if</span> (rsrc &gt; rdst)</div>
<div class="line"><span class="lineno"> 2099</span>                    increased_to_model_radius = dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ad9cfa3d7c00ec5498a5a3547bc994449">increased_to_model_radius</a> + rsrc - rdst;</div>
<div class="line"><span class="lineno"> 2100</span>            }</div>
<div class="line"><span class="lineno"> 2101</span>            <span class="keywordflow">if</span> (increased_to_model_radius &gt; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a7c26b1870f1f82863f30584ca32e133b">max_to_model_radius_increase</a>)</div>
<div class="line"><span class="lineno"> 2102</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2103</span>        }</div>
<div class="line"><span class="lineno"> 2104</span>        <span class="comment">// if a merge could place a stable branch on unstable ground, would be increasing the radius further </span></div>
<div class="line"><span class="lineno"> 2105</span>        <span class="comment">// than allowed to when merging to model and to_bp trees or would merge to model before it is known </span></div>
<div class="line"><span class="lineno"> 2106</span>        <span class="comment">// they will even been drawn the merge is skipped</span></div>
<div class="line"><span class="lineno"> 2107</span>        <span class="keywordflow">if</span> (! dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aebd5671756e54a4b69e6998ae893e112">supports_roof</a> &amp;&amp; ! src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aebd5671756e54a4b69e6998ae893e112">supports_roof</a> &amp;&amp; </div>
<div class="line"><span class="lineno"> 2108</span>            std::max(src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a324613f5478944fb2c25d4b786ec967a">distance_to_top</a>, dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a324613f5478944fb2c25d4b786ec967a">distance_to_top</a>) &lt; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a27dcd1588b701fef77f1bbb8e819b49c">min_dtt_to_model</a>)</div>
<div class="line"><span class="lineno"> 2109</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2110</span>    }</div>
<div class="line"><span class="lineno"> 2111</span> </div>
<div class="line"><span class="lineno"> 2112</span>    <span class="comment">// Area of the bigger radius is used to ensure correct placement regarding the relevant avoidance,</span></div>
<div class="line"><span class="lineno"> 2113</span>    <span class="comment">// so if that would change an invalid area may be created.</span></div>
<div class="line"><span class="lineno"> 2114</span>    <span class="keywordflow">if</span> (! bigger_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aafe337b31206f21ab3c58004c1dab48b">can_use_safe_radius</a> &amp;&amp; smaller_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aafe337b31206f21ab3c58004c1dab48b">can_use_safe_radius</a>)</div>
<div class="line"><span class="lineno"> 2115</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2116</span> </div>
<div class="line"><span class="lineno"> 2117</span>    <span class="comment">// the bigger radius is used to verify that the area is still valid after the increase with the delta.</span></div>
<div class="line"><span class="lineno"> 2118</span>    <span class="comment">// If there were a point where the big influence area could be valid with can_use_safe_radius </span></div>
<div class="line"><span class="lineno"> 2119</span>    <span class="comment">// the element would already be can_use_safe_radius.</span></div>
<div class="line"><span class="lineno"> 2120</span>    <span class="comment">// the smaller radius, which gets increased by delta may reach into the area where use_min_xy_dist is no longer required.</span></div>
<div class="line"><span class="lineno"> 2121</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> use_min_radius = bigger_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">use_min_xy_dist</a> &amp;&amp; smaller_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">use_min_xy_dist</a>;</div>
<div class="line"><span class="lineno"> 2122</span> </div>
<div class="line"><span class="lineno"> 2123</span>    <span class="comment">// The idea is that the influence area with the smaller collision radius is increased by the radius difference.</span></div>
<div class="line"><span class="lineno"> 2124</span>    <span class="comment">// If this area has any intersections with the influence area of the larger collision radius, a branch (of the larger collision radius) placed in this intersection, has already engulfed the branch of the smaller collision radius.</span></div>
<div class="line"><span class="lineno"> 2125</span>    <span class="comment">// Because of this a merge may happen even if the influence areas (that represent possible center points of branches) do not intersect yet.</span></div>
<div class="line"><span class="lineno"> 2126</span>    <span class="comment">// Remember that collision radius &lt;= real radius as otherwise this assumption would be false.</span></div>
<div class="line"><span class="lineno"> 2127</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>   smaller_collision_radius    = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, smaller_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>);</div>
<div class="line"><span class="lineno"> 2128</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;collision                   = volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#af880ece6544ec2816bc0444aeec378bb">getCollision</a>(smaller_collision_radius, layer_idx - 1, use_min_radius);</div>
<div class="line"><span class="lineno"> 2129</span>    <span class="keyword">auto</span>            intersect_small_with_bigger = [real_radius_delta, smaller_collision_radius, &amp;collision, &amp;config](<span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;small, <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;bigger) {</div>
<div class="line"><span class="lineno"> 2130</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">intersection</a>(</div>
<div class="line"><span class="lineno"> 2131</span>            <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a10d42159133e647bd0231c3b574ad951">safe_offset_inc</a>(</div>
<div class="line"><span class="lineno"> 2132</span>                small, real_radius_delta, collision,</div>
<div class="line"><span class="lineno"> 2133</span>                <span class="comment">// -3 avoids possible rounding errors</span></div>
<div class="line"><span class="lineno"> 2134</span>                2 * (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e07ec0b2df8f878e998e444d191dbfc">xy_distance</a> + smaller_collision_radius - 3), 0, 0),</div>
<div class="line"><span class="lineno"> 2135</span>            bigger);</div>
<div class="line"><span class="lineno"> 2136</span>    };</div>
<div class="line"><span class="lineno"> 2137</span><span class="comment">//#define TREES_MERGE_RATHER_LATER</span></div>
<div class="line"><span class="lineno"> 2138</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a3b5976f2a4f7e21f45466b9151e59c94">intersect</a> = </div>
<div class="line"><span class="lineno"> 2139</span><span class="preprocessor">#ifdef TREES_MERGE_RATHER_LATER</span></div>
<div class="line"><span class="lineno"> 2140</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">intersection</a>(</div>
<div class="line"><span class="lineno"> 2141</span>#<span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2142</span>        intersect_small_with_bigger(            </div>
<div class="line"><span class="lineno"> 2143</span>#endif</div>
<div class="line"><span class="lineno"> 2144</span>        merging_to_bp ? smaller_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a80f5c7c6f4a9fbe40875b78e4007b986">to_bp_areas</a> : smaller_rad.areas.to_model_areas,</div>
<div class="line"><span class="lineno"> 2145</span>        merging_to_bp ? bigger_rad.areas.to_bp_areas : bigger_rad.areas.to_model_areas);</div>
<div class="line"><span class="lineno"> 2146</span> </div>
<div class="line"><span class="lineno"> 2147</span>    <span class="comment">// dont use empty as a line is not empty, but for this use-case it very well may be (and would be one layer down as union does not keep lines)</span></div>
<div class="line"><span class="lineno"> 2148</span>    <span class="comment">// check if the overlap is large enough (Small ares tend to attract rounding errors in clipper). </span></div>
<div class="line"><span class="lineno"> 2149</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(intersect) &lt;= tiny_area_threshold)</div>
<div class="line"><span class="lineno"> 2150</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2151</span> </div>
<div class="line"><span class="lineno"> 2152</span>    <span class="comment">// While 0.025 was guessed as enough, i did not have reason to change it.</span></div>
<div class="line"><span class="lineno"> 2153</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(intersect, scaled&lt;float&gt;(-0.025), jtMiter, 1.2)) &lt;= tiny_area_threshold)</div>
<div class="line"><span class="lineno"> 2154</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2155</span> </div>
<div class="line"><span class="lineno"> 2156</span><span class="preprocessor">#ifdef TREES_MERGE_RATHER_LATER</span></div>
<div class="line"><span class="lineno"> 2157</span>    <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a3b5976f2a4f7e21f45466b9151e59c94">intersect</a> = </div>
<div class="line"><span class="lineno"> 2158</span>        intersect_small_with_bigger(</div>
<div class="line"><span class="lineno"> 2159</span>            merging_to_bp ? smaller_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a80f5c7c6f4a9fbe40875b78e4007b986">to_bp_areas</a> : smaller_rad.areas.to_model_areas,</div>
<div class="line"><span class="lineno"> 2160</span>            merging_to_bp ? bigger_rad.areas.to_bp_areas : bigger_rad.areas.to_model_areas);</div>
<div class="line"><span class="lineno"> 2161</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2162</span> </div>
<div class="line"><span class="lineno"> 2163</span>    <span class="comment">// Do the actual merge now that the branches are confirmed to be able to intersect.</span></div>
<div class="line"><span class="lineno"> 2164</span>    <span class="comment">// calculate which point is closest to the point of the last merge (or tip center if no merge above it has happened)</span></div>
<div class="line"><span class="lineno"> 2165</span>    <span class="comment">// used at the end to estimate where to best place the branch on the bottom most layer</span></div>
<div class="line"><span class="lineno"> 2166</span>    <span class="comment">// could be replaced with a random point inside the new area</span></div>
<div class="line"><span class="lineno"> 2167</span>    <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> new_pos = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a4cea5675bfa8ad2c71fcd7c1785690fe">move_inside_if_outside</a>(intersect, dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a6f81fb417dff6c1b1d7527d62b312449">next_position</a>);</div>
<div class="line"><span class="lineno"> 2168</span> </div>
<div class="line"><span class="lineno"> 2169</span>    SupportElementState new_state = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a183ed4ab8686513525c8c6b81401af">merge_support_element_states</a>(dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>, src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>, new_pos, layer_idx - 1, config);</div>
<div class="line"><span class="lineno"> 2170</span>    new_state.increased_to_model_radius = increased_to_model_radius == 0 ? </div>
<div class="line"><span class="lineno"> 2171</span>        <span class="comment">// increased_to_model_radius was not set yet. Propagate maximum.</span></div>
<div class="line"><span class="lineno"> 2172</span>        std::max(dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ad9cfa3d7c00ec5498a5a3547bc994449">increased_to_model_radius</a>, src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ad9cfa3d7c00ec5498a5a3547bc994449">increased_to_model_radius</a>) :</div>
<div class="line"><span class="lineno"> 2173</span>        increased_to_model_radius;</div>
<div class="line"><span class="lineno"> 2174</span> </div>
<div class="line"><span class="lineno"> 2175</span>    <span class="comment">// Rather unioning with &quot;intersect&quot; due to some rounding errors.</span></div>
<div class="line"><span class="lineno"> 2176</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> influence_areas = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(</div>
<div class="line"><span class="lineno"> 2177</span>        intersect_small_with_bigger(smaller_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a0d127e8e8d05602f836be7aea26fa117">influence_areas</a>, bigger_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a0d127e8e8d05602f836be7aea26fa117">influence_areas</a>),</div>
<div class="line"><span class="lineno"> 2178</span>        intersect);</div>
<div class="line"><span class="lineno"> 2179</span> </div>
<div class="line"><span class="lineno"> 2180</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> to_model_areas;</div>
<div class="line"><span class="lineno"> 2181</span>    <span class="keywordflow">if</span> (merging_to_bp &amp;&amp; config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a>)</div>
<div class="line"><span class="lineno"> 2182</span>        to_model_areas = new_state.to_model_gracious ?</div>
<div class="line"><span class="lineno"> 2183</span>            <span class="comment">// Rather unioning with &quot;intersect&quot; due to some rounding errors.</span></div>
<div class="line"><span class="lineno"> 2184</span>            <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(</div>
<div class="line"><span class="lineno"> 2185</span>                intersect_small_with_bigger(smaller_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#aefd565c878027be6e1ae8ca843d744f9">to_model_areas</a>, bigger_rad.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#aefd565c878027be6e1ae8ca843d744f9">to_model_areas</a>),</div>
<div class="line"><span class="lineno"> 2186</span>                intersect) :</div>
<div class="line"><span class="lineno"> 2187</span>            influence_areas;</div>
<div class="line"><span class="lineno"> 2188</span> </div>
<div class="line"><span class="lineno"> 2189</span>    dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a13d2486132198d2231967c6454fd81a4">parents</a>.insert(dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a13d2486132198d2231967c6454fd81a4">parents</a>.end(), src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a13d2486132198d2231967c6454fd81a4">parents</a>.begin(), src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a13d2486132198d2231967c6454fd81a4">parents</a>.end());</div>
<div class="line"><span class="lineno"> 2190</span>    dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">state</a> = new_state;</div>
<div class="line"><span class="lineno"> 2191</span>    dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a0d127e8e8d05602f836be7aea26fa117">influence_areas</a> = std::move(influence_areas);</div>
<div class="line"><span class="lineno"> 2192</span>    dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a80f5c7c6f4a9fbe40875b78e4007b986">to_bp_areas</a>.clear();</div>
<div class="line"><span class="lineno"> 2193</span>    dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#aefd565c878027be6e1ae8ca843d744f9">to_model_areas</a>.clear();</div>
<div class="line"><span class="lineno"> 2194</span>    <span class="keywordflow">if</span> (merging_to_bp) {</div>
<div class="line"><span class="lineno"> 2195</span>        dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a80f5c7c6f4a9fbe40875b78e4007b986">to_bp_areas</a> = std::move(intersect);</div>
<div class="line"><span class="lineno"> 2196</span>        <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a>)</div>
<div class="line"><span class="lineno"> 2197</span>            dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#aefd565c878027be6e1ae8ca843d744f9">to_model_areas</a> = std::move(to_model_areas);</div>
<div class="line"><span class="lineno"> 2198</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2199</span>        dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#aefd565c878027be6e1ae8ca843d744f9">to_model_areas</a> = std::move(intersect);</div>
<div class="line"><span class="lineno"> 2200</span>    <span class="comment">// Update the bounding box.</span></div>
<div class="line"><span class="lineno"> 2201</span>    BoundingBox bbox(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a0d127e8e8d05602f836be7aea26fa117">influence_areas</a>));</div>
<div class="line"><span class="lineno"> 2202</span>    bbox.merge(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a80f5c7c6f4a9fbe40875b78e4007b986">to_bp_areas</a>));</div>
<div class="line"><span class="lineno"> 2203</span>    bbox.merge(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(dst.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_variable" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#aefd565c878027be6e1ae8ca843d744f9">to_model_areas</a>));</div>
<div class="line"><span class="lineno"> 2204</span>    dst.<a class="code hl_function" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a47ea4bbe992ea184f3d73dccd3f028c3">set_bbox</a>(bbox);</div>
<div class="line"><span class="lineno"> 2205</span>    <span class="comment">// Clear the source data.</span></div>
<div class="line"><span class="lineno"> 2206</span>    src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">areas</a>.<a class="code hl_function" href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a668841e1482c43d0c818eb72c27ef561">clear</a>();</div>
<div class="line"><span class="lineno"> 2207</span>    src.<a class="code hl_variable" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a13d2486132198d2231967c6454fd81a4">parents</a>.clear();</div>
<div class="line"><span class="lineno"> 2208</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2209</span>}</div>
<div class="ttc" id="agroup___geometry___module_html_a6ba58dd9c5561b33dfd3a470694cef28"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#a6ba58dd9c5561b33dfd3a470694cef28">Eigen::AlignedBox::min</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const VectorType &amp;() min() const</div><div class="ttdef"><b>Definition</b> AlignedBox.h:106</div></div>
<div class="ttc" id="agroup___geometry___module_html_a75a5af80f40892bfa267c0245f0d4d12"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#a75a5af80f40892bfa267c0245f0d4d12">Eigen::AlignedBox::intersects</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC bool intersects(const AlignedBox &amp;b) const</div><div class="ttdef"><b>Definition</b> AlignedBox.h:194</div></div>
<div class="ttc" id="agroup___geometry___module_html_ac7d4e5452722585bf69164473ec1afa6"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#ac7d4e5452722585bf69164473ec1afa6">Eigen::AlignedBox::max</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const VectorType &amp;() max() const</div><div class="ttdef"><b>Definition</b> AlignedBox.h:110</div></div>
<div class="ttc" id="agroup___geometry___module_html_d6/d9a/class_eigen_1_1_aligned_box"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#d6/d9a/class_eigen_1_1_aligned_box">Eigen::AlignedBox</a></div><div class="ttdoc">An axis aligned box.</div><div class="ttdef"><b>Definition</b> AlignedBox.h:31</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a10d42159133e647bd0231c3b574ad951"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a10d42159133e647bd0231c3b574ad951">Slic3r::FFFTreeSupport::safe_offset_inc</a></div><div class="ttdeci">static Polygons safe_offset_inc(const Polygons &amp;me, coord_t distance, const Polygons &amp;collision, coord_t safe_step_size, coord_t last_step_offset_without_check, size_t min_amount_offset)</div><div class="ttdoc">Offsets (increases the area of) a polygons object in multiple steps to ensure that it does not lag th...</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:763</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a4cea5675bfa8ad2c71fcd7c1785690fe"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a4cea5675bfa8ad2c71fcd7c1785690fe">Slic3r::FFFTreeSupport::move_inside_if_outside</a></div><div class="ttdeci">static Point move_inside_if_outside(const Polygons &amp;polygons, Point from, int distance=0, int64_t maxDist2=std::numeric_limits&lt; int64_t &gt;::max())</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1521</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a5a183ed4ab8686513525c8c6b81401af"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a183ed4ab8686513525c8c6b81401af">Slic3r::FFFTreeSupport::merge_support_element_states</a></div><div class="ttdeci">static SupportElementState merge_support_element_states(const SupportElementState &amp;first, const SupportElementState &amp;second, const Point &amp;next_position, const coord_t layer_idx, const TreeSupportSettings &amp;config)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2007</div></div>
<div class="ttc" id="anamespaceigl_html_a3b5976f2a4f7e21f45466b9151e59c94"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#a3b5976f2a4f7e21f45466b9151e59c94">igl::intersect</a></div><div class="ttdeci">IGL_INLINE void intersect(const M &amp;A, const M &amp;B, M &amp;C)</div><div class="ttdef"><b>Definition</b> intersect.cpp:10</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas_html_a0d127e8e8d05602f836be7aea26fa117"><div class="ttname"><a href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a0d127e8e8d05602f836be7aea26fa117">Slic3r::FFFTreeSupport::SupportElementInfluenceAreas::influence_areas</a></div><div class="ttdeci">Polygons influence_areas</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1683</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas_html_a668841e1482c43d0c818eb72c27ef561"><div class="ttname"><a href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a668841e1482c43d0c818eb72c27ef561">Slic3r::FFFTreeSupport::SupportElementInfluenceAreas::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1689</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas_html_a80f5c7c6f4a9fbe40875b78e4007b986"><div class="ttname"><a href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#a80f5c7c6f4a9fbe40875b78e4007b986">Slic3r::FFFTreeSupport::SupportElementInfluenceAreas::to_bp_areas</a></div><div class="ttdeci">Polygons to_bp_areas</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1685</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas_html_aefd565c878027be6e1ae8ca843d744f9"><div class="ttname"><a href="../../d0/d6d/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_influence_areas.html#aefd565c878027be6e1ae8ca843d744f9">Slic3r::FFFTreeSupport::SupportElementInfluenceAreas::to_model_areas</a></div><div class="ttdeci">Polygons to_model_areas</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1687</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging_html_a13d2486132198d2231967c6454fd81a4"><div class="ttname"><a href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a13d2486132198d2231967c6454fd81a4">Slic3r::FFFTreeSupport::SupportElementMerging::parents</a></div><div class="ttdeci">SupportElement::ParentIndices parents</div><div class="ttdoc">All elements in the layer above the current one that are supported by this element.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1701</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging_html_a233ab2ec539f947ed6ebbb5fdf5be4cd"><div class="ttname"><a href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a233ab2ec539f947ed6ebbb5fdf5be4cd">Slic3r::FFFTreeSupport::SupportElementMerging::areas</a></div><div class="ttdeci">SupportElementInfluenceAreas areas</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1703</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging_html_a47ea4bbe992ea184f3d73dccd3f028c3"><div class="ttname"><a href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a47ea4bbe992ea184f3d73dccd3f028c3">Slic3r::FFFTreeSupport::SupportElementMerging::set_bbox</a></div><div class="ttdeci">void set_bbox(const BoundingBox &amp;abbox)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1709</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging_html_a659007fa467ec72d5d43e758fdc9345d"><div class="ttname"><a href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#a659007fa467ec72d5d43e758fdc9345d">Slic3r::FFFTreeSupport::SupportElementMerging::bbox</a></div><div class="ttdeci">const Eigen::AlignedBox&lt; coord_t, 2 &gt; &amp; bbox() const</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1707</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging_html_af3220c4669d6dce8ca4f15f4c09ce97d"><div class="ttname"><a href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html#af3220c4669d6dce8ca4f15f4c09ce97d">Slic3r::FFFTreeSupport::SupportElementMerging::state</a></div><div class="ttdeci">SupportElementState state</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1697</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_a1a163e804f127f2abfc54a7ee1feed80"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">Slic3r::FFFTreeSupport::SupportElementStateBits::to_buildplate</a></div><div class="ttdeci">bool to_buildplate</div><div class="ttdoc">The element trys to reach the buildplate.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:100</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_aafe337b31206f21ab3c58004c1dab48b"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aafe337b31206f21ab3c58004c1dab48b">Slic3r::FFFTreeSupport::SupportElementStateBits::can_use_safe_radius</a></div><div class="ttdeci">bool can_use_safe_radius</div><div class="ttdoc">An influence area is considered safe when it can use the holefree avoidance &lt;=&gt; It will not have to e...</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:120</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_ac6a36d011e98b3c92ca37790a97abb6b"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ac6a36d011e98b3c92ca37790a97abb6b">Slic3r::FFFTreeSupport::SupportElementStateBits::to_model_gracious</a></div><div class="ttdeci">bool to_model_gracious</div><div class="ttdoc">Will the branch be able to rest completely on a flat surface, be it buildplate or model ?</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:105</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_aebd5671756e54a4b69e6998ae893e112"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aebd5671756e54a4b69e6998ae893e112">Slic3r::FFFTreeSupport::SupportElementStateBits::supports_roof</a></div><div class="ttdeci">bool supports_roof</div><div class="ttdoc">True if this Element or any parent (element above) provides support to a support roof.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:115</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_a6f81fb417dff6c1b1d7527d62b312449"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a6f81fb417dff6c1b1d7527d62b312449">Slic3r::FFFTreeSupport::SupportElementState::next_position</a></div><div class="ttdeci">Point next_position</div><div class="ttdoc">The next position this support elements wants to reach. NOTE: This is mainly a suggestion regarding d...</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:155</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_ad9cfa3d7c00ec5498a5a3547bc994449"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ad9cfa3d7c00ec5498a5a3547bc994449">Slic3r::FFFTreeSupport::SupportElementState::increased_to_model_radius</a></div><div class="ttdeci">coord_t increased_to_model_radius</div><div class="ttdoc">The amount of extra radius we got from merging branches that could have reached the buildplate,...</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:182</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings_html_a7c26b1870f1f82863f30584ca32e133b"><div class="ttname"><a href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a7c26b1870f1f82863f30584ca32e133b">Slic3r::FFFTreeSupport::TreeSupportSettings::max_to_model_radius_increase</a></div><div class="ttdeci">coord_t max_to_model_radius_increase</div><div class="ttdoc">How much a branch resting on the model may grow in radius by merging with branches that can reach the...</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:256</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01703">Slic3r::FFFTreeSupport::SupportElementMerging::areas</a>, <a class="el" href="../../#l01707">Slic3r::FFFTreeSupport::SupportElementMerging::bbox()</a>, <a class="el" href="../../#l00120">Slic3r::FFFTreeSupport::SupportElementStateBits::can_use_safe_radius</a>, <a class="el" href="../../#l01689">Slic3r::FFFTreeSupport::SupportElementInfluenceAreas::clear()</a>, <a class="el" href="../../#l00170">Slic3r::FFFTreeSupport::SupportElementState::distance_to_top</a>, <a class="el" href="../../#l00352">Slic3r::get_extents()</a>, <a class="el" href="../../#l00291">Slic3r::FFFTreeSupport::TreeModelVolumes::getCollision()</a>, <a class="el" href="../../#l00182">Slic3r::FFFTreeSupport::SupportElementState::increased_to_model_radius</a>, <a class="el" href="../../#l01683">Slic3r::FFFTreeSupport::SupportElementInfluenceAreas::influence_areas</a>, <a class="el" href="../../#l00686">Slic3r::intersection()</a>, <a class="el" href="../../#l00194">Eigen::AlignedBox&lt; _Scalar, _AmbientDim &gt;::intersects()</a>, <a class="el" href="../../#l00110">Eigen::AlignedBox&lt; _Scalar, _AmbientDim &gt;::max()</a>, <a class="el" href="../../#l00256">Slic3r::FFFTreeSupport::TreeSupportSettings::max_to_model_radius_increase</a>, <a class="el" href="../../#l00062">Slic3r::BoundingBoxBase&lt; PointType, APointsType &gt;::merge()</a>, <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>, <a class="el" href="../../#l02007">merge_support_element_states()</a>, <a class="el" href="../../#l00106">Eigen::AlignedBox&lt; _Scalar, _AmbientDim &gt;::min()</a>, <a class="el" href="../../#l00260">Slic3r::FFFTreeSupport::TreeSupportSettings::min_dtt_to_model</a>, <a class="el" href="../../#l01521">move_inside_if_outside()</a>, <a class="el" href="../../#l00155">Slic3r::FFFTreeSupport::SupportElementState::next_position</a>, <a class="el" href="../../#l01701">Slic3r::FFFTreeSupport::SupportElementMerging::parents</a>, <a class="el" href="../../#l00763">safe_offset_inc()</a>, <a class="el" href="../../#l00720">safe_union()</a>, <a class="el" href="../../#l01709">Slic3r::FFFTreeSupport::SupportElementMerging::set_bbox()</a>, <a class="el" href="../../#l01697">Slic3r::FFFTreeSupport::SupportElementMerging::state</a>, <a class="el" href="../../#l00246">support_element_collision_radius()</a>, <a class="el" href="../../#l00236">support_element_radius()</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::TreeSupportSettings::support_rests_on_model</a>, <a class="el" href="../../#l00115">Slic3r::FFFTreeSupport::SupportElementStateBits::supports_roof</a>, <a class="el" href="../../#l01685">Slic3r::FFFTreeSupport::SupportElementInfluenceAreas::to_bp_areas</a>, <a class="el" href="../../#l00100">Slic3r::FFFTreeSupport::SupportElementStateBits::to_buildplate</a>, <a class="el" href="../../#l01687">Slic3r::FFFTreeSupport::SupportElementInfluenceAreas::to_model_areas</a>, <a class="el" href="../../#l00105">Slic3r::FFFTreeSupport::SupportElementStateBits::to_model_gracious</a>, <a class="el" href="../../#l00110">Slic3r::FFFTreeSupport::SupportElementStateBits::use_min_xy_dist</a>, and <a class="el" href="../../#l00276">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_distance</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02230">merge_influence_areas_leaves()</a>, <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>, and <a class="el" href="../../#l02253">merge_influence_areas_two_sets()</a>.</p>
<div id="dynsection-60" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-60-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-60-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-60-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_abb175d116e2dfb6bc27c8f0005bfd906_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-61" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-61-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-61-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-61-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_abb175d116e2dfb6bc27c8f0005bfd906_icgraph.svg" width="100%" height="446"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ab2ce227e4f177e6b0a86047f62857854" name="ab2ce227e4f177e6b0a86047f62857854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2ce227e4f177e6b0a86047f62857854">&#9670;&#160;</a></span>merge_influence_areas_two_sets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> * Slic3r::FFFTreeSupport::merge_influence_areas_two_sets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a>&#160;</td>
          <td class="paramname"><em>dst_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *&#160;</td>
          <td class="paramname"><em>dst_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *&#160;</td>
          <td class="paramname"><em>src_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a>&#160;</td>
          <td class="paramname"><em>src_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2257</span>{</div>
<div class="line"><span class="lineno"> 2258</span>    <span class="comment">// Merging src into dst. </span></div>
<div class="line"><span class="lineno"> 2259</span>    <span class="comment">// Areas of src should not overlap with areas of another elements of src.</span></div>
<div class="line"><span class="lineno"> 2260</span>    <span class="comment">// Areas of dst should not overlap with areas of another elements of dst.</span></div>
<div class="line"><span class="lineno"> 2261</span>    <span class="comment">// The memory from dst_begin to src_end is reserved for the merging operation,</span></div>
<div class="line"><span class="lineno"> 2262</span>    <span class="comment">// src follows dst.</span></div>
<div class="line"><span class="lineno"> 2263</span>    assert(src_begin &lt; src_end);</div>
<div class="line"><span class="lineno"> 2264</span>    assert(dst_begin &lt; dst_end);</div>
<div class="line"><span class="lineno"> 2265</span>    assert(dst_end &lt;= src_begin);</div>
<div class="line"><span class="lineno"> 2266</span>    <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a> *src = src_begin; src != src_end; ++ src) {</div>
<div class="line"><span class="lineno"> 2267</span>        <a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a>         *dst      = dst_begin;</div>
<div class="line"><span class="lineno"> 2268</span>        <a class="code hl_struct" href="../../dc/dbb/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_merging.html">SupportElementMerging</a>         *merged   = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2269</span>        <span class="keywordflow">for</span> (; dst != dst_end; ++ dst)</div>
<div class="line"><span class="lineno"> 2270</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#abb175d116e2dfb6bc27c8f0005bfd906">merge_influence_areas_two_elements</a>(volumes, config, layer_idx, *dst, *src)) {</div>
<div class="line"><span class="lineno"> 2271</span>                merged = dst ++;</div>
<div class="line"><span class="lineno"> 2272</span>                <span class="keywordflow">if</span> (src != src_begin)</div>
<div class="line"><span class="lineno"> 2273</span>                    <span class="comment">// Compactify src.</span></div>
<div class="line"><span class="lineno"> 2274</span>                    *src = std::move(*src_begin);</div>
<div class="line"><span class="lineno"> 2275</span>                ++ src_begin;</div>
<div class="line"><span class="lineno"> 2276</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2277</span>            }</div>
<div class="line"><span class="lineno"> 2278</span>        <span class="keywordflow">for</span> (; dst != dst_end;)</div>
<div class="line"><span class="lineno"> 2279</span>            <span class="keywordflow">if</span> (merge_influence_areas_two_elements(volumes, config, layer_idx, *merged, *dst)) {</div>
<div class="line"><span class="lineno"> 2280</span>                <span class="comment">// Compactify dst.</span></div>
<div class="line"><span class="lineno"> 2281</span>                <span class="keywordflow">if</span> (dst != -- dst_end)</div>
<div class="line"><span class="lineno"> 2282</span>                    *dst = std::move(*dst_end);</div>
<div class="line"><span class="lineno"> 2283</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2284</span>                ++ dst;</div>
<div class="line"><span class="lineno"> 2285</span>    }</div>
<div class="line"><span class="lineno"> 2286</span>    <span class="comment">// Compactify src elements that were not merged with dst to the end of dst.</span></div>
<div class="line"><span class="lineno"> 2287</span>    assert(dst_end &lt;= src_begin);</div>
<div class="line"><span class="lineno"> 2288</span>    <span class="keywordflow">if</span> (dst_end == src_begin)</div>
<div class="line"><span class="lineno"> 2289</span>        dst_end = src_end;</div>
<div class="line"><span class="lineno"> 2290</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2291</span>        <span class="keywordflow">while</span> (src_begin != src_end)</div>
<div class="line"><span class="lineno"> 2292</span>            *dst_end ++ = std::move(*src_begin ++);</div>
<div class="line"><span class="lineno"> 2293</span> </div>
<div class="line"><span class="lineno"> 2294</span>    <span class="keywordflow">return</span> dst_end;</div>
<div class="line"><span class="lineno"> 2295</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>, and <a class="el" href="../../#l02253">merge_influence_areas_two_sets()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02253">merge_influence_areas_two_sets()</a>.</p>
<div id="dynsection-62" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-62-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-62-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-62-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ab2ce227e4f177e6b0a86047f62857854_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-63" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-63-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-63-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-63-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ab2ce227e4f177e6b0a86047f62857854_icgraph.svg" width="175" height="91"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5a183ed4ab8686513525c8c6b81401af" name="a5a183ed4ab8686513525c8c6b81401af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a183ed4ab8686513525c8c6b81401af">&#9670;&#160;</a></span>merge_support_element_states()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> Slic3r::FFFTreeSupport::merge_support_element_states </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;&#160;</td>
          <td class="paramname"><em>second</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;&#160;</td>
          <td class="paramname"><em>next_position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2010</span>{</div>
<div class="line"><span class="lineno"> 2011</span>    <a class="code hl_struct" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> out;</div>
<div class="line"><span class="lineno"> 2012</span>    out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a6f81fb417dff6c1b1d7527d62b312449">next_position</a>   = next_position;</div>
<div class="line"><span class="lineno"> 2013</span>    out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>       = layer_idx;</div>
<div class="line"><span class="lineno"> 2014</span>    out.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">use_min_xy_dist</a> = first.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">use_min_xy_dist</a> || second.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a57f903b921491c48a1241f161078dea0">use_min_xy_dist</a>;</div>
<div class="line"><span class="lineno"> 2015</span>    out.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aebd5671756e54a4b69e6998ae893e112">supports_roof</a>   = first.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aebd5671756e54a4b69e6998ae893e112">supports_roof</a> || second.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aebd5671756e54a4b69e6998ae893e112">supports_roof</a>;</div>
<div class="line"><span class="lineno"> 2016</span>    out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#abcdd51bb0fff4a5a82764b0e642dbb04">dont_move_until</a> = std::max(first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#abcdd51bb0fff4a5a82764b0e642dbb04">dont_move_until</a>, second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#abcdd51bb0fff4a5a82764b0e642dbb04">dont_move_until</a>);</div>
<div class="line"><span class="lineno"> 2017</span>    out.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aafe337b31206f21ab3c58004c1dab48b">can_use_safe_radius</a> = first.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aafe337b31206f21ab3c58004c1dab48b">can_use_safe_radius</a> || second.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#aafe337b31206f21ab3c58004c1dab48b">can_use_safe_radius</a>;</div>
<div class="line"><span class="lineno"> 2018</span>    out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#aee9de1847fa72aa8daf2d9d8f1f1e5e2">missing_roof_layers</a> = std::min(first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#aee9de1847fa72aa8daf2d9d8f1f1e5e2">missing_roof_layers</a>, second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#aee9de1847fa72aa8daf2d9d8f1f1e5e2">missing_roof_layers</a>);</div>
<div class="line"><span class="lineno"> 2019</span>    out.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a95b758b91f29a18480a8ab08b646eecc">skip_ovalisation</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2020</span>    <span class="keywordflow">if</span> (first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a339bf2e2a8dac3355c09d9e67879aac4">target_height</a> &gt; second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a339bf2e2a8dac3355c09d9e67879aac4">target_height</a>) {</div>
<div class="line"><span class="lineno"> 2021</span>        out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a339bf2e2a8dac3355c09d9e67879aac4">target_height</a>   = first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a339bf2e2a8dac3355c09d9e67879aac4">target_height</a>;</div>
<div class="line"><span class="lineno"> 2022</span>        out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ac74a78f37b504cbdaa4f8e101647cb61">target_position</a> = first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ac74a78f37b504cbdaa4f8e101647cb61">target_position</a>;</div>
<div class="line"><span class="lineno"> 2023</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2024</span>        out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a339bf2e2a8dac3355c09d9e67879aac4">target_height</a>   = second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a339bf2e2a8dac3355c09d9e67879aac4">target_height</a>;</div>
<div class="line"><span class="lineno"> 2025</span>        out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ac74a78f37b504cbdaa4f8e101647cb61">target_position</a> = second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ac74a78f37b504cbdaa4f8e101647cb61">target_position</a>;</div>
<div class="line"><span class="lineno"> 2026</span>    }</div>
<div class="line"><span class="lineno"> 2027</span>    out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a222c73eef54306197d4bc0ec291dc120">effective_radius_height</a> = std::max(first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a222c73eef54306197d4bc0ec291dc120">effective_radius_height</a>, second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a222c73eef54306197d4bc0ec291dc120">effective_radius_height</a>);</div>
<div class="line"><span class="lineno"> 2028</span>    out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a324613f5478944fb2c25d4b786ec967a">distance_to_top</a> = std::max(first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a324613f5478944fb2c25d4b786ec967a">distance_to_top</a>, second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a324613f5478944fb2c25d4b786ec967a">distance_to_top</a>);</div>
<div class="line"><span class="lineno"> 2029</span> </div>
<div class="line"><span class="lineno"> 2030</span>    out.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">to_buildplate</a> = first.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">to_buildplate</a> &amp;&amp; second.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a1a163e804f127f2abfc54a7ee1feed80">to_buildplate</a>;</div>
<div class="line"><span class="lineno"> 2031</span>    out.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ac6a36d011e98b3c92ca37790a97abb6b">to_model_gracious</a> = first.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ac6a36d011e98b3c92ca37790a97abb6b">to_model_gracious</a> &amp;&amp; second.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ac6a36d011e98b3c92ca37790a97abb6b">to_model_gracious</a>; <span class="comment">// valid as we do not merge non-gracious with gracious</span></div>
<div class="line"><span class="lineno"> 2032</span> </div>
<div class="line"><span class="lineno"> 2033</span>    out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a20af13844179bbdf3483b750d2ef8b75">elephant_foot_increases</a> = 0;</div>
<div class="line"><span class="lineno"> 2034</span>    <span class="keywordflow">if</span> (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a069aeea9e00c5920b0f0cb521098ceff">bp_radius_increase_per_layer</a> &gt; 0) {</div>
<div class="line"><span class="lineno"> 2035</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> foot_increase_radius = std::abs(std::max(support_element_collision_radius(config, second), support_element_collision_radius(config, first)) - support_element_collision_radius(config, out));</div>
<div class="line"><span class="lineno"> 2036</span>        <span class="comment">// elephant_foot_increases has to be recalculated, as when a smaller tree with a larger elephant_foot_increases merge with a larger branch </span></div>
<div class="line"><span class="lineno"> 2037</span>        <span class="comment">// the elephant_foot_increases may have to be lower as otherwise the radius suddenly increases. This results often in a non integer value.</span></div>
<div class="line"><span class="lineno"> 2038</span>        out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a20af13844179bbdf3483b750d2ef8b75">elephant_foot_increases</a> = foot_increase_radius / (config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a069aeea9e00c5920b0f0cb521098ceff">bp_radius_increase_per_layer</a> - config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ad7a8bb6fc40e37b8f964bfd1aa1b0875">branch_radius_increase_per_layer</a>);</div>
<div class="line"><span class="lineno"> 2039</span>    }</div>
<div class="line"><span class="lineno"> 2040</span> </div>
<div class="line"><span class="lineno"> 2041</span>    <span class="comment">// set last settings to the best out of both parents. If this is wrong, it will only cause a small performance penalty instead of weird behavior.</span></div>
<div class="line"><span class="lineno"> 2042</span>    out.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a> = {</div>
<div class="line"><span class="lineno"> 2043</span>        std::min(first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">type</a>, second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a2b3379f3a4d0afb09f84165db1e4663f">type</a>),</div>
<div class="line"><span class="lineno"> 2044</span>        std::min(first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a0e53d072ad43f840a1fdfa9ece16040c">increase_speed</a>, second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a0e53d072ad43f840a1fdfa9ece16040c">increase_speed</a>),</div>
<div class="line"><span class="lineno"> 2045</span>        first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ae9dd5c260a9ffd563b9a1cfe66c4708e">increase_radius</a> || second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ae9dd5c260a9ffd563b9a1cfe66c4708e">increase_radius</a>,</div>
<div class="line"><span class="lineno"> 2046</span>        first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ab8e412f49f318cb72367de30f71a4c1b">no_error</a> || second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#ab8e412f49f318cb72367de30f71a4c1b">no_error</a>,</div>
<div class="line"><span class="lineno"> 2047</span>        first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a> &amp;&amp; second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a522921428518857b6207464049235c4a">use_min_distance</a>,</div>
<div class="line"><span class="lineno"> 2048</span>        first.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#aec935687d9d75ae8c8c7f4c12380805e">move</a> || second.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">last_area_increase</a>.<a class="code hl_variable" href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#aec935687d9d75ae8c8c7f4c12380805e">move</a> };</div>
<div class="line"><span class="lineno"> 2049</span> </div>
<div class="line"><span class="lineno"> 2050</span>    <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno"> 2051</span>}</div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings_html_a0e53d072ad43f840a1fdfa9ece16040c"><div class="ttname"><a href="../../d8/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_area_increase_settings.html#a0e53d072ad43f840a1fdfa9ece16040c">Slic3r::FFFTreeSupport::AreaIncreaseSettings::increase_speed</a></div><div class="ttdeci">coord_t increase_speed</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:60</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_a95b758b91f29a18480a8ab08b646eecc"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a95b758b91f29a18480a8ab08b646eecc">Slic3r::FFFTreeSupport::SupportElementStateBits::skip_ovalisation</a></div><div class="ttdeci">bool skip_ovalisation</div><div class="ttdoc">Skip the ovalisation to parent and children when generating the final circles.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:125</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_a20af13844179bbdf3483b750d2ef8b75"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a20af13844179bbdf3483b750d2ef8b75">Slic3r::FFFTreeSupport::SupportElementState::elephant_foot_increases</a></div><div class="ttdeci">double elephant_foot_increases</div><div class="ttdoc">Counter about the times the elephant foot was increased. Can be fractions for merge reasons.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:187</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_a339bf2e2a8dac3355c09d9e67879aac4"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a339bf2e2a8dac3355c09d9e67879aac4">Slic3r::FFFTreeSupport::SupportElementState::target_height</a></div><div class="ttdeci">LayerIndex target_height</div><div class="ttdoc">The layer this support elements wants reach.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:145</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_a5620b422ee4f9355f632665f8bb36d58"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a5620b422ee4f9355f632665f8bb36d58">Slic3r::FFFTreeSupport::SupportElementState::last_area_increase</a></div><div class="ttdeci">AreaIncreaseSettings last_area_increase</div><div class="ttdoc">Settings used to increase the influence area to its current state.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:197</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_abcdd51bb0fff4a5a82764b0e642dbb04"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#abcdd51bb0fff4a5a82764b0e642dbb04">Slic3r::FFFTreeSupport::SupportElementState::dont_move_until</a></div><div class="ttdeci">uint32_t dont_move_until</div><div class="ttdoc">The element tries to not move until this dtt is reached, is set to 0 if the element had to move.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:192</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_ac74a78f37b504cbdaa4f8e101647cb61"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#ac74a78f37b504cbdaa4f8e101647cb61">Slic3r::FFFTreeSupport::SupportElementState::target_position</a></div><div class="ttdeci">Point target_position</div><div class="ttdoc">The position this support elements wants to support on layer=target_height.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:150</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_aee9de1847fa72aa8daf2d9d8f1f1e5e2"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#aee9de1847fa72aa8daf2d9d8f1f1e5e2">Slic3r::FFFTreeSupport::SupportElementState::missing_roof_layers</a></div><div class="ttdeci">uint32_t missing_roof_layers</div><div class="ttdoc">Amount of roof layers that were not yet added, because the branch needed to move.</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:202</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00289">Slic3r::FFFTreeSupport::TreeSupportSettings::bp_radius_increase_per_layer</a>, <a class="el" href="../../#l00252">Slic3r::FFFTreeSupport::TreeSupportSettings::branch_radius_increase_per_layer</a>, <a class="el" href="../../#l00120">Slic3r::FFFTreeSupport::SupportElementStateBits::can_use_safe_radius</a>, <a class="el" href="../../#l00170">Slic3r::FFFTreeSupport::SupportElementState::distance_to_top</a>, <a class="el" href="../../#l00192">Slic3r::FFFTreeSupport::SupportElementState::dont_move_until</a>, <a class="el" href="../../#l00165">Slic3r::FFFTreeSupport::SupportElementState::effective_radius_height</a>, <a class="el" href="../../#l00187">Slic3r::FFFTreeSupport::SupportElementState::elephant_foot_increases</a>, <a class="el" href="../../#l00063">Slic3r::FFFTreeSupport::AreaIncreaseSettings::increase_radius</a>, <a class="el" href="../../#l00060">Slic3r::FFFTreeSupport::AreaIncreaseSettings::increase_speed</a>, <a class="el" href="../../#l00197">Slic3r::FFFTreeSupport::SupportElementState::last_area_increase</a>, <a class="el" href="../../#l00160">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a>, <a class="el" href="../../#l02007">merge_support_element_states()</a>, <a class="el" href="../../#l00202">Slic3r::FFFTreeSupport::SupportElementState::missing_roof_layers</a>, <a class="el" href="../../#l00066">Slic3r::FFFTreeSupport::AreaIncreaseSettings::move</a>, <a class="el" href="../../#l00155">Slic3r::FFFTreeSupport::SupportElementState::next_position</a>, <a class="el" href="../../#l00064">Slic3r::FFFTreeSupport::AreaIncreaseSettings::no_error</a>, <a class="el" href="../../#l00125">Slic3r::FFFTreeSupport::SupportElementStateBits::skip_ovalisation</a>, <a class="el" href="../../#l00246">support_element_collision_radius()</a>, <a class="el" href="../../#l00115">Slic3r::FFFTreeSupport::SupportElementStateBits::supports_roof</a>, <a class="el" href="../../#l00145">Slic3r::FFFTreeSupport::SupportElementState::target_height</a>, <a class="el" href="../../#l00150">Slic3r::FFFTreeSupport::SupportElementState::target_position</a>, <a class="el" href="../../#l00100">Slic3r::FFFTreeSupport::SupportElementStateBits::to_buildplate</a>, <a class="el" href="../../#l00105">Slic3r::FFFTreeSupport::SupportElementStateBits::to_model_gracious</a>, <a class="el" href="../../#l00062">Slic3r::FFFTreeSupport::AreaIncreaseSettings::type</a>, <a class="el" href="../../#l00065">Slic3r::FFFTreeSupport::AreaIncreaseSettings::use_min_distance</a>, and <a class="el" href="../../#l00110">Slic3r::FFFTreeSupport::SupportElementStateBits::use_min_xy_dist</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>, and <a class="el" href="../../#l02007">merge_support_element_states()</a>.</p>
<div id="dynsection-64" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-64-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-64-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-64-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5a183ed4ab8686513525c8c6b81401af_cgraph.svg" width="612" height="91"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-65" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-65-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-65-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-65-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5a183ed4ab8686513525c8c6b81401af_icgraph.svg" width="100%" height="446"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ab2114dd5f9bf09745fc5ae30aabd9e6d" name="ab2114dd5f9bf09745fc5ae30aabd9e6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2114dd5f9bf09745fc5ae30aabd9e6d">&#9670;&#160;</a></span>move_inside()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int Slic3r::FFFTreeSupport::move_inside </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>polygons</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>distance</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a>&#160;</td>
          <td class="paramname"><em>maxDist2</em> = <code>std::numeric_limits&lt;<a class="el" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a>&gt;::max()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1419</span>{</div>
<div class="line"><span class="lineno"> 1420</span>    <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>  ret = from;</div>
<div class="line"><span class="lineno"> 1421</span>    <span class="keywordtype">double</span> bestDist2 = std::numeric_limits&lt;double&gt;::max();</div>
<div class="line"><span class="lineno"> 1422</span>    <span class="keyword">auto</span>   bestPoly = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(-1);</div>
<div class="line"><span class="lineno"> 1423</span>    <span class="keywordtype">bool</span>   is_already_on_correct_side_of_boundary = <span class="keyword">false</span>; <span class="comment">// whether [from] is already on the right side of the boundary</span></div>
<div class="line"><span class="lineno"> 1424</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> poly_idx = 0; poly_idx &lt; polygons.size(); ++ poly_idx) {</div>
<div class="line"><span class="lineno"> 1425</span>        <span class="keyword">const</span> <a class="code hl_class" href="../../d8/d90/class_slic3r_1_1_polygon.html">Polygon</a> &amp;poly = polygons[poly_idx];</div>
<div class="line"><span class="lineno"> 1426</span>        <span class="keywordflow">if</span> (poly.<a class="code hl_function" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#af3d77ee0ed47dc3e2bf8e741d6a1e563">size</a>() &lt; 2)</div>
<div class="line"><span class="lineno"> 1427</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1428</span>        <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> p0 = poly[poly.<a class="code hl_function" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#af3d77ee0ed47dc3e2bf8e741d6a1e563">size</a>() - 2];</div>
<div class="line"><span class="lineno"> 1429</span>        <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> p1 = poly.<a class="code hl_function" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a529edca78dfc1b7c70d794fd655d19ce">back</a>();</div>
<div class="line"><span class="lineno"> 1430</span>        <span class="comment">// because we compare with vSize2 here (no division by zero), we also need to compare by vSize2 inside the loop</span></div>
<div class="line"><span class="lineno"> 1431</span>        <span class="comment">// to avoid integer rounding edge cases</span></div>
<div class="line"><span class="lineno"> 1432</span>        <span class="keywordtype">bool</span> projected_p_beyond_prev_segment = (p1 - p0).cast&lt;int64_t&gt;().dot((from - p0).cast&lt;<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a>&gt;()) &gt;= (p1 - p0).cast&lt;int64_t&gt;().squaredNorm();</div>
<div class="line"><span class="lineno"> 1433</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>&amp; p2 : poly) {</div>
<div class="line"><span class="lineno"> 1434</span>            <span class="comment">// X = A + Normal(B-A) * (((B-A) dot (P-A)) / VSize(B-A));</span></div>
<div class="line"><span class="lineno"> 1435</span>            <span class="comment">//   = A +       (B-A) *  ((B-A) dot (P-A)) / VSize2(B-A);</span></div>
<div class="line"><span class="lineno"> 1436</span>            <span class="comment">// X = P projected on AB</span></div>
<div class="line"><span class="lineno"> 1437</span>            <span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>&amp; a = p1;</div>
<div class="line"><span class="lineno"> 1438</span>            <span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>&amp; b = p2;</div>
<div class="line"><span class="lineno"> 1439</span>            <span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>&amp; p = from;</div>
<div class="line"><span class="lineno"> 1440</span>            <span class="keyword">auto</span> ab = (b - a).cast&lt;int64_t&gt;();</div>
<div class="line"><span class="lineno"> 1441</span>            <span class="keyword">auto</span> ap = (p - a).cast&lt;int64_t&gt;();</div>
<div class="line"><span class="lineno"> 1442</span>            <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a> ab_length2 = ab.squaredNorm();</div>
<div class="line"><span class="lineno"> 1443</span>            <span class="keywordflow">if</span> (ab_length2 &lt;= 0) { <span class="comment">//A = B, i.e. the input polygon had two adjacent points on top of each other.</span></div>
<div class="line"><span class="lineno"> 1444</span>                p1 = p2; <span class="comment">//Skip only one of the points.</span></div>
<div class="line"><span class="lineno"> 1445</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1446</span>            }</div>
<div class="line"><span class="lineno"> 1447</span>            <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a> dot_prod = ab.dot(ap);</div>
<div class="line"><span class="lineno"> 1448</span>            <span class="keywordflow">if</span> (dot_prod &lt;= 0) { <span class="comment">// x is projected to before ab</span></div>
<div class="line"><span class="lineno"> 1449</span>                <span class="keywordflow">if</span> (projected_p_beyond_prev_segment) { </div>
<div class="line"><span class="lineno"> 1450</span>                    <span class="comment">//  case which looks like:   &gt; .</span></div>
<div class="line"><span class="lineno"> 1451</span>                    projected_p_beyond_prev_segment = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1452</span>                    <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>&amp; x = p1;</div>
<div class="line"><span class="lineno"> 1453</span> </div>
<div class="line"><span class="lineno"> 1454</span>                    <span class="keyword">auto</span> dist2 = (x - p).cast&lt;int64_t&gt;().squaredNorm();</div>
<div class="line"><span class="lineno"> 1455</span>                    <span class="keywordflow">if</span> (dist2 &lt; bestDist2) {</div>
<div class="line"><span class="lineno"> 1456</span>                        bestDist2 = dist2;</div>
<div class="line"><span class="lineno"> 1457</span>                        bestPoly = poly_idx;</div>
<div class="line"><span class="lineno"> 1458</span>                        <span class="keywordflow">if</span> (distance == 0)</div>
<div class="line"><span class="lineno"> 1459</span>                            ret = x;</div>
<div class="line"><span class="lineno"> 1460</span>                        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1461</span>                            <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec2d</a>  abd   = ab.cast&lt;<span class="keywordtype">double</span>&gt;();</div>
<div class="line"><span class="lineno"> 1462</span>                            <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec2d</a>  p1p2  = (p1 - p0).cast&lt;double&gt;();</div>
<div class="line"><span class="lineno"> 1463</span>                            <span class="keywordtype">double</span> lab   = abd.norm();</div>
<div class="line"><span class="lineno"> 1464</span>                            <span class="keywordtype">double</span> lp1p2 = p1p2.norm();</div>
<div class="line"><span class="lineno"> 1465</span>                            <span class="comment">// inward direction irrespective of sign of [distance]</span></div>
<div class="line"><span class="lineno"> 1466</span>                            <span class="keyword">auto</span> inward_dir = perp(abd * (scaled&lt;double&gt;(10.0) / lab) + p1p2 * (scaled&lt;double&gt;(10.0) / lp1p2));</div>
<div class="line"><span class="lineno"> 1467</span>                            <span class="comment">// MM2INT(10.0) to retain precision for the eventual normalization</span></div>
<div class="line"><span class="lineno"> 1468</span>                            ret = x + (inward_dir * (distance / inward_dir.norm())).cast&lt;<a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&gt;();</div>
<div class="line"><span class="lineno"> 1469</span>                            is_already_on_correct_side_of_boundary = inward_dir.dot((p - x).cast&lt;<span class="keywordtype">double</span>&gt;()) * distance &gt;= 0;</div>
<div class="line"><span class="lineno"> 1470</span>                        }</div>
<div class="line"><span class="lineno"> 1471</span>                    }</div>
<div class="line"><span class="lineno"> 1472</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1473</span>                    projected_p_beyond_prev_segment = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1474</span>                    p0 = p1;</div>
<div class="line"><span class="lineno"> 1475</span>                    p1 = p2;</div>
<div class="line"><span class="lineno"> 1476</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1477</span>                }</div>
<div class="line"><span class="lineno"> 1478</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dot_prod &gt;= ab_length2) {</div>
<div class="line"><span class="lineno"> 1479</span>                <span class="comment">// x is projected to beyond ab</span></div>
<div class="line"><span class="lineno"> 1480</span>                projected_p_beyond_prev_segment = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1481</span>                p0 = p1;</div>
<div class="line"><span class="lineno"> 1482</span>                p1 = p2;</div>
<div class="line"><span class="lineno"> 1483</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1484</span>            } <span class="keywordflow">else</span> { </div>
<div class="line"><span class="lineno"> 1485</span>                <span class="comment">// x is projected to a point properly on the line segment (not onto a vertex). The case which looks like | .</span></div>
<div class="line"><span class="lineno"> 1486</span>                projected_p_beyond_prev_segment = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1487</span>                <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a1e3045df0bee66333beaa96a9a1b6c9d">x</a> = <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a> + (<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a187ef4436122d1cc2f40dc2b92f0eba0">ab</a>.cast&lt;<span class="keywordtype">double</span>&gt;() * (<span class="keywordtype">double</span>(dot_prod) / double(ab_length2))).cast&lt;<a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&gt;();</div>
<div class="line"><span class="lineno"> 1488</span>                <span class="keyword">auto</span> dist2 = (p - <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a1e3045df0bee66333beaa96a9a1b6c9d">x</a>).cast&lt;int64_t&gt;().squaredNorm();</div>
<div class="line"><span class="lineno"> 1489</span>                <span class="keywordflow">if</span> (dist2 &lt; bestDist2) {</div>
<div class="line"><span class="lineno"> 1490</span>                    bestDist2 = dist2;</div>
<div class="line"><span class="lineno"> 1491</span>                    bestPoly = poly_idx;</div>
<div class="line"><span class="lineno"> 1492</span>                    <span class="keywordflow">if</span> (distance == 0)</div>
<div class="line"><span class="lineno"> 1493</span>                        ret = <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a1e3045df0bee66333beaa96a9a1b6c9d">x</a>;</div>
<div class="line"><span class="lineno"> 1494</span>                    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1495</span>                        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4911e516e5aa21d327512e0c8b197616">abd</a> = <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a187ef4436122d1cc2f40dc2b92f0eba0">ab</a>.cast&lt;<span class="keywordtype">double</span>&gt;();</div>
<div class="line"><span class="lineno"> 1496</span>                        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a> inward_dir = <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a52df9a1e4d9809d18fed21ccf4caae08">perp</a>(abd * (distance / <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4911e516e5aa21d327512e0c8b197616">abd</a>.norm())); <span class="comment">// inward or outward depending on the sign of [distance]</span></div>
<div class="line"><span class="lineno"> 1497</span>                        ret = <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a1e3045df0bee66333beaa96a9a1b6c9d">x</a> + inward_dir.cast&lt;<a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&gt;();</div>
<div class="line"><span class="lineno"> 1498</span>                        is_already_on_correct_side_of_boundary = inward_dir.dot((p - x).cast&lt;<span class="keywordtype">double</span>&gt;()) &gt;= 0;</div>
<div class="line"><span class="lineno"> 1499</span>                    }</div>
<div class="line"><span class="lineno"> 1500</span>                }</div>
<div class="line"><span class="lineno"> 1501</span>            }</div>
<div class="line"><span class="lineno"> 1502</span>            p0 = p1;</div>
<div class="line"><span class="lineno"> 1503</span>            p1 = p2;</div>
<div class="line"><span class="lineno"> 1504</span>        }</div>
<div class="line"><span class="lineno"> 1505</span>    }</div>
<div class="line"><span class="lineno"> 1506</span>    <span class="comment">// when the best point is already inside and we&#39;re moving inside, or when the best point is already outside and we&#39;re moving outside</span></div>
<div class="line"><span class="lineno"> 1507</span>    <span class="keywordflow">if</span> (is_already_on_correct_side_of_boundary) {</div>
<div class="line"><span class="lineno"> 1508</span>        <span class="keywordflow">if</span> (bestDist2 &lt; distance * distance)</div>
<div class="line"><span class="lineno"> 1509</span>            from = ret;</div>
<div class="line"><span class="lineno"> 1510</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1511</span>            <span class="comment">// from = from; // original point stays unaltered. It is already inside by enough distance</span></div>
<div class="line"><span class="lineno"> 1512</span>        }</div>
<div class="line"><span class="lineno"> 1513</span>        <span class="keywordflow">return</span> bestPoly;</div>
<div class="line"><span class="lineno"> 1514</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bestDist2 &lt; maxDist2) {</div>
<div class="line"><span class="lineno"> 1515</span>        from = ret;</div>
<div class="line"><span class="lineno"> 1516</span>        <span class="keywordflow">return</span> bestPoly;</div>
<div class="line"><span class="lineno"> 1517</span>    }</div>
<div class="line"><span class="lineno"> 1518</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1519</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_multi_point_html_a529edca78dfc1b7c70d794fd655d19ce"><div class="ttname"><a href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a529edca78dfc1b7c70d794fd655d19ce">Slic3r::MultiPoint::back</a></div><div class="ttdeci">const Point &amp; back() const</div><div class="ttdef"><b>Definition</b> MultiPoint.hpp:37</div></div>
<div class="ttc" id="anamespace_slic3r_html_a40e8e384542f32f8150cabd3db031651"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Slic3r::Vec2d</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 2, 1, Eigen::DontAlign &gt; Vec2d</div><div class="ttdef"><b>Definition</b> Point.hpp:51</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1pointlike_html_a1e3045df0bee66333beaa96a9a1b6c9d"><div class="ttname"><a href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a1e3045df0bee66333beaa96a9a1b6c9d">libnest2d::pointlike::x</a></div><div class="ttdeci">TCoord&lt; P &gt; x(const P &amp;p)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:297</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1pointlike_html_a52df9a1e4d9809d18fed21ccf4caae08"><div class="ttname"><a href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a52df9a1e4d9809d18fed21ccf4caae08">libnest2d::pointlike::perp</a></div><div class="ttdeci">Pt perp(const Pt &amp;p)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:335</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">marchsq::__impl::SquareTag::a</a></div><div class="ttdeci">@ a</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a187ef4436122d1cc2f40dc2b92f0eba0"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a187ef4436122d1cc2f40dc2b92f0eba0">marchsq::__impl::SquareTag::ab</a></div><div class="ttdeci">@ ab</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a4911e516e5aa21d327512e0c8b197616"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4911e516e5aa21d327512e0c8b197616">marchsq::__impl::SquareTag::abd</a></div><div class="ttdeci">@ abd</div></div>
<div class="ttc" id="aunistd_8h_html_a67a9885ef4908cb72ce26d75b694386c"><div class="ttname"><a href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a></div><div class="ttdeci">__int64 int64_t</div><div class="ttdef"><b>Definition</b> unistd.h:76</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00037">Slic3r::MultiPoint::back()</a>, <a class="el" href="../../#l01418">move_inside()</a>, and <a class="el" href="../../#l00039">Slic3r::MultiPoint::size()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01418">move_inside()</a>, and <a class="el" href="../../#l01521">move_inside_if_outside()</a>.</p>
<div id="dynsection-66" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-66-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-66-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-66-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ab2114dd5f9bf09745fc5ae30aabd9e6d_cgraph.svg" width="336" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-67" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-67-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-67-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-67-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ab2114dd5f9bf09745fc5ae30aabd9e6d_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a4cea5675bfa8ad2c71fcd7c1785690fe" name="a4cea5675bfa8ad2c71fcd7c1785690fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cea5675bfa8ad2c71fcd7c1785690fe">&#9670;&#160;</a></span>move_inside_if_outside()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> Slic3r::FFFTreeSupport::move_inside_if_outside </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>polygons</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>distance</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a>&#160;</td>
          <td class="paramname"><em>maxDist2</em> = <code>std::numeric_limits&lt;<a class="el" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a>&gt;::max()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1522</span>{</div>
<div class="line"><span class="lineno"> 1523</span>    <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(polygons, from))</div>
<div class="line"><span class="lineno"> 1524</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab2114dd5f9bf09745fc5ae30aabd9e6d">move_inside</a>(polygons, from);</div>
<div class="line"><span class="lineno"> 1525</span>    <span class="keywordflow">return</span> from;</div>
<div class="line"><span class="lineno"> 1526</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab2114dd5f9bf09745fc5ae30aabd9e6d"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab2114dd5f9bf09745fc5ae30aabd9e6d">Slic3r::FFFTreeSupport::move_inside</a></div><div class="ttdeci">static unsigned int move_inside(const Polygons &amp;polygons, Point &amp;from, int distance=0, int64_t maxDist2=std::numeric_limits&lt; int64_t &gt;::max())</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:1418</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00065">contains()</a>, <a class="el" href="../../#l01418">move_inside()</a>, and <a class="el" href="../../#l01521">move_inside_if_outside()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02647">create_nodes_from_area()</a>, <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>, <a class="el" href="../../#l01521">move_inside_if_outside()</a>, <a class="el" href="../../#l02508">set_points_on_areas()</a>, <a class="el" href="../../#l02538">set_to_model_contact_simple()</a>, and <a class="el" href="../../#l02552">set_to_model_contact_to_model_gracious()</a>.</p>
<div id="dynsection-68" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-68-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-68-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-68-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a4cea5675bfa8ad2c71fcd7c1785690fe_cgraph.svg" width="550" height="158"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-69" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-69-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-69-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-69-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a4cea5675bfa8ad2c71fcd7c1785690fe_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a5f3c278c734d77924e1f29d285aa971c" name="a5f3c278c734d77924e1f29d285aa971c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f3c278c734d77924e1f29d285aa971c">&#9670;&#160;</a></span>organic_draw_branches()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::organic_draw_branches </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>print_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html">InterfacePlacer</a> &amp;&#160;</td>
          <td class="paramname"><em>interface_placer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dd8/namespace_slic3r_1_1_f_f_f_support.html#a9f779e7589bece4b83a5376a95769db3">SupportGeneratorLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>intermediate_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/dc2/class_slic3r_1_1_f_f_f_support_1_1_support_generator_layer_storage.html">SupportGeneratorLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1022</span>{</div>
<div class="line"><span class="lineno"> 1023</span>    <span class="comment">// All SupportElements are put into a layer independent storage to improve parallelization.</span></div>
<div class="line"><span class="lineno"> 1024</span>    std::vector&lt;std::pair&lt;SupportElement*, int&gt;&gt; elements_with_link_down;</div>
<div class="line"><span class="lineno"> 1025</span>    std::vector&lt;size_t&gt;                          linear_data_layers;</div>
<div class="line"><span class="lineno"> 1026</span>    {</div>
<div class="line"><span class="lineno"> 1027</span>        std::vector&lt;std::pair&lt;SupportElement*, int&gt;&gt; map_downwards_old;</div>
<div class="line"><span class="lineno"> 1028</span>        std::vector&lt;std::pair&lt;SupportElement*, int&gt;&gt; map_downwards_new;</div>
<div class="line"><span class="lineno"> 1029</span>        linear_data_layers.emplace_back(0);</div>
<div class="line"><span class="lineno"> 1030</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx = 0; layer_idx &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 1031</span>            <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> *layer_above = layer_idx + 1 &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()) ? &amp;move_bounds[layer_idx + 1] : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1032</span>            map_downwards_new.clear();</div>
<div class="line"><span class="lineno"> 1033</span>            std::sort(map_downwards_old.begin(), map_downwards_old.end(), [](<span class="keyword">auto</span>&amp; l, <span class="keyword">auto</span>&amp; r) { return l.first &lt; r.first;  });</div>
<div class="line"><span class="lineno"> 1034</span>            <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;layer = move_bounds[layer_idx];</div>
<div class="line"><span class="lineno"> 1035</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> elem_idx = 0; elem_idx &lt; layer.size(); ++ elem_idx) {</div>
<div class="line"><span class="lineno"> 1036</span>                <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;elem = layer[elem_idx];</div>
<div class="line"><span class="lineno"> 1037</span>                <span class="keywordtype">int</span> child = -1;</div>
<div class="line"><span class="lineno"> 1038</span>                <span class="keywordflow">if</span> (layer_idx &gt; 0) {</div>
<div class="line"><span class="lineno"> 1039</span>                    <span class="keyword">auto</span> it = std::lower_bound(map_downwards_old.begin(), map_downwards_old.end(), &amp;elem, [](<span class="keyword">auto</span>&amp; l, <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a>* r) { return l.first &lt; r; });</div>
<div class="line"><span class="lineno"> 1040</span>                    <span class="keywordflow">if</span> (it != map_downwards_old.end() &amp;&amp; it-&gt;first == &amp;elem) {</div>
<div class="line"><span class="lineno"> 1041</span>                        child = it-&gt;second;</div>
<div class="line"><span class="lineno"> 1042</span>                        <span class="comment">// Only one link points to a node above from below.</span></div>
<div class="line"><span class="lineno"> 1043</span>                        assert(!(++it != map_downwards_old.end() &amp;&amp; it-&gt;first == &amp;elem));</div>
<div class="line"><span class="lineno"> 1044</span>                    }</div>
<div class="line"><span class="lineno"> 1045</span><span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><span class="lineno"> 1046</span>                    {</div>
<div class="line"><span class="lineno"> 1047</span>                        <span class="keyword">const</span> SupportElement *pchild = child == -1 ? nullptr : &amp;move_bounds[layer_idx - 1][child];</div>
<div class="line"><span class="lineno"> 1048</span>                        assert(pchild ? pchild-&gt;state.result_on_layer_is_set() : elem.state.target_height &gt; layer_idx);</div>
<div class="line"><span class="lineno"> 1049</span>                    }</div>
<div class="line"><span class="lineno"> 1050</span><span class="preprocessor">#endif </span><span class="comment">// NDEBUG</span></div>
<div class="line"><span class="lineno"> 1051</span>                }</div>
<div class="line"><span class="lineno"> 1052</span>                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> parent_idx : elem.parents) {</div>
<div class="line"><span class="lineno"> 1053</span>                    SupportElement &amp;parent = (*layer_above)[parent_idx];</div>
<div class="line"><span class="lineno"> 1054</span>                    <span class="keywordflow">if</span> (parent.state.result_on_layer_is_set())</div>
<div class="line"><span class="lineno"> 1055</span>                        map_downwards_new.emplace_back(&amp;parent, elem_idx);</div>
<div class="line"><span class="lineno"> 1056</span>                }</div>
<div class="line"><span class="lineno"> 1057</span> </div>
<div class="line"><span class="lineno"> 1058</span>                elements_with_link_down.push_back({ &amp;elem, int(child) });</div>
<div class="line"><span class="lineno"> 1059</span>            }</div>
<div class="line"><span class="lineno"> 1060</span>            std::swap(map_downwards_old, map_downwards_new);</div>
<div class="line"><span class="lineno"> 1061</span>            linear_data_layers.emplace_back(elements_with_link_down.size());</div>
<div class="line"><span class="lineno"> 1062</span>        }</div>
<div class="line"><span class="lineno"> 1063</span>    }</div>
<div class="line"><span class="lineno"> 1064</span> </div>
<div class="line"><span class="lineno"> 1065</span>    throw_on_cancel();</div>
<div class="line"><span class="lineno"> 1066</span> </div>
<div class="line"><span class="lineno"> 1067</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af8424f920968063d5aa16e27c2b7f635">organic_smooth_branches_avoid_collisions</a>(print_object, volumes, config, move_bounds, elements_with_link_down, linear_data_layers, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 1068</span> </div>
<div class="line"><span class="lineno"> 1069</span>    <span class="comment">// Reduce memory footprint. After this point only finalize_interface_and_support_areas() will use volumes and from that only collisions with zero radius will be used.</span></div>
<div class="line"><span class="lineno"> 1070</span>    volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a9068d7f13707cb028627c3b7f669e23f">clear_all_but_object_collision</a>();</div>
<div class="line"><span class="lineno"> 1071</span> </div>
<div class="line"><span class="lineno"> 1072</span>    <span class="comment">// Unmark all nodes.</span></div>
<div class="line"><span class="lineno"> 1073</span>    <span class="keywordflow">for</span> (SupportElements &amp;elements : move_bounds)</div>
<div class="line"><span class="lineno"> 1074</span>        for (SupportElement &amp;element : elements)</div>
<div class="line"><span class="lineno"> 1075</span>            element.state.marked = false;</div>
<div class="line"><span class="lineno"> 1076</span> </div>
<div class="line"><span class="lineno"> 1077</span>    <span class="comment">// Traverse all nodes, generate tubes.</span></div>
<div class="line"><span class="lineno"> 1078</span>    <span class="comment">// Traversal stack with nodes and their current parent</span></div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span>    <span class="keyword">struct </span>Branch {</div>
<div class="line"><span class="lineno"> 1081</span>        std::vector&lt;const SupportElement*&gt; path;</div>
<div class="line"><span class="lineno"> 1082</span>        <span class="keywordtype">bool</span>                               has_root{ <span class="keyword">false</span> };</div>
<div class="line"><span class="lineno"> 1083</span>        <span class="keywordtype">bool</span>                               has_tip { <span class="keyword">false</span> };</div>
<div class="line"><span class="lineno"> 1084</span>    };</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keyword">struct </span>Slice {</div>
<div class="line"><span class="lineno"> 1087</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> polygons;</div>
<div class="line"><span class="lineno"> 1088</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> bottom_contacts;</div>
<div class="line"><span class="lineno"> 1089</span>        <span class="keywordtype">size_t</span>   num_branches{ 0 };</div>
<div class="line"><span class="lineno"> 1090</span>    };</div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span>    <span class="keyword">struct </span><a class="code hl_typedef" href="../../d4/d48/namespaceigl_1_1copyleft_1_1cgal_1_1points__inside__component__helper.html#a5971eab405f500fcb2190b1be75210ea">Tree</a> {</div>
<div class="line"><span class="lineno"> 1093</span>        std::vector&lt;Branch&gt;  branches;</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>        std::vector&lt;Slice&gt;   slices;</div>
<div class="line"><span class="lineno"> 1096</span>        <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>           first_layer_id{ -1 };</div>
<div class="line"><span class="lineno"> 1097</span>    };</div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span>    std::vector&lt;Tree&gt;        trees;</div>
<div class="line"><span class="lineno"> 1100</span> </div>
<div class="line"><span class="lineno"> 1101</span>    <span class="keyword">struct </span>TreeVisitor {</div>
<div class="line"><span class="lineno"> 1102</span>        <span class="keyword">static</span> <span class="keywordtype">void</span> visit_recursive(std::vector&lt;SupportElements&gt; &amp;move_bounds, SupportElement &amp;start_element, Tree &amp;out) {</div>
<div class="line"><span class="lineno"> 1103</span>            assert(! start_element.state.marked &amp;&amp; ! start_element.parents.empty());</div>
<div class="line"><span class="lineno"> 1104</span>            <span class="comment">// Collect elements up to a bifurcation above.</span></div>
<div class="line"><span class="lineno"> 1105</span>            start_element.state.marked = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1106</span>            <span class="comment">// For each branch bifurcating from this point:</span></div>
<div class="line"><span class="lineno"> 1107</span>            <span class="comment">//SupportElements &amp;layer       = move_bounds[start_element.state.layer_idx];</span></div>
<div class="line"><span class="lineno"> 1108</span>            <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;layer_above = move_bounds[start_element.state.layer_idx + 1];</div>
<div class="line"><span class="lineno"> 1109</span>            <span class="keywordtype">bool</span> root = out.branches.empty();</div>
<div class="line"><span class="lineno"> 1110</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> parent_idx = 0; parent_idx &lt; start_element.parents.size(); ++ parent_idx) {</div>
<div class="line"><span class="lineno"> 1111</span>                Branch branch;</div>
<div class="line"><span class="lineno"> 1112</span>                branch.path.emplace_back(&amp;start_element);</div>
<div class="line"><span class="lineno"> 1113</span>                <span class="comment">// Traverse each branch until it branches again.</span></div>
<div class="line"><span class="lineno"> 1114</span>                SupportElement &amp;first_parent = layer_above[start_element.parents[parent_idx]];</div>
<div class="line"><span class="lineno"> 1115</span>                assert(! first_parent.state.marked);</div>
<div class="line"><span class="lineno"> 1116</span>                assert(branch.path.back()-&gt;state.layer_idx + 1 == first_parent.state.layer_idx);</div>
<div class="line"><span class="lineno"> 1117</span>                branch.path.emplace_back(&amp;first_parent);</div>
<div class="line"><span class="lineno"> 1118</span>                <span class="keywordflow">if</span> (first_parent.parents.size() &lt; 2)</div>
<div class="line"><span class="lineno"> 1119</span>                    first_parent.state.marked = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1120</span>                SupportElement *next_branch = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1121</span>                <span class="keywordflow">if</span> (first_parent.parents.size() == 1) {</div>
<div class="line"><span class="lineno"> 1122</span>                    <span class="keywordflow">for</span> (SupportElement *parent = &amp;first_parent;;) {</div>
<div class="line"><span class="lineno"> 1123</span>                        assert(parent-&gt;state.marked);</div>
<div class="line"><span class="lineno"> 1124</span>                        SupportElement &amp;next_parent = move_bounds[parent-&gt;state.layer_idx + 1][parent-&gt;parents.front()];</div>
<div class="line"><span class="lineno"> 1125</span>                        assert(! next_parent.state.marked);</div>
<div class="line"><span class="lineno"> 1126</span>                        assert(branch.path.back()-&gt;state.layer_idx + 1 == next_parent.state.layer_idx);</div>
<div class="line"><span class="lineno"> 1127</span>                        branch.path.emplace_back(&amp;next_parent);</div>
<div class="line"><span class="lineno"> 1128</span>                        <span class="keywordflow">if</span> (next_parent.parents.size() &gt; 1) {</div>
<div class="line"><span class="lineno"> 1129</span>                            <span class="comment">// Branching point was reached.</span></div>
<div class="line"><span class="lineno"> 1130</span>                            next_branch = &amp;next_parent;</div>
<div class="line"><span class="lineno"> 1131</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1132</span>                        }</div>
<div class="line"><span class="lineno"> 1133</span>                        next_parent.state.marked = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1134</span>                        <span class="keywordflow">if</span> (next_parent.parents.size() == 0)</div>
<div class="line"><span class="lineno"> 1135</span>                            <span class="comment">// Tip is reached.</span></div>
<div class="line"><span class="lineno"> 1136</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1137</span>                        parent = &amp;next_parent;</div>
<div class="line"><span class="lineno"> 1138</span>                    }</div>
<div class="line"><span class="lineno"> 1139</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (first_parent.parents.size() &gt; 1)</div>
<div class="line"><span class="lineno"> 1140</span>                    <span class="comment">// Branching point was reached.</span></div>
<div class="line"><span class="lineno"> 1141</span>                    next_branch = &amp;first_parent;</div>
<div class="line"><span class="lineno"> 1142</span>                assert(branch.path.size() &gt;= 2);</div>
<div class="line"><span class="lineno"> 1143</span>                assert(next_branch == <span class="keyword">nullptr</span> || ! next_branch-&gt;state.marked);</div>
<div class="line"><span class="lineno"> 1144</span>                branch.has_root = root;</div>
<div class="line"><span class="lineno"> 1145</span>                branch.has_tip  = ! next_branch;</div>
<div class="line"><span class="lineno"> 1146</span>                out.branches.emplace_back(std::move(branch));</div>
<div class="line"><span class="lineno"> 1147</span>                <span class="keywordflow">if</span> (next_branch)</div>
<div class="line"><span class="lineno"> 1148</span>                    visit_recursive(move_bounds, *next_branch, out);</div>
<div class="line"><span class="lineno"> 1149</span>            }</div>
<div class="line"><span class="lineno"> 1150</span>        }</div>
<div class="line"><span class="lineno"> 1151</span>    };</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>    <span class="keywordflow">for</span> (LayerIndex layer_idx = 0; layer_idx + 1 &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()); ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 1154</span><span class="comment">//        int ielement;</span></div>
<div class="line"><span class="lineno"> 1155</span>        <span class="keywordflow">for</span> (SupportElement&amp; start_element : move_bounds[layer_idx]) {</div>
<div class="line"><span class="lineno"> 1156</span>            <span class="keywordflow">if</span> (!start_element.state.marked &amp;&amp; !start_element.parents.empty()) {</div>
<div class="line"><span class="lineno"> 1157</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 1158</span>                <span class="keywordtype">int</span> found = 0;</div>
<div class="line"><span class="lineno"> 1159</span>                <span class="keywordflow">if</span> (layer_idx &gt; 0) {</div>
<div class="line"><span class="lineno"> 1160</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; el : move_bounds[layer_idx - 1]) {</div>
<div class="line"><span class="lineno"> 1161</span>                        <span class="keywordflow">for</span> (<span class="keyword">auto</span> iparent : el.parents)</div>
<div class="line"><span class="lineno"> 1162</span>                            <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (iparent == ielement)</div>
<div class="line"><span class="lineno"> 1163</span>                                ++found;</div>
<div class="line"><span class="lineno"> 1164</span>                    }</div>
<div class="line"><span class="lineno"> 1165</span>                    <span class="keywordflow">if</span> (found != 0)</div>
<div class="line"><span class="lineno"> 1166</span>                        printf(<span class="stringliteral">&quot;Found: %d\n&quot;</span>, found);</div>
<div class="line"><span class="lineno"> 1167</span>                }</div>
<div class="line"><span class="lineno"> 1168</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1169</span>                trees.push_back({});</div>
<div class="line"><span class="lineno"> 1170</span>                TreeVisitor::visit_recursive(move_bounds, start_element, trees.back());</div>
<div class="line"><span class="lineno"> 1171</span>                assert(!trees.back().branches.empty());</div>
<div class="line"><span class="lineno"> 1172</span>                <span class="comment">//FIXME debugging</span></div>
<div class="line"><span class="lineno"> 1173</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 1174</span>                <span class="keywordflow">if</span> (start_element.state.lost) {</div>
<div class="line"><span class="lineno"> 1175</span>                }</div>
<div class="line"><span class="lineno"> 1176</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (start_element.state.verylost) {</div>
<div class="line"><span class="lineno"> 1177</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1178</span>                    trees.pop_back();</div>
<div class="line"><span class="lineno"> 1179</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1180</span>            }</div>
<div class="line"><span class="lineno"> 1181</span><span class="comment">//            ++ ielement;</span></div>
<div class="line"><span class="lineno"> 1182</span>        }</div>
<div class="line"><span class="lineno"> 1183</span>    }</div>
<div class="line"><span class="lineno"> 1184</span> </div>
<div class="line"><span class="lineno"> 1185</span>    <span class="keyword">const</span> SlicingParameters &amp;slicing_params = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#ad6d151e7f62600dc1439ebad6e198108">slicing_parameters</a>();</div>
<div class="line"><span class="lineno"> 1186</span>    MeshSlicingParams mesh_slicing_params;</div>
<div class="line"><span class="lineno"> 1187</span>    mesh_slicing_params.mode = MeshSlicingParams::SlicingMode::Positive;</div>
<div class="line"><span class="lineno"> 1188</span> </div>
<div class="line"><span class="lineno"> 1189</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, trees.size(), 1),</div>
<div class="line"><span class="lineno"> 1190</span>        [&amp;trees, &amp;volumes, &amp;config, &amp;slicing_params, &amp;move_bounds, &amp;mesh_slicing_params, &amp;throw_on_cancel](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 1191</span>            indexed_triangle_set    partial_mesh;</div>
<div class="line"><span class="lineno"> 1192</span>            std::vector&lt;float&gt;      slice_z;</div>
<div class="line"><span class="lineno"> 1193</span>            std::vector&lt;Polygons&gt;   bottom_contacts;</div>
<div class="line"><span class="lineno"> 1194</span>            for (size_t tree_id = range.begin(); tree_id &lt; range.end(); ++ tree_id) {</div>
<div class="line"><span class="lineno"> 1195</span>                Tree &amp;tree = trees[tree_id];</div>
<div class="line"><span class="lineno"> 1196</span>                for (const Branch &amp;branch : tree.branches) {</div>
<div class="line"><span class="lineno"> 1197</span>                    <span class="comment">// Triangulate the tube.</span></div>
<div class="line"><span class="lineno"> 1198</span>                    partial_mesh.clear();</div>
<div class="line"><span class="lineno"> 1199</span>                    std::pair&lt;float, float&gt; zspan = extrude_branch(branch.path, config, slicing_params, move_bounds, partial_mesh);</div>
<div class="line"><span class="lineno"> 1200</span>                    LayerIndex layer_begin = branch.has_root ?</div>
<div class="line"><span class="lineno"> 1201</span>                        branch.path.front()-&gt;state.layer_idx : </div>
<div class="line"><span class="lineno"> 1202</span>                        std::min(branch.path.front()-&gt;state.layer_idx, layer_idx_ceil(slicing_params, config, zspan.first));</div>
<div class="line"><span class="lineno"> 1203</span>                    LayerIndex layer_end   = (branch.has_tip ?</div>
<div class="line"><span class="lineno"> 1204</span>                        branch.path.back()-&gt;state.layer_idx :</div>
<div class="line"><span class="lineno"> 1205</span>                        std::max(branch.path.back()-&gt;state.layer_idx, layer_idx_floor(slicing_params, config, zspan.second))) + 1;</div>
<div class="line"><span class="lineno"> 1206</span>                    slice_z.clear();</div>
<div class="line"><span class="lineno"> 1207</span>                    for (LayerIndex layer_idx = layer_begin; layer_idx &lt; layer_end; ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 1208</span>                        const double print_z  = layer_z(slicing_params, config, layer_idx);</div>
<div class="line"><span class="lineno"> 1209</span>                        const double bottom_z = layer_idx &gt; 0 ? layer_z(slicing_params, config, layer_idx - 1) : 0.;</div>
<div class="line"><span class="lineno"> 1210</span>                        slice_z.emplace_back(float(0.5 * (bottom_z + print_z)));</div>
<div class="line"><span class="lineno"> 1211</span>                    }</div>
<div class="line"><span class="lineno"> 1212</span>                    std::vector&lt;Polygons&gt; slices = slice_mesh(partial_mesh, slice_z, mesh_slicing_params, throw_on_cancel);</div>
<div class="line"><span class="lineno"> 1213</span>                    bottom_contacts.clear();</div>
<div class="line"><span class="lineno"> 1214</span>                    <span class="comment">//FIXME parallelize?</span></div>
<div class="line"><span class="lineno"> 1215</span>                    for (LayerIndex i = 0; i &lt; LayerIndex(slices.size()); ++ i)</div>
<div class="line"><span class="lineno"> 1216</span>                        slices[i] = diff_clipped(slices[i], volumes.getCollision(0, layer_begin + i, true)); <span class="comment">//FIXME parent_uses_min || draw_area.element-&gt;state.use_min_xy_dist);</span></div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span>                    size_t num_empty = 0;</div>
<div class="line"><span class="lineno"> 1219</span>                    if (slices.front().empty()) {</div>
<div class="line"><span class="lineno"> 1220</span>                        <span class="comment">// Some of the initial layers are empty.</span></div>
<div class="line"><span class="lineno"> 1221</span>                        num_empty = std::find_if(slices.begin(), slices.end(), [](auto &amp;s) { return !s.empty(); }) - slices.begin();</div>
<div class="line"><span class="lineno"> 1222</span>                    } else {</div>
<div class="line"><span class="lineno"> 1223</span>                        if (branch.has_root) {</div>
<div class="line"><span class="lineno"> 1224</span>                            if (branch.path.front()-&gt;state.to_model_gracious) {</div>
<div class="line"><span class="lineno"> 1225</span>                                if (config.settings.support_floor_layers &gt; 0)</div>
<div class="line"><span class="lineno"> 1226</span>                                    <span class="comment">//FIXME one may just take the whole tree slice as bottom interface.</span></div>
<div class="line"><span class="lineno"> 1227</span>                                    bottom_contacts.emplace_back(intersection_clipped(slices.front(), volumes.getPlaceableAreas(0, layer_begin, [] {})));</div>
<div class="line"><span class="lineno"> 1228</span>                            } else if (layer_begin &gt; 0) {</div>
<div class="line"><span class="lineno"> 1229</span>                                <span class="comment">// Drop down areas that do rest non - gracefully on the model to ensure the branch actually rests on something.</span></div>
<div class="line"><span class="lineno"> 1230</span>                                struct BottomExtraSlice {</div>
<div class="line"><span class="lineno"> 1231</span>                                    Polygons polygons;</div>
<div class="line"><span class="lineno"> 1232</span>                                    double   area;</div>
<div class="line"><span class="lineno"> 1233</span>                                };</div>
<div class="line"><span class="lineno"> 1234</span>                                std::vector&lt;BottomExtraSlice&gt;   bottom_extra_slices;</div>
<div class="line"><span class="lineno"> 1235</span>                                Polygons                        rest_support;</div>
<div class="line"><span class="lineno"> 1236</span>                                coord_t                         bottom_radius = support_element_radius(config, *branch.path.front());</div>
<div class="line"><span class="lineno"> 1237</span>                                <span class="comment">// Don&#39;t propagate further than 1.5 * bottom radius.</span></div>
<div class="line"><span class="lineno"> 1238</span>                                <span class="comment">//LayerIndex                      layers_propagate_max = 2 * bottom_radius / config.layer_height;</span></div>
<div class="line"><span class="lineno"> 1239</span>                                LayerIndex                      layers_propagate_max = 5 * bottom_radius / config.layer_height;</div>
<div class="line"><span class="lineno"> 1240</span>                                LayerIndex                      layer_bottommost = branch.path.front()-&gt;state.verylost ? </div>
<div class="line"><span class="lineno"> 1241</span>                                    <span class="comment">// If the tree bottom is hanging in the air, bring it down to some surface.</span></div>
<div class="line"><span class="lineno"> 1242</span>                                    0 : </div>
<div class="line"><span class="lineno"> 1243</span>                                    <span class="comment">//FIXME the &quot;verylost&quot; branches should stop when crossing another support.</span></div>
<div class="line"><span class="lineno"> 1244</span>                                    std::max(0, layer_begin - layers_propagate_max);</div>
<div class="line"><span class="lineno"> 1245</span>                                double                          support_area_min_radius = M_PI * sqr(double(config.branch_radius));</div>
<div class="line"><span class="lineno"> 1246</span>                                double                          support_area_stop = std::max(0.2 * M_PI * sqr(double(bottom_radius)), 0.5 * support_area_min_radius);</div>
<div class="line"><span class="lineno"> 1247</span>                                 <span class="comment">// Only propagate until the rest area is smaller than this threshold.</span></div>
<div class="line"><span class="lineno"> 1248</span>                                <span class="comment">//double                          support_area_min = 0.1 * support_area_min_radius;</span></div>
<div class="line"><span class="lineno"> 1249</span>                                for (LayerIndex layer_idx = layer_begin - 1; layer_idx &gt;= layer_bottommost; -- layer_idx) {</div>
<div class="line"><span class="lineno"> 1250</span>                                    rest_support = diff_clipped(rest_support.empty() ? slices.front() : rest_support, volumes.getCollision(0, layer_idx, false));</div>
<div class="line"><span class="lineno"> 1251</span>                                    double rest_support_area = area(rest_support);</div>
<div class="line"><span class="lineno"> 1252</span>                                    if (rest_support_area &lt; support_area_stop)</div>
<div class="line"><span class="lineno"> 1253</span>                                        <span class="comment">// Don&#39;t propagate a fraction of the tree contact surface.</span></div>
<div class="line"><span class="lineno"> 1254</span>                                        break;</div>
<div class="line"><span class="lineno"> 1255</span>                                    bottom_extra_slices.push_back({ rest_support, rest_support_area });</div>
<div class="line"><span class="lineno"> 1256</span>                                }</div>
<div class="line"><span class="lineno"> 1257</span>                                <span class="comment">// Now remove those bottom slices that are not supported at all.</span></div>
<div class="line"><span class="lineno"> 1258</span>#if 0</div>
<div class="line"><span class="lineno"> 1259</span>                                while (! bottom_extra_slices.empty()) {</div>
<div class="line"><span class="lineno"> 1260</span>                                    Polygons this_bottom_contacts = intersection_clipped(</div>
<div class="line"><span class="lineno"> 1261</span>                                        bottom_extra_slices.back().polygons, volumes.getPlaceableAreas(0, layer_begin - LayerIndex(bottom_extra_slices.size()), [] {}));</div>
<div class="line"><span class="lineno"> 1262</span>                                    if (area(this_bottom_contacts) &lt; support_area_min)</div>
<div class="line"><span class="lineno"> 1263</span>                                        bottom_extra_slices.pop_back();</div>
<div class="line"><span class="lineno"> 1264</span>                                    else {</div>
<div class="line"><span class="lineno"> 1265</span>                                        <span class="comment">// At least a fraction of the tree bottom is considered to be supported.</span></div>
<div class="line"><span class="lineno"> 1266</span>                                        if (config.settings.support_floor_layers &gt; 0)</div>
<div class="line"><span class="lineno"> 1267</span>                                            <span class="comment">// Turn this fraction of the tree bottom into a contact layer.</span></div>
<div class="line"><span class="lineno"> 1268</span>                                            bottom_contacts.emplace_back(std::move(this_bottom_contacts));</div>
<div class="line"><span class="lineno"> 1269</span>                                        break;</div>
<div class="line"><span class="lineno"> 1270</span>                                    }</div>
<div class="line"><span class="lineno"> 1271</span>                                }</div>
<div class="line"><span class="lineno"> 1272</span>#endif</div>
<div class="line"><span class="lineno"> 1273</span>                                if (config.settings.support_floor_layers &gt; 0)</div>
<div class="line"><span class="lineno"> 1274</span>                                    for (int i = int(bottom_extra_slices.size()) - 2; i &gt;= 0; -- i)</div>
<div class="line"><span class="lineno"> 1275</span>                                        bottom_contacts.emplace_back(</div>
<div class="line"><span class="lineno"> 1276</span>                                            intersection_clipped(bottom_extra_slices[i].polygons, volumes.getPlaceableAreas(0, layer_begin - i - 1, [] {})));</div>
<div class="line"><span class="lineno"> 1277</span>                                layer_begin -= LayerIndex(bottom_extra_slices.size());</div>
<div class="line"><span class="lineno"> 1278</span>                                slices.insert(slices.begin(), bottom_extra_slices.size(), {});</div>
<div class="line"><span class="lineno"> 1279</span>                                auto it_dst = slices.begin();</div>
<div class="line"><span class="lineno"> 1280</span>                                for (auto it_src = bottom_extra_slices.rbegin(); it_src != bottom_extra_slices.rend(); ++ it_src)</div>
<div class="line"><span class="lineno"> 1281</span>                                    *it_dst ++ = std::move(it_src-&gt;polygons);</div>
<div class="line"><span class="lineno"> 1282</span>                            }</div>
<div class="line"><span class="lineno"> 1283</span>                        }</div>
<div class="line"><span class="lineno"> 1284</span>                        </div>
<div class="line"><span class="lineno"> 1285</span>#if 0</div>
<div class="line"><span class="lineno"> 1286</span>                        <span class="comment">//FIXME branch.has_tip seems to not be reliable.</span></div>
<div class="line"><span class="lineno"> 1287</span>                        if (branch.has_tip &amp;&amp; interface_placer.support_parameters.has_top_contacts)</div>
<div class="line"><span class="lineno"> 1288</span>                            <span class="comment">// Add top slices to top contacts / interfaces / base interfaces.</span></div>
<div class="line"><span class="lineno"> 1289</span>                            for (int i = int(branch.path.size()) - 1; i &gt;= 0; -- i) {</div>
<div class="line"><span class="lineno"> 1290</span>                                const SupportElement &amp;el = *branch.path[i];</div>
<div class="line"><span class="lineno"> 1291</span>                                if (el.state.missing_roof_layers == 0)</div>
<div class="line"><span class="lineno"> 1292</span>                                    break;</div>
<div class="line"><span class="lineno"> 1293</span>                                <span class="comment">//FIXME Move or not?</span></div>
<div class="line"><span class="lineno"> 1294</span>                                interface_placer.add_roof(std::move(slices[int(slices.size()) - i - 1]), el.state.layer_idx,</div>
<div class="line"><span class="lineno"> 1295</span>                                    interface_placer.support_parameters.num_top_interface_layers + 1 - el.state.missing_roof_layers);</div>
<div class="line"><span class="lineno"> 1296</span>                            }</div>
<div class="line"><span class="lineno"> 1297</span>#endif</div>
<div class="line"><span class="lineno"> 1298</span>                    }</div>
<div class="line"><span class="lineno"> 1299</span> </div>
<div class="line"><span class="lineno"> 1300</span>                    layer_begin += LayerIndex(num_empty);</div>
<div class="line"><span class="lineno"> 1301</span>                    while (! slices.empty() &amp;&amp; slices.back().empty()) {</div>
<div class="line"><span class="lineno"> 1302</span>                        slices.pop_back();</div>
<div class="line"><span class="lineno"> 1303</span>                        -- layer_end;</div>
<div class="line"><span class="lineno"> 1304</span>                    }</div>
<div class="line"><span class="lineno"> 1305</span>                    if (layer_begin &lt; layer_end) {</div>
<div class="line"><span class="lineno"> 1306</span>                        LayerIndex new_begin = tree.first_layer_id == -1 ? layer_begin : std::min(tree.first_layer_id, layer_begin);</div>
<div class="line"><span class="lineno"> 1307</span>                        LayerIndex new_end   = tree.first_layer_id == -1 ? layer_end : std::max(tree.first_layer_id + LayerIndex(tree.slices.size()), layer_end);</div>
<div class="line"><span class="lineno"> 1308</span>                        size_t     new_size  = size_t(new_end - new_begin);</div>
<div class="line"><span class="lineno"> 1309</span>                        if (tree.first_layer_id == -1) {</div>
<div class="line"><span class="lineno"> 1310</span>                        } else if (tree.slices.capacity() &lt; new_size) {</div>
<div class="line"><span class="lineno"> 1311</span>                            std::vector&lt;Slice&gt; new_slices;</div>
<div class="line"><span class="lineno"> 1312</span>                            new_slices.reserve(new_size);</div>
<div class="line"><span class="lineno"> 1313</span>                            if (LayerIndex dif = tree.first_layer_id - new_begin; dif &gt; 0)</div>
<div class="line"><span class="lineno"> 1314</span>                                new_slices.insert(new_slices.end(), dif, {});</div>
<div class="line"><span class="lineno"> 1315</span>                            append(new_slices, std::move(tree.slices));</div>
<div class="line"><span class="lineno"> 1316</span>                            tree.slices.swap(new_slices);</div>
<div class="line"><span class="lineno"> 1317</span>                        } else if (LayerIndex dif = tree.first_layer_id - new_begin; dif &gt; 0)</div>
<div class="line"><span class="lineno"> 1318</span>                            tree.slices.insert(tree.slices.begin(), tree.first_layer_id - new_begin, {});</div>
<div class="line"><span class="lineno"> 1319</span>                        tree.slices.insert(tree.slices.end(), new_size - tree.slices.size(), {});</div>
<div class="line"><span class="lineno"> 1320</span>                        layer_begin -= LayerIndex(num_empty);</div>
<div class="line"><span class="lineno"> 1321</span>                        for (LayerIndex i = layer_begin; i != layer_end; ++ i) {</div>
<div class="line"><span class="lineno"> 1322</span>                            int j = i - layer_begin;</div>
<div class="line"><span class="lineno"> 1323</span>                            if (Polygons &amp;src = slices[j]; ! src.empty()) {</div>
<div class="line"><span class="lineno"> 1324</span>                                Slice &amp;dst = tree.slices[i - new_begin];</div>
<div class="line"><span class="lineno"> 1325</span>                                if (++ dst.num_branches &gt; 1) {</div>
<div class="line"><span class="lineno"> 1326</span>                                    append(dst.polygons, std::move(src));</div>
<div class="line"><span class="lineno"> 1327</span>                                    if (j &lt; int(bottom_contacts.size()))</div>
<div class="line"><span class="lineno"> 1328</span>                                        append(dst.bottom_contacts, std::move(bottom_contacts[j]));</div>
<div class="line"><span class="lineno"> 1329</span>                                } else {</div>
<div class="line"><span class="lineno"> 1330</span>                                    dst.polygons = std::move(std::move(src));</div>
<div class="line"><span class="lineno"> 1331</span>                                    if (j &lt; int(bottom_contacts.size()))</div>
<div class="line"><span class="lineno"> 1332</span>                                        dst.bottom_contacts = std::move(bottom_contacts[j]);</div>
<div class="line"><span class="lineno"> 1333</span>                                }</div>
<div class="line"><span class="lineno"> 1334</span>                            }</div>
<div class="line"><span class="lineno"> 1335</span>                        }</div>
<div class="line"><span class="lineno"> 1336</span>                        tree.first_layer_id = new_begin;</div>
<div class="line"><span class="lineno"> 1337</span>                    }</div>
<div class="line"><span class="lineno"> 1338</span>                }</div>
<div class="line"><span class="lineno"> 1339</span>            }</div>
<div class="line"><span class="lineno"> 1340</span>        }, tbb::simple_partitioner());</div>
<div class="line"><span class="lineno"> 1341</span> </div>
<div class="line"><span class="lineno"> 1342</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, trees.size(), 1),</div>
<div class="line"><span class="lineno"> 1343</span>        [&amp;trees, &amp;throw_on_cancel](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 1344</span>        for (size_t tree_id = range.begin(); tree_id &lt; range.end(); ++ tree_id) {</div>
<div class="line"><span class="lineno"> 1345</span>            Tree &amp;tree = trees[tree_id];</div>
<div class="line"><span class="lineno"> 1346</span>            for (Slice &amp;slice : tree.slices)</div>
<div class="line"><span class="lineno"> 1347</span>                if (slice.num_branches &gt; 1) {</div>
<div class="line"><span class="lineno"> 1348</span>                    slice.polygons        = union_(slice.polygons);</div>
<div class="line"><span class="lineno"> 1349</span>                    slice.bottom_contacts = union_(slice.bottom_contacts);</div>
<div class="line"><span class="lineno"> 1350</span>                    slice.num_branches = 1;</div>
<div class="line"><span class="lineno"> 1351</span>                }</div>
<div class="line"><span class="lineno"> 1352</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 1353</span>        }</div>
<div class="line"><span class="lineno"> 1354</span>    }, tbb::simple_partitioner());</div>
<div class="line"><span class="lineno"> 1355</span> </div>
<div class="line"><span class="lineno"> 1356</span>    <span class="keywordtype">size_t</span> num_layers = 0;</div>
<div class="line"><span class="lineno"> 1357</span>    <span class="keywordflow">for</span> (Tree &amp;tree : trees)</div>
<div class="line"><span class="lineno"> 1358</span>        <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (tree.first_layer_id &gt;= 0)</div>
<div class="line"><span class="lineno"> 1359</span>            num_layers = <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a92e6345ca905d3483422361cf8c991b6">max</a>(num_layers, size_t(tree.first_layer_id + tree.slices.<a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">size</a>()));</div>
<div class="line"><span class="lineno"> 1360</span> </div>
<div class="line"><span class="lineno"> 1361</span>    std::vector&lt;Slice&gt; slices(num_layers, Slice{});</div>
<div class="line"><span class="lineno"> 1362</span>    <span class="keywordflow">for</span> (Tree &amp;tree : trees)</div>
<div class="line"><span class="lineno"> 1363</span>        <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (tree.first_layer_id &gt;= 0) {</div>
<div class="line"><span class="lineno"> 1364</span>            <span class="keywordflow">for</span> (LayerIndex i = tree.first_layer_id; i != tree.first_layer_id + <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(tree.slices.size()); ++ i)</div>
<div class="line"><span class="lineno"> 1365</span>                <span class="keywordflow">if</span> (Slice &amp;src = tree.slices[i - tree.first_layer_id]; ! src.polygons.empty()) {</div>
<div class="line"><span class="lineno"> 1366</span>                    Slice &amp;dst = slices[i];</div>
<div class="line"><span class="lineno"> 1367</span>                    <span class="keywordflow">if</span> (++ dst.num_branches &gt; 1) {</div>
<div class="line"><span class="lineno"> 1368</span>                        <a class="code hl_function" href="../../dc/db2/namespacepriv.html#a3e6045aa7075a33d05830cc70eebdbba">append</a>(dst.polygons,        std::move(src.polygons));</div>
<div class="line"><span class="lineno"> 1369</span>                        <a class="code hl_function" href="../../dc/db2/namespacepriv.html#a3e6045aa7075a33d05830cc70eebdbba">append</a>(dst.bottom_contacts, std::move(src.bottom_contacts));</div>
<div class="line"><span class="lineno"> 1370</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1371</span>                        dst.polygons        = std::move(src.polygons);</div>
<div class="line"><span class="lineno"> 1372</span>                        dst.bottom_contacts = std::move(src.bottom_contacts);</div>
<div class="line"><span class="lineno"> 1373</span>                    }</div>
<div class="line"><span class="lineno"> 1374</span>                }</div>
<div class="line"><span class="lineno"> 1375</span>        }</div>
<div class="line"><span class="lineno"> 1376</span> </div>
<div class="line"><span class="lineno"> 1377</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, std::min(move_bounds.size(), slices.size()), 1),</div>
<div class="line"><span class="lineno"> 1378</span>        [&amp;print_object, &amp;config, &amp;slices, &amp;bottom_contacts, &amp;top_contacts, &amp;intermediate_layers, &amp;layer_storage, &amp;throw_on_cancel](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 1379</span>        for (size_t layer_idx = range.begin(); layer_idx &lt; range.end(); ++layer_idx) {</div>
<div class="line"><span class="lineno"> 1380</span>            Slice &amp;slice = slices[layer_idx];</div>
<div class="line"><span class="lineno"> 1381</span>            assert(intermediate_layers[layer_idx] == nullptr);</div>
<div class="line"><span class="lineno"> 1382</span>            Polygons base_layer_polygons     = slice.num_branches &gt; 1 ? union_(slice.polygons) : std::move(slice.polygons);</div>
<div class="line"><span class="lineno"> 1383</span>            Polygons bottom_contact_polygons = slice.num_branches &gt; 1 ? union_(slice.bottom_contacts) : std::move(slice.bottom_contacts);</div>
<div class="line"><span class="lineno"> 1384</span> </div>
<div class="line"><span class="lineno"> 1385</span>            if (! base_layer_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 1386</span>                <span class="comment">// Most of the time in this function is this union call. Can take 300+ ms when a lot of areas are to be unioned.</span></div>
<div class="line"><span class="lineno"> 1387</span>                base_layer_polygons = smooth_outward(union_(base_layer_polygons), config.support_line_width); <span class="comment">//FIXME was .smooth(50);</span></div>
<div class="line"><span class="lineno"> 1388</span>                <span class="comment">//smooth_outward(closing(std::move(bottom), closing_distance + minimum_island_radius, closing_distance, SUPPORT_SURFACES_OFFSET_PARAMETERS), smoothing_distance) :</span></div>
<div class="line"><span class="lineno"> 1389</span>                <span class="comment">// simplify a bit, to ensure the output does not contain outrageous amounts of vertices. Should not be necessary, just a precaution.</span></div>
<div class="line"><span class="lineno"> 1390</span>                base_layer_polygons = polygons_simplify(base_layer_polygons, std::min(scaled&lt;double&gt;(0.03), double(config.resolution)), polygons_strictly_simple);</div>
<div class="line"><span class="lineno"> 1391</span>            }</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>            <span class="comment">// Subtract top contact layer polygons from support base.</span></div>
<div class="line"><span class="lineno"> 1394</span>            SupportGeneratorLayer *top_contact_layer = top_contacts.empty() ? nullptr : top_contacts[layer_idx];</div>
<div class="line"><span class="lineno"> 1395</span>            if (top_contact_layer &amp;&amp; ! top_contact_layer-&gt;polygons.empty() &amp;&amp; ! base_layer_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 1396</span>                base_layer_polygons = diff(base_layer_polygons, top_contact_layer-&gt;polygons);</div>
<div class="line"><span class="lineno"> 1397</span>                if (! bottom_contact_polygons.empty())</div>
<div class="line"><span class="lineno"> 1398</span>                    <span class="comment">//FIXME it may be better to clip bottom contacts with top contacts first after they are propagated to produce interface layers.</span></div>
<div class="line"><span class="lineno"> 1399</span>                    bottom_contact_polygons = diff(bottom_contact_polygons, top_contact_layer-&gt;polygons);</div>
<div class="line"><span class="lineno"> 1400</span>            }</div>
<div class="line"><span class="lineno"> 1401</span>            if (! bottom_contact_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 1402</span>                base_layer_polygons = diff(base_layer_polygons, bottom_contact_polygons);</div>
<div class="line"><span class="lineno"> 1403</span>                SupportGeneratorLayer *bottom_contact_layer = bottom_contacts[layer_idx] = &amp;layer_allocate(</div>
<div class="line"><span class="lineno"> 1404</span>                    layer_storage, SupporLayerType::BottomContact, print_object.slicing_parameters(), config, layer_idx);</div>
<div class="line"><span class="lineno"> 1405</span>                bottom_contact_layer-&gt;polygons = std::move(bottom_contact_polygons);</div>
<div class="line"><span class="lineno"> 1406</span>            }</div>
<div class="line"><span class="lineno"> 1407</span>            if (! base_layer_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 1408</span>                SupportGeneratorLayer *base_layer = intermediate_layers[layer_idx] = &amp;layer_allocate(</div>
<div class="line"><span class="lineno"> 1409</span>                    layer_storage, SupporLayerType::Base, print_object.slicing_parameters(), config, layer_idx);</div>
<div class="line"><span class="lineno"> 1410</span>                base_layer-&gt;polygons = union_(base_layer_polygons);</div>
<div class="line"><span class="lineno"> 1411</span>            }</div>
<div class="line"><span class="lineno"> 1412</span> </div>
<div class="line"><span class="lineno"> 1413</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno"> 1414</span>        }</div>
<div class="line"><span class="lineno"> 1415</span>    }, tbb::simple_partitioner());</div>
<div class="line"><span class="lineno"> 1416</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_a9068d7f13707cb028627c3b7f669e23f"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a9068d7f13707cb028627c3b7f669e23f">Slic3r::FFFTreeSupport::TreeModelVolumes::clear_all_but_object_collision</a></div><div class="ttdeci">void clear_all_but_object_collision()</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.hpp:59</div></div>
<div class="ttc" id="anamespace_eigen_1_1half__impl_html_a92e6345ca905d3483422361cf8c991b6"><div class="ttname"><a href="../../d6/d88/namespace_eigen_1_1half__impl.html#a92e6345ca905d3483422361cf8c991b6">Eigen::half_impl::max</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC half() max(const half &amp;a, const half &amp;b)</div><div class="ttdef"><b>Definition</b> Half.h:516</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_af8424f920968063d5aa16e27c2b7f635"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af8424f920968063d5aa16e27c2b7f635">Slic3r::FFFTreeSupport::organic_smooth_branches_avoid_collisions</a></div><div class="ttdeci">static void organic_smooth_branches_avoid_collisions(const PrintObject &amp;print_object, const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, std::vector&lt; SupportElements &gt; &amp;move_bounds, const std::vector&lt; std::pair&lt; SupportElement *, int &gt; &gt; &amp;elements_with_link_down, const std::vector&lt; size_t &gt; &amp;linear_data_layers, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:690</div></div>
<div class="ttc" id="anamespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail_html_a876af6f91231ae4e7e7316f5402682dc"><div class="ttname"><a href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">TCB_SPAN_NAMESPACE_NAME::detail::size</a></div><div class="ttdeci">constexpr auto size(const C &amp;c) -&gt; decltype(c.size())</div><div class="ttdef"><b>Definition</b> span.hpp:183</div></div>
<div class="ttc" id="anamespaceigl_1_1copyleft_1_1cgal_1_1points__inside__component__helper_html_a5971eab405f500fcb2190b1be75210ea"><div class="ttname"><a href="../../d4/d48/namespaceigl_1_1copyleft_1_1cgal_1_1points__inside__component__helper.html#a5971eab405f500fcb2190b1be75210ea">igl::copyleft::cgal::points_inside_component_helper::Tree</a></div><div class="ttdeci">CGAL::AABB_tree&lt; AABB_triangle_traits &gt; Tree</div><div class="ttdef"><b>Definition</b> points_inside_component.cpp:38</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00114">Slic3r::FFFTreeSupport::Tree::branches</a>, <a class="el" href="../../#l00059">Slic3r::FFFTreeSupport::TreeModelVolumes::clear_all_but_object_collision()</a>, <a class="el" href="../../#l00106">Slic3r::FFFTreeSupport::Branch::has_root()</a>, <a class="el" href="../../#l00107">Slic3r::FFFTreeSupport::Branch::has_tip()</a>, <a class="el" href="../../#l00160">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a>, <a class="el" href="../../#l00137">Slic3r::FFFTreeSupport::SupportElementStateBits::marked</a>, <a class="el" href="../../#l00028">Slic3r::MeshSlicingParams::mode</a>, <a class="el" href="../../#l01006">organic_draw_branches()</a>, <a class="el" href="../../#l00690">organic_smooth_branches_avoid_collisions()</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::SupportElement::parents</a>, <a class="el" href="../../#l00088">Slic3r::FFFTreeSupport::Branch::path</a>, <a class="el" href="../../#l00356">Slic3r::range()</a>, <a class="el" href="../../#l00177">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer_is_set()</a>, <a class="el" href="../../#l00309">Slic3r::PrintObject::slicing_parameters()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, and <a class="el" href="../../#l00145">Slic3r::FFFTreeSupport::SupportElementState::target_height</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03399">generate_support_areas()</a>, and <a class="el" href="../../#l01006">organic_draw_branches()</a>.</p>
<div id="dynsection-70" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-70-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-70-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-70-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5f3c278c734d77924e1f29d285aa971c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-71" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-71-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-71-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-71-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5f3c278c734d77924e1f29d285aa971c_icgraph.svg" width="394" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af8424f920968063d5aa16e27c2b7f635" name="af8424f920968063d5aa16e27c2b7f635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8424f920968063d5aa16e27c2b7f635">&#9670;&#160;</a></span>organic_smooth_branches_avoid_collisions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::organic_smooth_branches_avoid_collisions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>print_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::pair&lt; <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *, int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>elements_with_link_down</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>linear_data_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  698</span>{</div>
<div class="line"><span class="lineno">  699</span>    <span class="keyword">struct </span>LayerCollisionCache {</div>
<div class="line"><span class="lineno">  700</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>          min_element_radius{ std::numeric_limits&lt;coord_t&gt;::max() };</div>
<div class="line"><span class="lineno">  701</span>        <span class="keywordtype">bool</span>             min_element_radius_known()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;min_element_radius != std::numeric_limits&lt;coord_t&gt;::max(); }</div>
<div class="line"><span class="lineno">  702</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>          collision_radius{ 0 };</div>
<div class="line"><span class="lineno">  703</span>        std::vector&lt;Linef&gt; lines;</div>
<div class="line"><span class="lineno">  704</span>        AABBTreeIndirect::Tree&lt;2, double&gt; aabbtree_lines;</div>
<div class="line"><span class="lineno">  705</span>        <span class="keywordtype">bool</span>             <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;lines.empty(); }</div>
<div class="line"><span class="lineno">  706</span>    };</div>
<div class="line"><span class="lineno">  707</span>    std::vector&lt;LayerCollisionCache&gt; layer_collision_cache;</div>
<div class="line"><span class="lineno">  708</span>    layer_collision_cache.reserve(1024);</div>
<div class="line"><span class="lineno">  709</span>    <span class="keyword">const</span> SlicingParameters &amp;slicing_params = print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#ad6d151e7f62600dc1439ebad6e198108">slicing_parameters</a>();</div>
<div class="line"><span class="lineno">  710</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::pair&lt;SupportElement*, int&gt;&amp; element : elements_with_link_down) {</div>
<div class="line"><span class="lineno">  711</span>        <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx = element.first-&gt;state.layer_idx;</div>
<div class="line"><span class="lineno">  712</span>        <span class="keywordflow">if</span> (<span class="keywordtype">size_t</span> num_layers = layer_idx + 1; num_layers &gt; layer_collision_cache.size()) {</div>
<div class="line"><span class="lineno">  713</span>            <span class="keywordflow">if</span> (num_layers &gt; layer_collision_cache.capacity())</div>
<div class="line"><span class="lineno">  714</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83aa59e16437d531108b18ed2695e686">reserve_power_of_2</a>(layer_collision_cache, num_layers);</div>
<div class="line"><span class="lineno">  715</span>            layer_collision_cache.resize(num_layers, {});</div>
<div class="line"><span class="lineno">  716</span>        }</div>
<div class="line"><span class="lineno">  717</span>        <span class="keyword">auto</span>&amp; l = layer_collision_cache[layer_idx];</div>
<div class="line"><span class="lineno">  718</span>        l.min_element_radius = std::min(l.min_element_radius, <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, *element.first));</div>
<div class="line"><span class="lineno">  719</span>    }</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>    throw_on_cancel();</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>    <span class="keywordflow">for</span> (LayerIndex layer_idx = 0; layer_idx &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(layer_collision_cache.size()); ++layer_idx)</div>
<div class="line"><span class="lineno">  724</span>        <span class="keywordflow">if</span> (LayerCollisionCache&amp; l = layer_collision_cache[layer_idx]; !l.min_element_radius_known())</div>
<div class="line"><span class="lineno">  725</span>            l.min_element_radius = 0;</div>
<div class="line"><span class="lineno">  726</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  727</span>            <span class="comment">//FIXME</span></div>
<div class="line"><span class="lineno">  728</span>            l.min_element_radius = 0;</div>
<div class="line"><span class="lineno">  729</span>            std::optional&lt;std::pair&lt;coord_t, std::reference_wrapper&lt;const Polygons&gt;&gt;&gt; res = volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a41c5b15b86999a67641eca2f74a5bdc8">get_collision_lower_bound_area</a>(layer_idx, l.min_element_radius);</div>
<div class="line"><span class="lineno">  730</span>            assert(res.has_value());</div>
<div class="line"><span class="lineno">  731</span>            l.collision_radius = res-&gt;first;</div>
<div class="line"><span class="lineno">  732</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0913e2e6b7d28032c33cfee03f145fba">Lines</a> alines = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a61e88a2d1ff0bec5ec86a23273dda52a">to_lines</a>(res-&gt;second.get());</div>
<div class="line"><span class="lineno">  733</span>            l.lines.reserve(alines.size());</div>
<div class="line"><span class="lineno">  734</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> Line &amp;line : alines)</div>
<div class="line"><span class="lineno">  735</span>                l.lines.push_back({ unscaled&lt;double&gt;(line.a), unscaled&lt;double&gt;(line.b) });</div>
<div class="line"><span class="lineno">  736</span>            l.aabbtree_lines = AABBTreeLines::build_aabb_tree_over_indexed_lines(l.lines);</div>
<div class="line"><span class="lineno">  737</span>            throw_on_cancel();</div>
<div class="line"><span class="lineno">  738</span>        }</div>
<div class="line"><span class="lineno">  739</span> </div>
<div class="line"><span class="lineno">  740</span>    <span class="keyword">struct </span>CollisionSphere {</div>
<div class="line"><span class="lineno">  741</span>        <span class="keyword">const</span> SupportElement&amp; element;</div>
<div class="line"><span class="lineno">  742</span>        <span class="keywordtype">int</span>                   element_below_id;</div>
<div class="line"><span class="lineno">  743</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span>            locked;</div>
<div class="line"><span class="lineno">  744</span>        <span class="keywordtype">float</span>                 radius;</div>
<div class="line"><span class="lineno">  745</span>        <span class="comment">// Current position, when nudged away from the collision.</span></div>
<div class="line"><span class="lineno">  746</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a>                 position;</div>
<div class="line"><span class="lineno">  747</span>        <span class="comment">// Previous position, for Laplacian smoothing.</span></div>
<div class="line"><span class="lineno">  748</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a>                 prev_position;</div>
<div class="line"><span class="lineno">  749</span>        <span class="comment">// </span></div>
<div class="line"><span class="lineno">  750</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a>                 last_collision;</div>
<div class="line"><span class="lineno">  751</span>        <span class="keywordtype">double</span>                last_collision_depth;</div>
<div class="line"><span class="lineno">  752</span>        <span class="comment">// Minimum Z for which the sphere collision will be evaluated.</span></div>
<div class="line"><span class="lineno">  753</span>        <span class="comment">// Limited by the minimum sloping angle and by the bottom of the tree.</span></div>
<div class="line"><span class="lineno">  754</span>        <span class="keywordtype">float</span>                 min_z{ -std::numeric_limits&lt;float&gt;::max() };</div>
<div class="line"><span class="lineno">  755</span>        <span class="comment">// Maximum Z for which the sphere collision will be evaluated.</span></div>
<div class="line"><span class="lineno">  756</span>        <span class="comment">// Limited by the minimum sloping angle and by the tip of the current branch.</span></div>
<div class="line"><span class="lineno">  757</span>        <span class="keywordtype">float</span>                 max_z{ std::numeric_limits&lt;float&gt;::max() };</div>
<div class="line"><span class="lineno">  758</span>        <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>              layer_begin;</div>
<div class="line"><span class="lineno">  759</span>        <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>              layer_end;</div>
<div class="line"><span class="lineno">  760</span>    };</div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span>    std::vector&lt;CollisionSphere&gt; collision_spheres;</div>
<div class="line"><span class="lineno">  763</span>    collision_spheres.reserve(elements_with_link_down.size());</div>
<div class="line"><span class="lineno">  764</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::pair&lt;SupportElement*, int&gt; &amp;element_with_link : elements_with_link_down) {</div>
<div class="line"><span class="lineno">  765</span>        <span class="keyword">const</span> SupportElement &amp;element   = *element_with_link.first;</div>
<div class="line"><span class="lineno">  766</span>        <span class="keyword">const</span> <span class="keywordtype">int</span>             link_down = element_with_link.second;</div>
<div class="line"><span class="lineno">  767</span>        collision_spheres.push_back({</div>
<div class="line"><span class="lineno">  768</span>            element,</div>
<div class="line"><span class="lineno">  769</span>            link_down,</div>
<div class="line"><span class="lineno">  770</span>            <span class="comment">// locked</span></div>
<div class="line"><span class="lineno">  771</span>            element.parents.empty() || (link_down == -1 &amp;&amp; element.state.layer_idx &gt; 0),</div>
<div class="line"><span class="lineno">  772</span>            unscaled&lt;float&gt;(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, element)),</div>
<div class="line"><span class="lineno">  773</span>            <span class="comment">// 3D position</span></div>
<div class="line"><span class="lineno">  774</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3f60c0fef0146fe2b8ee74dee582e83d">to_3d</a>(unscaled&lt;float&gt;(element.state.result_on_layer), <span class="keywordtype">float</span>(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">layer_z</a>(slicing_params, config, element.state.layer_idx)))</div>
<div class="line"><span class="lineno">  775</span>        });</div>
<div class="line"><span class="lineno">  776</span>        <span class="comment">// Update min_z coordinate to min_z of the tree below.</span></div>
<div class="line"><span class="lineno">  777</span>        CollisionSphere &amp;collision_sphere = collision_spheres.back();</div>
<div class="line"><span class="lineno">  778</span>        <span class="keywordflow">if</span> (link_down != -1) {</div>
<div class="line"><span class="lineno">  779</span>            <span class="keyword">const</span> <span class="keywordtype">size_t</span> offset_below = linear_data_layers[element.state.layer_idx - 1];</div>
<div class="line"><span class="lineno">  780</span>            collision_sphere.min_z = collision_spheres[offset_below + link_down].min_z;</div>
<div class="line"><span class="lineno">  781</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  782</span>            collision_sphere.min_z = collision_sphere.position.z();</div>
<div class="line"><span class="lineno">  783</span>    }</div>
<div class="line"><span class="lineno">  784</span>    <span class="comment">// Update max_z by propagating max_z from the tips of the branches.</span></div>
<div class="line"><span class="lineno">  785</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> collision_sphere_id = <span class="keywordtype">int</span>(collision_spheres.size()) - 1; collision_sphere_id &gt;= 0; -- collision_sphere_id) {</div>
<div class="line"><span class="lineno">  786</span>        CollisionSphere &amp;collision_sphere = collision_spheres[collision_sphere_id];</div>
<div class="line"><span class="lineno">  787</span>        <span class="keywordflow">if</span> (collision_sphere.element.parents.empty())</div>
<div class="line"><span class="lineno">  788</span>            <span class="comment">// Tip</span></div>
<div class="line"><span class="lineno">  789</span>            collision_sphere.max_z = collision_sphere.position.z();</div>
<div class="line"><span class="lineno">  790</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  791</span>            <span class="comment">// Below tip</span></div>
<div class="line"><span class="lineno">  792</span>            <span class="keyword">const</span> <span class="keywordtype">size_t</span> offset_above = linear_data_layers[collision_sphere.element.state.layer_idx + 1];</div>
<div class="line"><span class="lineno">  793</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> iparent : collision_sphere.element.parents) {</div>
<div class="line"><span class="lineno">  794</span>                <span class="keywordtype">float</span> parent_z = collision_spheres[offset_above + iparent].max_z;</div>
<div class="line"><span class="lineno">  795</span><span class="comment">//                    collision_sphere.max_z = collision_sphere.max_z == std::numeric_limits&lt;float&gt;::max() ? parent_z : std::max(collision_sphere.max_z, parent_z);</span></div>
<div class="line"><span class="lineno">  796</span>                collision_sphere.max_z = std::min(collision_sphere.max_z, parent_z);</div>
<div class="line"><span class="lineno">  797</span>            }</div>
<div class="line"><span class="lineno">  798</span>        }</div>
<div class="line"><span class="lineno">  799</span>    }</div>
<div class="line"><span class="lineno">  800</span>    <span class="comment">// Update min_z / max_z to limit the search Z span of a given sphere for collision detection.</span></div>
<div class="line"><span class="lineno">  801</span>    <span class="keywordflow">for</span> (CollisionSphere &amp;collision_sphere : collision_spheres) {</div>
<div class="line"><span class="lineno">  802</span>        <span class="comment">//FIXME limit the collision span by the tree slope.</span></div>
<div class="line"><span class="lineno">  803</span>        collision_sphere.min_z = std::max(collision_sphere.min_z, collision_sphere.position.z() - collision_sphere.radius);</div>
<div class="line"><span class="lineno">  804</span>        collision_sphere.max_z = std::min(collision_sphere.max_z, collision_sphere.position.z() + collision_sphere.radius);</div>
<div class="line"><span class="lineno">  805</span>        collision_sphere.layer_begin = std::min(collision_sphere.element.state.layer_idx, <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#acf81f5493356198ef1d10a851d40e994">layer_idx_ceil</a>(slicing_params, config, collision_sphere.min_z));</div>
<div class="line"><span class="lineno">  806</span>        assert(collision_sphere.layer_begin &lt; layer_collision_cache.size());</div>
<div class="line"><span class="lineno">  807</span>        collision_sphere.layer_end   = std::min(<a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(layer_collision_cache.size()), std::max(collision_sphere.element.state.layer_idx, <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a66c42b1b74f00331d423f2a4b4c5361a">layer_idx_floor</a>(slicing_params, config, collision_sphere.max_z)) + 1);</div>
<div class="line"><span class="lineno">  808</span>    }</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    throw_on_cancel();</div>
<div class="line"><span class="lineno">  811</span> </div>
<div class="line"><span class="lineno">  812</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keywordtype">double</span> collision_extra_gap = 0.1;</div>
<div class="line"><span class="lineno">  813</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keywordtype">double</span> max_nudge_collision_avoidance = 0.5;</div>
<div class="line"><span class="lineno">  814</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keywordtype">double</span> max_nudge_smoothing = 0.2;</div>
<div class="line"><span class="lineno">  815</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../da/d20/namespace_slic3r_1_1opt_1_1detail.html#a17b741f5311f4ad136bd04fbacbd9057">num_iter</a> = 100; <span class="comment">// 1000;</span></div>
<div class="line"><span class="lineno">  816</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iter = 0; iter &lt; <a class="code hl_function" href="../../da/d20/namespace_slic3r_1_1opt_1_1detail.html#a17b741f5311f4ad136bd04fbacbd9057">num_iter</a>; ++ iter) {</div>
<div class="line"><span class="lineno">  817</span>        <span class="comment">// Back up prev position before Laplacian smoothing.</span></div>
<div class="line"><span class="lineno">  818</span>        <span class="keywordflow">for</span> (CollisionSphere &amp;collision_sphere : collision_spheres)</div>
<div class="line"><span class="lineno">  819</span>            collision_sphere.prev_position = collision_sphere.position;</div>
<div class="line"><span class="lineno">  820</span>        std::atomic&lt;size_t&gt; num_moved{ 0 };</div>
<div class="line"><span class="lineno">  821</span>        tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, collision_spheres.size()),</div>
<div class="line"><span class="lineno">  822</span>            [&amp;collision_spheres, &amp;layer_collision_cache, &amp;slicing_params, &amp;config, &amp;linear_data_layers, &amp;num_moved, &amp;throw_on_cancel](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; range) {</div>
<div class="line"><span class="lineno">  823</span>            for (size_t collision_sphere_id = range.begin(); collision_sphere_id &lt; range.end(); ++ collision_sphere_id)</div>
<div class="line"><span class="lineno">  824</span>                if (CollisionSphere &amp;collision_sphere = collision_spheres[collision_sphere_id]; ! collision_sphere.locked) {</div>
<div class="line"><span class="lineno">  825</span>                    <span class="comment">// Calculate collision of multiple 2D layers against a collision sphere.</span></div>
<div class="line"><span class="lineno">  826</span>                    collision_sphere.last_collision_depth = - std::numeric_limits&lt;double&gt;::max();</div>
<div class="line"><span class="lineno">  827</span>                    for (uint32_t layer_id = collision_sphere.layer_begin; layer_id != collision_sphere.layer_end; ++ layer_id) {</div>
<div class="line"><span class="lineno">  828</span>                        double dz = (layer_id - collision_sphere.element.state.layer_idx) * slicing_params.layer_height;</div>
<div class="line"><span class="lineno">  829</span>                        if (double r2 = sqr(collision_sphere.radius) - sqr(dz); r2 &gt; 0) {</div>
<div class="line"><span class="lineno">  830</span>                            if (const LayerCollisionCache &amp;layer_collision_cache_item = layer_collision_cache[layer_id]; ! layer_collision_cache_item.empty()) {</div>
<div class="line"><span class="lineno">  831</span>                                size_t hit_idx_out;</div>
<div class="line"><span class="lineno">  832</span>                                Vec2d  hit_point_out;</div>
<div class="line"><span class="lineno">  833</span>                                if (double dist = sqrt(AABBTreeLines::squared_distance_to_indexed_lines(</div>
<div class="line"><span class="lineno">  834</span>                                    layer_collision_cache_item.lines, layer_collision_cache_item.aabbtree_lines, Vec2d(to_2d(collision_sphere.position).cast&lt;double&gt;()),</div>
<div class="line"><span class="lineno">  835</span>                                    hit_idx_out, hit_point_out, r2)); dist &gt;= 0.) {</div>
<div class="line"><span class="lineno">  836</span>                                    double collision_depth = sqrt(r2) - dist;</div>
<div class="line"><span class="lineno">  837</span>                                    if (collision_depth &gt; collision_sphere.last_collision_depth) {</div>
<div class="line"><span class="lineno">  838</span>                                        collision_sphere.last_collision_depth = collision_depth;</div>
<div class="line"><span class="lineno">  839</span>                                        collision_sphere.last_collision = to_3d(hit_point_out.cast&lt;float&gt;(), float(layer_z(slicing_params, config, layer_id)));</div>
<div class="line"><span class="lineno">  840</span>                                    }</div>
<div class="line"><span class="lineno">  841</span>                                }</div>
<div class="line"><span class="lineno">  842</span>                            }</div>
<div class="line"><span class="lineno">  843</span>                        }</div>
<div class="line"><span class="lineno">  844</span>                    }</div>
<div class="line"><span class="lineno">  845</span>                    if (collision_sphere.last_collision_depth &gt; 0) {</div>
<div class="line"><span class="lineno">  846</span>                        <span class="comment">// Collision detected to be removed.</span></div>
<div class="line"><span class="lineno">  847</span>                        <span class="comment">// Nudge the circle center away from the collision.</span></div>
<div class="line"><span class="lineno">  848</span>                        if (collision_sphere.last_collision_depth &gt; EPSILON)</div>
<div class="line"><span class="lineno">  849</span>                            <span class="comment">// a little bit of hysteresis to detect end of </span></div>
<div class="line"><span class="lineno">  850</span>                            ++ num_moved;</div>
<div class="line"><span class="lineno">  851</span>                        <span class="comment">// Shift by maximum 2mm.</span></div>
<div class="line"><span class="lineno">  852</span>                        double nudge_dist = std::min(std::max(0., collision_sphere.last_collision_depth + collision_extra_gap), max_nudge_collision_avoidance);</div>
<div class="line"><span class="lineno">  853</span>                        Vec2d nudge_vector = (to_2d(collision_sphere.position) - to_2d(collision_sphere.last_collision)).cast&lt;double&gt;().normalized() * nudge_dist;</div>
<div class="line"><span class="lineno">  854</span>                        collision_sphere.position.head&lt;2&gt;() += (nudge_vector * nudge_dist).cast&lt;float&gt;();</div>
<div class="line"><span class="lineno">  855</span>                    }</div>
<div class="line"><span class="lineno">  856</span>                    <span class="comment">// Laplacian smoothing</span></div>
<div class="line"><span class="lineno">  857</span>                    Vec2d avg{ 0, 0 };</div>
<div class="line"><span class="lineno">  858</span>                    <span class="comment">//const SupportElements &amp;above = move_bounds[collision_sphere.element.state.layer_idx + 1];</span></div>
<div class="line"><span class="lineno">  859</span>                    const size_t           offset_above = linear_data_layers[collision_sphere.element.state.layer_idx + 1];</div>
<div class="line"><span class="lineno">  860</span>                    double weight = 0.;</div>
<div class="line"><span class="lineno">  861</span>                    for (auto iparent : collision_sphere.element.parents) {</div>
<div class="line"><span class="lineno">  862</span>                        double w = collision_sphere.radius;</div>
<div class="line"><span class="lineno">  863</span>                        avg += w * to_2d(collision_spheres[offset_above + iparent].prev_position.cast&lt;double&gt;());</div>
<div class="line"><span class="lineno">  864</span>                        weight += w;</div>
<div class="line"><span class="lineno">  865</span>                    }</div>
<div class="line"><span class="lineno">  866</span>                    if (collision_sphere.element_below_id != -1) {</div>
<div class="line"><span class="lineno">  867</span>                        const size_t offset_below = linear_data_layers[collision_sphere.element.state.layer_idx - 1];</div>
<div class="line"><span class="lineno">  868</span>                        const double w = weight; <span class="comment">//  support_element_radius(config, move_bounds[element.state.layer_idx - 1][below]);</span></div>
<div class="line"><span class="lineno">  869</span>                        avg += w * to_2d(collision_spheres[offset_below + collision_sphere.element_below_id].prev_position.cast&lt;double&gt;());</div>
<div class="line"><span class="lineno">  870</span>                        weight += w;</div>
<div class="line"><span class="lineno">  871</span>                    }</div>
<div class="line"><span class="lineno">  872</span>                    avg /= weight;</div>
<div class="line"><span class="lineno">  873</span>                    static constexpr const double smoothing_factor = 0.5;</div>
<div class="line"><span class="lineno">  874</span>                    Vec2d old_pos = to_2d(collision_sphere.position).cast&lt;double&gt;();</div>
<div class="line"><span class="lineno">  875</span>                    Vec2d new_pos = (1. - smoothing_factor) * old_pos + smoothing_factor * avg;</div>
<div class="line"><span class="lineno">  876</span>                    Vec2d shift   = new_pos - old_pos;</div>
<div class="line"><span class="lineno">  877</span>                    double nudge_dist_max = shift.norm();</div>
<div class="line"><span class="lineno">  878</span>                    <span class="comment">// Shift by maximum 1mm, less than the collision avoidance factor.</span></div>
<div class="line"><span class="lineno">  879</span>                    double nudge_dist = std::min(std::max(0., nudge_dist_max), max_nudge_smoothing);</div>
<div class="line"><span class="lineno">  880</span>                    collision_sphere.position.head&lt;2&gt;() += (shift.normalized() * nudge_dist).cast&lt;float&gt;();</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>                    throw_on_cancel();</div>
<div class="line"><span class="lineno">  883</span>                }</div>
<div class="line"><span class="lineno">  884</span>        });</div>
<div class="line"><span class="lineno">  885</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  886</span>        std::vector&lt;double&gt; <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>;</div>
<div class="line"><span class="lineno">  887</span>        <span class="keywordflow">for</span> (CollisionSphere&amp; collision_sphere : collision_spheres)</div>
<div class="line"><span class="lineno">  888</span>            <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (!collision_sphere.locked)</div>
<div class="line"><span class="lineno">  889</span>                <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.emplace_back(collision_sphere.last_collision_depth);</div>
<div class="line"><span class="lineno">  890</span>        std::sort(<a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.begin(), <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.end());</div>
<div class="line"><span class="lineno">  891</span>        printf(<span class="stringliteral">&quot;iteration: %d, moved: %d, collision depth: min %lf, max %lf, median %lf\n&quot;</span>, <span class="keywordtype">int</span>(iter), <span class="keywordtype">int</span>(num_moved), <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.front(), <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.back(), <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>[<a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.size() / 2]);</div>
<div class="line"><span class="lineno">  892</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  893</span>        <span class="keywordflow">if</span> (num_moved == 0)</div>
<div class="line"><span class="lineno">  894</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  895</span>    }</div>
<div class="line"><span class="lineno">  896</span> </div>
<div class="line"><span class="lineno">  897</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; collision_spheres.size(); ++ i)</div>
<div class="line"><span class="lineno">  898</span>        elements_with_link_down[i].first-&gt;state.result_on_layer = scaled&lt;coord_t&gt;(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a578a3c893e3dcbd808e579b6f488901c">to_2d</a>(collision_spheres[i].position));</div>
<div class="line"><span class="lineno">  899</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_a41c5b15b86999a67641eca2f74a5bdc8"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a41c5b15b86999a67641eca2f74a5bdc8">Slic3r::FFFTreeSupport::TreeModelVolumes::get_collision_lower_bound_area</a></div><div class="ttdeci">std::optional&lt; std::pair&lt; coord_t, std::reference_wrapper&lt; const Polygons &gt; &gt; &gt; get_collision_lower_bound_area(LayerIndex layer_id, coord_t max_radius) const</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.cpp:307</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a66c42b1b74f00331d423f2a4b4c5361a"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a66c42b1b74f00331d423f2a4b4c5361a">Slic3r::FFFTreeSupport::layer_idx_floor</a></div><div class="ttdeci">LayerIndex layer_idx_floor(const SlicingParameters &amp;slicing_params, const TreeSupportSettings &amp;config, const double z)</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:469</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_acf81f5493356198ef1d10a851d40e994"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#acf81f5493356198ef1d10a851d40e994">Slic3r::FFFTreeSupport::layer_idx_ceil</a></div><div class="ttdeci">LayerIndex layer_idx_ceil(const SlicingParameters &amp;slicing_params, const TreeSupportSettings &amp;config, const double z)</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:462</div></div>
<div class="ttc" id="anamespace_slic3r_1_1opt_1_1detail_html_a17b741f5311f4ad136bd04fbacbd9057"><div class="ttname"><a href="../../da/d20/namespace_slic3r_1_1opt_1_1detail.html#a17b741f5311f4ad136bd04fbacbd9057">Slic3r::opt::detail::num_iter</a></div><div class="ttdeci">long num_iter(const std::array&lt; size_t, N &gt; &amp;idx, size_t gridsz)</div><div class="ttdef"><b>Definition</b> BruteforceOptimizer.hpp:13</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0913e2e6b7d28032c33cfee03f145fba"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0913e2e6b7d28032c33cfee03f145fba">Slic3r::Lines</a></div><div class="ttdeci">std::vector&lt; Line &gt; Lines</div><div class="ttdef"><b>Definition</b> Line.hpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_html_a4e0a52bc52a09b283b7b06e2f0c272cc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Slic3r::Vec3f</a></div><div class="ttdeci">Eigen::Matrix&lt; float, 3, 1, Eigen::DontAlign &gt; Vec3f</div><div class="ttdef"><b>Definition</b> Point.hpp:49</div></div>
<div class="ttc" id="anamespace_slic3r_html_a578a3c893e3dcbd808e579b6f488901c"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a578a3c893e3dcbd808e579b6f488901c">Slic3r::to_2d</a></div><div class="ttdeci">Eigen::Matrix&lt; typename Derived::Scalar, 2, 1, Eigen::DontAlign &gt; to_2d(const Eigen::MatrixBase&lt; Derived &gt; &amp;ptN)</div><div class="ttdef"><b>Definition</b> Point.hpp:121</div></div>
<div class="ttc" id="anamespace_slic3r_html_a61e88a2d1ff0bec5ec86a23273dda52a"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a61e88a2d1ff0bec5ec86a23273dda52a">Slic3r::to_lines</a></div><div class="ttdeci">Lines to_lines(const ExPolygon &amp;src)</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:117</div></div>
<div class="ttc" id="anamespace_slic3r_html_a83aa59e16437d531108b18ed2695e686"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a83aa59e16437d531108b18ed2695e686">Slic3r::reserve_power_of_2</a></div><div class="ttdeci">void reserve_power_of_2(VectorType &amp;vector, size_t n)</div><div class="ttdef"><b>Definition</b> Utils.hpp:179</div></div>
<div class="ttc" id="aunistd_8h_html_a149da0702b060478da4d59ffe807adac"><div class="ttname"><a href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a></div><div class="ttdeci">#define stat</div><div class="ttdef"><b>Definition</b> unistd.h:53</div></div>
<div class="ttc" id="aunistd_8h_html_a6eb1e68cc391dd753bc8ce896dbb8315"><div class="ttname"><a href="../../da/d6f/unistd_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a></div><div class="ttdeci">unsigned __int32 uint32_t</div><div class="ttdef"><b>Definition</b> unistd.h:79</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00168">Slic3r::AABBTreeLines::build_aabb_tree_over_indexed_lines()</a>, <a class="el" href="../../#l00229">Slic3r::empty()</a>, <a class="el" href="../../#l00307">Slic3r::FFFTreeSupport::TreeModelVolumes::get_collision_lower_bound_area()</a>, <a class="el" href="../../#l00179">Slic3r::reserve_power_of_2()</a>, <a class="el" href="../../#l00309">Slic3r::PrintObject::slicing_parameters()</a>, <a class="el" href="../../#l00236">support_element_radius()</a>, and <a class="el" href="../../#l00117">Slic3r::to_lines()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01006">organic_draw_branches()</a>.</p>
<div id="dynsection-72" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-72-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-72-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-72-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af8424f920968063d5aa16e27c2b7f635_cgraph.svg" width="634" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-73" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-73-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-73-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-73-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af8424f920968063d5aa16e27c2b7f635_icgraph.svg" width="623" height="83"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa3ad982a70b3f29440da13d9c90275f0" name="aa3ad982a70b3f29440da13d9c90275f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3ad982a70b3f29440da13d9c90275f0">&#9670;&#160;</a></span>polyline_sample_next_point_at_distance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::optional&lt; std::pair&lt; <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>, size_t &gt; &gt; Slic3r::FFFTreeSupport::polyline_sample_next_point_at_distance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#aee987cbd1647986a9ac92226daffa4d7">Points</a> &amp;&#160;</td>
          <td class="paramname"><em>polyline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;&#160;</td>
          <td class="paramname"><em>start_pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>start_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  471</span>{</div>
<div class="line"><span class="lineno">  472</span>    <span class="keyword">const</span> <span class="keywordtype">double</span>                dist2  = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(dist);</div>
<div class="line"><span class="lineno">  473</span>    <span class="keyword">const</span> <span class="keyword">auto</span>                  dist2i = <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a>(dist2);</div>
<div class="line"><span class="lineno">  474</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keyword">auto</span> eps    = scaled&lt;double&gt;(0.01);</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = start_idx + 1; i &lt; polyline.size(); ++ i) {</div>
<div class="line"><span class="lineno">  477</span>        <span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> p1 = polyline[i];</div>
<div class="line"><span class="lineno">  478</span>        <span class="keywordflow">if</span> ((p1 - start_pt).cast&lt;int64_t&gt;().squaredNorm() &gt;= dist2i) {</div>
<div class="line"><span class="lineno">  479</span>            <span class="comment">// The end point is outside the circle with center &quot;start_pt&quot; and radius &quot;dist&quot;.</span></div>
<div class="line"><span class="lineno">  480</span>            <span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> p0  = polyline[i - 1];</div>
<div class="line"><span class="lineno">  481</span>            <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec2d</a>       v   = (p1 - p0).cast&lt;double&gt;();</div>
<div class="line"><span class="lineno">  482</span>            <span class="keywordtype">double</span>      l2v = v.squaredNorm();</div>
<div class="line"><span class="lineno">  483</span>            <span class="keywordflow">if</span> (l2v &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(eps)) {</div>
<div class="line"><span class="lineno">  484</span>                <span class="comment">// Very short segment.</span></div>
<div class="line"><span class="lineno">  485</span>                <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> c = (p0 + p1) / 2;</div>
<div class="line"><span class="lineno">  486</span>                <span class="keywordflow">if</span> (std::abs((start_pt - c).cast&lt;<span class="keywordtype">double</span>&gt;().norm() - dist) &lt; eps)</div>
<div class="line"><span class="lineno">  487</span>                    <span class="keywordflow">return</span> std::pair&lt;Point, size_t&gt;{ c, i - 1 };</div>
<div class="line"><span class="lineno">  488</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  489</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  490</span>            }</div>
<div class="line"><span class="lineno">  491</span>            Vec2d p0f = (start_pt - p0).cast&lt;double&gt;();</div>
<div class="line"><span class="lineno">  492</span>            <span class="comment">// Foot point of start_pt into v.</span></div>
<div class="line"><span class="lineno">  493</span>            Vec2d foot_pt = v * (p0f.dot(v) / l2v);</div>
<div class="line"><span class="lineno">  494</span>            <span class="comment">// Vector from foot point of &quot;start_pt&quot; to &quot;start_pt&quot;.</span></div>
<div class="line"><span class="lineno">  495</span>            Vec2d xf = p0f - foot_pt;</div>
<div class="line"><span class="lineno">  496</span>            <span class="comment">// Squared distance of &quot;start_pt&quot; from the ray (p0, p1).</span></div>
<div class="line"><span class="lineno">  497</span>            <span class="keywordtype">double</span> l2_from_line = xf.squaredNorm();</div>
<div class="line"><span class="lineno">  498</span>            <span class="comment">// Squared distance of an intersection point of a circle with center at the foot point.</span></div>
<div class="line"><span class="lineno">  499</span>            <span class="keywordflow">if</span> (<span class="keywordtype">double</span> l2_intersection = dist2 - l2_from_line; </div>
<div class="line"><span class="lineno">  500</span>                l2_intersection &gt; - <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>) {</div>
<div class="line"><span class="lineno">  501</span>                <span class="comment">// The ray (p0, p1) touches or intersects a circle centered at &quot;start_pt&quot; with radius &quot;dist&quot;.</span></div>
<div class="line"><span class="lineno">  502</span>                <span class="comment">// Distance of the circle intersection point from the foot point.</span></div>
<div class="line"><span class="lineno">  503</span>                l2_intersection = std::max(l2_intersection, 0.);</div>
<div class="line"><span class="lineno">  504</span>                <span class="keywordflow">if</span> ((v - foot_pt).cast&lt;double&gt;().squaredNorm() &gt;= l2_intersection) {</div>
<div class="line"><span class="lineno">  505</span>                    <span class="comment">// Intersection of the circle with the segment (p0, p1) is on the right side (close to p1) from the foot point.</span></div>
<div class="line"><span class="lineno">  506</span>                    <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> p = p0 + (foot_pt + v * <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a656b9217a2fcb6de59dc8d1eb3079cc7">sqrt</a>(l2_intersection / l2v)).cast&lt;coord_t&gt;();</div>
<div class="line"><span class="lineno">  507</span>                    validate_range(p);</div>
<div class="line"><span class="lineno">  508</span>                    <span class="keywordflow">return</span> std::pair&lt;Point, size_t&gt;{ p, i - 1 };</div>
<div class="line"><span class="lineno">  509</span>                }</div>
<div class="line"><span class="lineno">  510</span>            }</div>
<div class="line"><span class="lineno">  511</span>        }</div>
<div class="line"><span class="lineno">  512</span>    }</div>
<div class="line"><span class="lineno">  513</span>    <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  514</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00234">Slic3r::foot_pt()</a>, <a class="el" href="../../#l00071">SCALED_EPSILON</a>, <a class="el" href="../../#l00258">Slic3r::sqr()</a>, <a class="el" href="../../#l00152">sqrt()</a>, and <a class="el" href="../../#l00062">validate_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00524">ensure_maximum_distance_polyline()</a>.</p>
<div id="dynsection-74" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-74-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-74-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-74-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aa3ad982a70b3f29440da13d9c90275f0_cgraph.svg" width="100%" height="560"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-75" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-75-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-75-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-75-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aa3ad982a70b3f29440da13d9c90275f0_icgraph.svg" width="616" height="83"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9dda71b81c82e359530c91128bcd7abd" name="a9dda71b81c82e359530c91128bcd7abd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dda71b81c82e359530c91128bcd7abd">&#9670;&#160;</a></span>precalculate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> Slic3r::FFFTreeSupport::precalculate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d8f/class_slic3r_1_1_print.html">Print</a> &amp;&#160;</td>
          <td class="paramname"><em>print</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>overhangs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>object_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Precalculates all avoidances, that could be required. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storage[in]</td><td>Background storage to access meshes. </td></tr>
    <tr><td class="paramname">currently_processing_meshes[in]</td><td>Indexes of all meshes that are processed in this iteration </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  327</span>{</div>
<div class="line"><span class="lineno">  328</span>    <span class="comment">// calculate top most layer that is relevant for support</span></div>
<div class="line"><span class="lineno">  329</span>    <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> max_layer = 0;</div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> object_id : object_ids) {</div>
<div class="line"><span class="lineno">  331</span>        <span class="keyword">const</span> <a class="code hl_class" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;print_object      = *print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(object_id);</div>
<div class="line"><span class="lineno">  332</span>        <span class="keyword">const</span> <span class="keywordtype">int</span>       num_raft_layers      = int(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#aaea24167882a3e568a7a93d7922f6ab4">raft_layers</a>.size());</div>
<div class="line"><span class="lineno">  333</span>        <span class="keyword">const</span> <span class="keywordtype">int</span>       num_layers           = int(print_object.<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#aea3e7f3fc4b46b4290105f655edcde47">layer_count</a>()) + num_raft_layers;</div>
<div class="line"><span class="lineno">  334</span>        <span class="keywordtype">int</span>             max_support_layer_id = 0;</div>
<div class="line"><span class="lineno">  335</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layer_id = std::max&lt;int&gt;(num_raft_layers, 1); layer_id &lt; num_layers; ++ layer_id)</div>
<div class="line"><span class="lineno">  336</span>            <span class="keywordflow">if</span> (! overhangs[layer_id].<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">empty</a>())</div>
<div class="line"><span class="lineno">  337</span>                max_support_layer_id = layer_id;</div>
<div class="line"><span class="lineno">  338</span>        max_layer = std::max(max_support_layer_id - <span class="keywordtype">int</span>(config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e96bc0b46b362062f64b7dc276c959b">z_distance_top_layers</a>), 0);</div>
<div class="line"><span class="lineno">  339</span>    }</div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">if</span> (max_layer &gt; 0)</div>
<div class="line"><span class="lineno">  341</span>        <span class="comment">// The actual precalculation happens in TreeModelVolumes.</span></div>
<div class="line"><span class="lineno">  342</span>        volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a06360ce54b5b9743e6d45b055dff71bd">precalculate</a>(*print.<a class="code hl_function" href="../../d5/d8f/class_slic3r_1_1_print.html#a4cce12ce1ab8a9154376e2211cc0362f">get_object</a>(object_ids.front()), max_layer, throw_on_cancel);</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">return</span> max_layer;</div>
<div class="line"><span class="lineno">  344</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_a06360ce54b5b9743e6d45b055dff71bd"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a06360ce54b5b9743e6d45b055dff71bd">Slic3r::FFFTreeSupport::TreeModelVolumes::precalculate</a></div><div class="ttdeci">void precalculate(const PrintObject &amp;print_object, const coord_t max_layer, std::function&lt; void()&gt; throw_on_cancel)</div><div class="ttdoc">Precalculate avoidances and collisions up to max_layer.</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.cpp:156</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00229">Slic3r::empty()</a>, <a class="el" href="../../#l00601">Slic3r::Print::get_object()</a>, <a class="el" href="../../#l00278">Slic3r::PrintObject::layer_count()</a>, <a class="el" href="../../#l00156">Slic3r::FFFTreeSupport::TreeModelVolumes::precalculate()</a>, <a class="el" href="../../#l00358">Slic3r::FFFTreeSupport::TreeSupportSettings::raft_layers</a>, and <a class="el" href="../../#l00297">Slic3r::FFFTreeSupport::TreeSupportSettings::z_distance_top_layers</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03399">generate_support_areas()</a>.</p>
<div id="dynsection-76" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-76-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-76-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-76-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a9dda71b81c82e359530c91128bcd7abd_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-77" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-77-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-77-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-77-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a9dda71b81c82e359530c91128bcd7abd_icgraph.svg" width="384" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ada6ee7c767b7f812f1d7a4265f74a71c" name="ada6ee7c767b7f812f1d7a4265f74a71c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada6ee7c767b7f812f1d7a4265f74a71c">&#9670;&#160;</a></span>remove_deleted_elements()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::remove_deleted_elements </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2601</span>{</div>
<div class="line"><span class="lineno"> 2602</span>    std::vector&lt;int32_t&gt; map_parents;</div>
<div class="line"><span class="lineno"> 2603</span>    std::vector&lt;int32_t&gt; map_current;</div>
<div class="line"><span class="lineno"> 2604</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx = <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()) - 1; layer_idx &gt;= 0; -- layer_idx) {</div>
<div class="line"><span class="lineno"> 2605</span>        <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;layer = move_bounds[layer_idx];</div>
<div class="line"><span class="lineno"> 2606</span>        map_current.clear();</div>
<div class="line"><span class="lineno"> 2607</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> i = 0; i &lt; <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a>(layer.size());) {</div>
<div class="line"><span class="lineno"> 2608</span>            <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;element = layer[i];</div>
<div class="line"><span class="lineno"> 2609</span>            <span class="keywordflow">if</span> (element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a13584fffa7f42554d73b5fea9037fb6f">deleted</a>) {</div>
<div class="line"><span class="lineno"> 2610</span>                <span class="keywordflow">if</span> (map_current.empty()) {</div>
<div class="line"><span class="lineno"> 2611</span>                    <span class="comment">// Initialize with identity map.</span></div>
<div class="line"><span class="lineno"> 2612</span>                    map_current.assign(layer.size(), 0);</div>
<div class="line"><span class="lineno"> 2613</span>                    std::iota(map_current.begin(), map_current.end(), 0);</div>
<div class="line"><span class="lineno"> 2614</span>                }</div>
<div class="line"><span class="lineno"> 2615</span>                <span class="comment">// Delete all &quot;deleted&quot; elements from the end of the layer vector.</span></div>
<div class="line"><span class="lineno"> 2616</span>                <span class="keywordflow">while</span> (i &lt; <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a>(layer.size()) &amp;&amp; layer.back().state.deleted) {</div>
<div class="line"><span class="lineno"> 2617</span>                    layer.pop_back();</div>
<div class="line"><span class="lineno"> 2618</span>                    <span class="comment">// Mark as deleted in the map.</span></div>
<div class="line"><span class="lineno"> 2619</span>                    map_current[layer.size()] = -1;</div>
<div class="line"><span class="lineno"> 2620</span>                }</div>
<div class="line"><span class="lineno"> 2621</span>                assert(i == layer.size() || i + 1 &lt; layer.size());</div>
<div class="line"><span class="lineno"> 2622</span>                <span class="keywordflow">if</span> (i + 1 &lt; <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a>(layer.size())) {</div>
<div class="line"><span class="lineno"> 2623</span>                    element = std::move(layer.back());</div>
<div class="line"><span class="lineno"> 2624</span>                    layer.pop_back();                    </div>
<div class="line"><span class="lineno"> 2625</span>                    <span class="comment">// Mark the current element as deleted.</span></div>
<div class="line"><span class="lineno"> 2626</span>                    map_current[i] = -1;</div>
<div class="line"><span class="lineno"> 2627</span>                    <span class="comment">// Mark the moved element as moved to index i.</span></div>
<div class="line"><span class="lineno"> 2628</span>                    map_current[layer.size()] = i;</div>
<div class="line"><span class="lineno"> 2629</span>                }</div>
<div class="line"><span class="lineno"> 2630</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2631</span>                <span class="comment">// Current element is not deleted. Update its parent indices.</span></div>
<div class="line"><span class="lineno"> 2632</span>                <span class="keywordflow">if</span> (! map_parents.empty())</div>
<div class="line"><span class="lineno"> 2633</span>                    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> &amp;parent_idx : element.parents)</div>
<div class="line"><span class="lineno"> 2634</span>                        parent_idx = map_parents[parent_idx];</div>
<div class="line"><span class="lineno"> 2635</span>                ++ i;</div>
<div class="line"><span class="lineno"> 2636</span>            }</div>
<div class="line"><span class="lineno"> 2637</span>        }</div>
<div class="line"><span class="lineno"> 2638</span>        std::swap(map_current, map_parents);</div>
<div class="line"><span class="lineno"> 2639</span>    }</div>
<div class="line"><span class="lineno"> 2640</span>}</div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits_html_a13584fffa7f42554d73b5fea9037fb6f"><div class="ttname"><a href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a13584fffa7f42554d73b5fea9037fb6f">Slic3r::FFFTreeSupport::SupportElementStateBits::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:134</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00134">Slic3r::FFFTreeSupport::SupportElementStateBits::deleted</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::SupportElement::parents</a>, <a class="el" href="../../#l02600">remove_deleted_elements()</a>, and <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02647">create_nodes_from_area()</a>, and <a class="el" href="../../#l02600">remove_deleted_elements()</a>.</p>
<div id="dynsection-78" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-78-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-78-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-78-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ada6ee7c767b7f812f1d7a4265f74a71c_cgraph.svg" width="192" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-79" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-79-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-79-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-79-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ada6ee7c767b7f812f1d7a4265f74a71c_icgraph.svg" width="630" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a10d42159133e647bd0231c3b574ad951" name="a10d42159133e647bd0231c3b574ad951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10d42159133e647bd0231c3b574ad951">&#9670;&#160;</a></span>safe_offset_inc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> Slic3r::FFFTreeSupport::safe_offset_inc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>collision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td>
          <td class="paramname"><em>safe_step_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td>
          <td class="paramname"><em>last_step_offset_without_check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>min_amount_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Offsets (increases the area of) a polygons object in multiple steps to ensure that it does not lag through over a given obstacle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">me[in]</td><td>Polygons object that has to be offset. </td></tr>
    <tr><td class="paramname">distance[in]</td><td>The distance by which me should be offset. Expects values &gt;=0. </td></tr>
    <tr><td class="paramname">collision[in]</td><td>The area representing obstacles. </td></tr>
    <tr><td class="paramname">last_step_offset_without_check[in]</td><td>The most it is allowed to offset in one step. </td></tr>
    <tr><td class="paramname">min_amount_offset[in]</td><td>How many steps have to be done at least. As this uses round offset this increases the amount of vertices, which may be required if Polygons get very small. Required as arcTolerance is not exposed in offset, which should result with a similar result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting Polygons object. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  764</span>{</div>
<div class="line"><span class="lineno">  765</span>    <span class="keywordtype">bool</span> do_final_difference = last_step_offset_without_check == 0;</div>
<div class="line"><span class="lineno">  766</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> ret = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dfc6d8bd33b63c46bcb69e36154f5da">safe_union</a>(me); <span class="comment">// ensure sane input</span></div>
<div class="line"><span class="lineno">  767</span>    </div>
<div class="line"><span class="lineno">  768</span>    <span class="comment">// Trim the collision polygons with the region of interest for diff() efficiency.</span></div>
<div class="line"><span class="lineno">  769</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> collision_trimmed_buffer;</div>
<div class="line"><span class="lineno">  770</span>    <span class="keyword">auto</span> collision_trimmed = [&amp;collision_trimmed_buffer, &amp;collision, &amp;ret, distance]() -&gt; <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>&amp; {</div>
<div class="line"><span class="lineno">  771</span>        <span class="keywordflow">if</span> (collision_trimmed_buffer.empty() &amp;&amp; ! collision.empty())</div>
<div class="line"><span class="lineno">  772</span>            collision_trimmed_buffer = ClipperUtils::clip_clipper_polygons_with_subject_bbox(collision, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(ret).<a class="code hl_function" href="../../d4/d2d/class_slic3r_1_1_bounding_box.html#afdf8cd62dd83f934bac9758e302c3bd1">inflated</a>(std::max(0, distance) + <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>));</div>
<div class="line"><span class="lineno">  773</span>        <span class="keywordflow">return</span> collision_trimmed_buffer;</div>
<div class="line"><span class="lineno">  774</span>    };</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span>    <span class="keywordflow">if</span> (distance == 0)</div>
<div class="line"><span class="lineno">  777</span>        <span class="keywordflow">return</span> do_final_difference ? <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(ret, collision_trimmed()) : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(ret);</div>
<div class="line"><span class="lineno">  778</span>    <span class="keywordflow">if</span> (safe_step_size &lt; 0 || last_step_offset_without_check &lt; 0) {</div>
<div class="line"><span class="lineno">  779</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Offset increase got invalid parameter!&quot;</span>;</div>
<div class="line"><span class="lineno">  780</span>        tree_supports_show_error(<span class="stringliteral">&quot;Negative offset distance... How did you manage this ?&quot;</span>sv, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  781</span>        <span class="keywordflow">return</span> do_final_difference ? <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(ret, collision_trimmed()) : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(ret);</div>
<div class="line"><span class="lineno">  782</span>    }</div>
<div class="line"><span class="lineno">  783</span> </div>
<div class="line"><span class="lineno">  784</span>    <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> step_size = safe_step_size;</div>
<div class="line"><span class="lineno">  785</span>    <span class="keywordtype">int</span>     steps = distance &gt; last_step_offset_without_check ? (distance - last_step_offset_without_check) / step_size : 0;</div>
<div class="line"><span class="lineno">  786</span>    <span class="keywordflow">if</span> (distance - steps * step_size &gt; last_step_offset_without_check) {</div>
<div class="line"><span class="lineno">  787</span>        <span class="keywordflow">if</span> ((steps + 1) * step_size &lt;= distance)</div>
<div class="line"><span class="lineno">  788</span>            <span class="comment">// This will be the case when last_step_offset_without_check &gt;= safe_step_size</span></div>
<div class="line"><span class="lineno">  789</span>            ++ steps;</div>
<div class="line"><span class="lineno">  790</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  791</span>            do_final_difference = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  792</span>    }</div>
<div class="line"><span class="lineno">  793</span>    <span class="keywordflow">if</span> (steps + (distance &lt; last_step_offset_without_check || (distance % step_size) != 0) &lt; <span class="keywordtype">int</span>(min_amount_offset) &amp;&amp; min_amount_offset &gt; 1) {</div>
<div class="line"><span class="lineno">  794</span>        <span class="comment">// yes one can add a bool as the standard specifies that a result from compare operators has to be 0 or 1</span></div>
<div class="line"><span class="lineno">  795</span>        <span class="comment">// reduce the stepsize to ensure it is offset the required amount of times</span></div>
<div class="line"><span class="lineno">  796</span>        step_size = <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a> / min_amount_offset;</div>
<div class="line"><span class="lineno">  797</span>        <span class="keywordflow">if</span> (step_size &gt;= safe_step_size) {</div>
<div class="line"><span class="lineno">  798</span>            <span class="comment">// effectivly reduce last_step_offset_without_check</span></div>
<div class="line"><span class="lineno">  799</span>            step_size = safe_step_size;</div>
<div class="line"><span class="lineno">  800</span>            steps = min_amount_offset;</div>
<div class="line"><span class="lineno">  801</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  802</span>            steps = <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a> / step_size;</div>
<div class="line"><span class="lineno">  803</span>    }</div>
<div class="line"><span class="lineno">  804</span>    <span class="comment">// offset in steps</span></div>
<div class="line"><span class="lineno">  805</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; steps; ++ i) {</div>
<div class="line"><span class="lineno">  806</span>        ret = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(ret, step_size, <a class="code hl_enumvalue" href="../../de/d37/namespace_clipper_lib.html#ab3880a3ca1b45df3ce93ac315a74c06ea7833a32073dc3f251ff8de93aa7b6388">ClipperLib::jtRound</a>, scaled&lt;float&gt;(0.01)), collision_trimmed());</div>
<div class="line"><span class="lineno">  807</span>        <span class="comment">// ensure that if many offsets are done the performance does not suffer extremely by the new vertices of jtRound.</span></div>
<div class="line"><span class="lineno">  808</span>        <span class="keywordflow">if</span> (i % 10 == 7)</div>
<div class="line"><span class="lineno">  809</span>            ret = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a47dd597a9913ffd124d863477cec303a">polygons_simplify</a>(ret, scaled&lt;double&gt;(0.015), polygons_strictly_simple);</div>
<div class="line"><span class="lineno">  810</span>    }</div>
<div class="line"><span class="lineno">  811</span>    <span class="comment">// offset the remainder</span></div>
<div class="line"><span class="lineno">  812</span>    <span class="keywordtype">float</span> last_offset = <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a> - steps * step_size;</div>
<div class="line"><span class="lineno">  813</span>    <span class="keywordflow">if</span> (last_offset &gt; <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>)</div>
<div class="line"><span class="lineno">  814</span>        ret = <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(ret, distance - steps * step_size, <a class="code hl_enumvalue" href="../../de/d37/namespace_clipper_lib.html#ab3880a3ca1b45df3ce93ac315a74c06ea7833a32073dc3f251ff8de93aa7b6388">ClipperLib::jtRound</a>, scaled&lt;float&gt;(0.01));</div>
<div class="line"><span class="lineno">  815</span>    ret = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a47dd597a9913ffd124d863477cec303a">polygons_simplify</a>(ret, scaled&lt;double&gt;(0.015), polygons_strictly_simple);</div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>    <span class="keywordflow">if</span> (do_final_difference)</div>
<div class="line"><span class="lineno">  818</span>        ret = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(ret, collision_trimmed());</div>
<div class="line"><span class="lineno">  819</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(ret);</div>
<div class="line"><span class="lineno">  820</span>}</div>
<div class="ttc" id="anamespace_clipper_lib_html_ab3880a3ca1b45df3ce93ac315a74c06ea7833a32073dc3f251ff8de93aa7b6388"><div class="ttname"><a href="../../de/d37/namespace_clipper_lib.html#ab3880a3ca1b45df3ce93ac315a74c06ea7833a32073dc3f251ff8de93aa7b6388">ClipperLib::jtRound</a></div><div class="ttdeci">@ jtRound</div><div class="ttdef"><b>Definition</b> clipper.hpp:138</div></div>
<div class="ttc" id="anamespace_slic3r_html_a47dd597a9913ffd124d863477cec303a"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a47dd597a9913ffd124d863477cec303a">Slic3r::polygons_simplify</a></div><div class="ttdeci">Polygons polygons_simplify(Polygons &amp;&amp;source_polygons, double tolerance, bool strictly_simple)</div><div class="ttdef"><b>Definition</b> Polygon.cpp:595</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1pointlike_html_a34942e34560027545c1146c7861c5e3a"><div class="ttname"><a href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">libnest2d::pointlike::distance</a></div><div class="ttdeci">double distance(const P &amp;p1, const P &amp;p2)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:329</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00152">Slic3r::ClipperUtils::clip_clipper_polygons_with_subject_bbox()</a>, <a class="el" href="../../#l00672">Slic3r::diff()</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00352">Slic3r::get_extents()</a>, <a class="el" href="../../#l00197">Slic3r::BoundingBox::inflated()</a>, <a class="el" href="../../#l00138">ClipperLib::jtRound</a>, <a class="el" href="../../#l00416">Slic3r::offset()</a>, <a class="el" href="../../#l00595">Slic3r::polygons_simplify()</a>, <a class="el" href="../../#l00449">polygons_strictly_simple</a>, <a class="el" href="../../#l00720">safe_union()</a>, <a class="el" href="../../#l00071">SCALED_EPSILON</a>, <a class="el" href="../../#l00173">tree_supports_show_error()</a>, and <a class="el" href="../../#l00704">Slic3r::union_()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01548">increase_single_area()</a>, and <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>.</p>
<div id="dynsection-80" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-80-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-80-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-80-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a10d42159133e647bd0231c3b574ad951_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-81" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-81-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-81-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-81-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a10d42159133e647bd0231c3b574ad951_icgraph.svg" width="100%" height="473"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a9dfc6d8bd33b63c46bcb69e36154f5da" name="a9dfc6d8bd33b63c46bcb69e36154f5da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dfc6d8bd33b63c46bcb69e36154f5da">&#9670;&#160;</a></span>safe_union()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> Slic3r::FFFTreeSupport::safe_union </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>&#160;</td>
          <td class="paramname"><em>second</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unions two Polygons. Ensures that if the input is non empty that the output also will be non empty. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first[in]</td><td>The first <a class="el" href="../../d8/d90/class_slic3r_1_1_polygon.html">Polygon</a>. </td></tr>
    <tr><td class="paramname">second[in]</td><td>The second <a class="el" href="../../d8/d90/class_slic3r_1_1_polygon.html">Polygon</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The union of both Polygons </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  720</span>                                                                                       {})</div>
<div class="line"><span class="lineno">  721</span>{</div>
<div class="line"><span class="lineno">  722</span>    <span class="comment">// unionPolygons can slowly remove Polygons under certain circumstances, because of rounding issues (Polygons that have a thin area).</span></div>
<div class="line"><span class="lineno">  723</span>    <span class="comment">// This does not cause a problem when actually using it on large areas, but as influence areas (representing centerpoints) can be very thin, this does occur so this ugly workaround is needed</span></div>
<div class="line"><span class="lineno">  724</span>    <span class="comment">// Here is an example of a Polygons object that will loose vertices when unioning, and will be gone after a few times unionPolygons was called:</span></div>
<div class="line"><span class="lineno">  725</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  726</span><span class="comment">    Polygons example;</span></div>
<div class="line"><span class="lineno">  727</span><span class="comment">    Polygon exampleInner;</span></div>
<div class="line"><span class="lineno">  728</span><span class="comment">    exampleInner.add(Point(120410,83599));//A</span></div>
<div class="line"><span class="lineno">  729</span><span class="comment">    exampleInner.add(Point(120384,83643));//B</span></div>
<div class="line"><span class="lineno">  730</span><span class="comment">    exampleInner.add(Point(120399,83618));//C</span></div>
<div class="line"><span class="lineno">  731</span><span class="comment">    exampleInner.add(Point(120414,83591));//D</span></div>
<div class="line"><span class="lineno">  732</span><span class="comment">    exampleInner.add(Point(120423,83570));//E</span></div>
<div class="line"><span class="lineno">  733</span><span class="comment">    exampleInner.add(Point(120419,83580));//F</span></div>
<div class="line"><span class="lineno">  734</span><span class="comment">    example.add(exampleInner);</span></div>
<div class="line"><span class="lineno">  735</span><span class="comment">    for(int i=0;i&lt;10;i++){</span></div>
<div class="line"><span class="lineno">  736</span><span class="comment">         log(&quot;Iteration %d Example area: %f\n&quot;,i,area(example));</span></div>
<div class="line"><span class="lineno">  737</span><span class="comment">         example=example.unionPolygons();</span></div>
<div class="line"><span class="lineno">  738</span><span class="comment">    }</span></div>
<div class="line"><span class="lineno">  739</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> result;</div>
<div class="line"><span class="lineno">  742</span>    <span class="keywordflow">if</span> (! first.empty() || ! second.empty()) {</div>
<div class="line"><span class="lineno">  743</span>        result = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(first, second);</div>
<div class="line"><span class="lineno">  744</span>        <span class="keywordflow">if</span> (result.empty()) {</div>
<div class="line"><span class="lineno">  745</span>            BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;Caught an area destroying union, enlarging areas a bit.&quot;</span>;</div>
<div class="line"><span class="lineno">  746</span>            <span class="comment">// just take the few lines we have, and offset them a tiny bit. Needs to be offsetPolylines, as offset may aleady have problems with the area.</span></div>
<div class="line"><span class="lineno">  747</span>            result = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(offset(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a24e03dece45435264ec1e112e7ae03dc">to_polylines</a>(first), scaled&lt;float&gt;(0.002), jtMiter, 1.2), offset(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a24e03dece45435264ec1e112e7ae03dc">to_polylines</a>(second), scaled&lt;float&gt;(0.002), jtMiter, 1.2));</div>
<div class="line"><span class="lineno">  748</span>        }</div>
<div class="line"><span class="lineno">  749</span>    }</div>
<div class="line"><span class="lineno">  750</span>    </div>
<div class="line"><span class="lineno">  751</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  752</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l02405">create_layer_pathing()</a>, <a class="el" href="../../#l01548">increase_single_area()</a>, <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>, and <a class="el" href="../../#l00763">safe_offset_inc()</a>.</p>
<div id="dynsection-82" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-82-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-82-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-82-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a9dfc6d8bd33b63c46bcb69e36154f5da_icgraph.svg" width="100%" height="474"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a5bd26448acb9c08a9f4fd663da07c11c" name="a5bd26448acb9c08a9f4fd663da07c11c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bd26448acb9c08a9f4fd663da07c11c">&#9670;&#160;</a></span>sample_overhang_area()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::sample_overhang_area </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>overhang_area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool&#160;</td>
          <td class="paramname"><em>large_horizontal_roof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t&#160;</td>
          <td class="paramname"><em>layer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t&#160;</td>
          <td class="paramname"><em>num_support_roof_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&#160;</td>
          <td class="paramname"><em>connect_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html">TreeSupportMeshGroupSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>mesh_group_settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html">RichInterfacePlacer</a> &amp;&#160;</td>
          <td class="paramname"><em>interface_placer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1078</span>{</div>
<div class="line"><span class="lineno"> 1079</span>    <span class="comment">// Assumption is that roof will support roof further up to avoid a lot of unnecessary branches. Each layer down it is checked whether the roof area </span></div>
<div class="line"><span class="lineno"> 1080</span>    <span class="comment">// is still large enough to be a roof and aborted as soon as it is not. This part was already reworked a few times, and there could be an argument </span></div>
<div class="line"><span class="lineno"> 1081</span>    <span class="comment">// made to change it again if there are actual issues encountered regarding supporting roofs.</span></div>
<div class="line"><span class="lineno"> 1082</span>    <span class="comment">// Main problem is that some patterns change each layer, so just calculating points and checking if they are still valid an layer below is not useful, </span></div>
<div class="line"><span class="lineno"> 1083</span>    <span class="comment">// as the pattern may be different one layer below. Same with calculating which points are now no longer being generated as result from </span></div>
<div class="line"><span class="lineno"> 1084</span>    <span class="comment">// a decreasing roof, as there is no guarantee that a line will be above these points. Implementing a separate roof support behavior</span></div>
<div class="line"><span class="lineno"> 1085</span>    <span class="comment">// for each pattern harms maintainability as it very well could be &gt;100 LOC</span></div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keyword">auto</span> generate_roof_lines = [&amp;interface_placer, &amp;mesh_group_settings](<span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;area, <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx) -&gt; <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> {</div>
<div class="line"><span class="lineno"> 1087</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af3db90eed67f0d35149aa2b62a56c618">generate_support_infill_lines</a>(area, interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a8dcae058c1af8be2da701a178a0aa35a">support_parameters</a>, <span class="keyword">true</span>, layer_idx, mesh_group_settings.<a class="code hl_variable" href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html#ac5ee89b3fc701bdd0c4b8d3c8ce5d0b8">support_roof_line_distance</a>);</div>
<div class="line"><span class="lineno"> 1088</span>    };</div>
<div class="line"><span class="lineno"> 1089</span> </div>
<div class="line"><span class="lineno"> 1090</span>    LineInformations        overhang_lines;</div>
<div class="line"><span class="lineno"> 1091</span>    <span class="comment">// Track how many top contact / interface layers were already generated.</span></div>
<div class="line"><span class="lineno"> 1092</span>    <span class="keywordtype">size_t</span>                  dtt_roof             = 0;</div>
<div class="line"><span class="lineno"> 1093</span>    <span class="keywordtype">size_t</span>                  layer_generation_dtt = 0;</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>    <span class="keywordflow">if</span> (large_horizontal_roof) {</div>
<div class="line"><span class="lineno"> 1096</span>        assert(num_support_roof_layers &gt; 0);</div>
<div class="line"><span class="lineno"> 1097</span>        <span class="comment">// Sometimes roofs could be empty as the pattern does not generate lines if the area is narrow enough (i am looking at you, concentric infill).</span></div>
<div class="line"><span class="lineno"> 1098</span>        <span class="comment">// To catch these cases the added roofs are saved to be evaluated later.</span></div>
<div class="line"><span class="lineno"> 1099</span>        std::vector&lt;Polygons&gt;   added_roofs(num_support_roof_layers);</div>
<div class="line"><span class="lineno"> 1100</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a>                last_overhang = overhang_area;</div>
<div class="line"><span class="lineno"> 1101</span>        <span class="keywordflow">for</span> (dtt_roof = 0; dtt_roof &lt; num_support_roof_layers &amp;&amp; layer_idx - dtt_roof &gt;= 1; ++ dtt_roof) {</div>
<div class="line"><span class="lineno"> 1102</span>            <span class="comment">// here the roof is handled. If roof can not be added the branches will try to not move instead</span></div>
<div class="line"><span class="lineno"> 1103</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> forbidden_next;</div>
<div class="line"><span class="lineno"> 1104</span>            {</div>
<div class="line"><span class="lineno"> 1105</span>                <span class="keyword">const</span> <span class="keywordtype">bool</span> min_xy_dist = interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a2e07ec0b2df8f878e998e444d191dbfc">xy_distance</a> &gt; interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a510f0b550289688a5f94753933635aa8">xy_min_distance</a>;</div>
<div class="line"><span class="lineno"> 1106</span>                <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;forbidden_next_raw = interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a85af9d912d44a4a99dc52839cd088c17">support_rests_on_model</a> ?</div>
<div class="line"><span class="lineno"> 1107</span>                    interface_placer.<a class="code hl_variable" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#afe056fc4b1e82ab620f9223fd77c4155">volumes</a>.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#af880ece6544ec2816bc0444aeec378bb">getCollision</a>(interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), layer_idx - (dtt_roof + 1), min_xy_dist) :</div>
<div class="line"><span class="lineno"> 1108</span>                    interface_placer.<a class="code hl_variable" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#afe056fc4b1e82ab620f9223fd77c4155">volumes</a>.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#ac25a22a562e32a0dbbae800969c56f3c">getAvoidance</a>(interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(0), layer_idx - (dtt_roof + 1), TreeModelVolumes::AvoidanceType::Fast, <span class="keyword">false</span>, min_xy_dist);</div>
<div class="line"><span class="lineno"> 1109</span>                <span class="comment">// prevent rounding errors down the line</span></div>
<div class="line"><span class="lineno"> 1110</span>                <span class="comment">//FIXME maybe use SafetyOffset::Yes at the following diff() instead?</span></div>
<div class="line"><span class="lineno"> 1111</span>                forbidden_next = offset(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(forbidden_next_raw), scaled&lt;float&gt;(0.005), jtMiter, 1.2);</div>
<div class="line"><span class="lineno"> 1112</span>            }</div>
<div class="line"><span class="lineno"> 1113</span>            Polygons overhang_area_next = diff(overhang_area, forbidden_next);</div>
<div class="line"><span class="lineno"> 1114</span>            <span class="keywordflow">if</span> (area(overhang_area_next) &lt; mesh_group_settings.<a class="code hl_variable" href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html#aeaf320ae08f6496639bdaac71a55a52e">minimum_roof_area</a>) {</div>
<div class="line"><span class="lineno"> 1115</span>                <span class="comment">// Next layer down the roof area would be to small so we have to insert our roof support here.</span></div>
<div class="line"><span class="lineno"> 1116</span>                <span class="keywordflow">if</span> (dtt_roof &gt; 0) {</div>
<div class="line"><span class="lineno"> 1117</span>                    <span class="keywordtype">size_t</span> dtt_before = dtt_roof - 1;</div>
<div class="line"><span class="lineno"> 1118</span>                    <span class="comment">// Produce support head points supporting an interface layer: First produce the interface lines, then sample them.</span></div>
<div class="line"><span class="lineno"> 1119</span>                    overhang_lines = split_lines(</div>
<div class="line"><span class="lineno"> 1120</span>                        convert_lines_to_internal(interface_placer.<a class="code hl_variable" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#afe056fc4b1e82ab620f9223fd77c4155">volumes</a>, interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>,</div>
<div class="line"><span class="lineno"> 1121</span>                            ensure_maximum_distance_polyline(generate_roof_lines(last_overhang, layer_idx - dtt_before), connect_length, 1), layer_idx - dtt_before),</div>
<div class="line"><span class="lineno"> 1122</span>                        [&amp;interface_placer, layer_idx, dtt_before](<span class="keyword">const</span> std::pair&lt;Point, LineStatus&gt; &amp;p)</div>
<div class="line"><span class="lineno"> 1123</span>                            { <span class="keywordflow">return</span> evaluate_point_for_next_layer_function(interface_placer.<a class="code hl_variable" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#afe056fc4b1e82ab620f9223fd77c4155">volumes</a>, interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>, layer_idx - dtt_before, p); })</div>
<div class="line"><span class="lineno"> 1124</span>                        .first;</div>
<div class="line"><span class="lineno"> 1125</span>                }</div>
<div class="line"><span class="lineno"> 1126</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1127</span>            }</div>
<div class="line"><span class="lineno"> 1128</span>            added_roofs[dtt_roof] = overhang_area;</div>
<div class="line"><span class="lineno"> 1129</span>            last_overhang   = std::move(overhang_area);</div>
<div class="line"><span class="lineno"> 1130</span>            overhang_area = std::move(overhang_area_next);</div>
<div class="line"><span class="lineno"> 1131</span>        }</div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span>        layer_generation_dtt = std::max(dtt_roof, <span class="keywordtype">size_t</span>(1)) - 1; <span class="comment">// 1 inside max and -1 outside to avoid underflow. layer_generation_dtt=dtt_roof-1 if dtt_roof!=0;</span></div>
<div class="line"><span class="lineno"> 1134</span>        <span class="comment">// if the roof should be valid, check that the area does generate lines. This is NOT guaranteed.</span></div>
<div class="line"><span class="lineno"> 1135</span>        <span class="keywordflow">if</span> (overhang_lines.empty() &amp;&amp; dtt_roof != 0 &amp;&amp; generate_roof_lines(overhang_area, layer_idx - layer_generation_dtt).<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">empty</a>())</div>
<div class="line"><span class="lineno"> 1136</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0; idx &lt; dtt_roof; idx++) {</div>
<div class="line"><span class="lineno"> 1137</span>                <span class="comment">// check for every roof area that it has resulting lines. Remember idx 1 means the 2. layer of roof =&gt; higher idx == lower layer</span></div>
<div class="line"><span class="lineno"> 1138</span>                <span class="keywordflow">if</span> (generate_roof_lines(added_roofs[idx], layer_idx - idx).<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aecabe174ebbb0e9cc7be41dafc297ef7">empty</a>()) {</div>
<div class="line"><span class="lineno"> 1139</span>                    dtt_roof = idx;</div>
<div class="line"><span class="lineno"> 1140</span>                    layer_generation_dtt = std::max(dtt_roof, <span class="keywordtype">size_t</span>(1)) - 1;</div>
<div class="line"><span class="lineno"> 1141</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1142</span>                }</div>
<div class="line"><span class="lineno"> 1143</span>            }</div>
<div class="line"><span class="lineno"> 1144</span>        added_roofs.erase(added_roofs.begin() + dtt_roof, added_roofs.end());</div>
<div class="line"><span class="lineno"> 1145</span>        interface_placer.<a class="code hl_function" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a52fe51777e26f8edfc613f17b27431eb">add_roofs</a>(std::move(added_roofs), layer_idx);</div>
<div class="line"><span class="lineno"> 1146</span>    }</div>
<div class="line"><span class="lineno"> 1147</span> </div>
<div class="line"><span class="lineno"> 1148</span>    <span class="keywordflow">if</span> (overhang_lines.empty()) {</div>
<div class="line"><span class="lineno"> 1149</span>        <span class="comment">// support_line_width to form a line here as otherwise most will be unsupported. Technically this violates branch distance, but not only is this the only reasonable choice,</span></div>
<div class="line"><span class="lineno"> 1150</span>        <span class="comment">// but it ensures consistant behaviour as some infill patterns generate each line segment as its own polyline part causing a similar line forming behaviour. </span></div>
<div class="line"><span class="lineno"> 1151</span>        <span class="comment">// This is not doen when a roof is above as the roof will support the model and the trees only need to support the roof</span></div>
<div class="line"><span class="lineno"> 1152</span>        <span class="keywordtype">bool</span> supports_roof   = dtt_roof &gt; 0;</div>
<div class="line"><span class="lineno"> 1153</span>        <span class="keywordtype">bool</span> continuous_tips = ! supports_roof &amp;&amp; large_horizontal_roof;</div>
<div class="line"><span class="lineno"> 1154</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> polylines = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a79f6974d8c9affbf8ae2f7f1963cf22d">ensure_maximum_distance_polyline</a>(</div>
<div class="line"><span class="lineno"> 1155</span>            <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af3db90eed67f0d35149aa2b62a56c618">generate_support_infill_lines</a>(overhang_area, interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a8dcae058c1af8be2da701a178a0aa35a">support_parameters</a>, supports_roof, layer_idx - layer_generation_dtt,</div>
<div class="line"><span class="lineno"> 1156</span>                supports_roof ? mesh_group_settings.<a class="code hl_variable" href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html#ac5ee89b3fc701bdd0c4b8d3c8ce5d0b8">support_roof_line_distance</a> : mesh_group_settings.support_tree_branch_distance),</div>
<div class="line"><span class="lineno"> 1157</span>            continuous_tips ? interface_placer.config.min_radius / 2 : connect_length, 1);</div>
<div class="line"><span class="lineno"> 1158</span>        <span class="keywordtype">size_t</span> point_count = 0;</div>
<div class="line"><span class="lineno"> 1159</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> Polyline &amp;poly : polylines)</div>
<div class="line"><span class="lineno"> 1160</span>            point_count += poly.<a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">size</a>();</div>
<div class="line"><span class="lineno"> 1161</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> min_support_points = std::max(<a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(1), std::min(<a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(3), <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7ac56f33c19efe05868245ad6bc80109">total_length</a>(overhang_area) / connect_length)));</div>
<div class="line"><span class="lineno"> 1162</span>        <span class="keywordflow">if</span> (point_count &lt;= min_support_points) {</div>
<div class="line"><span class="lineno"> 1163</span>            <span class="comment">// add the outer wall (of the overhang) to ensure it is correct supported instead. Try placing the support points in a way that they fully support the outer wall, instead of just the with half of the the support line width.</span></div>
<div class="line"><span class="lineno"> 1164</span>            <span class="comment">// I assume that even small overhangs are over one line width wide, so lets try to place the support points in a way that the full support area generated from them </span></div>
<div class="line"><span class="lineno"> 1165</span>            <span class="comment">// will support the overhang (if this is not done it may only be half). This WILL NOT be the case when supporting an angle of about &lt; 60 so there is a fallback, </span></div>
<div class="line"><span class="lineno"> 1166</span>            <span class="comment">// as some support is better than none.</span></div>
<div class="line"><span class="lineno"> 1167</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> reduced_overhang_area = <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(overhang_area), - interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a> / 2.2, jtMiter, 1.2);</div>
<div class="line"><span class="lineno"> 1168</span>            polylines = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a79f6974d8c9affbf8ae2f7f1963cf22d">ensure_maximum_distance_polyline</a>(</div>
<div class="line"><span class="lineno"> 1169</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a24e03dece45435264ec1e112e7ae03dc">to_polylines</a>(</div>
<div class="line"><span class="lineno"> 1170</span>                    ! reduced_overhang_area.empty() &amp;&amp;</div>
<div class="line"><span class="lineno"> 1171</span>                        <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2b1bfe9b50e13403d42de533b8a19916">diff_ex</a>(overhang_area, reduced_overhang_area), std::max(interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a>, connect_length), jtMiter, 1.2)) &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(scaled&lt;double&gt;(0.001)) ?</div>
<div class="line"><span class="lineno"> 1172</span>                    reduced_overhang_area :</div>
<div class="line"><span class="lineno"> 1173</span>                    overhang_area),</div>
<div class="line"><span class="lineno"> 1174</span>                connect_length, min_support_points);</div>
<div class="line"><span class="lineno"> 1175</span>        }</div>
<div class="line"><span class="lineno"> 1176</span>        overhang_lines = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab438824023a3a935e925a285dff2d154">convert_lines_to_internal</a>(interface_placer.<a class="code hl_variable" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#afe056fc4b1e82ab620f9223fd77c4155">volumes</a>, interface_placer.<a class="code hl_variable" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">config</a>, polylines, layer_idx - dtt_roof);</div>
<div class="line"><span class="lineno"> 1177</span>    }</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>    assert(dtt_roof &lt;= layer_idx);</div>
<div class="line"><span class="lineno"> 1180</span>    <span class="keywordflow">if</span> (dtt_roof &gt;= layer_idx &amp;&amp; large_horizontal_roof)</div>
<div class="line"><span class="lineno"> 1181</span>        <span class="comment">// Reached buildplate when generating contact, interface and base interface layers.</span></div>
<div class="line"><span class="lineno"> 1182</span>        interface_placer.<a class="code hl_function" href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a992268c55249a67274f94a81d100efc1">add_roof_build_plate</a>(std::move(overhang_area), dtt_roof);</div>
<div class="line"><span class="lineno"> 1183</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1184</span>        <span class="comment">// normal trees have to be generated</span></div>
<div class="line"><span class="lineno"> 1185</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> roof_enabled = num_support_roof_layers &gt; 0;</div>
<div class="line"><span class="lineno"> 1186</span>        interface_placer.<a class="code hl_function" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#a5cf51f0d9f9a04742a0179ed24433c9a">add_points_along_lines</a>(</div>
<div class="line"><span class="lineno"> 1187</span>            <span class="comment">// Sample along these lines</span></div>
<div class="line"><span class="lineno"> 1188</span>            overhang_lines,</div>
<div class="line"><span class="lineno"> 1189</span>            <span class="comment">// First layer index to insert the tree tips or interfaces.</span></div>
<div class="line"><span class="lineno"> 1190</span>            layer_idx - dtt_roof,</div>
<div class="line"><span class="lineno"> 1191</span>            <span class="comment">// Remaining roof tip layers.</span></div>
<div class="line"><span class="lineno"> 1192</span>            interface_placer.<a class="code hl_variable" href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#a8e68b9afeba2684ffe5d6a71b065cbe0">force_tip_to_roof</a> ? num_support_roof_layers - dtt_roof : 0,</div>
<div class="line"><span class="lineno"> 1193</span>            <span class="comment">// Supports roof already? How many roof layers were already produced above these tips?</span></div>
<div class="line"><span class="lineno"> 1194</span>            dtt_roof,</div>
<div class="line"><span class="lineno"> 1195</span>            <span class="comment">// Don&#39;t move until the following distance to top is reached.</span></div>
<div class="line"><span class="lineno"> 1196</span>            roof_enabled ? num_support_roof_layers - dtt_roof : 0);</div>
<div class="line"><span class="lineno"> 1197</span>    }</div>
<div class="line"><span class="lineno"> 1198</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer_html_a52fe51777e26f8edfc613f17b27431eb"><div class="ttname"><a href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a52fe51777e26f8edfc613f17b27431eb">Slic3r::FFFTreeSupport::InterfacePlacer::add_roofs</a></div><div class="ttdeci">void add_roofs(std::vector&lt; Polygons &gt; &amp;&amp;new_roofs, const size_t insert_layer_idx)</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:538</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer_html_a689ff969879ce2d1459929f4e760e2e5"><div class="ttname"><a href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a689ff969879ce2d1459929f4e760e2e5">Slic3r::FFFTreeSupport::InterfacePlacer::config</a></div><div class="ttdeci">const TreeSupportSettings &amp; config</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:533</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer_html_a992268c55249a67274f94a81d100efc1"><div class="ttname"><a href="../../db/d36/class_slic3r_1_1_f_f_f_tree_support_1_1_interface_placer.html#a992268c55249a67274f94a81d100efc1">Slic3r::FFFTreeSupport::InterfacePlacer::add_roof_build_plate</a></div><div class="ttdeci">void add_roof_build_plate(Polygons &amp;&amp;overhang_areas, size_t dtt_roof)</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:555</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer_html_a5cf51f0d9f9a04742a0179ed24433c9a"><div class="ttname"><a href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#a5cf51f0d9f9a04742a0179ed24433c9a">Slic3r::FFFTreeSupport::RichInterfacePlacer::add_points_along_lines</a></div><div class="ttdeci">void add_points_along_lines(LineInformations lines, LayerIndex insert_layer_idx, size_t roof_tip_layers, size_t supports_roof_layers, size_t dont_move_until)</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:844</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer_html_a8e68b9afeba2684ffe5d6a71b065cbe0"><div class="ttname"><a href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#a8e68b9afeba2684ffe5d6a71b065cbe0">Slic3r::FFFTreeSupport::RichInterfacePlacer::force_tip_to_roof</a></div><div class="ttdeci">const bool force_tip_to_roof</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:839</div></div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer_html_afe056fc4b1e82ab620f9223fd77c4155"><div class="ttname"><a href="../../d9/d4e/class_slic3r_1_1_f_f_f_tree_support_1_1_rich_interface_placer.html#afe056fc4b1e82ab620f9223fd77c4155">Slic3r::FFFTreeSupport::RichInterfacePlacer::volumes</a></div><div class="ttdeci">const TreeModelVolumes &amp; volumes</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:837</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a79f6974d8c9affbf8ae2f7f1963cf22d"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a79f6974d8c9affbf8ae2f7f1963cf22d">Slic3r::FFFTreeSupport::ensure_maximum_distance_polyline</a></div><div class="ttdeci">static Polylines ensure_maximum_distance_polyline(const Polylines &amp;input, double distance, size_t min_points)</div><div class="ttdoc">Eensures that every line segment is about distance in length. The resulting lines may differ from the...</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:524</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab438824023a3a935e925a285dff2d154"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab438824023a3a935e925a285dff2d154">Slic3r::FFFTreeSupport::convert_lines_to_internal</a></div><div class="ttdeci">static LineInformations convert_lines_to_internal(const TreeModelVolumes &amp;volumes, const TreeSupportSettings &amp;config, const Polylines &amp;polylines, LayerIndex layer_idx)</div><div class="ttdoc">Converts a Polygons object representing a line into the internal format.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:354</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_af3db90eed67f0d35149aa2b62a56c618"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af3db90eed67f0d35149aa2b62a56c618">Slic3r::FFFTreeSupport::generate_support_infill_lines</a></div><div class="ttdeci">static Polylines generate_support_infill_lines(const Polygons &amp;polygon, const SupportParameters &amp;support_params, bool roof, LayerIndex layer_idx, coord_t support_infill_distance)</div><div class="ttdoc">Returns Polylines representing the (infill) lines that will result in slicing the given area.</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:628</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2b1bfe9b50e13403d42de533b8a19916"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2b1bfe9b50e13403d42de533b8a19916">Slic3r::diff_ex</a></div><div class="ttdeci">Slic3r::ExPolygons diff_ex(const Slic3r::Polygons &amp;subject, const Slic3r::Polygons &amp;clip, ApplySafetyOffset do_safety_offset)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:726</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7ac56f33c19efe05868245ad6bc80109"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7ac56f33c19efe05868245ad6bc80109">Slic3r::total_length</a></div><div class="ttdeci">double total_length(const Polygons &amp;polylines)</div><div class="ttdef"><b>Definition</b> Polygon.hpp:112</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings_html_ac5ee89b3fc701bdd0c4b8d3c8ce5d0b8"><div class="ttname"><a href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html#ac5ee89b3fc701bdd0c4b8d3c8ce5d0b8">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::support_roof_line_distance</a></div><div class="ttdeci">coord_t support_roof_line_distance</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:132</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings_html_aeaf320ae08f6496639bdaac71a55a52e"><div class="ttname"><a href="../../da/d67/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_mesh_group_settings.html#aeaf320ae08f6496639bdaac71a55a52e">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::minimum_roof_area</a></div><div class="ttdeci">double minimum_roof_area</div><div class="ttdef"><b>Definition</b> TreeSupportCommon.hpp:107</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00844">Slic3r::FFFTreeSupport::RichInterfacePlacer::add_points_along_lines()</a>, <a class="el" href="../../#l00555">Slic3r::FFFTreeSupport::InterfacePlacer::add_roof_build_plate()</a>, <a class="el" href="../../#l00538">Slic3r::FFFTreeSupport::InterfacePlacer::add_roofs()</a>, <a class="el" href="../../#l00467">Slic3r::area()</a>, <a class="el" href="../../#l00533">Slic3r::FFFTreeSupport::InterfacePlacer::config</a>, <a class="el" href="../../#l00354">convert_lines_to_internal()</a>, <a class="el" href="../../#l00672">Slic3r::diff()</a>, <a class="el" href="../../#l00726">Slic3r::diff_ex()</a>, <a class="el" href="../../#l00229">Slic3r::empty()</a>, <a class="el" href="../../#l00524">ensure_maximum_distance_polyline()</a>, <a class="el" href="../../#l00417">evaluate_point_for_next_layer_function()</a>, <a class="el" href="../../#l00839">Slic3r::FFFTreeSupport::RichInterfacePlacer::force_tip_to_roof</a>, <a class="el" href="../../#l00628">generate_support_infill_lines()</a>, <a class="el" href="../../#l00327">Slic3r::FFFTreeSupport::TreeModelVolumes::getAvoidance()</a>, <a class="el" href="../../#l00291">Slic3r::FFFTreeSupport::TreeModelVolumes::getCollision()</a>, <a class="el" href="../../#l00403">Slic3r::FFFTreeSupport::TreeSupportSettings::getRadius()</a>, <a class="el" href="../../#l00232">Slic3r::FFFTreeSupport::TreeSupportSettings::min_radius</a>, <a class="el" href="../../#l00107">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::minimum_roof_area</a>, <a class="el" href="../../#l00416">Slic3r::offset()</a>, <a class="el" href="../../#l01062">sample_overhang_area()</a>, <a class="el" href="../../#l00442">split_lines()</a>, <a class="el" href="../../#l00258">Slic3r::sqr()</a>, <a class="el" href="../../#l00220">Slic3r::FFFTreeSupport::TreeSupportSettings::support_line_width</a>, <a class="el" href="../../#l00532">Slic3r::FFFTreeSupport::InterfacePlacer::support_parameters</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::TreeSupportSettings::support_rests_on_model</a>, <a class="el" href="../../#l00132">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::support_roof_line_distance</a>, <a class="el" href="../../#l00159">Slic3r::FFFTreeSupport::TreeSupportMeshGroupSettings::support_tree_branch_distance</a>, <a class="el" href="../../#l00209">Slic3r::to_polylines()</a>, <a class="el" href="../../#l00112">Slic3r::total_length()</a>, <a class="el" href="../../#l00774">Slic3r::union_ex()</a>, <a class="el" href="../../#l00837">Slic3r::FFFTreeSupport::RichInterfacePlacer::volumes</a>, <a class="el" href="../../#l00276">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_distance</a>, and <a class="el" href="../../#l00293">Slic3r::FFFTreeSupport::TreeSupportSettings::xy_min_distance</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01062">sample_overhang_area()</a>.</p>
<div id="dynsection-83" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-83-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-83-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-83-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5bd26448acb9c08a9f4fd663da07c11c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-84" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-84-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-84-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-84-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5bd26448acb9c08a9f4fd663da07c11c_icgraph.svg" width="175" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5d3a0c486b78654286cf3541d8a6b5d6" name="a5d3a0c486b78654286cf3541d8a6b5d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d3a0c486b78654286cf3541d8a6b5d6">&#9670;&#160;</a></span>set_points_on_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::set_points_on_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;&#160;</td>
          <td class="paramname"><em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> *&#160;</td>
          <td class="paramname"><em>layer_above</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the result_on_layer for all parents based on the <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> supplied. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elem[in]</td><td>The SupportElements, which parent's position should be determined. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 2509</span>{</div>
<div class="line"><span class="lineno"> 2510</span>    assert(!elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a13584fffa7f42554d73b5fea9037fb6f">deleted</a>);</div>
<div class="line"><span class="lineno"> 2511</span>    assert(layer_above != <span class="keyword">nullptr</span> || elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.empty());</div>
<div class="line"><span class="lineno"> 2512</span> </div>
<div class="line"><span class="lineno"> 2513</span>    <span class="comment">// Based on the branch center point of the current layer, the point on the next (further up) layer is calculated.</span></div>
<div class="line"><span class="lineno"> 2514</span>    <span class="keywordflow">if</span> (! elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_function" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#adae870488e645e1ddac5ef8b2fe0f861">result_on_layer_is_set</a>()) {</div>
<div class="line"><span class="lineno"> 2515</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Uninitialized support element&quot;</span>;</div>
<div class="line"><span class="lineno"> 2516</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5b7e3aa2dbc67c812bcd72802a8e7734">tree_supports_show_error</a>(<span class="stringliteral">&quot;Uninitialized support element. A branch may be missing.\n&quot;</span>sv, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2517</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2518</span>    }</div>
<div class="line"><span class="lineno"> 2519</span> </div>
<div class="line"><span class="lineno"> 2520</span>    <span class="keywordflow">if</span> (layer_above)</div>
<div class="line"><span class="lineno"> 2521</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> next_elem_idx : elem.parents) {</div>
<div class="line"><span class="lineno"> 2522</span>            assert(next_elem_idx &gt;= 0);</div>
<div class="line"><span class="lineno"> 2523</span>            SupportElement &amp;next_elem = (*layer_above)[next_elem_idx];</div>
<div class="line"><span class="lineno"> 2524</span>            assert(! next_elem.state.deleted);</div>
<div class="line"><span class="lineno"> 2525</span>            <span class="comment">// if the value was set somewhere else it it kept. This happens when a branch tries not to move after being unable to create a roof.</span></div>
<div class="line"><span class="lineno"> 2526</span>            <span class="keywordflow">if</span> (! next_elem.state.result_on_layer_is_set()) {</div>
<div class="line"><span class="lineno"> 2527</span>                <span class="comment">// Move inside has edgecases (see tests) so DONT use Polygons.inside to confirm correct move, Error with distance 0 is &lt;= 1</span></div>
<div class="line"><span class="lineno"> 2528</span>                <span class="comment">// it is not required to check if how far this move moved a point as is can be larger than maximum_movement_distance. </span></div>
<div class="line"><span class="lineno"> 2529</span>                <span class="comment">// While this seems like a problem it may for example occur after merges.</span></div>
<div class="line"><span class="lineno"> 2530</span>                next_elem.state.result_on_layer = move_inside_if_outside(next_elem.influence_area, elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a>);</div>
<div class="line"><span class="lineno"> 2531</span>                <span class="comment">// do not call recursive because then amount of layers would be restricted by the stack size</span></div>
<div class="line"><span class="lineno"> 2532</span>            }</div>
<div class="line"><span class="lineno"> 2533</span>            <span class="comment">// Mark the parent element as accessed from a valid child element.</span></div>
<div class="line"><span class="lineno"> 2534</span>            next_elem.state.marked = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2535</span>        }</div>
<div class="line"><span class="lineno"> 2536</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00134">Slic3r::FFFTreeSupport::SupportElementStateBits::deleted</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00278">Slic3r::FFFTreeSupport::SupportElement::influence_area</a>, <a class="el" href="../../#l00137">Slic3r::FFFTreeSupport::SupportElementStateBits::marked</a>, <a class="el" href="../../#l01521">move_inside_if_outside()</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::SupportElement::parents</a>, <a class="el" href="../../#l00176">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer</a>, <a class="el" href="../../#l00177">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer_is_set()</a>, <a class="el" href="../../#l02508">set_points_on_areas()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, and <a class="el" href="../../#l00173">tree_supports_show_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02647">create_nodes_from_area()</a>, and <a class="el" href="../../#l02508">set_points_on_areas()</a>.</p>
<div id="dynsection-85" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-85-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-85-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-85-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5d3a0c486b78654286cf3541d8a6b5d6_cgraph.svg" width="100%" height="471"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-86" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-86-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-86-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-86-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5d3a0c486b78654286cf3541d8a6b5d6_icgraph.svg" width="606" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af51f5b21f6617dd3d6c57468be988ff8" name="af51f5b21f6617dd3d6c57468be988ff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af51f5b21f6617dd3d6c57468be988ff8">&#9670;&#160;</a></span>set_to_model_contact_simple()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::set_to_model_contact_simple </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;&#160;</td>
          <td class="paramname"><em>elem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2539</span>{</div>
<div class="line"><span class="lineno"> 2540</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> best = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a4cea5675bfa8ad2c71fcd7c1785690fe">move_inside_if_outside</a>(elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ab91ca9359c684859675f7f26e6d3cd01">influence_area</a>, elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a6f81fb417dff6c1b1d7527d62b312449">next_position</a>);</div>
<div class="line"><span class="lineno"> 2541</span>    elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a> = best;</div>
<div class="line"><span class="lineno"> 2542</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;Added NON gracious Support On Model Point (&quot;</span> &lt;&lt; best.x() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; best.y() &lt;&lt; <span class="stringliteral">&quot;). The current layer is &quot;</span> &lt;&lt; elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>;</div>
<div class="line"><span class="lineno"> 2543</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00278">Slic3r::FFFTreeSupport::SupportElement::influence_area</a>, <a class="el" href="../../#l00160">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a>, <a class="el" href="../../#l01521">move_inside_if_outside()</a>, <a class="el" href="../../#l00155">Slic3r::FFFTreeSupport::SupportElementState::next_position</a>, <a class="el" href="../../#l00176">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer</a>, <a class="el" href="../../#l02538">set_to_model_contact_simple()</a>, and <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02647">create_nodes_from_area()</a>, <a class="el" href="../../#l02538">set_to_model_contact_simple()</a>, and <a class="el" href="../../#l02552">set_to_model_contact_to_model_gracious()</a>.</p>
<div id="dynsection-87" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-87-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-87-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-87-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af51f5b21f6617dd3d6c57468be988ff8_cgraph.svg" width="100%" height="418"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-88" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-88-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-88-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-88-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af51f5b21f6617dd3d6c57468be988ff8_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ae933bab23a01546925f47e2403e6c198" name="ae933bab23a01546925f47e2403e6c198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae933bab23a01546925f47e2403e6c198">&#9670;&#160;</a></span>set_to_model_contact_to_model_gracious()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::set_to_model_contact_to_model_gracious </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html">TreeModelVolumes</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;&#160;</td>
          <td class="paramname"><em>first_elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the best point to connect to the model and set the result_on_layer of the relevant <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> accordingly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">move_bounds[in,out]</td><td>All currently existing influence areas </td></tr>
    <tr><td class="paramname">first_elem[in,out]</td><td><a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> that did not have its result_on_layer set meaning that it does not have a child element. </td></tr>
    <tr><td class="paramname">layer_idx[in]</td><td>The current layer. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 2558</span>{</div>
<div class="line"><span class="lineno"> 2559</span>    <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *last_successfull_layer = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2560</span> </div>
<div class="line"><span class="lineno"> 2561</span>    <span class="comment">// check for every layer upwards, up to the point where this influence area was created (either by initial insert or merge) if the branch could be placed on it, and highest up layer index.</span></div>
<div class="line"><span class="lineno"> 2562</span>    {</div>
<div class="line"><span class="lineno"> 2563</span>        <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> *elem = &amp;first_elem;</div>
<div class="line"><span class="lineno"> 2564</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_check = elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>;</div>
<div class="line"><span class="lineno"> 2565</span>            ! <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">intersection</a>(elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ab91ca9359c684859675f7f26e6d3cd01">influence_area</a>, volumes.<a class="code hl_function" href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a4009d3da8dedb156a3924e639aced26a">getPlaceableAreas</a>(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>), layer_check, throw_on_cancel)).empty();</div>
<div class="line"><span class="lineno"> 2566</span>            elem = &amp;move_bounds[++ layer_check][elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.front()]) {</div>
<div class="line"><span class="lineno"> 2567</span>            assert(elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a> == layer_check);</div>
<div class="line"><span class="lineno"> 2568</span>            assert(! elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a13584fffa7f42554d73b5fea9037fb6f">deleted</a>);</div>
<div class="line"><span class="lineno"> 2569</span>            assert(elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ac6a36d011e98b3c92ca37790a97abb6b">to_model_gracious</a>);</div>
<div class="line"><span class="lineno"> 2570</span>            last_successfull_layer = elem;</div>
<div class="line"><span class="lineno"> 2571</span>            <span class="keywordflow">if</span> (elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.size() != 1)</div>
<div class="line"><span class="lineno"> 2572</span>                <span class="comment">// Reached merge point.</span></div>
<div class="line"><span class="lineno"> 2573</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2574</span>        }</div>
<div class="line"><span class="lineno"> 2575</span>    }</div>
<div class="line"><span class="lineno"> 2576</span> </div>
<div class="line"><span class="lineno"> 2577</span>    <span class="comment">// Could not find valid placement, even though it should exist =&gt; error handling</span></div>
<div class="line"><span class="lineno"> 2578</span>    <span class="keywordflow">if</span> (last_successfull_layer == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2579</span>        BOOST_LOG_TRIVIAL(warning) &lt;&lt; <span class="stringliteral">&quot;No valid placement found for to model gracious element on layer &quot;</span> &lt;&lt; first_elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>;</div>
<div class="line"><span class="lineno"> 2580</span>        tree_supports_show_error(<span class="stringliteral">&quot;Could not fine valid placement on model! Just placing it down anyway. Could cause floating branches.&quot;</span>sv, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2581</span>        first_elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#ac6a36d011e98b3c92ca37790a97abb6b">to_model_gracious</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2582</span>        set_to_model_contact_simple(first_elem);</div>
<div class="line"><span class="lineno"> 2583</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2584</span>        <span class="comment">// Found a gracious area above first_elem. Remove all below last_successfull_layer.</span></div>
<div class="line"><span class="lineno"> 2585</span>        {</div>
<div class="line"><span class="lineno"> 2586</span>            <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> parent_layer_idx = first_elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>;</div>
<div class="line"><span class="lineno"> 2587</span>            <span class="keywordflow">for</span> (SupportElement *elem = &amp;first_elem; elem != last_successfull_layer; elem = &amp;move_bounds[++ parent_layer_idx][elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#a43c1cbbb46c9c01e48a71e9cba0d24df">parents</a>.front()]) {</div>
<div class="line"><span class="lineno"> 2588</span>                assert(! elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a13584fffa7f42554d73b5fea9037fb6f">deleted</a>);</div>
<div class="line"><span class="lineno"> 2589</span>                elem-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../dc/d89/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_bits.html#a13584fffa7f42554d73b5fea9037fb6f">deleted</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2590</span>            }</div>
<div class="line"><span class="lineno"> 2591</span>        }</div>
<div class="line"><span class="lineno"> 2592</span>        <span class="comment">// Guess a point inside the influence area, in which the branch will be placed in.</span></div>
<div class="line"><span class="lineno"> 2593</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> best = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a4cea5675bfa8ad2c71fcd7c1785690fe">move_inside_if_outside</a>(last_successfull_layer-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ab91ca9359c684859675f7f26e6d3cd01">influence_area</a>, last_successfull_layer-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a6f81fb417dff6c1b1d7527d62b312449">next_position</a>);</div>
<div class="line"><span class="lineno"> 2594</span>        last_successfull_layer-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a> = best;</div>
<div class="line"><span class="lineno"> 2595</span>        BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;Added gracious Support On Model Point (&quot;</span> &lt;&lt; best.x() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; best.y() &lt;&lt; <span class="stringliteral">&quot;). The current layer is &quot;</span> &lt;&lt; last_successfull_layer;</div>
<div class="line"><span class="lineno"> 2596</span>    }</div>
<div class="line"><span class="lineno"> 2597</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes_html_a4009d3da8dedb156a3924e639aced26a"><div class="ttname"><a href="../../d6/d18/class_slic3r_1_1_f_f_f_tree_support_1_1_tree_model_volumes.html#a4009d3da8dedb156a3924e639aced26a">Slic3r::FFFTreeSupport::TreeModelVolumes::getPlaceableAreas</a></div><div class="ttdeci">const Polygons &amp; getPlaceableAreas(coord_t radius, LayerIndex layer_idx, std::function&lt; void()&gt; throw_on_cancel) const</div><div class="ttdoc">Provides the area represents all areas on the model where the branch does completely fit on the given...</div><div class="ttdef"><b>Definition</b> TreeModelVolumes.cpp:356</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00134">Slic3r::FFFTreeSupport::SupportElementStateBits::deleted</a>, <a class="el" href="../../#l00356">Slic3r::FFFTreeSupport::TreeModelVolumes::getPlaceableAreas()</a>, <a class="el" href="../../#l00278">Slic3r::FFFTreeSupport::SupportElement::influence_area</a>, <a class="el" href="../../#l00686">Slic3r::intersection()</a>, <a class="el" href="../../#l00160">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a>, <a class="el" href="../../#l01521">move_inside_if_outside()</a>, <a class="el" href="../../#l00155">Slic3r::FFFTreeSupport::SupportElementState::next_position</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::SupportElement::parents</a>, <a class="el" href="../../#l00176">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer</a>, <a class="el" href="../../#l02538">set_to_model_contact_simple()</a>, <a class="el" href="../../#l02552">set_to_model_contact_to_model_gracious()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, <a class="el" href="../../#l00246">support_element_collision_radius()</a>, <a class="el" href="../../#l00105">Slic3r::FFFTreeSupport::SupportElementStateBits::to_model_gracious</a>, and <a class="el" href="../../#l00173">tree_supports_show_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02647">create_nodes_from_area()</a>, and <a class="el" href="../../#l02552">set_to_model_contact_to_model_gracious()</a>.</p>
<div id="dynsection-89" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-89-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-89-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-89-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ae933bab23a01546925f47e2403e6c198_cgraph.svg" width="100%" height="592"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-90" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-90-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-90-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-90-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ae933bab23a01546925f47e2403e6c198_icgraph.svg" width="606" height="91"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac967237dc3f772e90e6ec13a5aaffdb1" name="ac967237dc3f772e90e6ec13a5aaffdb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac967237dc3f772e90e6ec13a5aaffdb1">&#9670;&#160;</a></span>smooth_branch_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::smooth_branch_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">DrawArea</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>linear_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>linear_data_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;&#160;</td>
          <td class="paramname"><em>throw_on_cancel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies some smoothing to the outer wall, intended to smooth out sudden jumps as they can happen when a branch moves though a hole. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer_tree_polygons[in,out]</td><td>Resulting branch areas with the layerindex they appear on. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 2919</span>{</div>
<div class="line"><span class="lineno"> 2920</span><span class="preprocessor">#ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 2921</span>    <span class="keywordtype">double</span> progress_total = TREE_PROGRESS_PRECALC_AVO + TREE_PROGRESS_PRECALC_COLL + TREE_PROGRESS_GENERATE_NODES + TREE_PROGRESS_AREA_CALC + TREE_PROGRESS_GENERATE_BRANCH_AREAS;</div>
<div class="line"><span class="lineno"> 2922</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 2923</span> </div>
<div class="line"><span class="lineno"> 2924</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> max_radius_change_per_layer = 1 + config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#ac8307cf32d0d6f362e1c34eb7753b74d">support_line_width</a> / 2; <span class="comment">// this is the upper limit a radius may change per layer. +1 to avoid rounding errors</span></div>
<div class="line"><span class="lineno"> 2925</span> </div>
<div class="line"><span class="lineno"> 2926</span>    <span class="comment">// smooth upwards</span></div>
<div class="line"><span class="lineno"> 2927</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a> layer_idx = 0; layer_idx &lt; <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a493a7de86471c664147a099ee5585609">LayerIndex</a>(move_bounds.size()) - 1; ++ layer_idx) {</div>
<div class="line"><span class="lineno"> 2928</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> processing_base       = linear_data_layers[layer_idx];</div>
<div class="line"><span class="lineno"> 2929</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> processing_base_above = linear_data_layers[layer_idx + 1];</div>
<div class="line"><span class="lineno"> 2930</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;layer_above = move_bounds[layer_idx + 1];</div>
<div class="line"><span class="lineno"> 2931</span>        tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, processing_base_above - processing_base),</div>
<div class="line"><span class="lineno"> 2932</span>            [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 2933</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> processing_idx = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.begin(); processing_idx &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.end(); ++ processing_idx) {</div>
<div class="line"><span class="lineno"> 2934</span>                <a class="code hl_struct" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">DrawArea</a> &amp;draw_area               = linear_data[processing_base + processing_idx];</div>
<div class="line"><span class="lineno"> 2935</span>                assert(draw_area.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a58fe1cd67095d966b228c89aef5010">element</a>-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a> == layer_idx);</div>
<div class="line"><span class="lineno"> 2936</span>                <span class="keywordtype">double</span>    max_outer_wall_distance = 0;</div>
<div class="line"><span class="lineno"> 2937</span>                <span class="keywordtype">bool</span>      do_something            = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2938</span>                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> parent_idx : draw_area.element-&gt;parents) {</div>
<div class="line"><span class="lineno"> 2939</span>                    <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;parent = layer_above[parent_idx];</div>
<div class="line"><span class="lineno"> 2940</span>                    assert(parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a> == layer_idx + 1);</div>
<div class="line"><span class="lineno"> 2941</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, parent) != <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, parent)) {</div>
<div class="line"><span class="lineno"> 2942</span>                        do_something = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2943</span>                        max_outer_wall_distance = std::max(max_outer_wall_distance, </div>
<div class="line"><span class="lineno"> 2944</span>                            (draw_area.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a58fe1cd67095d966b228c89aef5010">element</a>-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a> - parent.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a>).cast&lt;<span class="keywordtype">double</span>&gt;().norm() - (<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, *draw_area.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a58fe1cd67095d966b228c89aef5010">element</a>) - <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, parent)));</div>
<div class="line"><span class="lineno"> 2945</span>                    }</div>
<div class="line"><span class="lineno"> 2946</span>                }</div>
<div class="line"><span class="lineno"> 2947</span>                max_outer_wall_distance += max_radius_change_per_layer; <span class="comment">// As this change is a bit larger than what usually appears, lost radius can be slowly reclaimed over the layers.</span></div>
<div class="line"><span class="lineno"> 2948</span>                <span class="keywordflow">if</span> (do_something) {</div>
<div class="line"><span class="lineno"> 2949</span>                    assert(<a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(draw_area.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0bb0aa9daea609cbe44301a2ed6cb220">polygons</a>, draw_area.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a58fe1cd67095d966b228c89aef5010">element</a>-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a>));</div>
<div class="line"><span class="lineno"> 2950</span>                    Polygons max_allowed_area = offset(draw_area.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0bb0aa9daea609cbe44301a2ed6cb220">polygons</a>, <span class="keywordtype">float</span>(max_outer_wall_distance), jtMiter, 1.2);</div>
<div class="line"><span class="lineno"> 2951</span>                    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> parent_idx : draw_area.element-&gt;parents) {</div>
<div class="line"><span class="lineno"> 2952</span>                        <span class="keyword">const</span> SupportElement &amp;parent = layer_above[parent_idx];</div>
<div class="line"><span class="lineno"> 2953</span><span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><span class="lineno"> 2954</span>                        assert(parent.state.layer_idx == layer_idx + 1);</div>
<div class="line"><span class="lineno"> 2955</span>                        assert(<a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(linear_data[processing_base_above + parent_idx].polygons, parent.state.result_on_layer));</div>
<div class="line"><span class="lineno"> 2956</span>                        <span class="keywordtype">double</span> radius_increase = support_element_radius(config, *draw_area.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a58fe1cd67095d966b228c89aef5010">element</a>) - support_element_radius(config, parent);</div>
<div class="line"><span class="lineno"> 2957</span>                        assert(radius_increase &gt;= 0);</div>
<div class="line"><span class="lineno"> 2958</span>                        <span class="keywordtype">double</span> shift = (draw_area.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a58fe1cd67095d966b228c89aef5010">element</a>-&gt;<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a> - parent.state.result_on_layer).cast&lt;double&gt;().norm();</div>
<div class="line"><span class="lineno"> 2959</span>                        assert(shift &lt; radius_increase + 2. * config.<a class="code hl_variable" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a52f7f214759712af60e5c3cd5bf38286">maximum_move_distance_slow</a>);</div>
<div class="line"><span class="lineno"> 2960</span><span class="preprocessor">#endif </span><span class="comment">// NDEBUG</span></div>
<div class="line"><span class="lineno"> 2961</span>                        <span class="keywordflow">if</span> (support_element_radius(config, parent) != support_element_collision_radius(config, parent)) {</div>
<div class="line"><span class="lineno"> 2962</span>                            <span class="comment">// No other element on this layer than the current one may be connected to &amp;parent,</span></div>
<div class="line"><span class="lineno"> 2963</span>                            <span class="comment">// thus it is safe to update parent&#39;s DrawArea directly.</span></div>
<div class="line"><span class="lineno"> 2964</span>                            Polygons &amp;dst = linear_data[processing_base_above + parent_idx].polygons;</div>
<div class="line"><span class="lineno"> 2965</span><span class="comment">//                            Polygons orig = dst;</span></div>
<div class="line"><span class="lineno"> 2966</span>                            <span class="keywordflow">if</span> (! dst.empty()) {</div>
<div class="line"><span class="lineno"> 2967</span>                                dst = intersection(dst, max_allowed_area);</div>
<div class="line"><span class="lineno"> 2968</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 2969</span>                                <span class="keywordflow">if</span> (dst.empty()) {</div>
<div class="line"><span class="lineno"> 2970</span>                                    <span class="keyword">static</span> <span class="keywordtype">int</span> irun = 0;</div>
<div class="line"><span class="lineno"> 2971</span>                                    SVG::export_expolygons(debug_out_path(<span class="stringliteral">&quot;treesupport-extrude_areas-smooth-error-%d.svg&quot;</span>, irun ++),</div>
<div class="line"><span class="lineno"> 2972</span>                                        { { { union_ex(max_allowed_area) },   { <span class="stringliteral">&quot;max_allowed_area&quot;</span>, <span class="stringliteral">&quot;yellow&quot;</span>, 0.5f } },</div>
<div class="line"><span class="lineno"> 2973</span>                                          { { <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(orig) }, { <span class="stringliteral">&quot;orig&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>,  <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, scaled&lt;coord_t&gt;(0.1f), 0.5f } } });</div>
<div class="line"><span class="lineno"> 2974</span>                                    ::MessageBoxA(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;TreeSupport smoothing bug&quot;</span>, <span class="stringliteral">&quot;Bug detected!&quot;</span>, MB_OK | MB_SYSTEMMODAL | MB_SETFOREGROUND | MB_ICONWARNING);</div>
<div class="line"><span class="lineno"> 2975</span>                                }</div>
<div class="line"><span class="lineno"> 2976</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2977</span>                            }</div>
<div class="line"><span class="lineno"> 2978</span>                        }</div>
<div class="line"><span class="lineno"> 2979</span>                    }</div>
<div class="line"><span class="lineno"> 2980</span>                }</div>
<div class="line"><span class="lineno"> 2981</span>                throw_on_cancel();</div>
<div class="line"><span class="lineno"> 2982</span>            }</div>
<div class="line"><span class="lineno"> 2983</span>        });</div>
<div class="line"><span class="lineno"> 2984</span>    }</div>
<div class="line"><span class="lineno"> 2985</span> </div>
<div class="line"><span class="lineno"> 2986</span><span class="preprocessor">#ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 2987</span>    progress_total += TREE_PROGRESS_SMOOTH_BRANCH_AREAS / 2;</div>
<div class="line"><span class="lineno"> 2988</span>    Progress::messageProgress(Progress::Stage::SUPPORT, progress_total * m_progress_multiplier + m_progress_offset, TREE_PROGRESS_TOTAL); <span class="comment">// It is just assumed that both smoothing loops together are one third of the time spent in this function. This was guessed. As the whole function is only 10%, and the smoothing is hard to predict a progress report in the loop may be not useful.</span></div>
<div class="line"><span class="lineno"> 2989</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2990</span> </div>
<div class="line"><span class="lineno"> 2991</span>    <span class="comment">// smooth downwards</span></div>
<div class="line"><span class="lineno"> 2992</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; element : move_bounds.<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a46b7df127ea55a76bc6f42c30a06d0da">back</a>())</div>
<div class="line"><span class="lineno"> 2993</span>        element.state.marked = false;</div>
<div class="line"><span class="lineno"> 2994</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layer_idx = <span class="keywordtype">int</span>(move_bounds.size()) - 2; layer_idx &gt;= 0; -- layer_idx) {</div>
<div class="line"><span class="lineno"> 2995</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> processing_base       = linear_data_layers[layer_idx];</div>
<div class="line"><span class="lineno"> 2996</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> processing_base_above = linear_data_layers[layer_idx + 1];</div>
<div class="line"><span class="lineno"> 2997</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a884a3220bfa9e3f7fb5e2169a75d7b1d">SupportElements</a> &amp;layer_above = move_bounds[layer_idx + 1];</div>
<div class="line"><span class="lineno"> 2998</span>        tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, processing_base_above - processing_base),</div>
<div class="line"><span class="lineno"> 2999</span>            [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt; &amp;range) {</div>
<div class="line"><span class="lineno"> 3000</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> processing_idx = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.begin(); processing_idx &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.end(); ++ processing_idx) {</div>
<div class="line"><span class="lineno"> 3001</span>                DrawArea &amp;draw_area = linear_data[processing_base + processing_idx];</div>
<div class="line"><span class="lineno"> 3002</span>                <span class="keywordtype">bool</span>     do_something = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3003</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> max_allowed_area;</div>
<div class="line"><span class="lineno"> 3004</span>                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> parent_idx : draw_area.element-&gt;parents) {</div>
<div class="line"><span class="lineno"> 3005</span>                    <span class="keyword">const</span> SupportElement &amp;parent = layer_above[parent_idx];</div>
<div class="line"><span class="lineno"> 3006</span>                    <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> max_outer_line_increase = max_radius_change_per_layer;</div>
<div class="line"><span class="lineno"> 3007</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> result = <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ab29201ea713e88d9d709ae4fa8f2576f">offset</a>(linear_data[processing_base_above + parent_idx].polygons, max_outer_line_increase, jtMiter, 1.2);</div>
<div class="line"><span class="lineno"> 3008</span>                    <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> direction = draw_area.element-&gt;state.result_on_layer - parent.state.result_on_layer;</div>
<div class="line"><span class="lineno"> 3009</span>                    <span class="comment">// move the polygons object</span></div>
<div class="line"><span class="lineno"> 3010</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;outer : result)</div>
<div class="line"><span class="lineno"> 3011</span>                        for (<a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a>&amp; p : outer)</div>
<div class="line"><span class="lineno"> 3012</span>                            p += direction;</div>
<div class="line"><span class="lineno"> 3013</span>                    <a class="code hl_function" href="../../dc/db2/namespacepriv.html#a3e6045aa7075a33d05830cc70eebdbba">append</a>(max_allowed_area, std::move(result));</div>
<div class="line"><span class="lineno"> 3014</span>                    do_something = do_something || parent.state.marked || <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(config, parent) != <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, parent);</div>
<div class="line"><span class="lineno"> 3015</span>                }</div>
<div class="line"><span class="lineno"> 3016</span>                <span class="keywordflow">if</span> (do_something) {</div>
<div class="line"><span class="lineno"> 3017</span>                    <span class="comment">// Trim the current drawing areas with max_allowed_area.</span></div>
<div class="line"><span class="lineno"> 3018</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> result = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">intersection</a>(max_allowed_area, draw_area.polygons);</div>
<div class="line"><span class="lineno"> 3019</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(result) &lt; <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a58071852761a9be613103b74cc81e6dc">area</a>(draw_area.polygons)) {</div>
<div class="line"><span class="lineno"> 3020</span>                        <span class="comment">// Mark parent as modified to propagate down.</span></div>
<div class="line"><span class="lineno"> 3021</span>                        draw_area.element-&gt;state.marked = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3022</span>                        draw_area.polygons = std::move(result);</div>
<div class="line"><span class="lineno"> 3023</span>                    }</div>
<div class="line"><span class="lineno"> 3024</span>                }</div>
<div class="line"><span class="lineno"> 3025</span>                throw_on_cancel();</div>
<div class="line"><span class="lineno"> 3026</span>            }</div>
<div class="line"><span class="lineno"> 3027</span>        });</div>
<div class="line"><span class="lineno"> 3028</span>    }</div>
<div class="line"><span class="lineno"> 3029</span> </div>
<div class="line"><span class="lineno"> 3030</span><span class="preprocessor">#ifdef SLIC3R_TREESUPPORTS_PROGRESS</span></div>
<div class="line"><span class="lineno"> 3031</span>    progress_total += TREE_PROGRESS_SMOOTH_BRANCH_AREAS / 2;</div>
<div class="line"><span class="lineno"> 3032</span>    Progress::messageProgress(Progress::Stage::SUPPORT, progress_total * m_progress_multiplier + m_progress_offset, TREE_PROGRESS_TOTAL);</div>
<div class="line"><span class="lineno"> 3033</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3034</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a0bb0aa9daea609cbe44301a2ed6cb220"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0bb0aa9daea609cbe44301a2ed6cb220">Slic3r::FFFTreeSupport::DrawArea::polygons</a></div><div class="ttdeci">Polygons polygons</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2772</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a5a58fe1cd67095d966b228c89aef5010"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5a58fe1cd67095d966b228c89aef5010">Slic3r::FFFTreeSupport::DrawArea::element</a></div><div class="ttdeci">SupportElement * element</div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2768</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#df/d52/struct_slic3r_1_1_f_f_f_tree_support_1_1_draw_area">Slic3r::FFFTreeSupport::DrawArea</a></div><div class="ttdef"><b>Definition</b> TreeSupport.cpp:2766</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a46b7df127ea55a76bc6f42c30a06d0da"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a46b7df127ea55a76bc6f42c30a06d0da">libnest2d::shapelike::back</a></div><div class="ttdeci">TPoint&lt; P &gt; back(const P &amp;p)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:873</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00065">contains()</a>, <a class="el" href="../../#l00218">Slic3r::debug_out_path()</a>, <a class="el" href="../../#l02768">Slic3r::FFFTreeSupport::DrawArea::element</a>, <a class="el" href="../../#l00686">Slic3r::intersection()</a>, <a class="el" href="../../#l00160">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a>, <a class="el" href="../../#l00137">Slic3r::FFFTreeSupport::SupportElementStateBits::marked</a>, <a class="el" href="../../#l00240">Slic3r::FFFTreeSupport::TreeSupportSettings::maximum_move_distance_slow</a>, <a class="el" href="../../#l00272">Slic3r::FFFTreeSupport::SupportElement::parents</a>, <a class="el" href="../../#l02772">Slic3r::FFFTreeSupport::DrawArea::polygons</a>, <a class="el" href="../../#l00356">Slic3r::range()</a>, <a class="el" href="../../#l00176">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer</a>, <a class="el" href="../../#l02913">smooth_branch_areas()</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, <a class="el" href="../../#l00246">support_element_collision_radius()</a>, <a class="el" href="../../#l00236">support_element_radius()</a>, <a class="el" href="../../#l00220">Slic3r::FFFTreeSupport::TreeSupportSettings::support_line_width</a>, and <a class="el" href="../../#l00774">Slic3r::union_ex()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03238">draw_areas()</a>, and <a class="el" href="../../#l02913">smooth_branch_areas()</a>.</p>
<div id="dynsection-91" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-91-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-91-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-91-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ac967237dc3f772e90e6ec13a5aaffdb1_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-92" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-92-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-92-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-92-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_ac967237dc3f772e90e6ec13a5aaffdb1_icgraph.svg" width="590" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a82d545d72851489d7944f1ef84d1356f" name="a82d545d72851489d7944f1ef84d1356f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82d545d72851489d7944f1ef84d1356f">&#9670;&#160;</a></span>smooth_trees_inside_influence_areas() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::smooth_trees_inside_influence_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Branch</a> &amp;&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_root</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  317</span>{</div>
<div class="line"><span class="lineno">  318</span>    <span class="comment">// Smooth the subtree:</span></div>
<div class="line"><span class="lineno">  319</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno">  320</span>    <span class="comment">// Apply laplacian and bilaplacian smoothing inside a branch,</span></div>
<div class="line"><span class="lineno">  321</span>    <span class="comment">// apply laplacian smoothing only at a bifurcation point.</span></div>
<div class="line"><span class="lineno">  322</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno">  323</span>    <span class="comment">// Applying a bilaplacian smoothing inside a branch should ensure curvature of the brach to be lower</span></div>
<div class="line"><span class="lineno">  324</span>    <span class="comment">// than the radius at each particular point of the centerline, </span></div>
<div class="line"><span class="lineno">  325</span>    <span class="comment">// while omitting bilaplacian smoothing at bifurcation points will create sharp bifurcations.</span></div>
<div class="line"><span class="lineno">  326</span>    <span class="comment">// Sharp bifurcations have a smaller volume, but just a tiny bit larger surfaces than smooth bifurcations</span></div>
<div class="line"><span class="lineno">  327</span>    <span class="comment">// where each continuation of the trunk satifies the path radius &gt; centerline element radius.</span></div>
<div class="line"><span class="lineno">  328</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_iterations = 100;</div>
<div class="line"><span class="lineno">  329</span>    <span class="keyword">struct </span>StackElement {</div>
<div class="line"><span class="lineno">  330</span>        <a class="code hl_struct" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Branch</a> &amp;branch;</div>
<div class="line"><span class="lineno">  331</span>        <span class="keywordtype">size_t</span>  idx_up;</div>
<div class="line"><span class="lineno">  332</span>    };</div>
<div class="line"><span class="lineno">  333</span>    std::vector&lt;StackElement&gt; stack;</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <span class="keyword">auto</span> adjust_position = [](Element &amp;el, <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec2f</a> new_pos) {</div>
<div class="line"><span class="lineno">  336</span>        <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> new_pos_scaled = scaled&lt;coord_t&gt;(new_pos);</div>
<div class="line"><span class="lineno">  337</span>        <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d8/d08/semver_8c.html#a477fec2b303f34d210b5d5f8ed8b4f71">contains</a>(el.influence_area, new_pos_scaled)) {</div>
<div class="line"><span class="lineno">  338</span>            <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a> min_dist = std::numeric_limits&lt;int64_t&gt;::max();</div>
<div class="line"><span class="lineno">  339</span>            <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a>   min_proj_scaled;</div>
<div class="line"><span class="lineno">  340</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d8/d90/class_slic3r_1_1_polygon.html">Polygon</a>&amp; polygon : el.influence_area) {</div>
<div class="line"><span class="lineno">  341</span>                <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> proj_scaled = polygon.point_projection(new_pos_scaled);</div>
<div class="line"><span class="lineno">  342</span>                <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a67a9885ef4908cb72ce26d75b694386c">int64_t</a> dist = (proj_scaled - new_pos_scaled).cast&lt;int64_t&gt;().squaredNorm(); dist &lt; min_dist) {</div>
<div class="line"><span class="lineno">  343</span>                    min_dist = dist;</div>
<div class="line"><span class="lineno">  344</span>                    min_proj_scaled = proj_scaled;</div>
<div class="line"><span class="lineno">  345</span>                }</div>
<div class="line"><span class="lineno">  346</span>            }</div>
<div class="line"><span class="lineno">  347</span>            new_pos = unscaled&lt;float&gt;(min_proj_scaled);</div>
<div class="line"><span class="lineno">  348</span>        }</div>
<div class="line"><span class="lineno">  349</span>        el.position.head&lt;2&gt;() = new_pos;</div>
<div class="line"><span class="lineno">  350</span>    };</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iter = 0; iter &lt; num_iterations; ++ iter) {</div>
<div class="line"><span class="lineno">  353</span>        <span class="comment">// 1) Back-up the current positions.</span></div>
<div class="line"><span class="lineno">  354</span>        stack.push_back({ root, 0 });</div>
<div class="line"><span class="lineno">  355</span>        <span class="keywordflow">while</span> (! stack.empty()) {</div>
<div class="line"><span class="lineno">  356</span>            StackElement &amp;state = stack.back();</div>
<div class="line"><span class="lineno">  357</span>            <span class="keywordflow">if</span> (state.idx_up == state.branch.num_up_trunk) {</div>
<div class="line"><span class="lineno">  358</span>                <span class="comment">// Process this path.</span></div>
<div class="line"><span class="lineno">  359</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;el : state.branch.path)</div>
<div class="line"><span class="lineno">  360</span>                    el.prev_position = el.position;</div>
<div class="line"><span class="lineno">  361</span>                stack.pop_back();</div>
<div class="line"><span class="lineno">  362</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  363</span>                <span class="comment">// Open another up node of this branch.</span></div>
<div class="line"><span class="lineno">  364</span>                stack.push_back({ *state.branch.up[state.idx_up].branch, 0 });</div>
<div class="line"><span class="lineno">  365</span>                ++ state.idx_up;</div>
<div class="line"><span class="lineno">  366</span>            }</div>
<div class="line"><span class="lineno">  367</span>        }</div>
<div class="line"><span class="lineno">  368</span>        <span class="comment">// 2) Calculate new position.</span></div>
<div class="line"><span class="lineno">  369</span>        stack.push_back({ root, 0 });</div>
<div class="line"><span class="lineno">  370</span>        <span class="keywordflow">while</span> (! stack.empty()) {</div>
<div class="line"><span class="lineno">  371</span>            StackElement &amp;state = stack.back();</div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">if</span> (state.idx_up == state.branch.num_up_trunk) {</div>
<div class="line"><span class="lineno">  373</span>                <span class="comment">// Process this path.</span></div>
<div class="line"><span class="lineno">  374</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i + 1 &lt; state.branch.path.size(); ++ i)</div>
<div class="line"><span class="lineno">  375</span>                    <span class="keywordflow">if</span> (<span class="keyword">auto</span> &amp;el = state.branch.path[i]; ! el.locked) {</div>
<div class="line"><span class="lineno">  376</span>                        <span class="comment">// Laplacian smoothing with 0.5 weight.</span></div>
<div class="line"><span class="lineno">  377</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &amp;p0 = state.branch.path[i - 1].prev_position;</div>
<div class="line"><span class="lineno">  378</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &amp;p1 = el.prev_position;</div>
<div class="line"><span class="lineno">  379</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> &amp;p2 = state.branch.path[i + 1].prev_position;</div>
<div class="line"><span class="lineno">  380</span>                        adjust_position(el, 0.5 * p1.head&lt;2&gt;() + 0.25 * (p0.head&lt;2&gt;() + p2.head&lt;2&gt;()));</div>
<div class="line"><span class="lineno">  381</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  382</span>                        <span class="comment">// Only apply bilaplacian smoothing if the current curvature is smaller than el.radius.</span></div>
<div class="line"><span class="lineno">  383</span>                        <span class="comment">// Interpolate p0, p1, p2 with a circle.</span></div>
<div class="line"><span class="lineno">  384</span>                        <span class="comment">// First project p0, p1, p2 into a common plane.</span></div>
<div class="line"><span class="lineno">  385</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> n = (p1 - p0).<a class="code hl_function" href="../../dc/d25/namespaceigl.html#af8e1cba991d40c6a29666b3e2b4620e6">cross</a>(p2 - p1);</div>
<div class="line"><span class="lineno">  386</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> <a class="code hl_variable" href="../../d7/dc9/namespace_eigen_1_1internal.html#a3cc80fc03610837da180f7e6d8e7b3ec">y</a> = <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a>(n.y(), n.x(), 0).normalized();</div>
<div class="line"><span class="lineno">  387</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> q0{ p0.z(), p0.dot(y) };</div>
<div class="line"><span class="lineno">  388</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> q1{ p1.z(), p1.dot(y) };</div>
<div class="line"><span class="lineno">  389</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> q2{ p2.z(), p2.dot(y) };</div>
<div class="line"><span class="lineno">  390</span>                        <span class="comment">// Interpolate q0, q1, q2 with a circle, calculate its radius.</span></div>
<div class="line"><span class="lineno">  391</span>                        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a> = q1 - q0;</div>
<div class="line"><span class="lineno">  392</span>                        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> = q2 - q0;</div>
<div class="line"><span class="lineno">  393</span>                        <span class="keywordtype">float</span> lb = <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>.squaredNorm();</div>
<div class="line"><span class="lineno">  394</span>                        <span class="keywordtype">float</span> lc = <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>.squaredNorm();</div>
<div class="line"><span class="lineno">  395</span>                        <span class="keywordflow">if</span> (<span class="keywordtype">float</span> d = <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>.x() * <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>.y() - <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>.y() * <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>.x(); std::abs(d) &gt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>) {</div>
<div class="line"><span class="lineno">  396</span>                            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> v = lc * <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a> - lb * <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>;</div>
<div class="line"><span class="lineno">  397</span>                            <span class="keywordtype">float</span> r2 = 0.25f * v.squaredNorm() / <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(d);</div>
<div class="line"><span class="lineno">  398</span>                            <span class="keywordflow">if</span> (r2 )</div>
<div class="line"><span class="lineno">  399</span>                        }</div>
<div class="line"><span class="lineno">  400</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  401</span>                    }</div>
<div class="line"><span class="lineno">  402</span>                {</div>
<div class="line"><span class="lineno">  403</span>                    <span class="comment">// Laplacian smoothing with 0.5 weight, branching point.</span></div>
<div class="line"><span class="lineno">  404</span>                    <span class="keywordtype">float</span> weight = 0;</div>
<div class="line"><span class="lineno">  405</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> new_pos = Vec2f::Zero();</div>
<div class="line"><span class="lineno">  406</span>                    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; state.branch.num_up_trunk; ++i) {</div>
<div class="line"><span class="lineno">  407</span>                        <span class="keyword">const</span> Element &amp;el = state.branch.up[i].branch-&gt;path.front();</div>
<div class="line"><span class="lineno">  408</span>                        new_pos += el.prev_position.head&lt;2&gt;();</div>
<div class="line"><span class="lineno">  409</span>                        weight  += el.radius;</div>
<div class="line"><span class="lineno">  410</span>                    }</div>
<div class="line"><span class="lineno">  411</span>                    {</div>
<div class="line"><span class="lineno">  412</span>                        <span class="keyword">const</span> Element &amp;el = state.branch.path[state.branch.path.size() - 2];</div>
<div class="line"><span class="lineno">  413</span>                        new_pos += el.prev_position.head&lt;2&gt;();</div>
<div class="line"><span class="lineno">  414</span>                        weight *= 2.f;</div>
<div class="line"><span class="lineno">  415</span>                    }</div>
<div class="line"><span class="lineno">  416</span>                    adjust_position(state.branch.path.back(), 0.5f * state.branch.path.back().prev_position.head&lt;2&gt;() + 0.5f * weight * new_pos);</div>
<div class="line"><span class="lineno">  417</span>                }</div>
<div class="line"><span class="lineno">  418</span>                stack.pop_back();</div>
<div class="line"><span class="lineno">  419</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  420</span>                <span class="comment">// Open another up node of this branch.</span></div>
<div class="line"><span class="lineno">  421</span>                stack.push_back({ *state.branch.up[state.idx_up].branch, 0 });</div>
<div class="line"><span class="lineno">  422</span>                ++ state.idx_up;</div>
<div class="line"><span class="lineno">  423</span>            }</div>
<div class="line"><span class="lineno">  424</span>        }</div>
<div class="line"><span class="lineno">  425</span>    }</div>
<div class="line"><span class="lineno">  426</span>    <span class="comment">// Also smoothen start of the path.</span></div>
<div class="line"><span class="lineno">  427</span>    <span class="keywordflow">if</span> (Element &amp;first = root.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.front(); ! first.locked) {</div>
<div class="line"><span class="lineno">  428</span>        Element &amp;second = root.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>[1];</div>
<div class="line"><span class="lineno">  429</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> new_pos = 0.75f * first.prev_position.head&lt;2&gt;() + 0.25f * second.prev_position.head&lt;2&gt;();</div>
<div class="line"><span class="lineno">  430</span>        <span class="keywordflow">if</span> (is_root)</div>
<div class="line"><span class="lineno">  431</span>            <span class="comment">// Let the root of the tree float inside its influence area.</span></div>
<div class="line"><span class="lineno">  432</span>            adjust_position(first, new_pos);</div>
<div class="line"><span class="lineno">  433</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  434</span>            <span class="comment">// Keep the start of a thin branch inside the trunk.</span></div>
<div class="line"><span class="lineno">  435</span>            <span class="keyword">const</span> Element &amp;trunk = root.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#afb800e8f1c1bbfbc43347705a515ad25">down</a>.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a1827b0bb599ccd38d873aea308c0cba6">branch</a>-&gt;<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.back();</div>
<div class="line"><span class="lineno">  436</span>            <span class="keyword">const</span> <span class="keywordtype">float</span>    rdif  = trunk.radius - root.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.front().radius;</div>
<div class="line"><span class="lineno">  437</span>            assert(rdif &gt;= 0);</div>
<div class="line"><span class="lineno">  438</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a>          vdif  = new_pos - trunk.prev_position.head&lt;2&gt;();</div>
<div class="line"><span class="lineno">  439</span>            <span class="keywordtype">float</span>          ldif  = vdif.squaredNorm();</div>
<div class="line"><span class="lineno">  440</span>            <span class="keywordflow">if</span> (ldif &gt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(rdif))</div>
<div class="line"><span class="lineno">  441</span>                <span class="comment">// Clamp new position.</span></div>
<div class="line"><span class="lineno">  442</span>                new_pos = trunk.prev_position.head&lt;2&gt;() + vdif * rdif / <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a656b9217a2fcb6de59dc8d1eb3079cc7">sqrt</a>(ldif);</div>
<div class="line"><span class="lineno">  443</span>            first.position.head&lt;2&gt;() = new_pos;</div>
<div class="line"><span class="lineno">  444</span>        }</div>
<div class="line"><span class="lineno">  445</span>    }</div>
<div class="line"><span class="lineno">  446</span>}</div>
<div class="ttc" id="anamespace_eigen_1_1internal_html_a3cc80fc03610837da180f7e6d8e7b3ec"><div class="ttname"><a href="../../d7/dc9/namespace_eigen_1_1internal.html#a3cc80fc03610837da180f7e6d8e7b3ec">Eigen::internal::y</a></div><div class="ttdeci">const Scalar &amp; y</div><div class="ttdef"><b>Definition</b> MathFunctions.h:552</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a1827b0bb599ccd38d873aea308c0cba6"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a1827b0bb599ccd38d873aea308c0cba6">Slic3r::FFFTreeSupport::Bifurcation::branch</a></div><div class="ttdeci">Branch * branch</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:81</div></div>
<div class="ttc" id="anamespace_slic3r_html_abe1c34afe5a07b8b1a7823ecfe2d1722"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Slic3r::Vec2f</a></div><div class="ttdeci">Eigen::Matrix&lt; float, 2, 1, Eigen::DontAlign &gt; Vec2f</div><div class="ttdef"><b>Definition</b> Point.hpp:48</div></div>
<div class="ttc" id="anamespaceigl_html_af8e1cba991d40c6a29666b3e2b4620e6"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#af8e1cba991d40c6a29666b3e2b4620e6">igl::cross</a></div><div class="ttdeci">IGL_INLINE void cross(const double *a, const double *b, double *out)</div><div class="ttdef"><b>Definition</b> cross.cpp:11</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">marchsq::__impl::SquareTag::c</a></div><div class="ttdeci">@ c</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">marchsq::__impl::SquareTag::b</a></div><div class="ttdeci">@ b</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_branch_html_afb800e8f1c1bbfbc43347705a515ad25"><div class="ttname"><a href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#afb800e8f1c1bbfbc43347705a515ad25">Slic3r::FFFTreeSupport::Branch::down</a></div><div class="ttdeci">Bifurcation down</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:100</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00081">Slic3r::FFFTreeSupport::Bifurcation::branch</a>, <a class="el" href="../../#l00247">Slic3r::contains()</a>, <a class="el" href="../../#l00157">Slic3r::cross()</a>, <a class="el" href="../../#l00100">Slic3r::FFFTreeSupport::Branch::down</a>, <a class="el" href="../../#l00051">EPSILON</a>, <a class="el" href="../../#l00050">Slic3r::FFFTreeSupport::Element::influence_area</a>, <a class="el" href="../../#l00053">Slic3r::FFFTreeSupport::Element::locked</a>, <a class="el" href="../../#l00088">Slic3r::FFFTreeSupport::Branch::path</a>, <a class="el" href="../../#l00043">Slic3r::FFFTreeSupport::Element::position</a>, <a class="el" href="../../#l00056">Slic3r::FFFTreeSupport::Element::prev_position</a>, <a class="el" href="../../#l00044">Slic3r::FFFTreeSupport::Element::radius</a>, <a class="el" href="../../#l00258">Slic3r::sqr()</a>, and <a class="el" href="../../#l00152">sqrt()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00448">smooth_trees_inside_influence_areas()</a>.</p>
<div id="dynsection-93" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-93-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-93-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-93-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a82d545d72851489d7944f1ef84d1356f_cgraph.svg" width="328" height="184"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-94" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-94-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-94-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-94-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a82d545d72851489d7944f1ef84d1356f_icgraph.svg" width="374" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a06b8853398d7f448803e1b717fded535" name="a06b8853398d7f448803e1b717fded535"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06b8853398d7f448803e1b717fded535">&#9670;&#160;</a></span>smooth_trees_inside_influence_areas() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::smooth_trees_inside_influence_areas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9ffddd79a33474301413b3501818dd09">Forest</a> &amp;&#160;</td>
          <td class="paramname"><em>forest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  449</span>{</div>
<div class="line"><span class="lineno">  450</span>    <span class="comment">// Parallel for!</span></div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../db/d3a/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree.html">Tree</a> &amp;tree : forest)</div>
<div class="line"><span class="lineno">  452</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a82d545d72851489d7944f1ef84d1356f">smooth_trees_inside_influence_areas</a>(tree.root(), true);</div>
<div class="line"><span class="lineno">  453</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a82d545d72851489d7944f1ef84d1356f"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a82d545d72851489d7944f1ef84d1356f">Slic3r::FFFTreeSupport::smooth_trees_inside_influence_areas</a></div><div class="ttdeci">void smooth_trees_inside_influence_areas(Branch &amp;root, bool is_root)</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:316</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00316">smooth_trees_inside_influence_areas()</a>.</p>
<div id="dynsection-95" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-95-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-95-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-95-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a06b8853398d7f448803e1b717fded535_cgraph.svg" width="534" height="184"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a25075430eea82dc2f07ade2ea9aa7145" name="a25075430eea82dc2f07ade2ea9aa7145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25075430eea82dc2f07ade2ea9aa7145">&#9670;&#160;</a></span>split_lines()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvaluatePointFn &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::pair&lt; <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a>, <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> &gt; Slic3r::FFFTreeSupport::split_lines </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> &amp;&#160;</td>
          <td class="paramname"><em>lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EvaluatePointFn&#160;</td>
          <td class="paramname"><em>evaluatePoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluates which points of some lines are not valid one layer below and which are. Assumes all points are valid on the current layer. Validity is evaluated using supplied lambda. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lines[in]</td><td>The lines that have to be evaluated. </td></tr>
    <tr><td class="paramname">evaluatePoint[in]</td><td>The function used to evaluate the points. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pair with which points are still valid in the first slot and which are not in the second slot. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  443</span>{</div>
<div class="line"><span class="lineno">  444</span>    <span class="comment">// assumes all Points on the current line are valid</span></div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>    <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> keep;</div>
<div class="line"><span class="lineno">  447</span>    <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> set_free;</div>
<div class="line"><span class="lineno">  448</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::vector&lt;std::pair&lt;Point, LineStatus&gt;&gt; &amp;line : lines) {</div>
<div class="line"><span class="lineno">  449</span>        <span class="keywordtype">bool</span>            current_keep = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  450</span>        <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">LineInformation</a> resulting_line;</div>
<div class="line"><span class="lineno">  451</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::pair&lt;Point, LineStatus&gt; &amp;me : line) {</div>
<div class="line"><span class="lineno">  452</span>            <span class="keywordflow">if</span> (evaluatePoint(me) != current_keep) {</div>
<div class="line"><span class="lineno">  453</span>                <span class="keywordflow">if</span> (! resulting_line.empty())</div>
<div class="line"><span class="lineno">  454</span>                    (current_keep ? &amp;keep : &amp;set_free)-&gt;emplace_back(std::move(resulting_line));</div>
<div class="line"><span class="lineno">  455</span>                current_keep = !current_keep;</div>
<div class="line"><span class="lineno">  456</span>            }</div>
<div class="line"><span class="lineno">  457</span>            resulting_line.emplace_back(me);</div>
<div class="line"><span class="lineno">  458</span>        }</div>
<div class="line"><span class="lineno">  459</span>        <span class="keywordflow">if</span> (! resulting_line.empty())</div>
<div class="line"><span class="lineno">  460</span>            (current_keep ? &amp;keep : &amp;set_free)-&gt;emplace_back(<a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::move(resulting_line));</div>
<div class="line"><span class="lineno">  461</span>    }</div>
<div class="line"><span class="lineno">  462</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(keep);</div>
<div class="line"><span class="lineno">  463</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(set_free);</div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">return</span> std::pair&lt;std::vector&lt;std::vector&lt;std::pair&lt;Point, LineStatus&gt;&gt;&gt;, std::vector&lt;std::vector&lt;std::pair&lt;Point, LineStatus&gt;&gt;&gt;&gt;(keep, set_free);</div>
<div class="line"><span class="lineno">  465</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00062">validate_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00844">Slic3r::FFFTreeSupport::RichInterfacePlacer::add_points_along_lines()</a>, and <a class="el" href="../../#l01062">sample_overhang_area()</a>.</p>
<div id="dynsection-96" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-96-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-96-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-96-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a25075430eea82dc2f07ade2ea9aa7145_cgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-97" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-97-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-97-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-97-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a25075430eea82dc2f07ade2ea9aa7145_icgraph.svg" width="592" height="92"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a413ae4b4f158f0affe88cd5cc5873c51" name="a413ae4b4f158f0affe88cd5cc5873c51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a413ae4b4f158f0affe88cd5cc5873c51">&#9670;&#160;</a></span>support_element_collision_radius() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> Slic3r::FFFTreeSupport::support_element_collision_radius </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  289</span>{</div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0fe6563863279b24725d47874451e250">support_element_collision_radius</a>(settings, elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>);</div>
<div class="line"><span class="lineno">  291</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, and <a class="el" href="../../#l00246">support_element_collision_radius()</a>.</p>
<div id="dynsection-98" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-98-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-98-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-98-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a413ae4b4f158f0affe88cd5cc5873c51_cgraph.svg" width="623" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0fe6563863279b24725d47874451e250" name="a0fe6563863279b24725d47874451e250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fe6563863279b24725d47874451e250">&#9670;&#160;</a></span>support_element_collision_radius() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> Slic3r::FFFTreeSupport::support_element_collision_radius </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the collision Radius of this <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Element</a>. This can be smaller then the actual radius, as the drawAreas will cut off areas that may collide with the model. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elem[in]</td><td>The <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Element</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The collision radius the element has. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  247</span>{</div>
<div class="line"><span class="lineno">  248</span>    <span class="keywordflow">return</span> settings.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(elem.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a222c73eef54306197d4bc0ec291dc120">effective_radius_height</a>, elem.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a20af13844179bbdf3483b750d2ef8b75">elephant_foot_increases</a>);</div>
<div class="line"><span class="lineno">  249</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00165">Slic3r::FFFTreeSupport::SupportElementState::effective_radius_height</a>, <a class="el" href="../../#l00187">Slic3r::FFFTreeSupport::SupportElementState::elephant_foot_increases</a>, and <a class="el" href="../../#l00403">Slic3r::FFFTreeSupport::TreeSupportSettings::getRadius()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03399">generate_support_areas()</a>, <a class="el" href="../../#l01548">increase_single_area()</a>, <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>, <a class="el" href="../../#l02007">merge_support_element_states()</a>, <a class="el" href="../../#l02552">set_to_model_contact_to_model_gracious()</a>, <a class="el" href="../../#l02913">smooth_branch_areas()</a>, and <a class="el" href="../../#l00288">support_element_collision_radius()</a>.</p>
<div id="dynsection-99" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-99-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-99-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-99-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a0fe6563863279b24725d47874451e250_cgraph.svg" width="396" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-100" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-100-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-100-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-100-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a0fe6563863279b24725d47874451e250_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="af5b7776f37deebb6df33ac042653debb" name="af5b7776f37deebb6df33ac042653debb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5b7776f37deebb6df33ac042653debb">&#9670;&#160;</a></span>support_element_radius() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> Slic3r::FFFTreeSupport::support_element_radius </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  284</span>{</div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(settings, elem.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>);</div>
<div class="line"><span class="lineno">  286</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, and <a class="el" href="../../#l00236">support_element_radius()</a>.</p>
<div id="dynsection-101" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-101-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-101-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-101-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af5b7776f37deebb6df33ac042653debb_cgraph.svg" width="599" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9c0f5dd4d95f10538669e32992adb86d" name="a9c0f5dd4d95f10538669e32992adb86d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c0f5dd4d95f10538669e32992adb86d">&#9670;&#160;</a></span>support_element_radius() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> Slic3r::FFFTreeSupport::support_element_radius </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html">SupportElementState</a> &amp;&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the Radius, that this element will have. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elem[in]</td><td>The <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Element</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The radius the element has. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  237</span>{ </div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">return</span> settings.<a class="code hl_function" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html#a3e3c953b2bddcff105a01742359ce230">getRadius</a>(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac0b43fc4eb70422b92722063157736e0">getEffectiveDTT</a>(settings, elem), elem.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a20af13844179bbdf3483b750d2ef8b75">elephant_foot_increases</a>);</div>
<div class="line"><span class="lineno">  239</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ac0b43fc4eb70422b92722063157736e0"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac0b43fc4eb70422b92722063157736e0">Slic3r::FFFTreeSupport::getEffectiveDTT</a></div><div class="ttdeci">size_t getEffectiveDTT(const TreeSupportSettings &amp;settings, const SupportElementState &amp;elem)</div><div class="ttdoc">Get the Distance to top regarding the real radius this part will have. This is different from distanc...</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:224</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00187">Slic3r::FFFTreeSupport::SupportElementState::elephant_foot_increases</a>, <a class="el" href="../../#l00224">getEffectiveDTT()</a>, and <a class="el" href="../../#l00403">Slic3r::FFFTreeSupport::TreeSupportSettings::getRadius()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02647">create_nodes_from_area()</a>, <a class="el" href="../../#l00587">extrude_branch()</a>, <a class="el" href="../../#l01000">finalize_raft_contact()</a>, <a class="el" href="../../#l01548">increase_single_area()</a>, <a class="el" href="../../#l02053">merge_influence_areas_two_elements()</a>, <a class="el" href="../../#l00690">organic_smooth_branches_avoid_collisions()</a>, <a class="el" href="../../#l02913">smooth_branch_areas()</a>, <a class="el" href="../../#l00283">support_element_radius()</a>, and <a class="el" href="../../#l00128">to_tree_element()</a>.</p>
<div id="dynsection-102" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-102-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-102-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-102-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a9c0f5dd4d95f10538669e32992adb86d_cgraph.svg" width="384" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-103" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-103-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-103-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-103-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a9c0f5dd4d95f10538669e32992adb86d_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a58708375463e99b2adb77d839339f51e" name="a58708375463e99b2adb77d839339f51e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58708375463e99b2adb77d839339f51e">&#9670;&#160;</a></span>to_tree_element()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Element</a> Slic3r::FFFTreeSupport::to_tree_element </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/da3/struct_slic3r_1_1_f_f_f_tree_support_1_1_tree_support_settings.html">TreeSupportSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html">SupportElement</a> &amp;&#160;</td>
          <td class="paramname"><em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_root</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  129</span>{</div>
<div class="line"><span class="lineno">  130</span>    <a class="code hl_struct" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Element</a> out;</div>
<div class="line"><span class="lineno">  131</span>    out.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5694c46d75207125d042499767bf60dd">position</a>        = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3f60c0fef0146fe2b8ee74dee582e83d">to_3d</a>(unscaled&lt;float&gt;(element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af48a0d9391fc8eefd2bf89543c381f31">result_on_layer</a>), <span class="keywordtype">float</span>(<a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aa2d118629726e53c068e0a8c7d44eb80">layer_z</a>(slicing_params, config, element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>)));</div>
<div class="line"><span class="lineno">  132</span>    out.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab5d60b11edd98d607bca9a672f52ae73">radius</a>          = <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9c0f5dd4d95f10538669e32992adb86d">support_element_radius</a>(config, element);</div>
<div class="line"><span class="lineno">  133</span>    out.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ae1d6a2a7bca10171e85b237835678e9b">layer_idx</a>       = element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a>;</div>
<div class="line"><span class="lineno">  134</span>    out.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a1a6c9ed181786c1bafbcca2ad2c44d55">influence_area</a>  = std::move(element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ab91ca9359c684859675f7f26e6d3cd01">influence_area</a>);</div>
<div class="line"><span class="lineno">  135</span>    out.<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac49b393bb9ea2563adf6148cb00ad4aa">locked</a>          = (is_root &amp;&amp; element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_variable" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#af1e554634cb3c5fc358082f8d2c0f185">layer_idx</a> &gt; 0) || element.<a class="code hl_variable" href="../../db/d2f/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element.html#ad96e4622b2cb06e4f357540dd558bd46">state</a>.<a class="code hl_function" href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a0c6e63f243a36ed5500ba5f23092b843">locked</a>();</div>
<div class="line"><span class="lineno">  136</span>    <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  137</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a1a6c9ed181786c1bafbcca2ad2c44d55"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a1a6c9ed181786c1bafbcca2ad2c44d55">Slic3r::FFFTreeSupport::Element::influence_area</a></div><div class="ttdeci">Polygons influence_area</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:50</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_a5694c46d75207125d042499767bf60dd"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a5694c46d75207125d042499767bf60dd">Slic3r::FFFTreeSupport::Element::position</a></div><div class="ttdeci">Vec3f position</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:43</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ab5d60b11edd98d607bca9a672f52ae73"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ab5d60b11edd98d607bca9a672f52ae73">Slic3r::FFFTreeSupport::Element::radius</a></div><div class="ttdeci">float radius</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:44</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ac49b393bb9ea2563adf6148cb00ad4aa"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ac49b393bb9ea2563adf6148cb00ad4aa">Slic3r::FFFTreeSupport::Element::locked</a></div><div class="ttdeci">bool locked</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:53</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_ae1d6a2a7bca10171e85b237835678e9b"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#ae1d6a2a7bca10171e85b237835678e9b">Slic3r::FFFTreeSupport::Element::layer_idx</a></div><div class="ttdeci">LayerIndex layer_idx</div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:47</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#dd/d0b/struct_slic3r_1_1_f_f_f_tree_support_1_1_element">Slic3r::FFFTreeSupport::Element</a></div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:41</div></div>
<div class="ttc" id="astruct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state_html_a0c6e63f243a36ed5500ba5f23092b843"><div class="ttname"><a href="../../de/dcf/struct_slic3r_1_1_f_f_f_tree_support_1_1_support_element_state.html#a0c6e63f243a36ed5500ba5f23092b843">Slic3r::FFFTreeSupport::SupportElementState::locked</a></div><div class="ttdeci">bool locked() const</div><div class="ttdef"><b>Definition</b> TreeSupport.hpp:216</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00050">Slic3r::FFFTreeSupport::Element::influence_area</a>, <a class="el" href="../../#l00278">Slic3r::FFFTreeSupport::SupportElement::influence_area</a>, <a class="el" href="../../#l00047">Slic3r::FFFTreeSupport::Element::layer_idx</a>, <a class="el" href="../../#l00160">Slic3r::FFFTreeSupport::SupportElementState::layer_idx</a>, <a class="el" href="../../#l00455">layer_z()</a>, <a class="el" href="../../#l00053">Slic3r::FFFTreeSupport::Element::locked</a>, <a class="el" href="../../#l00216">Slic3r::FFFTreeSupport::SupportElementState::locked()</a>, <a class="el" href="../../#l00043">Slic3r::FFFTreeSupport::Element::position</a>, <a class="el" href="../../#l00044">Slic3r::FFFTreeSupport::Element::radius</a>, <a class="el" href="../../#l00176">Slic3r::FFFTreeSupport::SupportElementState::result_on_layer</a>, <a class="el" href="../../#l00267">Slic3r::FFFTreeSupport::SupportElement::state</a>, <a class="el" href="../../#l00236">support_element_radius()</a>, and <a class="el" href="../../#l00127">Slic3r::to_3d()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00141">make_forest()</a>.</p>
<div id="dynsection-104" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-104-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-104-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-104-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a58708375463e99b2adb77d839339f51e_cgraph.svg" width="590" height="246"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-105" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-105-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-105-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-105-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a58708375463e99b2adb77d839339f51e_icgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5b7e3aa2dbc67c812bcd72802a8e7734" name="a5b7e3aa2dbc67c812bcd72802a8e7734"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b7e3aa2dbc67c812bcd72802a8e7734">&#9670;&#160;</a></span>tree_supports_show_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::tree_supports_show_error </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>critical</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  174</span>{ <span class="comment">// todo Remove!  ONLY FOR PUBLIC BETA!!</span></div>
<div class="line"><span class="lineno">  175</span>    printf(<span class="stringliteral">&quot;Error: %s, critical: %d\n&quot;</span>, message.data(), <span class="keywordtype">int</span>(critical));</div>
<div class="line"><span class="lineno">  176</span><span class="preprocessor">#ifdef TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  177</span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> showed_critical = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  178</span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> showed_performance = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  179</span>    <span class="keyword">auto</span> bugtype = std::string(critical ? <span class="stringliteral">&quot; This is a critical bug. It may cause missing or malformed branches.\n&quot;</span> : <span class="stringliteral">&quot;This bug should only decrease performance.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordtype">bool</span> show    = (critical &amp;&amp; !<a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aad99b24bb16e78e513e22aeff7ce50ea">g_showed_critical_error</a>) || (!critical &amp;&amp; !g_showed_performance_warning);</div>
<div class="line"><span class="lineno">  181</span>    (critical ? <a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#aad99b24bb16e78e513e22aeff7ce50ea">g_showed_critical_error</a> : <a class="code hl_variable" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#af5e44c1ba8a01d2910f6bfd9941520db">g_showed_performance_warning</a>) = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">if</span> (show)</div>
<div class="line"><span class="lineno">  183</span>        MessageBoxA(<span class="keyword">nullptr</span>, std::string(<span class="stringliteral">&quot;TreeSupport_2 MOD detected an error while generating the tree support.\nPlease report this back to me with profile and model.\nRevision 5.0\n&quot;</span> + std::string(message) + <span class="stringliteral">&quot;\n&quot;</span> + bugtype).c_str(), </div>
<div class="line"><span class="lineno">  184</span>            <span class="stringliteral">&quot;Bug detected!&quot;</span>, MB_OK | MB_SYSTEMMODAL | MB_SETFOREGROUND | MB_ICONWARNING);</div>
<div class="line"><span class="lineno">  185</span><span class="preprocessor">#endif </span><span class="comment">// TREE_SUPPORT_SHOW_ERRORS_WIN32</span></div>
<div class="line"><span class="lineno">  186</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00170">g_showed_critical_error</a>, and <a class="el" href="../../#l00171">g_showed_performance_warning</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00924">Slic3r::FFFTreeSupport::RichInterfacePlacer::add_point_as_influence_area()</a>, <a class="el" href="../../#l02405">create_layer_pathing()</a>, <a class="el" href="../../#l02647">create_nodes_from_area()</a>, <a class="el" href="../../#l00524">ensure_maximum_distance_polyline()</a>, <a class="el" href="../../#l00327">Slic3r::FFFTreeSupport::TreeModelVolumes::getAvoidance()</a>, <a class="el" href="../../#l00291">Slic3r::FFFTreeSupport::TreeModelVolumes::getCollision()</a>, <a class="el" href="../../#l00313">Slic3r::FFFTreeSupport::TreeModelVolumes::getCollisionHolefree()</a>, <a class="el" href="../../#l00356">Slic3r::FFFTreeSupport::TreeModelVolumes::getPlaceableAreas()</a>, <a class="el" href="../../#l00373">Slic3r::FFFTreeSupport::TreeModelVolumes::getWallRestriction()</a>, <a class="el" href="../../#l01548">increase_single_area()</a>, <a class="el" href="../../#l00763">safe_offset_inc()</a>, <a class="el" href="../../#l02508">set_points_on_areas()</a>, and <a class="el" href="../../#l02552">set_to_model_contact_to_model_gracious()</a>.</p>
<div id="dynsection-106" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-106-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-106-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-106-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a5b7e3aa2dbc67c812bcd72802a8e7734_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a81892c54115bb52c838fb9a4d23bada3" name="a81892c54115bb52c838fb9a4d23bada3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81892c54115bb52c838fb9a4d23bada3">&#9670;&#160;</a></span>triangulate_fan()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool flip_normals&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::triangulate_fan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;&#160;</td>
          <td class="paramname"><em>its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ifan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ibegin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iend</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  480</span>{</div>
<div class="line"><span class="lineno">  481</span>    <span class="comment">// at least 3 vertices, increasing order.</span></div>
<div class="line"><span class="lineno">  482</span>    assert(ibegin + 3 &lt;= iend);</div>
<div class="line"><span class="lineno">  483</span>    assert(ibegin &gt;= 0 &amp;&amp; iend &lt;= its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size());</div>
<div class="line"><span class="lineno">  484</span>    assert(ifan &gt;= 0 &amp;&amp; ifan &lt; its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size());</div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordtype">int</span> num_faces = iend - ibegin;</div>
<div class="line"><span class="lineno">  486</span>    its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.reserve(its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.size() + num_faces * 3);</div>
<div class="line"><span class="lineno">  487</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> v = ibegin, u = iend - 1; v &lt; iend; u = v ++) {</div>
<div class="line"><span class="lineno">  488</span>        <span class="keywordflow">if</span> (flip_normals)</div>
<div class="line"><span class="lineno">  489</span>            its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.push_back({ ifan, u, v });</div>
<div class="line"><span class="lineno">  490</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  491</span>            its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.push_back({ ifan, v, u });</div>
<div class="line"><span class="lineno">  492</span>    }</div>
<div class="line"><span class="lineno">  493</span>}</div>
<div class="ttc" id="astructindexed__triangle__set_html_a8e9771f92d4834e98a5ed13f131d71f6"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indexed_triangle_set::indices</a></div><div class="ttdeci">std::vector&lt; stl_triangle_vertex_indices &gt; indices</div><div class="ttdef"><b>Definition</b> stl.h:164</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00164">indexed_triangle_set::indices</a>, and <a class="el" href="../../#l00165">indexed_triangle_set::vertices</a>.</p>

</div>
</div>
<a id="a78c399addd988cbf5b23f6e3094bba97" name="a78c399addd988cbf5b23f6e3094bba97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c399addd988cbf5b23f6e3094bba97">&#9670;&#160;</a></span>triangulate_strip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::triangulate_strip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;&#160;</td>
          <td class="paramname"><em>its</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ibegin1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iend1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ibegin2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iend2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  496</span>{</div>
<div class="line"><span class="lineno">  497</span>    <span class="comment">// at least 3 vertices, increasing order.</span></div>
<div class="line"><span class="lineno">  498</span>    assert(ibegin1 + 3 &lt;= iend1);</div>
<div class="line"><span class="lineno">  499</span>    assert(ibegin1 &gt;= 0 &amp;&amp; iend1 &lt;= its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size());</div>
<div class="line"><span class="lineno">  500</span>    assert(ibegin2 + 3 &lt;= iend2);</div>
<div class="line"><span class="lineno">  501</span>    assert(ibegin2 &gt;= 0 &amp;&amp; iend2 &lt;= its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size());</div>
<div class="line"><span class="lineno">  502</span>    <span class="keywordtype">int</span> n1 = iend1 - ibegin1;</div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordtype">int</span> n2 = iend2 - ibegin2;</div>
<div class="line"><span class="lineno">  504</span>    its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.reserve(its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.size() + (n1 + n2) * 3);</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>    <span class="comment">// For the first vertex of 1st strip, find the closest vertex on the 2nd strip.</span></div>
<div class="line"><span class="lineno">  507</span>    <span class="keywordtype">int</span> istart2 = ibegin2;</div>
<div class="line"><span class="lineno">  508</span>    {</div>
<div class="line"><span class="lineno">  509</span>        <span class="keyword">const</span> <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3f</a> &amp;p1    = its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>[ibegin1];</div>
<div class="line"><span class="lineno">  510</span>        <span class="keyword">auto</span>         d2min = std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><span class="lineno">  511</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = ibegin2; i &lt; iend2; ++ i) {</div>
<div class="line"><span class="lineno">  512</span>            <span class="keyword">const</span> <a class="code hl_class" href="../../d2/d2d/class_eigen_1_1_matrix.html">Vec3f</a> &amp;p2 = its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>[i];</div>
<div class="line"><span class="lineno">  513</span>            <span class="keyword">const</span> <span class="keywordtype">float</span> d2  = (p2 - p1).squaredNorm();</div>
<div class="line"><span class="lineno">  514</span>            <span class="keywordflow">if</span> (d2 &lt; d2min) {</div>
<div class="line"><span class="lineno">  515</span>                d2min = d2;</div>
<div class="line"><span class="lineno">  516</span>                istart2 = i;</div>
<div class="line"><span class="lineno">  517</span>            }</div>
<div class="line"><span class="lineno">  518</span>        }</div>
<div class="line"><span class="lineno">  519</span>    }</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    <span class="comment">// Now triangulate the strip zig-zag fashion taking always the shortest connection if possible.</span></div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> u = ibegin1, v = istart2; n1 &gt; 0 || n2 &gt; 0;) {</div>
<div class="line"><span class="lineno">  523</span>        <span class="keywordtype">bool</span> take_first;</div>
<div class="line"><span class="lineno">  524</span>        <span class="keywordtype">int</span> u2, v2;</div>
<div class="line"><span class="lineno">  525</span>        <span class="keyword">auto</span> update_u2 = [&amp;u2, u, ibegin1, iend1]() {</div>
<div class="line"><span class="lineno">  526</span>            u2 = u;</div>
<div class="line"><span class="lineno">  527</span>            <span class="keywordflow">if</span> (++ u2 == iend1)</div>
<div class="line"><span class="lineno">  528</span>                u2 = ibegin1;</div>
<div class="line"><span class="lineno">  529</span>        };</div>
<div class="line"><span class="lineno">  530</span>        <span class="keyword">auto</span> update_v2 = [&amp;v2, v, ibegin2, iend2]() {</div>
<div class="line"><span class="lineno">  531</span>            v2 = v;</div>
<div class="line"><span class="lineno">  532</span>            <span class="keywordflow">if</span> (++ v2 == iend2)</div>
<div class="line"><span class="lineno">  533</span>                v2 = ibegin2;</div>
<div class="line"><span class="lineno">  534</span>        };</div>
<div class="line"><span class="lineno">  535</span>        <span class="keywordflow">if</span> (n1 == 0) {</div>
<div class="line"><span class="lineno">  536</span>            take_first = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  537</span>            update_v2();</div>
<div class="line"><span class="lineno">  538</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n2 == 0) {</div>
<div class="line"><span class="lineno">  539</span>            take_first = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  540</span>            update_u2();</div>
<div class="line"><span class="lineno">  541</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  542</span>            update_u2();</div>
<div class="line"><span class="lineno">  543</span>            update_v2();</div>
<div class="line"><span class="lineno">  544</span>            <span class="keywordtype">float</span> l1 = (its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>[u2] - its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>[v]).squaredNorm();</div>
<div class="line"><span class="lineno">  545</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1e045f56a994b8cd4a5b203626cd8272">l2</a> = (its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>[v2] - its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>[u]).squaredNorm();</div>
<div class="line"><span class="lineno">  546</span>            take_first = l1 &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1e045f56a994b8cd4a5b203626cd8272">l2</a>;</div>
<div class="line"><span class="lineno">  547</span>        }</div>
<div class="line"><span class="lineno">  548</span>        <span class="keywordflow">if</span> (take_first) {</div>
<div class="line"><span class="lineno">  549</span>            its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.push_back({ u, u2, v });</div>
<div class="line"><span class="lineno">  550</span>            -- n1;</div>
<div class="line"><span class="lineno">  551</span>            u = u2;</div>
<div class="line"><span class="lineno">  552</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  553</span>            its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.push_back({ u, v2, v });</div>
<div class="line"><span class="lineno">  554</span>            -- n2;</div>
<div class="line"><span class="lineno">  555</span>            v = v2;</div>
<div class="line"><span class="lineno">  556</span>        }</div>
<div class="line"><span class="lineno">  557</span>    }</div>
<div class="line"><span class="lineno">  558</span>}</div>
<div class="ttc" id="anamespace_slic3r_html_a1e045f56a994b8cd4a5b203626cd8272"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1e045f56a994b8cd4a5b203626cd8272">Slic3r::l2</a></div><div class="ttdeci">T l2(const boost::geometry::model::d2::point_xy&lt; T &gt; &amp;v)</div><div class="ttdef"><b>Definition</b> ExtrusionSimulator.cpp:166</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00164">indexed_triangle_set::indices</a>, <a class="el" href="../../#l00166">Slic3r::l2()</a>, and <a class="el" href="../../#l00165">indexed_triangle_set::vertices</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00587">extrude_branch()</a>.</p>
<div id="dynsection-107" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-107-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-107-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-107-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a78c399addd988cbf5b23f6e3094bba97_cgraph.svg" width="418" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-108" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-108-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-108-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-108-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a78c399addd988cbf5b23f6e3094bba97_icgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af09b5f88f692b40a0e2edc768d6164b0" name="af09b5f88f692b40a0e2edc768d6164b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af09b5f88f692b40a0e2edc768d6164b0">&#9670;&#160;</a></span>trim_influence_areas_bottom_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::trim_influence_areas_bottom_up </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9ffddd79a33474301413b3501818dd09">Forest</a> &amp;&#160;</td>
          <td class="paramname"><em>forest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td>
          <td class="paramname"><em>dxy_dlayer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  291</span>{</div>
<div class="line"><span class="lineno">  292</span>    <span class="keyword">struct </span>Trimmer {</div>
<div class="line"><span class="lineno">  293</span>        <span class="keyword">static</span> <span class="keywordtype">void</span> trim_recursive(<a class="code hl_struct" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html">Branch</a> &amp;branch, <span class="keyword">const</span> <span class="keywordtype">float</span> delta_r, <span class="keyword">const</span> <span class="keywordtype">float</span> dxy_dlayer) {</div>
<div class="line"><span class="lineno">  294</span>            assert(delta_r &gt;= 0);</div>
<div class="line"><span class="lineno">  295</span>            <span class="keywordflow">if</span> (delta_r &gt; 0)</div>
<div class="line"><span class="lineno">  296</span>                branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.front().influence_area = offset(branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.front().influence_area, delta_r);</div>
<div class="line"><span class="lineno">  297</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.size(); ++ i)</div>
<div class="line"><span class="lineno">  298</span>                branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>[i].influence_area = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">intersection</a>(branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>[i].influence_area, offset(branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>[i - 1].influence_area, dxy_dlayer));</div>
<div class="line"><span class="lineno">  299</span>            <span class="keyword">const</span> <span class="keywordtype">float</span> r0 = branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.back().radius;</div>
<div class="line"><span class="lineno">  300</span>            <span class="keywordflow">for</span> (<a class="code hl_struct" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation">Bifurcation</a> &amp;up : branch.up) {</div>
<div class="line"><span class="lineno">  301</span>                up.branch-&gt;path.front().influence_area = branch.<a class="code hl_variable" href="../../d3/d31/struct_slic3r_1_1_f_f_f_tree_support_1_1_branch.html#a5abc3c6326edc881686ff0d59bdef64a">path</a>.back().influence_area;</div>
<div class="line"><span class="lineno">  302</span>                trim_recursive(*up.branch, r0 - up.branch-&gt;path.front().radius, dxy_dlayer);</div>
<div class="line"><span class="lineno">  303</span>            }</div>
<div class="line"><span class="lineno">  304</span>        }</div>
<div class="line"><span class="lineno">  305</span>    };</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">for</span> (Tree &amp;tree : forest) {</div>
<div class="line"><span class="lineno">  308</span>        Branch      &amp;root = tree.root();</div>
<div class="line"><span class="lineno">  309</span>        <span class="keyword">const</span> <span class="keywordtype">float</span>  r0   = root.path.back().radius;</div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">for</span> (Bifurcation &amp;up : root.<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a46c48bec0d282018b9d167eef7711b2c">up</a>)</div>
<div class="line"><span class="lineno">  311</span>            Trimmer::trim_recursive(*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a46c48bec0d282018b9d167eef7711b2c">up</a>.branch, r0 - <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a46c48bec0d282018b9d167eef7711b2c">up</a>.branch-&gt;path.<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a9bbafef5b59a31bd6049a3aee20d760b">front</a>().radius, dxy_dlayer);</div>
<div class="line"><span class="lineno">  312</span>    }</div>
<div class="line"><span class="lineno">  313</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_f_f_f_tree_support_html_d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation"><div class="ttname"><a href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#d1/d97/struct_slic3r_1_1_f_f_f_tree_support_1_1_bifurcation">Slic3r::FFFTreeSupport::Bifurcation</a></div><div class="ttdef"><b>Definition</b> OrganicSupport.cpp:80</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00686">Slic3r::intersection()</a>, <a class="el" href="../../#l00088">Slic3r::FFFTreeSupport::Branch::path</a>, and <a class="el" href="../../#l00099">Slic3r::FFFTreeSupport::Branch::up</a>.</p>
<div id="dynsection-109" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-109-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-109-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-109-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_af09b5f88f692b40a0e2edc768d6164b0_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a72da14b47702c9d35a655cf8c2336c9b" name="a72da14b47702c9d35a655cf8c2336c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72da14b47702c9d35a655cf8c2336c9b">&#9670;&#160;</a></span>validate_range() <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::validate_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">LineInformation</a> &amp;&#160;</td>
          <td class="paramname"><em>lines</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   93</span>{</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : lines)</div>
<div class="line"><span class="lineno">   95</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(p.first);</div>
<div class="line"><span class="lineno">   96</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00062">validate_range()</a>.</p>
<div id="dynsection-110" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-110-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-110-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-110-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a72da14b47702c9d35a655cf8c2336c9b_cgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adc88332df88abf06fabd3dd806a9657f" name="adc88332df88abf06fabd3dd806a9657f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc88332df88abf06fabd3dd806a9657f">&#9670;&#160;</a></span>validate_range() <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::validate_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a120c940cfdd766c67f428bbd8bc25341">LineInformations</a> &amp;&#160;</td>
          <td class="paramname"><em>lines</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   99</span>{</div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a8b172731ba7cf960859fa50acd674b09">LineInformation</a> &amp;l : lines)</div>
<div class="line"><span class="lineno">  101</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(l);</div>
<div class="line"><span class="lineno">  102</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00062">validate_range()</a>.</p>
<div id="dynsection-111" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-111-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-111-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-111-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_adc88332df88abf06fabd3dd806a9657f_cgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adf9b0340e4ea4f549ab094a2f396c6ec" name="adf9b0340e4ea4f549ab094a2f396c6ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf9b0340e4ea4f549ab094a2f396c6ec">&#9670;&#160;</a></span>validate_range() <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::validate_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/dd1/class_slic3r_1_1_multi_point.html">MultiPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   76</span>{</div>
<div class="line"><span class="lineno">   77</span>    <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(mp.<a class="code hl_variable" href="../../d7/dd1/class_slic3r_1_1_multi_point.html#a5f33254e616268f728969886c4ed5d85">points</a>);</div>
<div class="line"><span class="lineno">   78</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00018">Slic3r::MultiPoint::points</a>, and <a class="el" href="../../#l00062">validate_range()</a>.</p>
<div id="dynsection-112" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-112-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-112-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-112-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_adf9b0340e4ea4f549ab094a2f396c6ec_cgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0c984cee519c0956b376d8371312d3d9" name="a0c984cee519c0956b376d8371312d3d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c984cee519c0956b376d8371312d3d9">&#9670;&#160;</a></span>validate_range() <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::validate_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   63</span>{</div>
<div class="line"><span class="lineno">   64</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> hi = 65536 * 16384;</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">if</span> (pt.x() &gt; hi || pt.y() &gt; hi || -pt.x() &gt; hi || -pt.y() &gt; hi) </div>
<div class="line"><span class="lineno">   66</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="../../d0/d71/class_clipper_lib_1_1clipper_exception.html">ClipperLib::clipperException</a>(<span class="stringliteral">&quot;Coordinate outside allowed range&quot;</span>);    </div>
<div class="line"><span class="lineno">   67</span>}</div>
<div class="ttc" id="aclass_clipper_lib_1_1clipper_exception_html"><div class="ttname"><a href="../../d0/d71/class_clipper_lib_1_1clipper_exception.html">ClipperLib::clipperException</a></div><div class="ttdef"><b>Definition</b> clipper.hpp:580</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l00844">Slic3r::FFFTreeSupport::RichInterfacePlacer::add_points_along_lines()</a>, <a class="el" href="../../#l00354">convert_lines_to_internal()</a>, <a class="el" href="../../#l00524">ensure_maximum_distance_polyline()</a>, <a class="el" href="../../#l00628">generate_support_infill_lines()</a>, <a class="el" href="../../#l00470">polyline_sample_next_point_at_distance()</a>, <a class="el" href="../../#l00442">split_lines()</a>, <a class="el" href="../../#l00092">validate_range()</a>, <a class="el" href="../../#l00098">validate_range()</a>, <a class="el" href="../../#l00075">validate_range()</a>, <a class="el" href="../../#l00069">validate_range()</a>, <a class="el" href="../../#l00080">validate_range()</a>, and <a class="el" href="../../#l00086">validate_range()</a>.</p>
<div id="dynsection-113" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-113-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-113-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-113-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a0c984cee519c0956b376d8371312d3d9_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a06df6821b1d25b7af7251d2f4e922f7c" name="a06df6821b1d25b7af7251d2f4e922f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06df6821b1d25b7af7251d2f4e922f7c">&#9670;&#160;</a></span>validate_range() <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::validate_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#aee987cbd1647986a9ac92226daffa4d7">Points</a> &amp;&#160;</td>
          <td class="paramname"><em>points</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   70</span>{</div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d6/dec/class_slic3r_1_1_point.html">Point</a> &amp;p : points)</div>
<div class="line"><span class="lineno">   72</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(p);</div>
<div class="line"><span class="lineno">   73</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00062">validate_range()</a>.</p>
<div id="dynsection-114" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-114-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-114-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-114-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a06df6821b1d25b7af7251d2f4e922f7c_cgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa95809e233bdd0d2738162822ef17ff9" name="aa95809e233bdd0d2738162822ef17ff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa95809e233bdd0d2738162822ef17ff9">&#9670;&#160;</a></span>validate_range() <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::validate_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a00eaa65faeaecea2aec629f311ce5a1c">Polygons</a> &amp;&#160;</td>
          <td class="paramname"><em>polygons</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   81</span>{</div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d8/d90/class_slic3r_1_1_polygon.html">Polygon</a> &amp;p : polygons)</div>
<div class="line"><span class="lineno">   83</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(p);</div>
<div class="line"><span class="lineno">   84</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00062">validate_range()</a>.</p>
<div id="dynsection-115" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-115-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-115-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-115-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_aa95809e233bdd0d2738162822ef17ff9_cgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a920f67c93294f987f0d286047ad209bb" name="a920f67c93294f987f0d286047ad209bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a920f67c93294f987f0d286047ad209bb">&#9670;&#160;</a></span>validate_range() <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::FFFTreeSupport::validate_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a498065f79ccb865fc410d4afeacffc9c">Polylines</a> &amp;&#160;</td>
          <td class="paramname"><em>polylines</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   87</span>{</div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d6/de0/class_slic3r_1_1_polyline.html">Polyline</a> &amp;p : polylines)</div>
<div class="line"><span class="lineno">   89</span>        <a class="code hl_function" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a0c984cee519c0956b376d8371312d3d9">validate_range</a>(p);</div>
<div class="line"><span class="lineno">   90</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00062">validate_range()</a>.</p>
<div id="dynsection-116" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-116-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-116-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-116-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support_a920f67c93294f987f0d286047ad209bb_cgraph.svg" width="374" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aad99b24bb16e78e513e22aeff7ce50ea" name="aad99b24bb16e78e513e22aeff7ce50ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad99b24bb16e78e513e22aeff7ce50ea">&#9670;&#160;</a></span>g_showed_critical_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::FFFTreeSupport::g_showed_critical_error = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l03399">generate_support_areas()</a>, and <a class="el" href="../../#l00173">tree_supports_show_error()</a>.</p>

</div>
</div>
<a id="af5e44c1ba8a01d2910f6bfd9941520db" name="af5e44c1ba8a01d2910f6bfd9941520db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e44c1ba8a01d2910f6bfd9941520db">&#9670;&#160;</a></span>g_showed_performance_warning</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::FFFTreeSupport::g_showed_performance_warning = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l03399">generate_support_areas()</a>, and <a class="el" href="../../#l00173">tree_supports_show_error()</a>.</p>

</div>
</div>
<a id="ac9f48fd7ab27a9f22afd56e15a106cf4" name="ac9f48fd7ab27a9f22afd56e15a106cf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f48fd7ab27a9f22afd56e15a106cf4">&#9670;&#160;</a></span>polygons_strictly_simple</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool Slic3r::FFFTreeSupport::polygons_strictly_simple = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00054">Slic3r::FFFTreeSupport::TreeModelVolumes::TreeModelVolumes()</a>, and <a class="el" href="../../#l00763">safe_offset_inc()</a>.</p>

</div>
</div>
<a id="aeee4ab4cd99f65609817f5b5760e9516" name="aeee4ab4cd99f65609817f5b5760e9516"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeee4ab4cd99f65609817f5b5760e9516">&#9670;&#160;</a></span>SUPPORT_TREE_AVOID_SUPPORT_BLOCKER</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> bool Slic3r::FFFTreeSupport::SUPPORT_TREE_AVOID_SUPPORT_BLOCKER = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a47bb1d5408b436e5aee7dba2deb0d626" name="a47bb1d5408b436e5aee7dba2deb0d626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47bb1d5408b436e5aee7dba2deb0d626">&#9670;&#160;</a></span>SUPPORT_TREE_CIRCLE_RESOLUTION</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> size_t Slic3r::FFFTreeSupport::SUPPORT_TREE_CIRCLE_RESOLUTION = 25</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad8b5b96cff6089fb6522a3159e639f99" name="ad8b5b96cff6089fb6522a3159e639f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8b5b96cff6089fb6522a3159e639f99">&#9670;&#160;</a></span>SUPPORT_TREE_COLLISION_RESOLUTION</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> Slic3r::FFFTreeSupport::SUPPORT_TREE_COLLISION_RESOLUTION = <a class="el" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>&lt;<a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&gt;(0.5)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9dbe7ecc866105ff180975414a400ce9" name="a9dbe7ecc866105ff180975414a400ce9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dbe7ecc866105ff180975414a400ce9">&#9670;&#160;</a></span>SUPPORT_TREE_EXPONENTIAL_FACTOR</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> double Slic3r::FFFTreeSupport::SUPPORT_TREE_EXPONENTIAL_FACTOR = 1.5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2b8852f1bdc0dfbb6be4f9ae2884dc55" name="a2b8852f1bdc0dfbb6be4f9ae2884dc55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b8852f1bdc0dfbb6be4f9ae2884dc55">&#9670;&#160;</a></span>SUPPORT_TREE_EXPONENTIAL_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a> Slic3r::FFFTreeSupport::SUPPORT_TREE_EXPONENTIAL_THRESHOLD = <a class="el" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>&lt;<a class="el" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>&gt;(1. * <a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html#a9dbe7ecc866105ff180975414a400ce9">SUPPORT_TREE_EXPONENTIAL_FACTOR</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae63f627df889bd2b2e66d516c5da63da" name="ae63f627df889bd2b2e66d516c5da63da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63f627df889bd2b2e66d516c5da63da">&#9670;&#160;</a></span>tiny_area_threshold</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> auto Slic3r::FFFTreeSupport::tiny_area_threshold = <a class="el" href="../../de/db8/namespace_slic3r.html#a9f09756940b3eb2052058460bf07e4a3">sqr</a>(<a class="el" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>&lt;double&gt;(0.001))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../dd/df4/namespace_slic3r_1_1_f_f_f_tree_support.html">FFFTreeSupport</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
