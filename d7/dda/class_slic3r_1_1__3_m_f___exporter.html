<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: Slic3r::_3MF_Exporter Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d7/dda/class_slic3r_1_1__3_m_f___exporter.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../db/d2f/class_slic3r_1_1__3_m_f___exporter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::_3MF_Exporter Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for Slic3r::_3MF_Exporter:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../de/d4b/class_slic3r_1_1__3_m_f___exporter__inherit__graph.svg" width="163" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::_3MF_Exporter:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d8b/class_slic3r_1_1__3_m_f___exporter__coll__graph.svg" width="255" height="392"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7a/struct_slic3r_1_1__3_m_f___exporter_1_1_build_item.html">BuildItem</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d95/struct_slic3r_1_1__3_m_f___exporter_1_1_object_data.html">ObjectData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d38/struct_slic3r_1_1__3_m_f___exporter_1_1_offsets.html">Offsets</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a204a0a35ec9c353a50741ab9c0b56651"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a204a0a35ec9c353a50741ab9c0b56651">save_model_to_file</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;filename, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *config, bool fullpath_sources, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> *thumbnail_data, bool zip64)</td></tr>
<tr class="separator:a204a0a35ec9c353a50741ab9c0b56651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57c926a67837c8d8a8eb761a0492490f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a57c926a67837c8d8a8eb761a0492490f">log_errors</a> ()</td></tr>
<tr class="separator:a57c926a67837c8d8a8eb761a0492490f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a11dd90834b34265e79d083d3933c0ff3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a11dd90834b34265e79d083d3933c0ff3">add_transformation</a> (std::stringstream &amp;stream, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> &amp;tr)</td></tr>
<tr class="separator:a11dd90834b34265e79d083d3933c0ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a8aa4fbcaa8c50693cb27dc65c31f0450"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;<a class="el" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>)</td></tr>
<tr class="separator:a8aa4fbcaa8c50693cb27dc65c31f0450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05048908abcf488cf29ae57129edcd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#ad05048908abcf488cf29ae57129edcd9">clear_errors</a> ()</td></tr>
<tr class="separator:ad05048908abcf488cf29ae57129edcd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a237a9947e25971ff54411f6cefaf6a15"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d0/d02/class_slic3r_1_1_model_volume.html">ModelVolume</a> *, <a class="el" href="../../d6/d38/struct_slic3r_1_1__3_m_f___exporter_1_1_offsets.html">Offsets</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a237a9947e25971ff54411f6cefaf6a15">VolumeToOffsetsMap</a></td></tr>
<tr class="separator:a237a9947e25971ff54411f6cefaf6a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c231ee2cd1fb144819a1ff43af3d62"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="../../d8/d7a/struct_slic3r_1_1__3_m_f___exporter_1_1_build_item.html">BuildItem</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a85c231ee2cd1fb144819a1ff43af3d62">BuildItemsList</a></td></tr>
<tr class="separator:a85c231ee2cd1fb144819a1ff43af3d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b90e89b8564c11761341f79139a8bcc"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; int, <a class="el" href="../../d2/d95/struct_slic3r_1_1__3_m_f___exporter_1_1_object_data.html">ObjectData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6b90e89b8564c11761341f79139a8bcc">IdToObjectDataMap</a></td></tr>
<tr class="separator:a6b90e89b8564c11761341f79139a8bcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6e7cc902530ee2b87bf8699dff040782"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6e7cc902530ee2b87bf8699dff040782">_save_model_to_file</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;filename, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> *thumbnail_data)</td></tr>
<tr class="separator:a6e7cc902530ee2b87bf8699dff040782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa7a6ad7159878c51e2f68009b785c17"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#afa7a6ad7159878c51e2f68009b785c17">_add_content_types_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive)</td></tr>
<tr class="separator:afa7a6ad7159878c51e2f68009b785c17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1662f676ca7b3f79339c9d234d1e0d2b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a1662f676ca7b3f79339c9d234d1e0d2b">_add_thumbnail_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> &amp;thumbnail_data)</td></tr>
<tr class="separator:a1662f676ca7b3f79339c9d234d1e0d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a820881d156b6ca0aea484fa4c297191d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a820881d156b6ca0aea484fa4c297191d">_add_relationships_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive)</td></tr>
<tr class="separator:a820881d156b6ca0aea484fa4c297191d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c7910386af606f878fb7f55e7915df7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7c7910386af606f878fb7f55e7915df7">_add_model_file_to_archive</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;filename, <a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6b90e89b8564c11761341f79139a8bcc">IdToObjectDataMap</a> &amp;objects_data)</td></tr>
<tr class="separator:a7c7910386af606f878fb7f55e7915df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da50bc4ebd11651669677fb30b915da"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a8da50bc4ebd11651669677fb30b915da">_add_object_to_model_stream</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a> &amp;context, unsigned int &amp;object_id, <a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> &amp;object, <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a85c231ee2cd1fb144819a1ff43af3d62">BuildItemsList</a> &amp;build_items, <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a237a9947e25971ff54411f6cefaf6a15">VolumeToOffsetsMap</a> &amp;volumes_offsets)</td></tr>
<tr class="separator:a8da50bc4ebd11651669677fb30b915da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a65746c94f1d296c6e97c1ad9fc9bd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a84a65746c94f1d296c6e97c1ad9fc9bd">_add_mesh_to_object_stream</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a> &amp;context, <a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> &amp;object, <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a237a9947e25971ff54411f6cefaf6a15">VolumeToOffsetsMap</a> &amp;volumes_offsets)</td></tr>
<tr class="separator:a84a65746c94f1d296c6e97c1ad9fc9bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a252c8f748b5eb83db871332e03deb970"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a252c8f748b5eb83db871332e03deb970">_add_build_to_model_stream</a> (std::stringstream &amp;stream, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a85c231ee2cd1fb144819a1ff43af3d62">BuildItemsList</a> &amp;build_items)</td></tr>
<tr class="separator:a252c8f748b5eb83db871332e03deb970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7626b0f42759f64d362d604eadee1808"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7626b0f42759f64d362d604eadee1808">_add_cut_information_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a7626b0f42759f64d362d604eadee1808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e021f45ca8ef93cca8af3f4f85610b4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a0e021f45ca8ef93cca8af3f4f85610b4">_add_layer_height_profile_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a0e021f45ca8ef93cca8af3f4f85610b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bd2d70e9d472a8625a53fced64bfe05"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a4bd2d70e9d472a8625a53fced64bfe05">_add_layer_config_ranges_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a4bd2d70e9d472a8625a53fced64bfe05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3128939c480e128deb236c89fe603bcf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a3128939c480e128deb236c89fe603bcf">_add_sla_support_points_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a3128939c480e128deb236c89fe603bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d3b925bc0a075e466bc02a16b8aefe6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6d3b925bc0a075e466bc02a16b8aefe6">_add_sla_drain_holes_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a6d3b925bc0a075e466bc02a16b8aefe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b102c740d3e4463580db7a4d64bb09c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7b102c740d3e4463580db7a4d64bb09c">_add_print_config_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> &amp;config)</td></tr>
<tr class="separator:a7b102c740d3e4463580db7a4d64bb09c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa07990688062e1b23367ef11c2da1c8e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#aa07990688062e1b23367ef11c2da1c8e">_add_model_config_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6b90e89b8564c11761341f79139a8bcc">IdToObjectDataMap</a> &amp;objects_data)</td></tr>
<tr class="separator:aa07990688062e1b23367ef11c2da1c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5504b862067e88864ecae23fc05cfb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#aea5504b862067e88864ecae23fc05cfb">_add_custom_gcode_per_print_z_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *config)</td></tr>
<tr class="separator:aea5504b862067e88864ecae23fc05cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac058b218e081fc6741604488260bdeb7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#ac058b218e081fc6741604488260bdeb7">m_fullpath_sources</a> { true }</td></tr>
<tr class="separator:ac058b218e081fc6741604488260bdeb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a103b673d100183a44466bdeb275b6770"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a103b673d100183a44466bdeb275b6770">m_zip64</a> { true }</td></tr>
<tr class="separator:a103b673d100183a44466bdeb275b6770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ff1fb3e19eb063f66737029cba7fa9e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a5ff1fb3e19eb063f66737029cba7fa9e">m_errors</a></td></tr>
<tr class="separator:a5ff1fb3e19eb063f66737029cba7fa9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a85c231ee2cd1fb144819a1ff43af3d62" name="a85c231ee2cd1fb144819a1ff43af3d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c231ee2cd1fb144819a1ff43af3d62">&#9670;&#160;</a></span>BuildItemsList</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="../../d8/d7a/struct_slic3r_1_1__3_m_f___exporter_1_1_build_item.html">BuildItem</a>&gt; <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a85c231ee2cd1fb144819a1ff43af3d62">Slic3r::_3MF_Exporter::BuildItemsList</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6b90e89b8564c11761341f79139a8bcc" name="a6b90e89b8564c11761341f79139a8bcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b90e89b8564c11761341f79139a8bcc">&#9670;&#160;</a></span>IdToObjectDataMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;int, <a class="el" href="../../d2/d95/struct_slic3r_1_1__3_m_f___exporter_1_1_object_data.html">ObjectData</a>&gt; <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6b90e89b8564c11761341f79139a8bcc">Slic3r::_3MF_Exporter::IdToObjectDataMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a237a9947e25971ff54411f6cefaf6a15" name="a237a9947e25971ff54411f6cefaf6a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a237a9947e25971ff54411f6cefaf6a15">&#9670;&#160;</a></span>VolumeToOffsetsMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d0/d02/class_slic3r_1_1_model_volume.html">ModelVolume</a>*, <a class="el" href="../../d6/d38/struct_slic3r_1_1__3_m_f___exporter_1_1_offsets.html">Offsets</a>&gt; <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a237a9947e25971ff54411f6cefaf6a15">Slic3r::_3MF_Exporter::VolumeToOffsetsMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a252c8f748b5eb83db871332e03deb970" name="a252c8f748b5eb83db871332e03deb970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a252c8f748b5eb83db871332e03deb970">&#9670;&#160;</a></span>_add_build_to_model_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_build_to_model_stream </td>
          <td>(</td>
          <td class="paramtype">std::stringstream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a85c231ee2cd1fb144819a1ff43af3d62">BuildItemsList</a> &amp;&#160;</td>
          <td class="paramname"><em>build_items</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2937</span>    {</div>
<div class="line"><span class="lineno"> 2938</span>        <span class="comment">// This happens for empty projects</span></div>
<div class="line"><span class="lineno"> 2939</span>        <span class="keywordflow">if</span> (build_items.size() == 0) {</div>
<div class="line"><span class="lineno"> 2940</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;No build item found&quot;</span>);</div>
<div class="line"><span class="lineno"> 2941</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2942</span>        }</div>
<div class="line"><span class="lineno"> 2943</span> </div>
<div class="line"><span class="lineno"> 2944</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a08fc5e0e12c2ee1f43dd91e83850345e">BUILD_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2945</span> </div>
<div class="line"><span class="lineno"> 2946</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> BuildItem&amp; item : build_items) {</div>
<div class="line"><span class="lineno"> 2947</span>            stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a96a5e899afc3724eb9646e676bf64f8e">ITEM_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae9f2d151f8ea651d15a989377c99cbe7">OBJECTID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; item.id &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae6c48a6d214926be17133c990969c642">TRANSFORM_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2948</span>            <a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a11dd90834b34265e79d083d3933c0ff3">add_transformation</a>(stream, item.transform);</div>
<div class="line"><span class="lineno"> 2949</span>            stream &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae295f94376559bbe101ae2c404b47401">PRINTABLE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; item.printable &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2950</span>        }</div>
<div class="line"><span class="lineno"> 2951</span> </div>
<div class="line"><span class="lineno"> 2952</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a08fc5e0e12c2ee1f43dd91e83850345e">BUILD_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2953</span> </div>
<div class="line"><span class="lineno"> 2954</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2955</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a08fc5e0e12c2ee1f43dd91e83850345e"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a08fc5e0e12c2ee1f43dd91e83850345e">BUILD_TAG</a></div><div class="ttdeci">static constexpr const char * BUILD_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:95</div></div>
<div class="ttc" id="a3mf_8cpp_html_a96a5e899afc3724eb9646e676bf64f8e"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a96a5e899afc3724eb9646e676bf64f8e">ITEM_TAG</a></div><div class="ttdeci">static constexpr const char * ITEM_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:96</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae295f94376559bbe101ae2c404b47401"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae295f94376559bbe101ae2c404b47401">PRINTABLE_ATTR</a></div><div class="ttdeci">static constexpr const char * PRINTABLE_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:114</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae6c48a6d214926be17133c990969c642"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae6c48a6d214926be17133c990969c642">TRANSFORM_ATTR</a></div><div class="ttdeci">static constexpr const char * TRANSFORM_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:113</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae9f2d151f8ea651d15a989377c99cbe7"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae9f2d151f8ea651d15a989377c99cbe7">OBJECTID_ATTR</a></div><div class="ttdeci">static constexpr const char * OBJECTID_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:112</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___base_html_a8aa4fbcaa8c50693cb27dc65c31f0450"><div class="ttname"><a href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">Slic3r::_3MF_Base::add_error</a></div><div class="ttdeci">void add_error(const std::string &amp;error)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:305</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a11dd90834b34265e79d083d3933c0ff3"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a11dd90834b34265e79d083d3933c0ff3">Slic3r::_3MF_Exporter::add_transformation</a></div><div class="ttdeci">static void add_transformation(std::stringstream &amp;stream, const Transform3d &amp;tr)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2926</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00095">BUILD_TAG</a>, <a class="el" href="../../#l00096">ITEM_TAG</a>, <a class="el" href="../../#l00112">OBJECTID_ATTR</a>, <a class="el" href="../../#l00114">PRINTABLE_ATTR</a>, and <a class="el" href="../../#l00113">TRANSFORM_ATTR</a>.</p>

</div>
</div>
<a id="afa7a6ad7159878c51e2f68009b785c17" name="afa7a6ad7159878c51e2f68009b785c17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa7a6ad7159878c51e2f68009b785c17">&#9670;&#160;</a></span>_add_content_types_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_content_types_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2529</span>    {</div>
<div class="line"><span class="lineno"> 2530</span>        std::stringstream stream;</div>
<div class="line"><span class="lineno"> 2531</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2532</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;Types xmlns=\&quot;http://schemas.openxmlformats.org/package/2006/content-types\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2533</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Default Extension=\&quot;rels\&quot; ContentType=\&quot;application/vnd.openxmlformats-package.relationships+xml\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2534</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Default Extension=\&quot;model\&quot; ContentType=\&quot;application/vnd.ms-package.3dmanufacturing-3dmodel+xml\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2535</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Default Extension=\&quot;png\&quot; ContentType=\&quot;image/png\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2536</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;/Types&gt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2537</span> </div>
<div class="line"><span class="lineno"> 2538</span>        std::string out = stream.str();</div>
<div class="line"><span class="lineno"> 2539</span> </div>
<div class="line"><span class="lineno"> 2540</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a1ef0e0ced0a8abe876a2f90058b82eb4">CONTENT_TYPES_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 2541</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add content types file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2542</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2543</span>        }</div>
<div class="line"><span class="lineno"> 2544</span> </div>
<div class="line"><span class="lineno"> 2545</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2546</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a1ef0e0ced0a8abe876a2f90058b82eb4"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a1ef0e0ced0a8abe876a2f90058b82eb4">CONTENT_TYPES_FILE</a></div><div class="ttdeci">const std::string CONTENT_TYPES_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:73</div></div>
<div class="ttc" id="aminiz_8c_html_ab5aac408b80e6f51a14434330fc76d6d"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_mem(mz_zip_archive *pZip, const char *pArchive_name, const void *pBuf, size_t buf_size, mz_uint level_and_flags)</div><div class="ttdef"><b>Definition</b> miniz.c:5902</div></div>
<div class="ttc" id="aminiz_8h_html_a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a></div><div class="ttdeci">@ MZ_DEFAULT_COMPRESSION</div><div class="ttdef"><b>Definition</b> miniz.h:238</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00073">CONTENT_TYPES_FILE</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, and <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_afa7a6ad7159878c51e2f68009b785c17_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aea5504b862067e88864ecae23fc05cfb" name="aea5504b862067e88864ecae23fc05cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5504b862067e88864ecae23fc05cfb">&#9670;&#160;</a></span>_add_custom_gcode_per_print_z_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_custom_gcode_per_print_z_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3351</span>{</div>
<div class="line"><span class="lineno"> 3352</span>    std::string out = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 3353</span> </div>
<div class="line"><span class="lineno"> 3354</span>    <span class="keywordflow">if</span> (!model.custom_gcode_per_print_z.gcodes.empty()) {</div>
<div class="line"><span class="lineno"> 3355</span>        pt::ptree tree;</div>
<div class="line"><span class="lineno"> 3356</span>        pt::ptree&amp; main_tree = tree.add(<span class="stringliteral">&quot;custom_gcodes_per_print_z&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3357</span> </div>
<div class="line"><span class="lineno"> 3358</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> CustomGCode::Item&amp; code : model.custom_gcode_per_print_z.gcodes) {</div>
<div class="line"><span class="lineno"> 3359</span>            pt::ptree&amp; code_tree = main_tree.add(<span class="stringliteral">&quot;code&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3360</span> </div>
<div class="line"><span class="lineno"> 3361</span>            <span class="comment">// store data of custom_gcode_per_print_z</span></div>
<div class="line"><span class="lineno"> 3362</span>            code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.print_z&quot;</span>   , code.print_z  );</div>
<div class="line"><span class="lineno"> 3363</span>            code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.type&quot;</span>      , <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(code.type));</div>
<div class="line"><span class="lineno"> 3364</span>            code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.extruder&quot;</span>  , code.extruder );</div>
<div class="line"><span class="lineno"> 3365</span>            code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.color&quot;</span>     , code.color    );</div>
<div class="line"><span class="lineno"> 3366</span>            code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.extra&quot;</span>     , code.extra    );</div>
<div class="line"><span class="lineno"> 3367</span> </div>
<div class="line"><span class="lineno"> 3368</span>            <span class="comment">// add gcode field data for the old version of the PrusaSlicer</span></div>
<div class="line"><span class="lineno"> 3369</span>            std::string <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> = code.type == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270adfce517ee7afaf5fa323dd8047d17bbc">CustomGCode::ColorChange</a> ? config-&gt;opt_string(<span class="stringliteral">&quot;color_change_gcode&quot;</span>)    :</div>
<div class="line"><span class="lineno"> 3370</span>                                code.type == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a303c456ed86c14f6702a88615b2c8e33">CustomGCode::PausePrint</a>  ? config-&gt;opt_string(<span class="stringliteral">&quot;pause_print_gcode&quot;</span>)     :</div>
<div class="line"><span class="lineno"> 3371</span>                                code.type == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a71143a7df08d4c31b003718bdc5afb49">CustomGCode::Template</a>    ? config-&gt;opt_string(<span class="stringliteral">&quot;template_custom_gcode&quot;</span>) :</div>
<div class="line"><span class="lineno"> 3372</span>                                code.type == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a645aad13c69c36cc9f98f37286af0492">CustomGCode::ToolChange</a>  ? <span class="stringliteral">&quot;tool_change&quot;</span>   : code.extra; </div>
<div class="line"><span class="lineno"> 3373</span>            code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.gcode&quot;</span>     , gcode   );</div>
<div class="line"><span class="lineno"> 3374</span>        }</div>
<div class="line"><span class="lineno"> 3375</span> </div>
<div class="line"><span class="lineno"> 3376</span>        pt::ptree&amp; mode_tree = main_tree.add(<span class="stringliteral">&quot;mode&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3377</span>        <span class="comment">// store mode of a custom_gcode_per_print_z </span></div>
<div class="line"><span class="lineno"> 3378</span>        mode_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.value&quot;</span>, model.custom_gcode_per_print_z.mode == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5a6e6f3eaf2d7cee0409ae2bb768d1152a">CustomGCode::Mode::SingleExtruder</a> ? <a class="code hl_variable" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a0edb7b33c9fd4e4d025128e52522a555">CustomGCode::SingleExtruderMode</a> :</div>
<div class="line"><span class="lineno"> 3379</span>                                         model.custom_gcode_per_print_z.<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6dfcf6612e49885a4d27301f66465788">mode</a> == CustomGCode::<a class="code hl_enumeration" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5">Mode</a>::<a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5a3adb0b025f485772e3aa1766dda9025c">MultiAsSingle</a> ?  CustomGCode::<a class="code hl_variable" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a210ce67bbf4c98f26621af0257581cd7">MultiAsSingleMode</a> :</div>
<div class="line"><span class="lineno"> 3380</span>                                         CustomGCode::<a class="code hl_variable" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab20c5bd73b6b4f6806f410c495251fa6">MultiExtruderMode</a>);</div>
<div class="line"><span class="lineno"> 3381</span> </div>
<div class="line"><span class="lineno"> 3382</span>        <span class="keywordflow">if</span> (!tree.empty()) {</div>
<div class="line"><span class="lineno"> 3383</span>            std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 3384</span>            boost::property_tree::write_xml(oss, tree);</div>
<div class="line"><span class="lineno"> 3385</span>            out = oss.str();</div>
<div class="line"><span class="lineno"> 3386</span> </div>
<div class="line"><span class="lineno"> 3387</span>            <span class="comment">// Post processing(&quot;beautification&quot;) of the output string</span></div>
<div class="line"><span class="lineno"> 3388</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n&lt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3389</span>        }</div>
<div class="line"><span class="lineno"> 3390</span>    } </div>
<div class="line"><span class="lineno"> 3391</span> </div>
<div class="line"><span class="lineno"> 3392</span>    <span class="keywordflow">if</span> (!out.empty()) {</div>
<div class="line"><span class="lineno"> 3393</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa5aeeff38108444633124fa6309f1471">CUSTOM_GCODE_PER_PRINT_Z_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 3394</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add custom Gcodes per print_z file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 3395</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3396</span>        }</div>
<div class="line"><span class="lineno"> 3397</span>    }</div>
<div class="line"><span class="lineno"> 3398</span> </div>
<div class="line"><span class="lineno"> 3399</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3400</span>}</div>
<div class="ttc" id="a3mf_8cpp_html_aa5aeeff38108444633124fa6309f1471"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aa5aeeff38108444633124fa6309f1471">CUSTOM_GCODE_PER_PRINT_Z_FILE</a></div><div class="ttdeci">const std::string CUSTOM_GCODE_PER_PRINT_Z_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:82</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a0edb7b33c9fd4e4d025128e52522a555"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a0edb7b33c9fd4e4d025128e52522a555">Slic3r::CustomGCode::SingleExtruderMode</a></div><div class="ttdeci">static constexpr char SingleExtruderMode[]</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:58</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a210ce67bbf4c98f26621af0257581cd7"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a210ce67bbf4c98f26621af0257581cd7">Slic3r::CustomGCode::MultiAsSingleMode</a></div><div class="ttdeci">static constexpr char MultiAsSingleMode[]</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:59</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a7a01777a114992be64b2a231b1c902a5"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5">Slic3r::CustomGCode::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:48</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a7a01777a114992be64b2a231b1c902a5a3adb0b025f485772e3aa1766dda9025c"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5a3adb0b025f485772e3aa1766dda9025c">Slic3r::CustomGCode::MultiAsSingle</a></div><div class="ttdeci">@ MultiAsSingle</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:51</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a7a01777a114992be64b2a231b1c902a5a6e6f3eaf2d7cee0409ae2bb768d1152a"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5a6e6f3eaf2d7cee0409ae2bb768d1152a">Slic3r::CustomGCode::SingleExtruder</a></div><div class="ttdeci">@ SingleExtruder</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:50</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab20c5bd73b6b4f6806f410c495251fa6"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab20c5bd73b6b4f6806f410c495251fa6">Slic3r::CustomGCode::MultiExtruderMode</a></div><div class="ttdeci">static constexpr char MultiExtruderMode[]</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:60</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab2cae3f5b15ab26cd45d15c66a137270a303c456ed86c14f6702a88615b2c8e33"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a303c456ed86c14f6702a88615b2c8e33">Slic3r::CustomGCode::PausePrint</a></div><div class="ttdeci">@ PausePrint</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:16</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab2cae3f5b15ab26cd45d15c66a137270a645aad13c69c36cc9f98f37286af0492"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a645aad13c69c36cc9f98f37286af0492">Slic3r::CustomGCode::ToolChange</a></div><div class="ttdeci">@ ToolChange</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab2cae3f5b15ab26cd45d15c66a137270a71143a7df08d4c31b003718bdc5afb49"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a71143a7df08d4c31b003718bdc5afb49">Slic3r::CustomGCode::Template</a></div><div class="ttdeci">@ Template</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:18</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab2cae3f5b15ab26cd45d15c66a137270adfce517ee7afaf5fa323dd8047d17bbc"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270adfce517ee7afaf5fa323dd8047d17bbc">Slic3r::CustomGCode::ColorChange</a></div><div class="ttdeci">@ ColorChange</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:15</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">Slic3r::Utils::TimeFormat::gcode</a></div><div class="ttdeci">@ gcode</div></div>
<div class="ttc" id="anamespaceigl_html_a6dfcf6612e49885a4d27301f66465788"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#a6dfcf6612e49885a4d27301f66465788">igl::mode</a></div><div class="ttdeci">IGL_INLINE void mode(const Eigen::Matrix&lt; T, Eigen::Dynamic, Eigen::Dynamic &gt; &amp;X, const int d, Eigen::Matrix&lt; T, Eigen::Dynamic, 1 &gt; &amp;M)</div><div class="ttdef"><b>Definition</b> mode.cpp:14</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01259">Slic3r::Model::custom_gcode_per_print_z</a>, <a class="el" href="../../#l00082">CUSTOM_GCODE_PER_PRINT_Z_FILE</a>, <a class="el" href="../../#l00065">Slic3r::CustomGCode::Info::gcodes</a>, <a class="el" href="../../#l00064">Slic3r::CustomGCode::Info::mode</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, and <a class="el" href="../../#l02276">Slic3r::ConfigBase::opt_string()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_aea5504b862067e88864ecae23fc05cfb_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a7626b0f42759f64d362d604eadee1808" name="a7626b0f42759f64d362d604eadee1808"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7626b0f42759f64d362d604eadee1808">&#9670;&#160;</a></span>_add_cut_information_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_cut_information_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2958</span>    {</div>
<div class="line"><span class="lineno"> 2959</span>        std::string out = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2960</span>        pt::ptree tree;</div>
<div class="line"><span class="lineno"> 2961</span> </div>
<div class="line"><span class="lineno"> 2962</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> object_cnt = 0;</div>
<div class="line"><span class="lineno"> 2963</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelObject* <span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 2964</span>            object_cnt++;</div>
<div class="line"><span class="lineno"> 2965</span>            <span class="keywordflow">if</span> (!object-&gt;is_cut())</div>
<div class="line"><span class="lineno"> 2966</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2967</span>            pt::ptree&amp; obj_tree = tree.add(<span class="stringliteral">&quot;objects.object&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2968</span> </div>
<div class="line"><span class="lineno"> 2969</span>            obj_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.id&quot;</span>, object_cnt);</div>
<div class="line"><span class="lineno"> 2970</span> </div>
<div class="line"><span class="lineno"> 2971</span>            <span class="comment">// Store info for cut_id</span></div>
<div class="line"><span class="lineno"> 2972</span>            pt::ptree&amp; cut_id_tree = obj_tree.add(<span class="stringliteral">&quot;cut_id&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2973</span> </div>
<div class="line"><span class="lineno"> 2974</span>            <span class="comment">// store cut_id atributes</span></div>
<div class="line"><span class="lineno"> 2975</span>            cut_id_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.id&quot;</span>,             object-&gt;cut_id.id().id);</div>
<div class="line"><span class="lineno"> 2976</span>            cut_id_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.check_sum&quot;</span>,      object-&gt;cut_id.check_sum());</div>
<div class="line"><span class="lineno"> 2977</span>            cut_id_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.connectors_cnt&quot;</span>, object-&gt;cut_id.connectors_cnt());</div>
<div class="line"><span class="lineno"> 2978</span> </div>
<div class="line"><span class="lineno"> 2979</span>            <span class="keywordtype">int</span> volume_idx = -1;</div>
<div class="line"><span class="lineno"> 2980</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelVolume* volume : object-&gt;volumes) {</div>
<div class="line"><span class="lineno"> 2981</span>                ++volume_idx;</div>
<div class="line"><span class="lineno"> 2982</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;is_cut_connector()) {</div>
<div class="line"><span class="lineno"> 2983</span>                    pt::ptree&amp; connectors_tree = obj_tree.add(<span class="stringliteral">&quot;connectors.connector&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2984</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.volume_id&quot;</span>,   volume_idx);</div>
<div class="line"><span class="lineno"> 2985</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.type&quot;</span>,        <span class="keywordtype">int</span>(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;cut_info.connector_type));</div>
<div class="line"><span class="lineno"> 2986</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.r_tolerance&quot;</span>, <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;cut_info.radius_tolerance);</div>
<div class="line"><span class="lineno"> 2987</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.h_tolerance&quot;</span>, <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;cut_info.height_tolerance);</div>
<div class="line"><span class="lineno"> 2988</span>                }</div>
<div class="line"><span class="lineno"> 2989</span>            }</div>
<div class="line"><span class="lineno"> 2990</span>        }</div>
<div class="line"><span class="lineno"> 2991</span> </div>
<div class="line"><span class="lineno"> 2992</span>        <span class="keywordflow">if</span> (!tree.empty()) {</div>
<div class="line"><span class="lineno"> 2993</span>            std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 2994</span>            pt::write_xml(oss, tree);</div>
<div class="line"><span class="lineno"> 2995</span>            out = oss.str();</div>
<div class="line"><span class="lineno"> 2996</span> </div>
<div class="line"><span class="lineno"> 2997</span>            <span class="comment">// Post processing(&quot;beautification&quot;) of the output string for a better preview</span></div>
<div class="line"><span class="lineno"> 2998</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;object&quot;</span>, <span class="stringliteral">&quot;&gt;\n &lt;object&quot;</span>);</div>
<div class="line"><span class="lineno"> 2999</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;cut_id&quot;</span>, <span class="stringliteral">&quot;&gt;\n  &lt;cut_id&quot;</span>);</div>
<div class="line"><span class="lineno"> 3000</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;/cut_id&gt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n  &lt;/cut_id&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3001</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;connectors&quot;</span>, <span class="stringliteral">&quot;&gt;\n  &lt;connectors&quot;</span>);</div>
<div class="line"><span class="lineno"> 3002</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;/connectors&gt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n  &lt;/connectors&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3003</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;connector&quot;</span>, <span class="stringliteral">&quot;&gt;\n   &lt;connector&quot;</span>);</div>
<div class="line"><span class="lineno"> 3004</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;/connector&gt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n   &lt;/connector&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3005</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;/object&gt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n &lt;/object&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3006</span>            <span class="comment">// OR just </span></div>
<div class="line"><span class="lineno"> 3007</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n&lt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3008</span>        }</div>
<div class="line"><span class="lineno"> 3009</span> </div>
<div class="line"><span class="lineno"> 3010</span>        <span class="keywordflow">if</span> (!out.empty()) {</div>
<div class="line"><span class="lineno"> 3011</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#abf91117cb43df22cee4e49fe6bf62a56">CUT_INFORMATION_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 3012</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add cut information file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 3013</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3014</span>            }</div>
<div class="line"><span class="lineno"> 3015</span>        }</div>
<div class="line"><span class="lineno"> 3016</span> </div>
<div class="line"><span class="lineno"> 3017</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3018</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_abf91117cb43df22cee4e49fe6bf62a56"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#abf91117cb43df22cee4e49fe6bf62a56">CUT_INFORMATION_FILE</a></div><div class="ttdeci">const std::string CUT_INFORMATION_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:83</div></div>
<div class="ttc" id="anamespaceigl_html_a852e0af0a8d4c084eb71a98b2e560a97"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">igl::volume</a></div><div class="ttdeci">IGL_INLINE void volume(const Eigen::MatrixBase&lt; DerivedV &gt; &amp;V, const Eigen::MatrixBase&lt; DerivedT &gt; &amp;T, Eigen::PlainObjectBase&lt; Derivedvol &gt; &amp;vol)</div><div class="ttdef"><b>Definition</b> volume.cpp:15</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00083">CUT_INFORMATION_FILE</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, and <a class="el" href="../../#l01254">Slic3r::Model::objects</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a7626b0f42759f64d362d604eadee1808_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a4bd2d70e9d472a8625a53fced64bfe05" name="a4bd2d70e9d472a8625a53fced64bfe05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bd2d70e9d472a8625a53fced64bfe05">&#9670;&#160;</a></span>_add_layer_config_ranges_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_layer_config_ranges_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3055</span>    {</div>
<div class="line"><span class="lineno"> 3056</span>        std::string out = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 3057</span>        pt::ptree tree;</div>
<div class="line"><span class="lineno"> 3058</span> </div>
<div class="line"><span class="lineno"> 3059</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> object_cnt = 0;</div>
<div class="line"><span class="lineno"> 3060</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelObject* <span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 3061</span>            object_cnt++;</div>
<div class="line"><span class="lineno"> 3062</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ac6d662c9b650c2689223dd86016e06d2">t_layer_config_ranges</a>&amp; ranges = <span class="keywordtype">object</span>-&gt;layer_config_ranges;</div>
<div class="line"><span class="lineno"> 3063</span>            <span class="keywordflow">if</span> (!ranges.empty())</div>
<div class="line"><span class="lineno"> 3064</span>            {</div>
<div class="line"><span class="lineno"> 3065</span>                pt::ptree&amp; obj_tree = tree.add(<span class="stringliteral">&quot;objects.object&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3066</span> </div>
<div class="line"><span class="lineno"> 3067</span>                obj_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.id&quot;</span>, object_cnt);</div>
<div class="line"><span class="lineno"> 3068</span> </div>
<div class="line"><span class="lineno"> 3069</span>                <span class="comment">// Store the layer config ranges.</span></div>
<div class="line"><span class="lineno"> 3070</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a> : ranges) {</div>
<div class="line"><span class="lineno"> 3071</span>                    pt::ptree&amp; range_tree = obj_tree.add(<span class="stringliteral">&quot;range&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3072</span> </div>
<div class="line"><span class="lineno"> 3073</span>                    <span class="comment">// store minX and maxZ</span></div>
<div class="line"><span class="lineno"> 3074</span>                    range_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.min_z&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.first.first);</div>
<div class="line"><span class="lineno"> 3075</span>                    range_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.max_z&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.first.second);</div>
<div class="line"><span class="lineno"> 3076</span> </div>
<div class="line"><span class="lineno"> 3077</span>                    <span class="comment">// store range configuration</span></div>
<div class="line"><span class="lineno"> 3078</span>                    <span class="keyword">const</span> ModelConfig&amp; config = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.second;</div>
<div class="line"><span class="lineno"> 3079</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; opt_key : config.keys()) {</div>
<div class="line"><span class="lineno"> 3080</span>                        pt::ptree&amp; opt_tree = range_tree.add(<span class="stringliteral">&quot;option&quot;</span>, config.opt_serialize(opt_key));</div>
<div class="line"><span class="lineno"> 3081</span>                        opt_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.opt_key&quot;</span>, opt_key);</div>
<div class="line"><span class="lineno"> 3082</span>                    }</div>
<div class="line"><span class="lineno"> 3083</span>                }</div>
<div class="line"><span class="lineno"> 3084</span>            }</div>
<div class="line"><span class="lineno"> 3085</span>        }</div>
<div class="line"><span class="lineno"> 3086</span> </div>
<div class="line"><span class="lineno"> 3087</span>        <span class="keywordflow">if</span> (!tree.empty()) {</div>
<div class="line"><span class="lineno"> 3088</span>            std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 3089</span>            pt::write_xml(oss, tree);</div>
<div class="line"><span class="lineno"> 3090</span>            out = oss.str();</div>
<div class="line"><span class="lineno"> 3091</span> </div>
<div class="line"><span class="lineno"> 3092</span>            <span class="comment">// Post processing(&quot;beautification&quot;) of the output string for a better preview</span></div>
<div class="line"><span class="lineno"> 3093</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;object&quot;</span>,      <span class="stringliteral">&quot;&gt;\n &lt;object&quot;</span>);</div>
<div class="line"><span class="lineno"> 3094</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;range&quot;</span>,       <span class="stringliteral">&quot;&gt;\n  &lt;range&quot;</span>);</div>
<div class="line"><span class="lineno"> 3095</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;option&quot;</span>,      <span class="stringliteral">&quot;&gt;\n   &lt;option&quot;</span>);</div>
<div class="line"><span class="lineno"> 3096</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;/range&gt;&quot;</span>,     <span class="stringliteral">&quot;&gt;\n  &lt;/range&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3097</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;/object&gt;&quot;</span>,    <span class="stringliteral">&quot;&gt;\n &lt;/object&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 3098</span>            <span class="comment">// OR just </span></div>
<div class="line"><span class="lineno"> 3099</span>            boost::replace_all(out, <span class="stringliteral">&quot;&gt;&lt;&quot;</span>,            <span class="stringliteral">&quot;&gt;\n&lt;&quot;</span>); </div>
<div class="line"><span class="lineno"> 3100</span>        }</div>
<div class="line"><span class="lineno"> 3101</span> </div>
<div class="line"><span class="lineno"> 3102</span>        <span class="keywordflow">if</span> (!out.empty()) {</div>
<div class="line"><span class="lineno"> 3103</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a041d9247323110c047204051c405fd0b">LAYER_CONFIG_RANGES_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 3104</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add layer heights profile file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 3105</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3106</span>            }</div>
<div class="line"><span class="lineno"> 3107</span>        }</div>
<div class="line"><span class="lineno"> 3108</span> </div>
<div class="line"><span class="lineno"> 3109</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3110</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a041d9247323110c047204051c405fd0b"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a041d9247323110c047204051c405fd0b">LAYER_CONFIG_RANGES_FILE</a></div><div class="ttdeci">const std::string LAYER_CONFIG_RANGES_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:79</div></div>
<div class="ttc" id="anamespace_slic3r_html_a51e1ea9708d6434aae1e8394bef8acdc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">Slic3r::range</a></div><div class="ttdeci">auto range(Cont &amp;&amp;cont)</div><div class="ttdef"><b>Definition</b> libslic3r.h:356</div></div>
<div class="ttc" id="anamespace_slic3r_html_ac6d662c9b650c2689223dd86016e06d2"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ac6d662c9b650c2689223dd86016e06d2">Slic3r::t_layer_config_ranges</a></div><div class="ttdeci">std::map&lt; t_layer_height_range, ModelConfig &gt; t_layer_config_ranges</div><div class="ttdef"><b>Definition</b> Slicing.hpp:130</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01273">Slic3r::ModelConfig::keys()</a>, <a class="el" href="../../#l00079">LAYER_CONFIG_RANGES_FILE</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l01254">Slic3r::Model::objects</a>, <a class="el" href="../../#l01279">Slic3r::ModelConfig::opt_serialize()</a>, and <a class="el" href="../../#l00356">Slic3r::range()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a4bd2d70e9d472a8625a53fced64bfe05_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a0e021f45ca8ef93cca8af3f4f85610b4" name="a0e021f45ca8ef93cca8af3f4f85610b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e021f45ca8ef93cca8af3f4f85610b4">&#9670;&#160;</a></span>_add_layer_height_profile_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_layer_height_profile_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3021</span>    {</div>
<div class="line"><span class="lineno"> 3022</span>        assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>());</div>
<div class="line"><span class="lineno"> 3023</span>        std::string out = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 3024</span>        <span class="keywordtype">char</span> buffer[1024];</div>
<div class="line"><span class="lineno"> 3025</span> </div>
<div class="line"><span class="lineno"> 3026</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">count</a> = 0;</div>
<div class="line"><span class="lineno"> 3027</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelObject* <span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 3028</span>            ++<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">count</a>;</div>
<div class="line"><span class="lineno"> 3029</span>            <span class="keyword">const</span> std::vector&lt;double&gt;&amp; layer_height_profile = <span class="keywordtype">object</span>-&gt;layer_height_profile.get();</div>
<div class="line"><span class="lineno"> 3030</span>            <span class="keywordflow">if</span> (layer_height_profile.size() &gt;= 4 &amp;&amp; layer_height_profile.size() % 2 == 0) {</div>
<div class="line"><span class="lineno"> 3031</span>                sprintf(buffer, <span class="stringliteral">&quot;object_id=%d|&quot;</span>, count);</div>
<div class="line"><span class="lineno"> 3032</span>                out += buffer;</div>
<div class="line"><span class="lineno"> 3033</span> </div>
<div class="line"><span class="lineno"> 3034</span>                <span class="comment">// Store the layer height profile as a single semicolon separated list.</span></div>
<div class="line"><span class="lineno"> 3035</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; layer_height_profile.size(); ++i) {</div>
<div class="line"><span class="lineno"> 3036</span>                    sprintf(buffer, (i == 0) ? <span class="stringliteral">&quot;%f&quot;</span> : <span class="stringliteral">&quot;;%f&quot;</span>, layer_height_profile[i]);</div>
<div class="line"><span class="lineno"> 3037</span>                    out += buffer;</div>
<div class="line"><span class="lineno"> 3038</span>                }</div>
<div class="line"><span class="lineno"> 3039</span>                </div>
<div class="line"><span class="lineno"> 3040</span>                out += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3041</span>            }</div>
<div class="line"><span class="lineno"> 3042</span>        }</div>
<div class="line"><span class="lineno"> 3043</span> </div>
<div class="line"><span class="lineno"> 3044</span>        <span class="keywordflow">if</span> (!out.empty()) {</div>
<div class="line"><span class="lineno"> 3045</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0417f94196cc92381264552896c48e23">LAYER_HEIGHTS_PROFILE_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 3046</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add layer heights profile file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 3047</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3048</span>            }</div>
<div class="line"><span class="lineno"> 3049</span>        }</div>
<div class="line"><span class="lineno"> 3050</span> </div>
<div class="line"><span class="lineno"> 3051</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3052</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a0417f94196cc92381264552896c48e23"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0417f94196cc92381264552896c48e23">LAYER_HEIGHTS_PROFILE_FILE</a></div><div class="ttdeci">const std::string LAYER_HEIGHTS_PROFILE_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:78</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7fc4c0f61833ab1abb7195cd75463e56"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">Slic3r::is_decimal_separator_point</a></div><div class="ttdeci">bool is_decimal_separator_point()</div><div class="ttdef"><b>Definition</b> LocalesUtils.cpp:47</div></div>
<div class="ttc" id="anamespaceigl_html_a1b625c8dfd9a1e79e087f984322d7e05"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">igl::count</a></div><div class="ttdeci">IGL_INLINE void count(const Eigen::SparseMatrix&lt; XType &gt; &amp;X, const int dim, Eigen::SparseVector&lt; SType &gt; &amp;S)</div><div class="ttdef"><b>Definition</b> count.cpp:12</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00047">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l00078">LAYER_HEIGHTS_PROFILE_FILE</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, and <a class="el" href="../../#l01254">Slic3r::Model::objects</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a0e021f45ca8ef93cca8af3f4f85610b4_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a84a65746c94f1d296c6e97c1ad9fc9bd" name="a84a65746c94f1d296c6e97c1ad9fc9bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a65746c94f1d296c6e97c1ad9fc9bd">&#9670;&#160;</a></span>_add_mesh_to_object_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_mesh_to_object_stream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a237a9947e25971ff54411f6cefaf6a15">VolumeToOffsetsMap</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes_offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2762</span>    {</div>
<div class="line"><span class="lineno"> 2763</span>        std::string output_buffer;</div>
<div class="line"><span class="lineno"> 2764</span>        output_buffer += <span class="stringliteral">&quot;   &lt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2765</span>        output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a7df3ac9ae506a44940711c1239690c17">MESH_TAG</a>;</div>
<div class="line"><span class="lineno"> 2766</span>        output_buffer += <span class="stringliteral">&quot;&gt;\n    &lt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2767</span>        output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae908c10d187eacecd4d88f9edb01df8a">VERTICES_TAG</a>;</div>
<div class="line"><span class="lineno"> 2768</span>        output_buffer += <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2769</span> </div>
<div class="line"><span class="lineno"> 2770</span>        <span class="keyword">auto</span> flush = [<span class="keyword">this</span>, &amp;output_buffer, &amp;context](<span class="keywordtype">bool</span> force = <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno"> 2771</span>            <span class="keywordflow">if</span> ((force &amp;&amp; ! output_buffer.empty()) || output_buffer.size() &gt;= 65536 * 16) {</div>
<div class="line"><span class="lineno"> 2772</span>                <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, output_buffer.data(), output_buffer.size())) {</div>
<div class="line"><span class="lineno"> 2773</span>                    <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Error during writing or compression&quot;</span>);</div>
<div class="line"><span class="lineno"> 2774</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2775</span>                }</div>
<div class="line"><span class="lineno"> 2776</span>                output_buffer.clear();</div>
<div class="line"><span class="lineno"> 2777</span>            }</div>
<div class="line"><span class="lineno"> 2778</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2779</span>        };</div>
<div class="line"><span class="lineno"> 2780</span> </div>
<div class="line"><span class="lineno"> 2781</span>        <span class="keyword">auto</span> format_coordinate = [](<span class="keywordtype">float</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>, <span class="keywordtype">char</span> *buf) -&gt; <span class="keywordtype">char</span>* {</div>
<div class="line"><span class="lineno"> 2782</span>            assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>());</div>
<div class="line"><span class="lineno"> 2783</span><span class="preprocessor">#if EXPORT_3MF_USE_SPIRIT_KARMA_FP</span></div>
<div class="line"><span class="lineno"> 2784</span>            <span class="comment">// Slightly faster than sprintf(&quot;%.9g&quot;), but there is an issue with the karma floating point formatter,</span></div>
<div class="line"><span class="lineno"> 2785</span>            <span class="comment">// https://github.com/boostorg/spirit/pull/586</span></div>
<div class="line"><span class="lineno"> 2786</span>            <span class="comment">// where the exported string is one digit shorter than it should be to guarantee lossless round trip.</span></div>
<div class="line"><span class="lineno"> 2787</span>            <span class="comment">// The code is left here for the ocasion boost guys improve.</span></div>
<div class="line"><span class="lineno"> 2788</span>            coordinate_type_fixed      <span class="keyword">const</span> coordinate_fixed      = coordinate_type_fixed();</div>
<div class="line"><span class="lineno"> 2789</span>            coordinate_type_scientific <span class="keyword">const</span> coordinate_scientific = coordinate_type_scientific();</div>
<div class="line"><span class="lineno"> 2790</span>            <span class="comment">// Format &quot;f&quot; in a fixed format.</span></div>
<div class="line"><span class="lineno"> 2791</span>            <span class="keywordtype">char</span> *ptr = buf;</div>
<div class="line"><span class="lineno"> 2792</span>            boost::spirit::karma::generate(ptr, coordinate_fixed, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno"> 2793</span>            <span class="comment">// Format &quot;f&quot; in a scientific format.</span></div>
<div class="line"><span class="lineno"> 2794</span>            <span class="keywordtype">char</span> *ptr2 = ptr;</div>
<div class="line"><span class="lineno"> 2795</span>            boost::spirit::karma::generate(ptr2, coordinate_scientific, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno"> 2796</span>            <span class="comment">// Return end of the shorter string.</span></div>
<div class="line"><span class="lineno"> 2797</span>            <span class="keyword">auto</span> len2 = ptr2 - ptr;</div>
<div class="line"><span class="lineno"> 2798</span>            <span class="keywordflow">if</span> (ptr - buf &gt; len2) {</div>
<div class="line"><span class="lineno"> 2799</span>                <span class="comment">// Move the shorter scientific form to the front.</span></div>
<div class="line"><span class="lineno"> 2800</span>                memcpy(buf, ptr, len2);</div>
<div class="line"><span class="lineno"> 2801</span>                ptr = buf + len2;</div>
<div class="line"><span class="lineno"> 2802</span>            }</div>
<div class="line"><span class="lineno"> 2803</span>            <span class="comment">// Return pointer to the end.</span></div>
<div class="line"><span class="lineno"> 2804</span>            <span class="keywordflow">return</span> ptr;</div>
<div class="line"><span class="lineno"> 2805</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2806</span>            <span class="comment">// Round-trippable float, shortest possible.</span></div>
<div class="line"><span class="lineno"> 2807</span>            <span class="keywordflow">return</span> buf + sprintf(buf, <span class="stringliteral">&quot;%.9g&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno"> 2808</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2809</span>        };</div>
<div class="line"><span class="lineno"> 2810</span> </div>
<div class="line"><span class="lineno"> 2811</span>        <span class="keywordtype">char</span> buf[256];</div>
<div class="line"><span class="lineno"> 2812</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> vertices_count = 0;</div>
<div class="line"><span class="lineno"> 2813</span>        <span class="keywordflow">for</span> (ModelVolume* volume : object.volumes) {</div>
<div class="line"><span class="lineno"> 2814</span>            <span class="keywordflow">if</span> (volume == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 2815</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2816</span> </div>
<div class="line"><span class="lineno"> 2817</span>            volumes_offsets.insert({ <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>, Offsets(vertices_count) });</div>
<div class="line"><span class="lineno"> 2818</span> </div>
<div class="line"><span class="lineno"> 2819</span>            <span class="keyword">const</span> <a class="code hl_struct" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;its = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mesh().its;</div>
<div class="line"><span class="lineno"> 2820</span>            <span class="keywordflow">if</span> (its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.empty()) {</div>
<div class="line"><span class="lineno"> 2821</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Found invalid mesh&quot;</span>);</div>
<div class="line"><span class="lineno"> 2822</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2823</span>            }</div>
<div class="line"><span class="lineno"> 2824</span> </div>
<div class="line"><span class="lineno"> 2825</span>            vertices_count += (int)its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size();</div>
<div class="line"><span class="lineno"> 2826</span> </div>
<div class="line"><span class="lineno"> 2827</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a>&amp; matrix = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;get_matrix();</div>
<div class="line"><span class="lineno"> 2828</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; vertex: its.vertices) {</div>
<div class="line"><span class="lineno"> 2829</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> v = (matrix * <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2cf3480dc2a3b7f0c08c7e0028492210">vertex</a>.cast&lt;<span class="keywordtype">double</span>&gt;()).cast&lt;<span class="keywordtype">float</span>&gt;();</div>
<div class="line"><span class="lineno"> 2830</span>                <span class="keywordtype">char</span> *ptr = buf;</div>
<div class="line"><span class="lineno"> 2831</span>                boost::spirit::karma::generate(ptr, boost::spirit::lit(<span class="stringliteral">&quot;     &lt;&quot;</span>) &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a6c8d6f950c4e28f428d0529b1ef792cd">VERTEX_TAG</a> &lt;&lt; <span class="stringliteral">&quot; x=\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2832</span>                ptr = format_coordinate(v.x(), ptr);</div>
<div class="line"><span class="lineno"> 2833</span>                boost::spirit::karma::generate(ptr, <span class="stringliteral">&quot;\&quot; y=\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2834</span>                ptr = format_coordinate(v.y(), ptr);</div>
<div class="line"><span class="lineno"> 2835</span>                boost::spirit::karma::generate(ptr, <span class="stringliteral">&quot;\&quot; z=\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2836</span>                ptr = format_coordinate(v.z(), ptr);</div>
<div class="line"><span class="lineno"> 2837</span>                boost::spirit::karma::generate(ptr, <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 2838</span>                *ptr = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 2839</span>                output_buffer += buf;</div>
<div class="line"><span class="lineno"> 2840</span>                <span class="keywordflow">if</span> (! flush())</div>
<div class="line"><span class="lineno"> 2841</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2842</span>            }</div>
<div class="line"><span class="lineno"> 2843</span>        }</div>
<div class="line"><span class="lineno"> 2844</span> </div>
<div class="line"><span class="lineno"> 2845</span>        output_buffer += <span class="stringliteral">&quot;    &lt;/&quot;</span>;</div>
<div class="line"><span class="lineno"> 2846</span>        output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae908c10d187eacecd4d88f9edb01df8a">VERTICES_TAG</a>;</div>
<div class="line"><span class="lineno"> 2847</span>        output_buffer += <span class="stringliteral">&quot;&gt;\n    &lt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2848</span>        output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0fa137f88f8505e91d410f5a760b3811">TRIANGLES_TAG</a>;</div>
<div class="line"><span class="lineno"> 2849</span>        output_buffer += <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2850</span> </div>
<div class="line"><span class="lineno"> 2851</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> triangles_count = 0;</div>
<div class="line"><span class="lineno"> 2852</span>        <span class="keywordflow">for</span> (ModelVolume* volume : object.volumes) {</div>
<div class="line"><span class="lineno"> 2853</span>            <span class="keywordflow">if</span> (volume == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 2854</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2855</span> </div>
<div class="line"><span class="lineno"> 2856</span>            <span class="keywordtype">bool</span> is_left_handed = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;is_left_handed();</div>
<div class="line"><span class="lineno"> 2857</span>            VolumeToOffsetsMap::iterator volume_it = volumes_offsets.find(volume);</div>
<div class="line"><span class="lineno"> 2858</span>            assert(volume_it != volumes_offsets.end());</div>
<div class="line"><span class="lineno"> 2859</span> </div>
<div class="line"><span class="lineno"> 2860</span>            <span class="keyword">const</span> <a class="code hl_struct" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;its = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mesh().its;</div>
<div class="line"><span class="lineno"> 2861</span> </div>
<div class="line"><span class="lineno"> 2862</span>            <span class="comment">// updates triangle offsets</span></div>
<div class="line"><span class="lineno"> 2863</span>            volume_it-&gt;second.first_triangle_id = triangles_count;</div>
<div class="line"><span class="lineno"> 2864</span>            triangles_count += (int)its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.size();</div>
<div class="line"><span class="lineno"> 2865</span>            volume_it-&gt;second.last_triangle_id = triangles_count - 1;</div>
<div class="line"><span class="lineno"> 2866</span> </div>
<div class="line"><span class="lineno"> 2867</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; int(its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.size()); ++ i) {</div>
<div class="line"><span class="lineno"> 2868</span>                {</div>
<div class="line"><span class="lineno"> 2869</span>                    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a019877dab3809194b223fd0948608900">Vec3i</a> &amp;idx = its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>[i];</div>
<div class="line"><span class="lineno"> 2870</span>                    <span class="keywordtype">char</span> *ptr = buf;</div>
<div class="line"><span class="lineno"> 2871</span>                    boost::spirit::karma::generate(ptr, boost::spirit::lit(<span class="stringliteral">&quot;     &lt;&quot;</span>) &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae9fb123f809579228399453e77157dd3">TRIANGLE_TAG</a> &lt;&lt;</div>
<div class="line"><span class="lineno"> 2872</span>                        <span class="stringliteral">&quot; v1=\&quot;&quot;</span> &lt;&lt; boost::spirit::int_ &lt;&lt;</div>
<div class="line"><span class="lineno"> 2873</span>                        <span class="stringliteral">&quot;\&quot; v2=\&quot;&quot;</span> &lt;&lt; boost::spirit::int_ &lt;&lt;</div>
<div class="line"><span class="lineno"> 2874</span>                        <span class="stringliteral">&quot;\&quot; v3=\&quot;&quot;</span> &lt;&lt; boost::spirit::int_ &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>,</div>
<div class="line"><span class="lineno"> 2875</span>                        idx[is_left_handed ? 2 : 0] + volume_it-&gt;second.first_vertex_id,</div>
<div class="line"><span class="lineno"> 2876</span>                        idx[1] + volume_it-&gt;second.first_vertex_id,</div>
<div class="line"><span class="lineno"> 2877</span>                        idx[is_left_handed ? 0 : 2] + volume_it-&gt;second.first_vertex_id);</div>
<div class="line"><span class="lineno"> 2878</span>                    *ptr = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 2879</span>                    output_buffer += buf;</div>
<div class="line"><span class="lineno"> 2880</span>                }</div>
<div class="line"><span class="lineno"> 2881</span> </div>
<div class="line"><span class="lineno"> 2882</span>                std::string custom_supports_data_string = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;supported_facets.get_triangle_as_string(i);</div>
<div class="line"><span class="lineno"> 2883</span>                <span class="keywordflow">if</span> (! custom_supports_data_string.empty()) {</div>
<div class="line"><span class="lineno"> 2884</span>                    output_buffer += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 2885</span>                    output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a300a1e29f028c24b59a88f28d30a6c19">CUSTOM_SUPPORTS_ATTR</a>;</div>
<div class="line"><span class="lineno"> 2886</span>                    output_buffer += <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2887</span>                    output_buffer += custom_supports_data_string;</div>
<div class="line"><span class="lineno"> 2888</span>                    output_buffer += <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2889</span>                }</div>
<div class="line"><span class="lineno"> 2890</span> </div>
<div class="line"><span class="lineno"> 2891</span>                std::string custom_seam_data_string = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;seam_facets.get_triangle_as_string(i);</div>
<div class="line"><span class="lineno"> 2892</span>                <span class="keywordflow">if</span> (! custom_seam_data_string.empty()) {</div>
<div class="line"><span class="lineno"> 2893</span>                    output_buffer += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 2894</span>                    output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a22aa81429e34bbb0042c4fd88e65a580">CUSTOM_SEAM_ATTR</a>;</div>
<div class="line"><span class="lineno"> 2895</span>                    output_buffer += <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2896</span>                    output_buffer += custom_seam_data_string;</div>
<div class="line"><span class="lineno"> 2897</span>                    output_buffer += <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2898</span>                }</div>
<div class="line"><span class="lineno"> 2899</span> </div>
<div class="line"><span class="lineno"> 2900</span>                std::string mmu_painting_data_string = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mmu_segmentation_facets.get_triangle_as_string(i);</div>
<div class="line"><span class="lineno"> 2901</span>                <span class="keywordflow">if</span> (! mmu_painting_data_string.empty()) {</div>
<div class="line"><span class="lineno"> 2902</span>                    output_buffer += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 2903</span>                    output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0be0294b2edbc1d1c66b380f429d7df8">MMU_SEGMENTATION_ATTR</a>;</div>
<div class="line"><span class="lineno"> 2904</span>                    output_buffer += <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2905</span>                    output_buffer += mmu_painting_data_string;</div>
<div class="line"><span class="lineno"> 2906</span>                    output_buffer += <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2907</span>                }</div>
<div class="line"><span class="lineno"> 2908</span> </div>
<div class="line"><span class="lineno"> 2909</span>                output_buffer += <span class="stringliteral">&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2910</span> </div>
<div class="line"><span class="lineno"> 2911</span>                <span class="keywordflow">if</span> (! flush())</div>
<div class="line"><span class="lineno"> 2912</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2913</span>            }</div>
<div class="line"><span class="lineno"> 2914</span>        }</div>
<div class="line"><span class="lineno"> 2915</span> </div>
<div class="line"><span class="lineno"> 2916</span>        output_buffer += <span class="stringliteral">&quot;    &lt;/&quot;</span>;</div>
<div class="line"><span class="lineno"> 2917</span>        output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0fa137f88f8505e91d410f5a760b3811">TRIANGLES_TAG</a>;</div>
<div class="line"><span class="lineno"> 2918</span>        output_buffer += <span class="stringliteral">&quot;&gt;\n   &lt;/&quot;</span>;</div>
<div class="line"><span class="lineno"> 2919</span>        output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a7df3ac9ae506a44940711c1239690c17">MESH_TAG</a>;</div>
<div class="line"><span class="lineno"> 2920</span>        output_buffer += <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2921</span> </div>
<div class="line"><span class="lineno"> 2922</span>        <span class="comment">// Force flush.</span></div>
<div class="line"><span class="lineno"> 2923</span>        <span class="keywordflow">return</span> flush(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2924</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a0be0294b2edbc1d1c66b380f429d7df8"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0be0294b2edbc1d1c66b380f429d7df8">MMU_SEGMENTATION_ATTR</a></div><div class="ttdeci">static constexpr const char * MMU_SEGMENTATION_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:118</div></div>
<div class="ttc" id="a3mf_8cpp_html_a0fa137f88f8505e91d410f5a760b3811"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0fa137f88f8505e91d410f5a760b3811">TRIANGLES_TAG</a></div><div class="ttdeci">static constexpr const char * TRIANGLES_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:91</div></div>
<div class="ttc" id="a3mf_8cpp_html_a22aa81429e34bbb0042c4fd88e65a580"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a22aa81429e34bbb0042c4fd88e65a580">CUSTOM_SEAM_ATTR</a></div><div class="ttdeci">static constexpr const char * CUSTOM_SEAM_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:117</div></div>
<div class="ttc" id="a3mf_8cpp_html_a300a1e29f028c24b59a88f28d30a6c19"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a300a1e29f028c24b59a88f28d30a6c19">CUSTOM_SUPPORTS_ATTR</a></div><div class="ttdeci">static constexpr const char * CUSTOM_SUPPORTS_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:116</div></div>
<div class="ttc" id="a3mf_8cpp_html_a6c8d6f950c4e28f428d0529b1ef792cd"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a6c8d6f950c4e28f428d0529b1ef792cd">VERTEX_TAG</a></div><div class="ttdeci">static constexpr const char * VERTEX_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:90</div></div>
<div class="ttc" id="a3mf_8cpp_html_a7df3ac9ae506a44940711c1239690c17"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a7df3ac9ae506a44940711c1239690c17">MESH_TAG</a></div><div class="ttdeci">static constexpr const char * MESH_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:88</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae908c10d187eacecd4d88f9edb01df8a"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae908c10d187eacecd4d88f9edb01df8a">VERTICES_TAG</a></div><div class="ttdeci">static constexpr const char * VERTICES_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:89</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae9fb123f809579228399453e77157dd3"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae9fb123f809579228399453e77157dd3">TRIANGLE_TAG</a></div><div class="ttdeci">static constexpr const char * TRIANGLE_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:92</div></div>
<div class="ttc" id="aminiz_8c_html_ab89d8936d177baba8f06eac7b618a6dc"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_staged_data(mz_zip_writer_staged_context *pContext, const char *pRead_buf, size_t n)</div><div class="ttdef"><b>Definition</b> miniz.c:6856</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0051feabeb83fb74b6fd901fc4839e77"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Slic3r::Transform3d</a></div><div class="ttdeci">Eigen::Transform&lt; double, 3, Eigen::Affine, Eigen::DontAlign &gt; Transform3d</div><div class="ttdef"><b>Definition</b> Point.hpp:81</div></div>
<div class="ttc" id="anamespace_slic3r_html_a019877dab3809194b223fd0948608900"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a019877dab3809194b223fd0948608900">Slic3r::Vec3i</a></div><div class="ttdeci">Eigen::Matrix&lt; int, 3, 1, Eigen::DontAlign &gt; Vec3i</div><div class="ttdef"><b>Definition</b> Point.hpp:40</div></div>
<div class="ttc" id="anamespace_slic3r_html_a4e0a52bc52a09b283b7b06e2f0c272cc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Slic3r::Vec3f</a></div><div class="ttdeci">Eigen::Matrix&lt; float, 3, 1, Eigen::DontAlign &gt; Vec3f</div><div class="ttdef"><b>Definition</b> Point.hpp:49</div></div>
<div class="ttc" id="anamespace_slic3r_html_a92b2e5013291a55201abda7303b67baf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">Slic3r::f</a></div><div class="ttdeci">static double f(double x, double z_sin, double z_cos, bool vertical, bool flip)</div><div class="ttdef"><b>Definition</b> FillGyroid.cpp:12</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a2cf3480dc2a3b7f0c08c7e0028492210"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2cf3480dc2a3b7f0c08c7e0028492210">libnest2d::shapelike::vertex</a></div><div class="ttdeci">TPoint&lt; S &gt; &amp; vertex(S &amp;sh, unsigned long idx, const PolygonTag &amp;)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:1180</div></div>
<div class="ttc" id="astructindexed__triangle__set_html"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a></div><div class="ttdef"><b>Definition</b> stl.h:157</div></div>
<div class="ttc" id="astructindexed__triangle__set_html_a86d0433f7db7abf0f94c7e3d1302b09c"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">indexed_triangle_set::vertices</a></div><div class="ttdeci">std::vector&lt; stl_vertex &gt; vertices</div><div class="ttdef"><b>Definition</b> stl.h:165</div></div>
<div class="ttc" id="astructindexed__triangle__set_html_a8e9771f92d4834e98a5ed13f131d71f6"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indexed_triangle_set::indices</a></div><div class="ttdeci">std::vector&lt; stl_triangle_vertex_indices &gt; indices</div><div class="ttdef"><b>Definition</b> stl.h:164</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00117">CUSTOM_SEAM_ATTR</a>, <a class="el" href="../../#l00116">CUSTOM_SUPPORTS_ATTR</a>, <a class="el" href="../../#l00164">indexed_triangle_set::indices</a>, <a class="el" href="../../#l00047">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l00088">MESH_TAG</a>, <a class="el" href="../../#l00118">MMU_SEGMENTATION_ATTR</a>, <a class="el" href="../../#l06856">mz_zip_writer_add_staged_data()</a>, <a class="el" href="../../#l00092">TRIANGLE_TAG</a>, <a class="el" href="../../#l00091">TRIANGLES_TAG</a>, <a class="el" href="../../#l00090">VERTEX_TAG</a>, <a class="el" href="../../#l00165">indexed_triangle_set::vertices</a>, and <a class="el" href="../../#l00089">VERTICES_TAG</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a84a65746c94f1d296c6e97c1ad9fc9bd_cgraph.svg" width="100%" height="505"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa07990688062e1b23367ef11c2da1c8e" name="aa07990688062e1b23367ef11c2da1c8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa07990688062e1b23367ef11c2da1c8e">&#9670;&#160;</a></span>_add_model_config_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_model_config_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6b90e89b8564c11761341f79139a8bcc">IdToObjectDataMap</a> &amp;&#160;</td>
          <td class="paramname"><em>objects_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3220</span>    {</div>
<div class="line"><span class="lineno"> 3221</span>        <span class="keyword">enum class</span> MetadataType{</div>
<div class="line"><span class="lineno"> 3222</span>            object,</div>
<div class="line"><span class="lineno"> 3223</span>            <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a></div>
<div class="line"><span class="lineno"> 3224</span>        };</div>
<div class="line"><span class="lineno"> 3225</span> </div>
<div class="line"><span class="lineno"> 3226</span>        <span class="keyword">auto</span> add_metadata = [](std::stringstream &amp;stream, <span class="keywordtype">unsigned</span> indent, MetadataType type,</div>
<div class="line"><span class="lineno"> 3227</span>            <span class="keyword">const</span> std::string &amp;key, <span class="keyword">const</span> std::string &amp;value) {</div>
<div class="line"><span class="lineno"> 3228</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *type_value;</div>
<div class="line"><span class="lineno"> 3229</span>            <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><span class="lineno"> 3230</span>            <span class="keywordflow">case</span> MetadataType::object: type_value = <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a1fc537edfb2919ddf424f50604e26de2">OBJECT_TYPE</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3231</span>            <span class="keywordflow">case</span> MetadataType::volume: type_value = <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a01558f4402bb228e951928753ca082d7">VOLUME_TYPE</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3232</span>            };</div>
<div class="line"><span class="lineno"> 3233</span>            stream &lt;&lt; std::string(indent, <span class="charliteral">&#39; &#39;</span>) &lt;&lt; <span class="charliteral">&#39;&lt;&#39;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> </div>
<div class="line"><span class="lineno"> 3234</span>                &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa898edf600152110db5bbebcdd3edfe0">TYPE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; type_value &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> </div>
<div class="line"><span class="lineno"> 3235</span>                &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a>  &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> </div>
<div class="line"><span class="lineno"> 3236</span>                &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aa982931c6c3a1d79f04d59b091a81675">xml_escape_double_quotes_attribute_value</a>(value) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3237</span>        };</div>
<div class="line"><span class="lineno"> 3238</span> </div>
<div class="line"><span class="lineno"> 3239</span>        std::stringstream stream;</div>
<div class="line"><span class="lineno"> 3240</span>        <span class="comment">// Store mesh transformation in full precision, as the volumes are stored transformed and they need to be transformed back</span></div>
<div class="line"><span class="lineno"> 3241</span>        <span class="comment">// when loaded as accurately as possible.</span></div>
<div class="line"><span class="lineno"> 3242</span>    stream &lt;&lt; std::setprecision(std::numeric_limits&lt;double&gt;::max_digits10);</div>
<div class="line"><span class="lineno"> 3243</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3244</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8ede86d23de41af4793f4b1fd61d3fbf">CONFIG_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3245</span> </div>
<div class="line"><span class="lineno"> 3246</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> IdToObjectDataMap::value_type&amp; obj_metadata : objects_data) {</div>
<div class="line"><span class="lineno"> 3247</span>            <span class="keyword">const</span> ModelObject* obj = obj_metadata.second.object;</div>
<div class="line"><span class="lineno"> 3248</span>            <span class="keywordflow">if</span> (obj == <span class="keyword">nullptr</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3249</span>            <span class="comment">// Output of instances count added because of github #3435, currently not used by PrusaSlicer</span></div>
<div class="line"><span class="lineno"> 3250</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ad080ba0c82088d73a1eb15db3efcaa61">ID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; obj_metadata.first &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a987beb7a5bf543c2c70a0c9c00057d47">INSTANCESCOUNT_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; obj-&gt;instances.size() &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3251</span> </div>
<div class="line"><span class="lineno"> 3252</span>            <span class="comment">// stores object&#39;s name</span></div>
<div class="line"><span class="lineno"> 3253</span>            <span class="keywordflow">if</span> (!obj-&gt;name.empty())                    </div>
<div class="line"><span class="lineno"> 3254</span>                add_metadata(stream, 2, MetadataType::object, <span class="stringliteral">&quot;name&quot;</span>, obj-&gt;name);</div>
<div class="line"><span class="lineno"> 3255</span>            <span class="comment">// stores object&#39;s config data</span></div>
<div class="line"><span class="lineno"> 3256</span>            <span class="keyword">const</span> ModelConfigObject &amp;config = obj-&gt;config;</div>
<div class="line"><span class="lineno"> 3257</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; key : config.keys())</div>
<div class="line"><span class="lineno"> 3258</span>                add_metadata(stream, 2, MetadataType::object, key, config.opt_serialize(key));</div>
<div class="line"><span class="lineno"> 3259</span> </div>
<div class="line"><span class="lineno"> 3260</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelVolume* volume : obj_metadata.second.object-&gt;volumes) {</div>
<div class="line"><span class="lineno"> 3261</span>                <span class="keywordflow">if</span> (volume == <span class="keyword">nullptr</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3262</span>                <span class="keyword">const</span> <a class="code hl_typedef" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a237a9947e25971ff54411f6cefaf6a15">VolumeToOffsetsMap</a>&amp; offsets = obj_metadata.second.volumes_offsets;</div>
<div class="line"><span class="lineno"> 3263</span>                VolumeToOffsetsMap::const_iterator it = offsets.find(volume);</div>
<div class="line"><span class="lineno"> 3264</span>                <span class="keywordflow">if</span> (it != offsets.end()) {</div>
<div class="line"><span class="lineno"> 3265</span>                    <span class="comment">// stores volume&#39;s offsets</span></div>
<div class="line"><span class="lineno"> 3266</span>                    stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a24875e75af8354b1065d09c5f7e99a66">VOLUME_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 3267</span>                    stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a2398b10ce575d2da3db9ccd0b0966280">FIRST_TRIANGLE_ID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; it-&gt;second.first_triangle_id &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 3268</span>                    stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a6fc8295a9c4d1ddbddc1ff8f0ffd67e8">LAST_TRIANGLE_ID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; it-&gt;second.last_triangle_id &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3269</span> </div>
<div class="line"><span class="lineno"> 3270</span>                    <span class="comment">// stores volume&#39;s name</span></div>
<div class="line"><span class="lineno"> 3271</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;name.empty())</div>
<div class="line"><span class="lineno"> 3272</span>                        add_metadata(stream, 3, MetadataType::volume, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0d925420cd93b1f5c4ade7ad0928bbec">NAME_KEY</a>, <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;name);</div>
<div class="line"><span class="lineno"> 3273</span> </div>
<div class="line"><span class="lineno"> 3274</span>                    <span class="comment">// stores volume&#39;s modifier field (legacy, to support old slicers)</span></div>
<div class="line"><span class="lineno"> 3275</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;is_modifier())</div>
<div class="line"><span class="lineno"> 3276</span>                        add_metadata(stream, 3, MetadataType::volume, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a2d7a2576b4785c92e0f743ef8beab7ee">MODIFIER_KEY</a>, <span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"><span class="lineno"> 3277</span>                    <span class="comment">// stores volume&#39;s type (overrides the modifier field above)</span></div>
<div class="line"><span class="lineno"> 3278</span>                    add_metadata(stream, 3, MetadataType::volume, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ad89d4419da7e73f9ad32f7a7cf033bf4">VOLUME_TYPE_KEY</a>, <a class="code hl_function" href="../../d0/d02/class_slic3r_1_1_model_volume.html#a431232754900ae33324150c31146361e">ModelVolume::type_to_string</a>(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;type()));</div>
<div class="line"><span class="lineno"> 3279</span> </div>
<div class="line"><span class="lineno"> 3280</span>                    <span class="comment">// stores volume&#39;s local matrix</span></div>
<div class="line"><span class="lineno"> 3281</span>                    stream &lt;&lt; <span class="stringliteral">&quot;   &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa898edf600152110db5bbebcdd3edfe0">TYPE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a01558f4402bb228e951928753ca082d7">VOLUME_TYPE</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ac23888c316ec3ce5cac25a89cdf714d3">MATRIX_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 3282</span>                    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> matrix = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;get_matrix() * <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.transform.get_matrix();</div>
<div class="line"><span class="lineno"> 3283</span>                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = 0; r &lt; 4; ++r) {</div>
<div class="line"><span class="lineno"> 3284</span>                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &lt; 4; ++<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>) {</div>
<div class="line"><span class="lineno"> 3285</span>                            stream &lt;&lt; matrix(r, c);</div>
<div class="line"><span class="lineno"> 3286</span>                            <span class="keywordflow">if</span> (r != 3 || c != 3)</div>
<div class="line"><span class="lineno"> 3287</span>                                stream &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 3288</span>                        }</div>
<div class="line"><span class="lineno"> 3289</span>                    }</div>
<div class="line"><span class="lineno"> 3290</span>                    stream &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3291</span> </div>
<div class="line"><span class="lineno"> 3292</span>                    <span class="comment">// stores volume&#39;s source data</span></div>
<div class="line"><span class="lineno"> 3293</span>                    {</div>
<div class="line"><span class="lineno"> 3294</span>                        std::string input_file = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(<a class="code hl_variable" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#ac058b218e081fc6741604488260bdeb7">m_fullpath_sources</a> ? <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.input_file : <a class="code hl_namespace" href="../../d4/da9/namespaceboost.html">boost</a>::filesystem::path(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.input_file).filename().<a class="code hl_function" href="../../d3/d95/config_8c.html#a69ceb5fdd0408d350eca81080b373463">string</a>());</div>
<div class="line"><span class="lineno"> 3295</span>                        std::string prefix = std::string(<span class="stringliteral">&quot;   &lt;&quot;</span>) + <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> + <span class="stringliteral">&quot; &quot;</span> + <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa898edf600152110db5bbebcdd3edfe0">TYPE_ATTR</a> + <span class="stringliteral">&quot;=\&quot;&quot;</span> + <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a01558f4402bb228e951928753ca082d7">VOLUME_TYPE</a> + <span class="stringliteral">&quot;\&quot; &quot;</span> + <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> + <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 3296</span>                        <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.input_file.empty()) {</div>
<div class="line"><span class="lineno"> 3297</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ac71b871f35aae97d0bed5f72a6acd39a">SOURCE_FILE_KEY</a>      &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; input_file &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3298</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a762bc29f9ee3a8bf1708b9c42d75c915">SOURCE_OBJECT_ID_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.object_idx &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3299</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a041643ab1e28df90a90e19567bcb3f14">SOURCE_VOLUME_ID_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.volume_idx &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3300</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a5768cbf99ff140b4bf6f158ab6be368f">SOURCE_OFFSET_X_KEY</a>  &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.mesh_offset(0) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3301</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ab0f6f918a021aa5e73a248137b95a224">SOURCE_OFFSET_Y_KEY</a>  &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.mesh_offset(1) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3302</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a517ada2546c0c81867c96a9d4eec42c1">SOURCE_OFFSET_Z_KEY</a>  &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.mesh_offset(2) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3303</span>                        }</div>
<div class="line"><span class="lineno"> 3304</span>                        assert(! <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_converted_from_inches || ! <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_converted_from_meters);</div>
<div class="line"><span class="lineno"> 3305</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_converted_from_inches)</div>
<div class="line"><span class="lineno"> 3306</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a076c7b136f06315f92198e706a860df1">SOURCE_IN_INCHES_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;1\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3307</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_converted_from_meters)</div>
<div class="line"><span class="lineno"> 3308</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a1dbe502fa05a65ac38bbbe43f225e967">SOURCE_IN_METERS_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;1\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3309</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_from_builtin_objects)</div>
<div class="line"><span class="lineno"> 3310</span>                            stream &lt;&lt; prefix &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a12a9aa1d81c37e97328e8aaf4def6080">SOURCE_IS_BUILTIN_VOLUME_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;1\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3311</span>                    }</div>
<div class="line"><span class="lineno"> 3312</span> </div>
<div class="line"><span class="lineno"> 3313</span>                    <span class="comment">// stores volume&#39;s config data</span></div>
<div class="line"><span class="lineno"> 3314</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; key : <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;config.keys()) {</div>
<div class="line"><span class="lineno"> 3315</span>                        stream &lt;&lt; <span class="stringliteral">&quot;   &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa898edf600152110db5bbebcdd3edfe0">TYPE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a01558f4402bb228e951928753ca082d7">VOLUME_TYPE</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;config.opt_serialize(key) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3316</span>                    }</div>
<div class="line"><span class="lineno"> 3317</span>                                                        </div>
<div class="line"><span class="lineno"> 3318</span>                    <span class="comment">// stores volume&#39;s text data</span></div>
<div class="line"><span class="lineno"> 3319</span>                    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;tc = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;text_configuration;</div>
<div class="line"><span class="lineno"> 3320</span>                    <span class="keywordflow">if</span> (tc.has_value())</div>
<div class="line"><span class="lineno"> 3321</span>                        <a class="code hl_function" href="../../d5/dab/struct_slic3r_1_1_text_configuration_serialization.html#aa7dd9f329615e824b002b05f5238dd81">TextConfigurationSerialization::create_fix_and_store</a>(stream, *tc, *volume);                    </div>
<div class="line"><span class="lineno"> 3322</span> </div>
<div class="line"><span class="lineno"> 3323</span>                    <span class="comment">// stores mesh&#39;s statistics</span></div>
<div class="line"><span class="lineno"> 3324</span>                    <span class="keyword">const</span> RepairedMeshErrors&amp; stats = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mesh().stats().repaired_errors;</div>
<div class="line"><span class="lineno"> 3325</span>                    stream &lt;&lt; <span class="stringliteral">&quot;   &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a7df3ac9ae506a44940711c1239690c17">MESH_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 3326</span>                    stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a471a7df237939b038c72201cc381a32e">MESH_STAT_EDGES_FIXED</a>        &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.edges_fixed        &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 3327</span>                    stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#af13168c27b357c0ba020dd827bc1f71e">MESH_STAT_DEGENERATED_FACETS</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.degenerate_facets  &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 3328</span>                    stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9b49bf713a30a58a97532ed2ff759d2b">MESH_STAT_FACETS_REMOVED</a>     &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.facets_removed     &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 3329</span>                    stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8a6c599d6224aa8820bce737a0668ab4">MESH_STAT_FACETS_RESERVED</a>    &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.facets_reversed    &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 3330</span>                    stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0715d32dabcf3ddbae18cfd933feca91">MESH_STAT_BACKWARDS_EDGES</a>    &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.backwards_edges    &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3331</span> </div>
<div class="line"><span class="lineno"> 3332</span>                    stream &lt;&lt; <span class="stringliteral">&quot;  &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a24875e75af8354b1065d09c5f7e99a66">VOLUME_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3333</span>                }</div>
<div class="line"><span class="lineno"> 3334</span>            }</div>
<div class="line"><span class="lineno"> 3335</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3336</span>        }</div>
<div class="line"><span class="lineno"> 3337</span> </div>
<div class="line"><span class="lineno"> 3338</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8ede86d23de41af4793f4b1fd61d3fbf">CONFIG_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3339</span> </div>
<div class="line"><span class="lineno"> 3340</span>        std::string out = stream.str();</div>
<div class="line"><span class="lineno"> 3341</span> </div>
<div class="line"><span class="lineno"> 3342</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ac3539f9febf4af59b334a13cb7bc0901">MODEL_CONFIG_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 3343</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add model config file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 3344</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3345</span>        }</div>
<div class="line"><span class="lineno"> 3346</span> </div>
<div class="line"><span class="lineno"> 3347</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3348</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a01558f4402bb228e951928753ca082d7"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a01558f4402bb228e951928753ca082d7">VOLUME_TYPE</a></div><div class="ttdeci">static constexpr const char * VOLUME_TYPE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:126</div></div>
<div class="ttc" id="a3mf_8cpp_html_a041643ab1e28df90a90e19567bcb3f14"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a041643ab1e28df90a90e19567bcb3f14">SOURCE_VOLUME_ID_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_VOLUME_ID_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:134</div></div>
<div class="ttc" id="a3mf_8cpp_html_a0715d32dabcf3ddbae18cfd933feca91"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0715d32dabcf3ddbae18cfd933feca91">MESH_STAT_BACKWARDS_EDGES</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_BACKWARDS_EDGES</div><div class="ttdef"><b>Definition</b> 3mf.cpp:146</div></div>
<div class="ttc" id="a3mf_8cpp_html_a076c7b136f06315f92198e706a860df1"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a076c7b136f06315f92198e706a860df1">SOURCE_IN_INCHES_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_IN_INCHES_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:138</div></div>
<div class="ttc" id="a3mf_8cpp_html_a0d925420cd93b1f5c4ade7ad0928bbec"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0d925420cd93b1f5c4ade7ad0928bbec">NAME_KEY</a></div><div class="ttdeci">static constexpr const char * NAME_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:128</div></div>
<div class="ttc" id="a3mf_8cpp_html_a12a9aa1d81c37e97328e8aaf4def6080"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a12a9aa1d81c37e97328e8aaf4def6080">SOURCE_IS_BUILTIN_VOLUME_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_IS_BUILTIN_VOLUME_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:140</div></div>
<div class="ttc" id="a3mf_8cpp_html_a1dbe502fa05a65ac38bbbe43f225e967"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a1dbe502fa05a65ac38bbbe43f225e967">SOURCE_IN_METERS_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_IN_METERS_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:139</div></div>
<div class="ttc" id="a3mf_8cpp_html_a1fc537edfb2919ddf424f50604e26de2"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a1fc537edfb2919ddf424f50604e26de2">OBJECT_TYPE</a></div><div class="ttdeci">static constexpr const char * OBJECT_TYPE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:125</div></div>
<div class="ttc" id="a3mf_8cpp_html_a2398b10ce575d2da3db9ccd0b0966280"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a2398b10ce575d2da3db9ccd0b0966280">FIRST_TRIANGLE_ID_ATTR</a></div><div class="ttdeci">static constexpr const char * FIRST_TRIANGLE_ID_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:122</div></div>
<div class="ttc" id="a3mf_8cpp_html_a24875e75af8354b1065d09c5f7e99a66"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a24875e75af8354b1065d09c5f7e99a66">VOLUME_TAG</a></div><div class="ttdeci">static constexpr const char * VOLUME_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:100</div></div>
<div class="ttc" id="a3mf_8cpp_html_a2d7a2576b4785c92e0f743ef8beab7ee"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a2d7a2576b4785c92e0f743ef8beab7ee">MODIFIER_KEY</a></div><div class="ttdeci">static constexpr const char * MODIFIER_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:129</div></div>
<div class="ttc" id="a3mf_8cpp_html_a471a7df237939b038c72201cc381a32e"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a471a7df237939b038c72201cc381a32e">MESH_STAT_EDGES_FIXED</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_EDGES_FIXED</div><div class="ttdef"><b>Definition</b> 3mf.cpp:142</div></div>
<div class="ttc" id="a3mf_8cpp_html_a517ada2546c0c81867c96a9d4eec42c1"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a517ada2546c0c81867c96a9d4eec42c1">SOURCE_OFFSET_Z_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_OFFSET_Z_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:137</div></div>
<div class="ttc" id="a3mf_8cpp_html_a5768cbf99ff140b4bf6f158ab6be368f"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a5768cbf99ff140b4bf6f158ab6be368f">SOURCE_OFFSET_X_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_OFFSET_X_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:135</div></div>
<div class="ttc" id="a3mf_8cpp_html_a6fc8295a9c4d1ddbddc1ff8f0ffd67e8"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a6fc8295a9c4d1ddbddc1ff8f0ffd67e8">LAST_TRIANGLE_ID_ATTR</a></div><div class="ttdeci">static constexpr const char * LAST_TRIANGLE_ID_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:123</div></div>
<div class="ttc" id="a3mf_8cpp_html_a762bc29f9ee3a8bf1708b9c42d75c915"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a762bc29f9ee3a8bf1708b9c42d75c915">SOURCE_OBJECT_ID_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_OBJECT_ID_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:133</div></div>
<div class="ttc" id="a3mf_8cpp_html_a8a6c599d6224aa8820bce737a0668ab4"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a8a6c599d6224aa8820bce737a0668ab4">MESH_STAT_FACETS_RESERVED</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_FACETS_RESERVED</div><div class="ttdef"><b>Definition</b> 3mf.cpp:145</div></div>
<div class="ttc" id="a3mf_8cpp_html_a8ede86d23de41af4793f4b1fd61d3fbf"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a8ede86d23de41af4793f4b1fd61d3fbf">CONFIG_TAG</a></div><div class="ttdeci">static constexpr const char * CONFIG_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:99</div></div>
<div class="ttc" id="a3mf_8cpp_html_a987beb7a5bf543c2c70a0c9c00057d47"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a987beb7a5bf543c2c70a0c9c00057d47">INSTANCESCOUNT_ATTR</a></div><div class="ttdeci">static constexpr const char * INSTANCESCOUNT_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:115</div></div>
<div class="ttc" id="a3mf_8cpp_html_a9b49bf713a30a58a97532ed2ff759d2b"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a9b49bf713a30a58a97532ed2ff759d2b">MESH_STAT_FACETS_REMOVED</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_FACETS_REMOVED</div><div class="ttdef"><b>Definition</b> 3mf.cpp:144</div></div>
<div class="ttc" id="a3mf_8cpp_html_aa1f3d37416a0d1184807707c0b636c06"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a></div><div class="ttdeci">static constexpr const char * VALUE_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:121</div></div>
<div class="ttc" id="a3mf_8cpp_html_aa898edf600152110db5bbebcdd3edfe0"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aa898edf600152110db5bbebcdd3edfe0">TYPE_ATTR</a></div><div class="ttdeci">static constexpr const char * TYPE_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:104</div></div>
<div class="ttc" id="a3mf_8cpp_html_ab0f6f918a021aa5e73a248137b95a224"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ab0f6f918a021aa5e73a248137b95a224">SOURCE_OFFSET_Y_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_OFFSET_Y_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:136</div></div>
<div class="ttc" id="a3mf_8cpp_html_ac23888c316ec3ce5cac25a89cdf714d3"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ac23888c316ec3ce5cac25a89cdf714d3">MATRIX_KEY</a></div><div class="ttdeci">static constexpr const char * MATRIX_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:131</div></div>
<div class="ttc" id="a3mf_8cpp_html_ac3539f9febf4af59b334a13cb7bc0901"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ac3539f9febf4af59b334a13cb7bc0901">MODEL_CONFIG_FILE</a></div><div class="ttdeci">const std::string MODEL_CONFIG_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:77</div></div>
<div class="ttc" id="a3mf_8cpp_html_ac71b871f35aae97d0bed5f72a6acd39a"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ac71b871f35aae97d0bed5f72a6acd39a">SOURCE_FILE_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_FILE_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:132</div></div>
<div class="ttc" id="a3mf_8cpp_html_ad080ba0c82088d73a1eb15db3efcaa61"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ad080ba0c82088d73a1eb15db3efcaa61">ID_ATTR</a></div><div class="ttdeci">static constexpr const char * ID_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:105</div></div>
<div class="ttc" id="a3mf_8cpp_html_ad89d4419da7e73f9ad32f7a7cf033bf4"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ad89d4419da7e73f9ad32f7a7cf033bf4">VOLUME_TYPE_KEY</a></div><div class="ttdeci">static constexpr const char * VOLUME_TYPE_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:130</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae23d3300edaed696137c8293849777bb"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a></div><div class="ttdeci">static constexpr const char * KEY_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:120</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae8ef4e75baea760fe83ddc47cf15face"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a></div><div class="ttdeci">static constexpr const char * METADATA_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:97</div></div>
<div class="ttc" id="a3mf_8cpp_html_aefc072810a4e2eeb374dde8c1b978549"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a></div><div class="ttdeci">static constexpr const char * OBJECT_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:87</div></div>
<div class="ttc" id="a3mf_8cpp_html_af13168c27b357c0ba020dd827bc1f71e"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#af13168c27b357c0ba020dd827bc1f71e">MESH_STAT_DEGENERATED_FACETS</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_DEGENERATED_FACETS</div><div class="ttdef"><b>Definition</b> 3mf.cpp:143</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a237a9947e25971ff54411f6cefaf6a15"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a237a9947e25971ff54411f6cefaf6a15">Slic3r::_3MF_Exporter::VolumeToOffsetsMap</a></div><div class="ttdeci">std::map&lt; const ModelVolume *, Offsets &gt; VolumeToOffsetsMap</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2351</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_ac058b218e081fc6741604488260bdeb7"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#ac058b218e081fc6741604488260bdeb7">Slic3r::_3MF_Exporter::m_fullpath_sources</a></div><div class="ttdeci">bool m_fullpath_sources</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2367</div></div>
<div class="ttc" id="aclass_slic3r_1_1_model_volume_html_a431232754900ae33324150c31146361e"><div class="ttname"><a href="../../d0/d02/class_slic3r_1_1_model_volume.html#a431232754900ae33324150c31146361e">Slic3r::ModelVolume::type_to_string</a></div><div class="ttdeci">static std::string type_to_string(const ModelVolumeType t)</div><div class="ttdef"><b>Definition</b> Model.cpp:2138</div></div>
<div class="ttc" id="aconfig_8c_html_a69ceb5fdd0408d350eca81080b373463"><div class="ttname"><a href="../../d3/d95/config_8c.html#a69ceb5fdd0408d350eca81080b373463">string</a></div><div class="ttdeci">TOKEN * string(char *text)</div><div class="ttdef"><b>Definition</b> config.c:233</div></div>
<div class="ttc" id="anamespace_slic3r_html_a896c49b74a260d028f471ec275601b42"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">Slic3r::xml_escape</a></div><div class="ttdeci">std::string xml_escape(std::string text, bool is_marked)</div><div class="ttdef"><b>Definition</b> utils.cpp:934</div></div>
<div class="ttc" id="anamespace_slic3r_html_aa982931c6c3a1d79f04d59b091a81675"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aa982931c6c3a1d79f04d59b091a81675">Slic3r::xml_escape_double_quotes_attribute_value</a></div><div class="ttdeci">std::string xml_escape_double_quotes_attribute_value(std::string text)</div><div class="ttdef"><b>Definition</b> utils.cpp:964</div></div>
<div class="ttc" id="anamespaceboost_html"><div class="ttname"><a href="../../d4/da9/namespaceboost.html">boost</a></div><div class="ttdef"><b>Definition</b> args.hpp:18</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">marchsq::__impl::SquareTag::c</a></div><div class="ttdeci">@ c</div></div>
<div class="ttc" id="astruct_slic3r_1_1_text_configuration_serialization_html_aa7dd9f329615e824b002b05f5238dd81"><div class="ttname"><a href="../../d5/dab/struct_slic3r_1_1_text_configuration_serialization.html#aa7dd9f329615e824b002b05f5238dd81">Slic3r::TextConfigurationSerialization::create_fix_and_store</a></div><div class="ttdeci">static void create_fix_and_store(std::stringstream &amp;stream, TextConfiguration tc, const ModelVolume &amp;volume)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:3554</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00032">Slic3r::RepairedMeshErrors::backwards_edges</a>, <a class="el" href="../../#l00339">Slic3r::ModelObject::config</a>, <a class="el" href="../../#l00099">CONFIG_TAG</a>, <a class="el" href="../../#l00023">Slic3r::RepairedMeshErrors::degenerate_facets</a>, <a class="el" href="../../#l00021">Slic3r::RepairedMeshErrors::edges_fixed</a>, <a class="el" href="../../#l00025">Slic3r::RepairedMeshErrors::facets_removed</a>, <a class="el" href="../../#l00030">Slic3r::RepairedMeshErrors::facets_reversed</a>, <a class="el" href="../../#l00122">FIRST_TRIANGLE_ID_ATTR</a>, <a class="el" href="../../#l00105">ID_ATTR</a>, <a class="el" href="../../#l00334">Slic3r::ModelObject::instances</a>, <a class="el" href="../../#l00115">INSTANCESCOUNT_ATTR</a>, <a class="el" href="../../#l00120">KEY_ATTR</a>, <a class="el" href="../../#l01273">Slic3r::ModelConfig::keys()</a>, <a class="el" href="../../#l00123">LAST_TRIANGLE_ID_ATTR</a>, <a class="el" href="../../#l00131">MATRIX_KEY</a>, <a class="el" href="../../#l00146">MESH_STAT_BACKWARDS_EDGES</a>, <a class="el" href="../../#l00143">MESH_STAT_DEGENERATED_FACETS</a>, <a class="el" href="../../#l00142">MESH_STAT_EDGES_FIXED</a>, <a class="el" href="../../#l00144">MESH_STAT_FACETS_REMOVED</a>, <a class="el" href="../../#l00145">MESH_STAT_FACETS_RESERVED</a>, <a class="el" href="../../#l00088">MESH_TAG</a>, <a class="el" href="../../#l00097">METADATA_TAG</a>, <a class="el" href="../../#l00077">MODEL_CONFIG_FILE</a>, <a class="el" href="../../#l00129">MODIFIER_KEY</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00330">Slic3r::ModelObject::name</a>, <a class="el" href="../../#l00128">NAME_KEY</a>, <a class="el" href="../../#l00087">OBJECT_TAG</a>, <a class="el" href="../../#l00125">OBJECT_TYPE</a>, <a class="el" href="../../#l01279">Slic3r::ModelConfig::opt_serialize()</a>, <a class="el" href="../../#l00132">SOURCE_FILE_KEY</a>, <a class="el" href="../../#l00138">SOURCE_IN_INCHES_KEY</a>, <a class="el" href="../../#l00139">SOURCE_IN_METERS_KEY</a>, <a class="el" href="../../#l00140">SOURCE_IS_BUILTIN_VOLUME_KEY</a>, <a class="el" href="../../#l00133">SOURCE_OBJECT_ID_KEY</a>, <a class="el" href="../../#l00135">SOURCE_OFFSET_X_KEY</a>, <a class="el" href="../../#l00136">SOURCE_OFFSET_Y_KEY</a>, <a class="el" href="../../#l00137">SOURCE_OFFSET_Z_KEY</a>, <a class="el" href="../../#l00134">SOURCE_VOLUME_ID_KEY</a>, <a class="el" href="../../#l00104">TYPE_ATTR</a>, <a class="el" href="../../#l00121">VALUE_ATTR</a>, <a class="el" href="../../#l00100">VOLUME_TAG</a>, <a class="el" href="../../#l00126">VOLUME_TYPE</a>, <a class="el" href="../../#l00130">VOLUME_TYPE_KEY</a>, <a class="el" href="../../#l00934">Slic3r::xml_escape()</a>, and <a class="el" href="../../#l00964">Slic3r::xml_escape_double_quotes_attribute_value()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_aa07990688062e1b23367ef11c2da1c8e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a7c7910386af606f878fb7f55e7915df7" name="a7c7910386af606f878fb7f55e7915df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c7910386af606f878fb7f55e7915df7">&#9670;&#160;</a></span>_add_model_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_model_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6b90e89b8564c11761341f79139a8bcc">IdToObjectDataMap</a> &amp;&#160;</td>
          <td class="paramname"><em>objects_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2596</span>    {</div>
<div class="line"><span class="lineno"> 2597</span>        <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a> context;</div>
<div class="line"><span class="lineno"> 2598</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#a9a92bad43b4ceccbfc7785a1aa179984">mz_zip_writer_add_staged_open</a>(&amp;archive, &amp;context, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a30ad78ff668153764602f6ef0d546388">MODEL_FILE</a>.c_str(), </div>
<div class="line"><span class="lineno"> 2599</span>            <a class="code hl_variable" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a103b673d100183a44466bdeb275b6770">m_zip64</a> ? </div>
<div class="line"><span class="lineno"> 2600</span>                <span class="comment">// Maximum expected and allowed 3MF file size is 16GiB.</span></div>
<div class="line"><span class="lineno"> 2601</span>                <span class="comment">// This switches the ZIP file to a 64bit mode, which adds a tiny bit of overhead to file records.</span></div>
<div class="line"><span class="lineno"> 2602</span>                (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>(1) &lt;&lt; 30) * 16 : </div>
<div class="line"><span class="lineno"> 2603</span>                <span class="comment">// Maximum expected 3MF file size is 4GB-1. This is a workaround for interoperability with Windows 10 3D model fixing API, see</span></div>
<div class="line"><span class="lineno"> 2604</span>                <span class="comment">// GH issue #6193.</span></div>
<div class="line"><span class="lineno"> 2605</span>                (<a class="code hl_typedef" href="../../da/d6f/unistd_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>(1) &lt;&lt; 32) - 1,</div>
<div class="line"><span class="lineno"> 2606</span>            nullptr, nullptr, 0, <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>, nullptr, 0, nullptr, 0)) {</div>
<div class="line"><span class="lineno"> 2607</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add model file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2608</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2609</span>        }</div>
<div class="line"><span class="lineno"> 2610</span> </div>
<div class="line"><span class="lineno"> 2611</span>        {</div>
<div class="line"><span class="lineno"> 2612</span>            std::stringstream stream;</div>
<div class="line"><span class="lineno"> 2613</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a61e85e532257a536bc04155071b847ea">reset_stream</a>(stream);</div>
<div class="line"><span class="lineno"> 2614</span>            stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2615</span>            stream &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae686fe0779eb5cb2bd31287416295447">MODEL_TAG</a> &lt;&lt; <span class="stringliteral">&quot; unit=\&quot;millimeter\&quot; xml:lang=\&quot;en-US\&quot; xmlns=\&quot;http://schemas.microsoft.com/3dmanufacturing/core/2015/02\&quot; xmlns:slic3rpe=\&quot;http://schemas.slic3r.org/3mf/2017/06\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2616</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#af2badece19aa54c33de66d2af9e13753">SLIC3RPE_3MF_VERSION</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a3d193259a12de36ab94ea5a6d0984dc9">VERSION_3MF</a> &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2617</span> </div>
<div class="line"><span class="lineno"> 2618</span>            <span class="keywordflow">if</span> (model.is_fdm_support_painted())</div>
<div class="line"><span class="lineno"> 2619</span>                stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa445a8b1482ddb5bf57960bead955a89">SLIC3RPE_FDM_SUPPORTS_PAINTING_VERSION</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae98b029d424c992b2a94a3d063eb9637">FDM_SUPPORTS_PAINTING_VERSION</a> &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2620</span> </div>
<div class="line"><span class="lineno"> 2621</span>            <span class="keywordflow">if</span> (model.is_seam_painted())</div>
<div class="line"><span class="lineno"> 2622</span>                stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8ff496369d3bf2dd9dc259d91a5e4486">SLIC3RPE_SEAM_PAINTING_VERSION</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a081946a366dc035809a48e5ac3d318fb">SEAM_PAINTING_VERSION</a> &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2623</span> </div>
<div class="line"><span class="lineno"> 2624</span>            <span class="keywordflow">if</span> (model.is_mm_painted())</div>
<div class="line"><span class="lineno"> 2625</span>                stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aeb588578a91c6242fa8c0c373de029f8">SLIC3RPE_MM_PAINTING_VERSION</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aef1ca7ca6c0184f0dbcd5295b660b4de">MM_PAINTING_VERSION</a> &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2626</span> </div>
<div class="line"><span class="lineno"> 2627</span>            std::string name = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(boost::filesystem::path(filename).stem().<span class="keywordtype">string</span>());</div>
<div class="line"><span class="lineno"> 2628</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;Title\&quot;&gt;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2629</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;Designer\&quot;&gt;&quot;</span> &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2630</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;Description\&quot;&gt;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2631</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;Copyright\&quot;&gt;&quot;</span> &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2632</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;LicenseTerms\&quot;&gt;&quot;</span> &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2633</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;Rating\&quot;&gt;&quot;</span> &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2634</span>            std::string date = <a class="code hl_function" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a3be8424365a851987e3ed9403f35e344">Slic3r::Utils::utc_timestamp</a>(<a class="code hl_function" href="../../d3/d47/namespace_slic3r_1_1_utils.html#ae3730cc71d7ed9891e6f0d02ca54449c">Slic3r::Utils::get_current_time_utc</a>());</div>
<div class="line"><span class="lineno"> 2635</span>            <span class="comment">// keep only the date part of the string</span></div>
<div class="line"><span class="lineno"> 2636</span>            date = date.substr(0, 10);</div>
<div class="line"><span class="lineno"> 2637</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;CreationDate\&quot;&gt;&quot;</span> &lt;&lt; date &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2638</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;ModificationDate\&quot;&gt;&quot;</span> &lt;&lt; date &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2639</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;Application\&quot;&gt;&quot;</span> &lt;&lt; SLIC3R_APP_KEY &lt;&lt; <span class="stringliteral">&quot;-&quot;</span> &lt;&lt; SLIC3R_VERSION &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2640</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a6c0d76a48cbb627f577ce72e2b2f8e24">RESOURCES_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2641</span>            std::string buf = stream.str();</div>
<div class="line"><span class="lineno"> 2642</span>            <span class="keywordflow">if</span> (! buf.empty() &amp;&amp; ! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, buf.data(), buf.size())) {</div>
<div class="line"><span class="lineno"> 2643</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add model file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2644</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2645</span>            }</div>
<div class="line"><span class="lineno"> 2646</span>        }</div>
<div class="line"><span class="lineno"> 2647</span> </div>
<div class="line"><span class="lineno"> 2648</span>        <span class="comment">// Instance transformations, indexed by the 3MF object ID (which is a linear serialization of all instances of all ModelObjects).</span></div>
<div class="line"><span class="lineno"> 2649</span>        <a class="code hl_typedef" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a85c231ee2cd1fb144819a1ff43af3d62">BuildItemsList</a> build_items;</div>
<div class="line"><span class="lineno"> 2650</span> </div>
<div class="line"><span class="lineno"> 2651</span>        <span class="comment">// The object_id here is a one based identifier of the first instance of a ModelObject in the 3MF file, where</span></div>
<div class="line"><span class="lineno"> 2652</span>        <span class="comment">// all the object instances of all ModelObjects are stored and indexed in a 1 based linear fashion.</span></div>
<div class="line"><span class="lineno"> 2653</span>        <span class="comment">// Therefore the list of object_ids here may not be continuous.</span></div>
<div class="line"><span class="lineno"> 2654</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> object_id = 1;</div>
<div class="line"><span class="lineno"> 2655</span>        <span class="keywordflow">for</span> (ModelObject* obj : model.objects) {</div>
<div class="line"><span class="lineno"> 2656</span>            <span class="keywordflow">if</span> (obj == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 2657</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2658</span> </div>
<div class="line"><span class="lineno"> 2659</span>            <span class="comment">// Index of an object in the 3MF file corresponding to the 1st instance of a ModelObject.</span></div>
<div class="line"><span class="lineno"> 2660</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> curr_id = object_id;</div>
<div class="line"><span class="lineno"> 2661</span>            IdToObjectDataMap::iterator object_it = objects_data.insert({ curr_id, ObjectData(obj) }).first;</div>
<div class="line"><span class="lineno"> 2662</span>            <span class="comment">// Store geometry of all ModelVolumes contained in a single ModelObject into a single 3MF indexed triangle set object.</span></div>
<div class="line"><span class="lineno"> 2663</span>            <span class="comment">// object_it-&gt;second.volumes_offsets will contain the offsets of the ModelVolumes in that single indexed triangle set.</span></div>
<div class="line"><span class="lineno"> 2664</span>            <span class="comment">// object_id will be increased to point to the 1st instance of the next ModelObject.</span></div>
<div class="line"><span class="lineno"> 2665</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a8da50bc4ebd11651669677fb30b915da">_add_object_to_model_stream</a>(context, object_id, *obj, build_items, object_it-&gt;second.volumes_offsets)) {</div>
<div class="line"><span class="lineno"> 2666</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add object to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2667</span>                <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a2c2e2d560cee969864cd1b3b0f264e75">mz_zip_writer_add_staged_finish</a>(&amp;context);</div>
<div class="line"><span class="lineno"> 2668</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2669</span>            }</div>
<div class="line"><span class="lineno"> 2670</span>        }</div>
<div class="line"><span class="lineno"> 2671</span> </div>
<div class="line"><span class="lineno"> 2672</span>        {</div>
<div class="line"><span class="lineno"> 2673</span>            std::stringstream stream;</div>
<div class="line"><span class="lineno"> 2674</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a61e85e532257a536bc04155071b847ea">reset_stream</a>(stream);</div>
<div class="line"><span class="lineno"> 2675</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a6c0d76a48cbb627f577ce72e2b2f8e24">RESOURCES_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2676</span> </div>
<div class="line"><span class="lineno"> 2677</span>            <span class="comment">// Store the transformations of all the ModelInstances of all ModelObjects, indexed in a linear fashion.</span></div>
<div class="line"><span class="lineno"> 2678</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a252c8f748b5eb83db871332e03deb970">_add_build_to_model_stream</a>(stream, build_items)) {</div>
<div class="line"><span class="lineno"> 2679</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add build to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2680</span>                <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a2c2e2d560cee969864cd1b3b0f264e75">mz_zip_writer_add_staged_finish</a>(&amp;context);</div>
<div class="line"><span class="lineno"> 2681</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2682</span>            }</div>
<div class="line"><span class="lineno"> 2683</span> </div>
<div class="line"><span class="lineno"> 2684</span>            stream &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae686fe0779eb5cb2bd31287416295447">MODEL_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2685</span>           </div>
<div class="line"><span class="lineno"> 2686</span>            std::string buf = stream.str();</div>
<div class="line"><span class="lineno"> 2687</span> </div>
<div class="line"><span class="lineno"> 2688</span>            <span class="keywordflow">if</span> ((! buf.empty() &amp;&amp; ! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, buf.data(), buf.size())) ||</div>
<div class="line"><span class="lineno"> 2689</span>                ! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a2c2e2d560cee969864cd1b3b0f264e75">mz_zip_writer_add_staged_finish</a>(&amp;context)) {</div>
<div class="line"><span class="lineno"> 2690</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add model file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2691</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2692</span>            }</div>
<div class="line"><span class="lineno"> 2693</span>        }</div>
<div class="line"><span class="lineno"> 2694</span> </div>
<div class="line"><span class="lineno"> 2695</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2696</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a081946a366dc035809a48e5ac3d318fb"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a081946a366dc035809a48e5ac3d318fb">SEAM_PAINTING_VERSION</a></div><div class="ttdeci">const unsigned int SEAM_PAINTING_VERSION</div><div class="ttdef"><b>Definition</b> 3mf.cpp:63</div></div>
<div class="ttc" id="a3mf_8cpp_html_a30ad78ff668153764602f6ef0d546388"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a30ad78ff668153764602f6ef0d546388">MODEL_FILE</a></div><div class="ttdeci">const std::string MODEL_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:72</div></div>
<div class="ttc" id="a3mf_8cpp_html_a3d193259a12de36ab94ea5a6d0984dc9"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a3d193259a12de36ab94ea5a6d0984dc9">VERSION_3MF</a></div><div class="ttdeci">const unsigned int VERSION_3MF</div><div class="ttdef"><b>Definition</b> 3mf.cpp:54</div></div>
<div class="ttc" id="a3mf_8cpp_html_a6c0d76a48cbb627f577ce72e2b2f8e24"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a6c0d76a48cbb627f577ce72e2b2f8e24">RESOURCES_TAG</a></div><div class="ttdeci">static constexpr const char * RESOURCES_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:86</div></div>
<div class="ttc" id="a3mf_8cpp_html_a8ff496369d3bf2dd9dc259d91a5e4486"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a8ff496369d3bf2dd9dc259d91a5e4486">SLIC3RPE_SEAM_PAINTING_VERSION</a></div><div class="ttdeci">const std::string SLIC3RPE_SEAM_PAINTING_VERSION</div><div class="ttdef"><b>Definition</b> 3mf.cpp:67</div></div>
<div class="ttc" id="a3mf_8cpp_html_aa445a8b1482ddb5bf57960bead955a89"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aa445a8b1482ddb5bf57960bead955a89">SLIC3RPE_FDM_SUPPORTS_PAINTING_VERSION</a></div><div class="ttdeci">const std::string SLIC3RPE_FDM_SUPPORTS_PAINTING_VERSION</div><div class="ttdef"><b>Definition</b> 3mf.cpp:66</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae686fe0779eb5cb2bd31287416295447"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae686fe0779eb5cb2bd31287416295447">MODEL_TAG</a></div><div class="ttdeci">static constexpr const char * MODEL_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:85</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae98b029d424c992b2a94a3d063eb9637"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae98b029d424c992b2a94a3d063eb9637">FDM_SUPPORTS_PAINTING_VERSION</a></div><div class="ttdeci">const unsigned int FDM_SUPPORTS_PAINTING_VERSION</div><div class="ttdef"><b>Definition</b> 3mf.cpp:62</div></div>
<div class="ttc" id="a3mf_8cpp_html_aeb588578a91c6242fa8c0c373de029f8"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aeb588578a91c6242fa8c0c373de029f8">SLIC3RPE_MM_PAINTING_VERSION</a></div><div class="ttdeci">const std::string SLIC3RPE_MM_PAINTING_VERSION</div><div class="ttdef"><b>Definition</b> 3mf.cpp:68</div></div>
<div class="ttc" id="a3mf_8cpp_html_aef1ca7ca6c0184f0dbcd5295b660b4de"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aef1ca7ca6c0184f0dbcd5295b660b4de">MM_PAINTING_VERSION</a></div><div class="ttdeci">const unsigned int MM_PAINTING_VERSION</div><div class="ttdef"><b>Definition</b> 3mf.cpp:64</div></div>
<div class="ttc" id="a3mf_8cpp_html_af2badece19aa54c33de66d2af9e13753"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#af2badece19aa54c33de66d2af9e13753">SLIC3RPE_3MF_VERSION</a></div><div class="ttdeci">const char * SLIC3RPE_3MF_VERSION</div><div class="ttdef"><b>Definition</b> 3mf.cpp:57</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a103b673d100183a44466bdeb275b6770"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a103b673d100183a44466bdeb275b6770">Slic3r::_3MF_Exporter::m_zip64</a></div><div class="ttdeci">bool m_zip64</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2368</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a252c8f748b5eb83db871332e03deb970"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a252c8f748b5eb83db871332e03deb970">Slic3r::_3MF_Exporter::_add_build_to_model_stream</a></div><div class="ttdeci">bool _add_build_to_model_stream(std::stringstream &amp;stream, const BuildItemsList &amp;build_items)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2936</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a85c231ee2cd1fb144819a1ff43af3d62"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a85c231ee2cd1fb144819a1ff43af3d62">Slic3r::_3MF_Exporter::BuildItemsList</a></div><div class="ttdeci">std::vector&lt; BuildItem &gt; BuildItemsList</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2364</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a8da50bc4ebd11651669677fb30b915da"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a8da50bc4ebd11651669677fb30b915da">Slic3r::_3MF_Exporter::_add_object_to_model_stream</a></div><div class="ttdeci">bool _add_object_to_model_stream(mz_zip_writer_staged_context &amp;context, unsigned int &amp;object_id, ModelObject &amp;object, BuildItemsList &amp;build_items, VolumeToOffsetsMap &amp;volumes_offsets)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2698</div></div>
<div class="ttc" id="aminiz_8c_html_a2c2e2d560cee969864cd1b3b0f264e75"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a2c2e2d560cee969864cd1b3b0f264e75">mz_zip_writer_add_staged_finish</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_staged_finish(mz_zip_writer_staged_context *pContext)</div><div class="ttdef"><b>Definition</b> miniz.c:6886</div></div>
<div class="ttc" id="aminiz_8c_html_a9a92bad43b4ceccbfc7785a1aa179984"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a9a92bad43b4ceccbfc7785a1aa179984">mz_zip_writer_add_staged_open</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_staged_open(mz_zip_archive *pZip, mz_zip_writer_staged_context *pContext, const char *pArchive_name, mz_uint64 max_size, const MZ_TIME_T *pFile_time, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags, const char *user_extra_data, mz_uint user_extra_data_len, const char *user_extra_data_central, mz_uint user_extra_data_central_len)</div><div class="ttdef"><b>Definition</b> miniz.c:6690</div></div>
<div class="ttc" id="aminiz_8h_html_d4/d5c/structmz__zip__writer__staged__context"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a></div><div class="ttdef"><b>Definition</b> miniz.h:1313</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_a3be8424365a851987e3ed9403f35e344"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#a3be8424365a851987e3ed9403f35e344">Slic3r::Utils::utc_timestamp</a></div><div class="ttdeci">std::string utc_timestamp()</div><div class="ttdef"><b>Definition</b> Time.hpp:30</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_ae3730cc71d7ed9891e6f0d02ca54449c"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#ae3730cc71d7ed9891e6f0d02ca54449c">Slic3r::Utils::get_current_time_utc</a></div><div class="ttdeci">time_t get_current_time_utc()</div><div class="ttdef"><b>Definition</b> Time.cpp:175</div></div>
<div class="ttc" id="anamespace_slic3r_html_a61e85e532257a536bc04155071b847ea"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a61e85e532257a536bc04155071b847ea">Slic3r::reset_stream</a></div><div class="ttdeci">static void reset_stream(std::stringstream &amp;stream)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2584</div></div>
<div class="ttc" id="aunistd_8h_html_aec6fcb673ff035718c238c8c9d544c47"><div class="ttname"><a href="../../da/d6f/unistd_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a></div><div class="ttdeci">unsigned __int64 uint64_t</div><div class="ttdef"><b>Definition</b> unistd.h:80</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00062">FDM_SUPPORTS_PAINTING_VERSION</a>, <a class="el" href="../../#l00175">Slic3r::Utils::get_current_time_utc()</a>, <a class="el" href="../../#l00607">Slic3r::Model::is_fdm_support_painted()</a>, <a class="el" href="../../#l00617">Slic3r::Model::is_mm_painted()</a>, <a class="el" href="../../#l00612">Slic3r::Model::is_seam_painted()</a>, <a class="el" href="../../#l00097">METADATA_TAG</a>, <a class="el" href="../../#l00064">MM_PAINTING_VERSION</a>, <a class="el" href="../../#l00072">MODEL_FILE</a>, <a class="el" href="../../#l00085">MODEL_TAG</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l06856">mz_zip_writer_add_staged_data()</a>, <a class="el" href="../../#l06886">mz_zip_writer_add_staged_finish()</a>, <a class="el" href="../../#l06690">mz_zip_writer_add_staged_open()</a>, <a class="el" href="../../#l01254">Slic3r::Model::objects</a>, <a class="el" href="../../#l02584">Slic3r::reset_stream()</a>, <a class="el" href="../../#l00086">RESOURCES_TAG</a>, <a class="el" href="../../#l00063">SEAM_PAINTING_VERSION</a>, <a class="el" href="../../#l00057">SLIC3RPE_3MF_VERSION</a>, <a class="el" href="../../#l00066">SLIC3RPE_FDM_SUPPORTS_PAINTING_VERSION</a>, <a class="el" href="../../#l00068">SLIC3RPE_MM_PAINTING_VERSION</a>, <a class="el" href="../../#l00067">SLIC3RPE_SEAM_PAINTING_VERSION</a>, <a class="el" href="../../#l00030">Slic3r::Utils::utc_timestamp()</a>, <a class="el" href="../../#l00054">VERSION_3MF</a>, and <a class="el" href="../../#l00934">Slic3r::xml_escape()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a7c7910386af606f878fb7f55e7915df7_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8da50bc4ebd11651669677fb30b915da" name="a8da50bc4ebd11651669677fb30b915da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8da50bc4ebd11651669677fb30b915da">&#9670;&#160;</a></span>_add_object_to_model_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_object_to_model_stream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;&#160;</td>
          <td class="paramname"><em>object_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a85c231ee2cd1fb144819a1ff43af3d62">BuildItemsList</a> &amp;&#160;</td>
          <td class="paramname"><em>build_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a237a9947e25971ff54411f6cefaf6a15">VolumeToOffsetsMap</a> &amp;&#160;</td>
          <td class="paramname"><em>volumes_offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2699</span>    {</div>
<div class="line"><span class="lineno"> 2700</span>        std::stringstream stream;</div>
<div class="line"><span class="lineno"> 2701</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a61e85e532257a536bc04155071b847ea">reset_stream</a>(stream);</div>
<div class="line"><span class="lineno"> 2702</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0;</div>
<div class="line"><span class="lineno"> 2703</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelInstance* instance : object.instances) {</div>
<div class="line"><span class="lineno"> 2704</span>      assert(instance != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 2705</span>            <span class="keywordflow">if</span> (instance == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 2706</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2707</span> </div>
<div class="line"><span class="lineno"> 2708</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> instance_id = object_id + id;</div>
<div class="line"><span class="lineno"> 2709</span>            stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; id=\&quot;&quot;</span> &lt;&lt; instance_id &lt;&lt; <span class="stringliteral">&quot;\&quot; type=\&quot;model\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2710</span> </div>
<div class="line"><span class="lineno"> 2711</span>            <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == 0) {</div>
<div class="line"><span class="lineno"> 2712</span>                std::string buf = stream.str();</div>
<div class="line"><span class="lineno"> 2713</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a61e85e532257a536bc04155071b847ea">reset_stream</a>(stream);</div>
<div class="line"><span class="lineno"> 2714</span>                <span class="keywordflow">if</span> ((! buf.empty() &amp;&amp; ! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, buf.data(), buf.size())) ||</div>
<div class="line"><span class="lineno"> 2715</span>                    ! <a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a84a65746c94f1d296c6e97c1ad9fc9bd">_add_mesh_to_object_stream</a>(context, <span class="keywordtype">object</span>, volumes_offsets)) {</div>
<div class="line"><span class="lineno"> 2716</span>                    <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add mesh to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2717</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2718</span>                }</div>
<div class="line"><span class="lineno"> 2719</span>            }</div>
<div class="line"><span class="lineno"> 2720</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2721</span>                stream &lt;&lt; <span class="stringliteral">&quot;   &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9add37c8903ccd933e93f5de7b9b428d">COMPONENTS_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2722</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9d76306c6c1f97015c9bce06364577c1">COMPONENT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; objectid=\&quot;&quot;</span> &lt;&lt; object_id &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2723</span>                stream &lt;&lt; <span class="stringliteral">&quot;   &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9add37c8903ccd933e93f5de7b9b428d">COMPONENTS_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2724</span>            }</div>
<div class="line"><span class="lineno"> 2725</span> </div>
<div class="line"><span class="lineno"> 2726</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> t = instance-&gt;get_matrix();</div>
<div class="line"><span class="lineno"> 2727</span>            <span class="comment">// instance_id is just a 1 indexed index in build_items.</span></div>
<div class="line"><span class="lineno"> 2728</span>            assert(instance_id == build_items.size() + 1);</div>
<div class="line"><span class="lineno"> 2729</span>            build_items.emplace_back(instance_id, t, instance-&gt;printable);</div>
<div class="line"><span class="lineno"> 2730</span> </div>
<div class="line"><span class="lineno"> 2731</span>            stream &lt;&lt; <span class="stringliteral">&quot;  &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2732</span> </div>
<div class="line"><span class="lineno"> 2733</span>            ++id;</div>
<div class="line"><span class="lineno"> 2734</span>        }</div>
<div class="line"><span class="lineno"> 2735</span> </div>
<div class="line"><span class="lineno"> 2736</span>        object_id += id;</div>
<div class="line"><span class="lineno"> 2737</span>        std::string buf = stream.str();</div>
<div class="line"><span class="lineno"> 2738</span>        <span class="keywordflow">return</span> buf.empty() || <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, buf.data(), buf.size());</div>
<div class="line"><span class="lineno"> 2739</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a9add37c8903ccd933e93f5de7b9b428d"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a9add37c8903ccd933e93f5de7b9b428d">COMPONENTS_TAG</a></div><div class="ttdeci">static constexpr const char * COMPONENTS_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:93</div></div>
<div class="ttc" id="a3mf_8cpp_html_a9d76306c6c1f97015c9bce06364577c1"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a9d76306c6c1f97015c9bce06364577c1">COMPONENT_TAG</a></div><div class="ttdeci">static constexpr const char * COMPONENT_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:94</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a84a65746c94f1d296c6e97c1ad9fc9bd"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a84a65746c94f1d296c6e97c1ad9fc9bd">Slic3r::_3MF_Exporter::_add_mesh_to_object_stream</a></div><div class="ttdeci">bool _add_mesh_to_object_stream(mz_zip_writer_staged_context &amp;context, ModelObject &amp;object, VolumeToOffsetsMap &amp;volumes_offsets)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2761</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00094">COMPONENT_TAG</a>, <a class="el" href="../../#l00093">COMPONENTS_TAG</a>, <a class="el" href="../../#l06856">mz_zip_writer_add_staged_data()</a>, <a class="el" href="../../#l00087">OBJECT_TAG</a>, and <a class="el" href="../../#l02584">Slic3r::reset_stream()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a8da50bc4ebd11651669677fb30b915da_cgraph.svg" width="100%" height="493"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a7b102c740d3e4463580db7a4d64bb09c" name="a7b102c740d3e4463580db7a4d64bb09c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b102c740d3e4463580db7a4d64bb09c">&#9670;&#160;</a></span>_add_print_config_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_print_config_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3199</span>    {</div>
<div class="line"><span class="lineno"> 3200</span>        assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>());</div>
<div class="line"><span class="lineno"> 3201</span>        <span class="keywordtype">char</span> buffer[1024];</div>
<div class="line"><span class="lineno"> 3202</span>        sprintf(buffer, <span class="stringliteral">&quot;; %s\n\n&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a720e9962a59275ec8a54eda3c7bf7173">header_slic3r_generated</a>().c_str());</div>
<div class="line"><span class="lineno"> 3203</span>        std::string out = buffer;</div>
<div class="line"><span class="lineno"> 3204</span> </div>
<div class="line"><span class="lineno"> 3205</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string &amp;key : config.keys())</div>
<div class="line"><span class="lineno"> 3206</span>            <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (key != <span class="stringliteral">&quot;compatible_printers&quot;</span>)</div>
<div class="line"><span class="lineno"> 3207</span>                out += <span class="stringliteral">&quot;; &quot;</span> + key + <span class="stringliteral">&quot; = &quot;</span> + config.opt_serialize(key) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3208</span> </div>
<div class="line"><span class="lineno"> 3209</span>        <span class="keywordflow">if</span> (!out.empty()) {</div>
<div class="line"><span class="lineno"> 3210</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#abcc3cad52b8c4e5312137859d7f46508">PRINT_CONFIG_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 3211</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add print config file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 3212</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3213</span>            }</div>
<div class="line"><span class="lineno"> 3214</span>        }</div>
<div class="line"><span class="lineno"> 3215</span> </div>
<div class="line"><span class="lineno"> 3216</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3217</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_abcc3cad52b8c4e5312137859d7f46508"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#abcc3cad52b8c4e5312137859d7f46508">PRINT_CONFIG_FILE</a></div><div class="ttdeci">const std::string PRINT_CONFIG_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:76</div></div>
<div class="ttc" id="alexer_8c_html_ad4a65b873df5c05570846b5413b41dfd"><div class="ttname"><a href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a></div><div class="ttdeci">if(!(yy_init))</div><div class="ttdef"><b>Definition</b> lexer.c:1190</div></div>
<div class="ttc" id="anamespace_slic3r_html_a720e9962a59275ec8a54eda3c7bf7173"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a720e9962a59275ec8a54eda3c7bf7173">Slic3r::header_slic3r_generated</a></div><div class="ttdeci">std::string header_slic3r_generated()</div><div class="ttdef"><b>Definition</b> utils.cpp:914</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00914">Slic3r::header_slic3r_generated()</a>, <a class="el" href="../../#l00047">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l01233">Slic3r::DynamicConfig::keys()</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00528">Slic3r::ConfigBase::opt_serialize()</a>, and <a class="el" href="../../#l00076">PRINT_CONFIG_FILE</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a7b102c740d3e4463580db7a4d64bb09c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a820881d156b6ca0aea484fa4c297191d" name="a820881d156b6ca0aea484fa4c297191d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a820881d156b6ca0aea484fa4c297191d">&#9670;&#160;</a></span>_add_relationships_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_relationships_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2566</span>    {</div>
<div class="line"><span class="lineno"> 2567</span>        std::stringstream stream;</div>
<div class="line"><span class="lineno"> 2568</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2569</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;Relationships xmlns=\&quot;http://schemas.openxmlformats.org/package/2006/relationships\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2570</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a30ad78ff668153764602f6ef0d546388">MODEL_FILE</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-1\&quot; Type=\&quot;http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2571</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a7f2d2456687f37e1519a316f6a20479c">THUMBNAIL_FILE</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-2\&quot; Type=\&quot;http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 2572</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;/Relationships&gt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 2573</span> </div>
<div class="line"><span class="lineno"> 2574</span>        std::string out = stream.str();</div>
<div class="line"><span class="lineno"> 2575</span> </div>
<div class="line"><span class="lineno"> 2576</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ab4af43dcdfbfd5b2a628fc6aa6fce66d">RELATIONSHIPS_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 2577</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add relationships file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2578</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2579</span>        }</div>
<div class="line"><span class="lineno"> 2580</span> </div>
<div class="line"><span class="lineno"> 2581</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2582</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a7f2d2456687f37e1519a316f6a20479c"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a7f2d2456687f37e1519a316f6a20479c">THUMBNAIL_FILE</a></div><div class="ttdeci">const std::string THUMBNAIL_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:75</div></div>
<div class="ttc" id="a3mf_8cpp_html_ab4af43dcdfbfd5b2a628fc6aa6fce66d"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ab4af43dcdfbfd5b2a628fc6aa6fce66d">RELATIONSHIPS_FILE</a></div><div class="ttdeci">const std::string RELATIONSHIPS_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:74</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00072">MODEL_FILE</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00074">RELATIONSHIPS_FILE</a>, and <a class="el" href="../../#l00075">THUMBNAIL_FILE</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a820881d156b6ca0aea484fa4c297191d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a6d3b925bc0a075e466bc02a16b8aefe6" name="a6d3b925bc0a075e466bc02a16b8aefe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d3b925bc0a075e466bc02a16b8aefe6">&#9670;&#160;</a></span>_add_sla_drain_holes_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_sla_drain_holes_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3148</span>    {</div>
<div class="line"><span class="lineno"> 3149</span>        assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>());</div>
<div class="line"><span class="lineno"> 3150</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> fmt = <span class="stringliteral">&quot;object_id=%d|&quot;</span>;</div>
<div class="line"><span class="lineno"> 3151</span>        std::string out;</div>
<div class="line"><span class="lineno"> 3152</span>        </div>
<div class="line"><span class="lineno"> 3153</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">count</a> = 0;</div>
<div class="line"><span class="lineno"> 3154</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelObject* <span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 3155</span>            ++<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">count</a>;</div>
<div class="line"><span class="lineno"> 3156</span>            <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab0d4b5b10f50a6078607914c74a54ee4">sla::DrainHoles</a> drain_holes = <span class="keywordtype">object</span>-&gt;sla_drain_holes;</div>
<div class="line"><span class="lineno"> 3157</span> </div>
<div class="line"><span class="lineno"> 3158</span>            <span class="comment">// The holes were placed 1mm above the mesh in the first implementation.</span></div>
<div class="line"><span class="lineno"> 3159</span>            <span class="comment">// This was a bad idea and the reference point was changed in 2.3 so</span></div>
<div class="line"><span class="lineno"> 3160</span>            <span class="comment">// to be on the mesh exactly. The elevated position is still saved</span></div>
<div class="line"><span class="lineno"> 3161</span>            <span class="comment">// in 3MFs for compatibility reasons.</span></div>
<div class="line"><span class="lineno"> 3162</span>            <span class="keywordflow">for</span> (sla::DrainHole&amp; hole : drain_holes) {</div>
<div class="line"><span class="lineno"> 3163</span>                <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#acb23a1d84cf6852c07fe080ec7513306">hole</a>.pos -= <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#acb23a1d84cf6852c07fe080ec7513306">hole</a>.normal.normalized();</div>
<div class="line"><span class="lineno"> 3164</span>                <a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#acb23a1d84cf6852c07fe080ec7513306">hole</a>.height += 1.f;</div>
<div class="line"><span class="lineno"> 3165</span>            }</div>
<div class="line"><span class="lineno"> 3166</span> </div>
<div class="line"><span class="lineno"> 3167</span>            <span class="keywordflow">if</span> (!drain_holes.empty()) {</div>
<div class="line"><span class="lineno"> 3168</span>                out += <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7868b394b85b0496be4f6f8c68640924">string_printf</a>(fmt, count);</div>
<div class="line"><span class="lineno"> 3169</span>                </div>
<div class="line"><span class="lineno"> 3170</span>                <span class="comment">// Store the layer height profile as a single space separated list.</span></div>
<div class="line"><span class="lineno"> 3171</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; drain_holes.size(); ++i)</div>
<div class="line"><span class="lineno"> 3172</span>                    out += <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7868b394b85b0496be4f6f8c68640924">string_printf</a>((i == 0 ? <span class="stringliteral">&quot;%f %f %f %f %f %f %f %f&quot;</span> : <span class="stringliteral">&quot; %f %f %f %f %f %f %f %f&quot;</span>),</div>
<div class="line"><span class="lineno"> 3173</span>                                         drain_holes[i].<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>(0),</div>
<div class="line"><span class="lineno"> 3174</span>                                         drain_holes[i].<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>(1),</div>
<div class="line"><span class="lineno"> 3175</span>                                         drain_holes[i].<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>(2),</div>
<div class="line"><span class="lineno"> 3176</span>                                         drain_holes[i].<a class="code hl_function" href="../../dd/d3d/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03.html#a9702d7dc6b0a37966d1157909ff81294">normal</a>(0),</div>
<div class="line"><span class="lineno"> 3177</span>                                         drain_holes[i].<a class="code hl_function" href="../../dd/d3d/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03.html#a9702d7dc6b0a37966d1157909ff81294">normal</a>(1),</div>
<div class="line"><span class="lineno"> 3178</span>                                         drain_holes[i].<a class="code hl_function" href="../../dd/d3d/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03.html#a9702d7dc6b0a37966d1157909ff81294">normal</a>(2),</div>
<div class="line"><span class="lineno"> 3179</span>                                         drain_holes[i].radius,</div>
<div class="line"><span class="lineno"> 3180</span>                                         drain_holes[i].<a class="code hl_function" href="../../d0/d25/namespace_slic3r_1_1arrangement.html#a5b816dd05a95b740ac2194b643ceaacc">height</a>);</div>
<div class="line"><span class="lineno"> 3181</span>                </div>
<div class="line"><span class="lineno"> 3182</span>                out += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3183</span>            }</div>
<div class="line"><span class="lineno"> 3184</span>        }</div>
<div class="line"><span class="lineno"> 3185</span>        </div>
<div class="line"><span class="lineno"> 3186</span>        <span class="keywordflow">if</span> (!out.empty()) {</div>
<div class="line"><span class="lineno"> 3187</span>            <span class="comment">// Adds version header at the beginning:</span></div>
<div class="line"><span class="lineno"> 3188</span>            out = std::string(<span class="stringliteral">&quot;drain_holes_format_version=&quot;</span>) + std::to_string(<a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#af9efde0c89d56f713473c31be0b20e01a98f296ec2f469a3142aba2602e0eacf8">drain_holes_format_version</a>) + std::string(<span class="stringliteral">&quot;\n&quot;</span>) + out;</div>
<div class="line"><span class="lineno"> 3189</span>            </div>
<div class="line"><span class="lineno"> 3190</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aef78a70e05cc4912b23df89ee5825015">SLA_DRAIN_HOLES_FILE</a>.c_str(), <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(out.data()), out.length(), <a class="code hl_typedef" href="../../d0/d1b/miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>(<a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>))) {</div>
<div class="line"><span class="lineno"> 3191</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add sla support points file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 3192</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3193</span>            }</div>
<div class="line"><span class="lineno"> 3194</span>        }</div>
<div class="line"><span class="lineno"> 3195</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3196</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_aef78a70e05cc4912b23df89ee5825015"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aef78a70e05cc4912b23df89ee5825015">SLA_DRAIN_HOLES_FILE</a></div><div class="ttdeci">const std::string SLA_DRAIN_HOLES_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:81</div></div>
<div class="ttc" id="aminiz_8h_html_a4195703cf0ade709ddce7f8777fc0cc2"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a></div><div class="ttdeci">unsigned int mz_uint</div><div class="ttdef"><b>Definition</b> miniz.h:489</div></div>
<div class="ttc" id="anamespace_slic3r_1_1arrangement_html_a5b816dd05a95b740ac2194b643ceaacc"><div class="ttname"><a href="../../d0/d25/namespace_slic3r_1_1arrangement.html#a5b816dd05a95b740ac2194b643ceaacc">Slic3r::arrangement::height</a></div><div class="ttdeci">coord_t height(const BoundingBox &amp;box)</div><div class="ttdef"><b>Definition</b> Arrange.cpp:540</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03_html_a9702d7dc6b0a37966d1157909ff81294"><div class="ttname"><a href="../../dd/d3d/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_rotfinder_8cpp_03.html#a9702d7dc6b0a37966d1157909ff81294">Slic3r::sla::anonymous_namespace{Rotfinder.cpp}::normal</a></div><div class="ttdeci">Vec&lt; 3, T &gt; normal(const std::array&lt; Vec&lt; 3, T &gt;, 3 &gt; &amp;tri)</div><div class="ttdef"><b>Definition</b> Rotfinder.cpp:43</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a2d49c0885f5562f98fbb19cbe6590d11"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">Slic3r::sla::pos</a></div><div class="ttdeci">Vec3d pos(const Pt &amp;p)</div><div class="ttdef"><b>Definition</b> ReprojectPointsOnMesh.hpp:14</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_ab0d4b5b10f50a6078607914c74a54ee4"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#ab0d4b5b10f50a6078607914c74a54ee4">Slic3r::sla::DrainHoles</a></div><div class="ttdeci">std::vector&lt; DrainHole &gt; DrainHoles</div><div class="ttdef"><b>Definition</b> Hollowing.hpp:76</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7868b394b85b0496be4f6f8c68640924"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7868b394b85b0496be4f6f8c68640924">Slic3r::string_printf</a></div><div class="ttdeci">std::string string_printf(const char *format,...)</div><div class="ttdef"><b>Definition</b> utils.cpp:890</div></div>
<div class="ttc" id="anamespace_slic3r_html_af9efde0c89d56f713473c31be0b20e01a98f296ec2f469a3142aba2602e0eacf8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#af9efde0c89d56f713473c31be0b20e01a98f296ec2f469a3142aba2602e0eacf8">Slic3r::drain_holes_format_version</a></div><div class="ttdeci">@ drain_holes_format_version</div><div class="ttdef"><b>Definition</b> 3mf.hpp:24</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_acb23a1d84cf6852c07fe080ec7513306"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#acb23a1d84cf6852c07fe080ec7513306">libnest2d::shapelike::hole</a></div><div class="ttdeci">Slic3r::Polygon &amp; hole(Slic3r::ExPolygon &amp;sh, unsigned long idx)</div><div class="ttdef"><b>Definition</b> geometries.hpp:200</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00024">Slic3r::drain_holes_format_version</a>, <a class="el" href="../../#l00047">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l01254">Slic3r::Model::objects</a>, <a class="el" href="../../#l00081">SLA_DRAIN_HOLES_FILE</a>, and <a class="el" href="../../#l00890">Slic3r::string_printf()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a6d3b925bc0a075e466bc02a16b8aefe6_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a3128939c480e128deb236c89fe603bcf" name="a3128939c480e128deb236c89fe603bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3128939c480e128deb236c89fe603bcf">&#9670;&#160;</a></span>_add_sla_support_points_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_sla_support_points_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3113</span>    {</div>
<div class="line"><span class="lineno"> 3114</span>        assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>());</div>
<div class="line"><span class="lineno"> 3115</span>        std::string out = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 3116</span>        <span class="keywordtype">char</span> buffer[1024];</div>
<div class="line"><span class="lineno"> 3117</span> </div>
<div class="line"><span class="lineno"> 3118</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">count</a> = 0;</div>
<div class="line"><span class="lineno"> 3119</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelObject* <span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 3120</span>            ++<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a1b625c8dfd9a1e79e087f984322d7e05">count</a>;</div>
<div class="line"><span class="lineno"> 3121</span>            <span class="keyword">const</span> std::vector&lt;sla::SupportPoint&gt;&amp; sla_support_points = <span class="keywordtype">object</span>-&gt;sla_support_points;</div>
<div class="line"><span class="lineno"> 3122</span>            <span class="keywordflow">if</span> (!sla_support_points.empty()) {</div>
<div class="line"><span class="lineno"> 3123</span>                sprintf(buffer, <span class="stringliteral">&quot;object_id=%d|&quot;</span>, count);</div>
<div class="line"><span class="lineno"> 3124</span>                out += buffer;</div>
<div class="line"><span class="lineno"> 3125</span> </div>
<div class="line"><span class="lineno"> 3126</span>                <span class="comment">// Store the layer height profile as a single space separated list.</span></div>
<div class="line"><span class="lineno"> 3127</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; sla_support_points.size(); ++i) {</div>
<div class="line"><span class="lineno"> 3128</span>                    sprintf(buffer, (i==0 ? <span class="stringliteral">&quot;%f %f %f %f %f&quot;</span> : <span class="stringliteral">&quot; %f %f %f %f %f&quot;</span>),  sla_support_points[i].<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>(0), sla_support_points[i].<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>(1), sla_support_points[i].<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>(2), sla_support_points[i].head_front_radius, (float)sla_support_points[i].is_new_island);</div>
<div class="line"><span class="lineno"> 3129</span>                    out += buffer;</div>
<div class="line"><span class="lineno"> 3130</span>                }</div>
<div class="line"><span class="lineno"> 3131</span>                out += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 3132</span>            }</div>
<div class="line"><span class="lineno"> 3133</span>        }</div>
<div class="line"><span class="lineno"> 3134</span> </div>
<div class="line"><span class="lineno"> 3135</span>        <span class="keywordflow">if</span> (!out.empty()) {</div>
<div class="line"><span class="lineno"> 3136</span>            <span class="comment">// Adds version header at the beginning:</span></div>
<div class="line"><span class="lineno"> 3137</span>            out = std::string(<span class="stringliteral">&quot;support_points_format_version=&quot;</span>) + std::to_string(<a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a01e40523fff899ecf9b3c9b9ee5de32bab2b85545d959522e6ae82de652646af6">support_points_format_version</a>) + std::string(<span class="stringliteral">&quot;\n&quot;</span>) + out;</div>
<div class="line"><span class="lineno"> 3138</span> </div>
<div class="line"><span class="lineno"> 3139</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a035ee3a93be686c892b727b16e5b8af2">SLA_SUPPORT_POINTS_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)out.data(), out.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 3140</span>                <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add sla support points file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 3141</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3142</span>            }</div>
<div class="line"><span class="lineno"> 3143</span>        }</div>
<div class="line"><span class="lineno"> 3144</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3145</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a035ee3a93be686c892b727b16e5b8af2"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a035ee3a93be686c892b727b16e5b8af2">SLA_SUPPORT_POINTS_FILE</a></div><div class="ttdeci">const std::string SLA_SUPPORT_POINTS_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:80</div></div>
<div class="ttc" id="anamespace_slic3r_html_a01e40523fff899ecf9b3c9b9ee5de32bab2b85545d959522e6ae82de652646af6"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a01e40523fff899ecf9b3c9b9ee5de32bab2b85545d959522e6ae82de652646af6">Slic3r::support_points_format_version</a></div><div class="ttdeci">@ support_points_format_version</div><div class="ttdef"><b>Definition</b> 3mf.hpp:20</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00047">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l01254">Slic3r::Model::objects</a>, <a class="el" href="../../#l00080">SLA_SUPPORT_POINTS_FILE</a>, and <a class="el" href="../../#l00020">Slic3r::support_points_format_version</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a3128939c480e128deb236c89fe603bcf_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a1662f676ca7b3f79339c9d234d1e0d2b" name="a1662f676ca7b3f79339c9d234d1e0d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1662f676ca7b3f79339c9d234d1e0d2b">&#9670;&#160;</a></span>_add_thumbnail_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_add_thumbnail_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> &amp;&#160;</td>
          <td class="paramname"><em>thumbnail_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2549</span>    {</div>
<div class="line"><span class="lineno"> 2550</span>        <span class="keywordtype">bool</span> res = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2551</span> </div>
<div class="line"><span class="lineno"> 2552</span>        <span class="keywordtype">size_t</span> png_size = 0;</div>
<div class="line"><span class="lineno"> 2553</span>        <span class="keywordtype">void</span>* png_data = <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a1ed893f615dda47d07210d50b825578f">tdefl_write_image_to_png_file_in_memory_ex</a>((<span class="keyword">const</span> <span class="keywordtype">void</span>*)thumbnail_data.pixels.data(), thumbnail_data.width, thumbnail_data.height, 4, &amp;png_size, <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334ab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a>, 1);</div>
<div class="line"><span class="lineno"> 2554</span>        <span class="keywordflow">if</span> (png_data != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2555</span>            res = <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a7f2d2456687f37e1519a316f6a20479c">THUMBNAIL_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)png_data, png_size, <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>);</div>
<div class="line"><span class="lineno"> 2556</span>            <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a7bdc0af59e4ca6d7bd8b7d5d005ff55e">mz_free</a>(png_data);</div>
<div class="line"><span class="lineno"> 2557</span>        }</div>
<div class="line"><span class="lineno"> 2558</span> </div>
<div class="line"><span class="lineno"> 2559</span>        <span class="keywordflow">if</span> (!res)</div>
<div class="line"><span class="lineno"> 2560</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to add thumbnail file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2561</span> </div>
<div class="line"><span class="lineno"> 2562</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 2563</span>    }</div>
<div class="ttc" id="aminiz_8c_html_a1ed893f615dda47d07210d50b825578f"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a1ed893f615dda47d07210d50b825578f">tdefl_write_image_to_png_file_in_memory_ex</a></div><div class="ttdeci">void * tdefl_write_image_to_png_file_in_memory_ex(const void *pImage, int w, int h, int num_chans, size_t *pLen_out, mz_uint level, mz_bool flip)</div><div class="ttdef"><b>Definition</b> miniz.c:2102</div></div>
<div class="ttc" id="aminiz_8c_html_a7bdc0af59e4ca6d7bd8b7d5d005ff55e"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a7bdc0af59e4ca6d7bd8b7d5d005ff55e">mz_free</a></div><div class="ttdeci">void mz_free(void *p)</div><div class="ttdef"><b>Definition</b> miniz.c:155</div></div>
<div class="ttc" id="aminiz_8h_html_a78b7e3ca021bd6d674e510a117163334ab5dc326a9f034dc71d6012d86dd1343f"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#a78b7e3ca021bd6d674e510a117163334ab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a></div><div class="ttdeci">@ MZ_DEFAULT_LEVEL</div><div class="ttdef"><b>Definition</b> miniz.h:237</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00012">Slic3r::ThumbnailData::height</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l00237">MZ_DEFAULT_LEVEL</a>, <a class="el" href="../../#l00155">mz_free()</a>, <a class="el" href="../../#l05902">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00013">Slic3r::ThumbnailData::pixels</a>, <a class="el" href="../../#l02102">tdefl_write_image_to_png_file_in_memory_ex()</a>, <a class="el" href="../../#l00075">THUMBNAIL_FILE</a>, and <a class="el" href="../../#l00011">Slic3r::ThumbnailData::width</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a1662f676ca7b3f79339c9d234d1e0d2b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a6e7cc902530ee2b87bf8699dff040782" name="a6e7cc902530ee2b87bf8699dff040782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e7cc902530ee2b87bf8699dff040782">&#9670;&#160;</a></span>_save_model_to_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::_save_model_to_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> *&#160;</td>
          <td class="paramname"><em>thumbnail_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2401</span>    {</div>
<div class="line"><span class="lineno"> 2402</span>        <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> archive;</div>
<div class="line"><span class="lineno"> 2403</span>        <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2404</span> </div>
<div class="line"><span class="lineno"> 2405</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a70bb7debedfe9d66753ad2a14e610324">open_zip_writer</a>(&amp;archive, filename)) {</div>
<div class="line"><span class="lineno"> 2406</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to open the file&quot;</span>);</div>
<div class="line"><span class="lineno"> 2407</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2408</span>        }</div>
<div class="line"><span class="lineno"> 2409</span> </div>
<div class="line"><span class="lineno"> 2410</span>        <span class="comment">// Adds content types file (&quot;[Content_Types].xml&quot;;).</span></div>
<div class="line"><span class="lineno"> 2411</span>        <span class="comment">// The content of this file is the same for each PrusaSlicer 3mf.</span></div>
<div class="line"><span class="lineno"> 2412</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#afa7a6ad7159878c51e2f68009b785c17">_add_content_types_file_to_archive</a>(archive)) {</div>
<div class="line"><span class="lineno"> 2413</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2414</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2415</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2416</span>        }</div>
<div class="line"><span class="lineno"> 2417</span> </div>
<div class="line"><span class="lineno"> 2418</span>        <span class="keywordflow">if</span> (thumbnail_data != <span class="keyword">nullptr</span> &amp;&amp; thumbnail_data-&gt;is_valid()) {</div>
<div class="line"><span class="lineno"> 2419</span>            <span class="comment">// Adds the file Metadata/thumbnail.png.</span></div>
<div class="line"><span class="lineno"> 2420</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a1662f676ca7b3f79339c9d234d1e0d2b">_add_thumbnail_file_to_archive</a>(archive, *thumbnail_data)) {</div>
<div class="line"><span class="lineno"> 2421</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2422</span>                boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2423</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2424</span>            }</div>
<div class="line"><span class="lineno"> 2425</span>        }</div>
<div class="line"><span class="lineno"> 2426</span> </div>
<div class="line"><span class="lineno"> 2427</span>        <span class="comment">// Adds relationships file (&quot;_rels/.rels&quot;). </span></div>
<div class="line"><span class="lineno"> 2428</span>        <span class="comment">// The content of this file is the same for each PrusaSlicer 3mf.</span></div>
<div class="line"><span class="lineno"> 2429</span>        <span class="comment">// The relationshis file contains a reference to the geometry file &quot;3D/3dmodel.model&quot;, the name was chosen to be compatible with CURA.</span></div>
<div class="line"><span class="lineno"> 2430</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a820881d156b6ca0aea484fa4c297191d">_add_relationships_file_to_archive</a>(archive)) {</div>
<div class="line"><span class="lineno"> 2431</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2432</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2433</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2434</span>        }</div>
<div class="line"><span class="lineno"> 2435</span> </div>
<div class="line"><span class="lineno"> 2436</span>        <span class="comment">// Adds model file (&quot;3D/3dmodel.model&quot;).</span></div>
<div class="line"><span class="lineno"> 2437</span>        <span class="comment">// This is the one and only file that contains all the geometry (vertices and triangles) of all ModelVolumes.</span></div>
<div class="line"><span class="lineno"> 2438</span>        <a class="code hl_typedef" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6b90e89b8564c11761341f79139a8bcc">IdToObjectDataMap</a> objects_data;</div>
<div class="line"><span class="lineno"> 2439</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7c7910386af606f878fb7f55e7915df7">_add_model_file_to_archive</a>(filename, archive, model, objects_data)) {</div>
<div class="line"><span class="lineno"> 2440</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2441</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2442</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2443</span>        }</div>
<div class="line"><span class="lineno"> 2444</span> </div>
<div class="line"><span class="lineno"> 2445</span>        <span class="comment">// Adds file with information for object cut (&quot;Metadata/Slic3r_PE_cut_information.txt&quot;).</span></div>
<div class="line"><span class="lineno"> 2446</span>        <span class="comment">// All information for object cut of all ModelObjects are stored here, indexed by 1 based index of the ModelObject in Model.</span></div>
<div class="line"><span class="lineno"> 2447</span>        <span class="comment">// The index differes from the index of an object ID of an object instance of a 3MF file!</span></div>
<div class="line"><span class="lineno"> 2448</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7626b0f42759f64d362d604eadee1808">_add_cut_information_file_to_archive</a>(archive, model)) {</div>
<div class="line"><span class="lineno"> 2449</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2450</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2451</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2452</span>        }</div>
<div class="line"><span class="lineno"> 2453</span> </div>
<div class="line"><span class="lineno"> 2454</span>        <span class="comment">// Adds layer height profile file (&quot;Metadata/Slic3r_PE_layer_heights_profile.txt&quot;).</span></div>
<div class="line"><span class="lineno"> 2455</span>        <span class="comment">// All layer height profiles of all ModelObjects are stored here, indexed by 1 based index of the ModelObject in Model.</span></div>
<div class="line"><span class="lineno"> 2456</span>        <span class="comment">// The index differes from the index of an object ID of an object instance of a 3MF file!</span></div>
<div class="line"><span class="lineno"> 2457</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a0e021f45ca8ef93cca8af3f4f85610b4">_add_layer_height_profile_file_to_archive</a>(archive, model)) {</div>
<div class="line"><span class="lineno"> 2458</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2459</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2460</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2461</span>        }</div>
<div class="line"><span class="lineno"> 2462</span> </div>
<div class="line"><span class="lineno"> 2463</span>        <span class="comment">// Adds layer config ranges file (&quot;Metadata/Slic3r_PE_layer_config_ranges.txt&quot;).</span></div>
<div class="line"><span class="lineno"> 2464</span>        <span class="comment">// All layer height profiles of all ModelObjects are stored here, indexed by 1 based index of the ModelObject in Model.</span></div>
<div class="line"><span class="lineno"> 2465</span>        <span class="comment">// The index differes from the index of an object ID of an object instance of a 3MF file!</span></div>
<div class="line"><span class="lineno"> 2466</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a4bd2d70e9d472a8625a53fced64bfe05">_add_layer_config_ranges_file_to_archive</a>(archive, model)) {</div>
<div class="line"><span class="lineno"> 2467</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2468</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2469</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2470</span>        }</div>
<div class="line"><span class="lineno"> 2471</span> </div>
<div class="line"><span class="lineno"> 2472</span>        <span class="comment">// Adds sla support points file (&quot;Metadata/Slic3r_PE_sla_support_points.txt&quot;).</span></div>
<div class="line"><span class="lineno"> 2473</span>        <span class="comment">// All  sla support points of all ModelObjects are stored here, indexed by 1 based index of the ModelObject in Model.</span></div>
<div class="line"><span class="lineno"> 2474</span>        <span class="comment">// The index differes from the index of an object ID of an object instance of a 3MF file!</span></div>
<div class="line"><span class="lineno"> 2475</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a3128939c480e128deb236c89fe603bcf">_add_sla_support_points_file_to_archive</a>(archive, model)) {</div>
<div class="line"><span class="lineno"> 2476</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2477</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2478</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2479</span>        }</div>
<div class="line"><span class="lineno"> 2480</span>        </div>
<div class="line"><span class="lineno"> 2481</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6d3b925bc0a075e466bc02a16b8aefe6">_add_sla_drain_holes_file_to_archive</a>(archive, model)) {</div>
<div class="line"><span class="lineno"> 2482</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2483</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2484</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2485</span>        }</div>
<div class="line"><span class="lineno"> 2486</span>        </div>
<div class="line"><span class="lineno"> 2487</span> </div>
<div class="line"><span class="lineno"> 2488</span>        <span class="comment">// Adds custom gcode per height file (&quot;Metadata/Prusa_Slicer_custom_gcode_per_print_z.xml&quot;).</span></div>
<div class="line"><span class="lineno"> 2489</span>        <span class="comment">// All custom gcode per height of whole Model are stored here</span></div>
<div class="line"><span class="lineno"> 2490</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#aea5504b862067e88864ecae23fc05cfb">_add_custom_gcode_per_print_z_file_to_archive</a>(archive, model, config)) {</div>
<div class="line"><span class="lineno"> 2491</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2492</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2493</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2494</span>        }</div>
<div class="line"><span class="lineno"> 2495</span> </div>
<div class="line"><span class="lineno"> 2496</span>        <span class="comment">// Adds slic3r print config file (&quot;Metadata/Slic3r_PE.config&quot;).</span></div>
<div class="line"><span class="lineno"> 2497</span>        <span class="comment">// This file contains the content of FullPrintConfing / SLAFullPrintConfig.</span></div>
<div class="line"><span class="lineno"> 2498</span>        <span class="keywordflow">if</span> (config != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2499</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7b102c740d3e4463580db7a4d64bb09c">_add_print_config_file_to_archive</a>(archive, *config)) {</div>
<div class="line"><span class="lineno"> 2500</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2501</span>                boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2502</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2503</span>            }</div>
<div class="line"><span class="lineno"> 2504</span>        }</div>
<div class="line"><span class="lineno"> 2505</span> </div>
<div class="line"><span class="lineno"> 2506</span>        <span class="comment">// Adds slic3r model config file (&quot;Metadata/Slic3r_PE_model.config&quot;).</span></div>
<div class="line"><span class="lineno"> 2507</span>        <span class="comment">// This file contains all the attributes of all ModelObjects and their ModelVolumes (names, parameter overrides).</span></div>
<div class="line"><span class="lineno"> 2508</span>        <span class="comment">// As there is just a single Indexed Triangle Set data stored per ModelObject, offsets of volumes into their respective Indexed Triangle Set data</span></div>
<div class="line"><span class="lineno"> 2509</span>        <span class="comment">// is stored here as well.</span></div>
<div class="line"><span class="lineno"> 2510</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#aa07990688062e1b23367ef11c2da1c8e">_add_model_config_file_to_archive</a>(archive, model, objects_data)) {</div>
<div class="line"><span class="lineno"> 2511</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2512</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2513</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2514</span>        }</div>
<div class="line"><span class="lineno"> 2515</span> </div>
<div class="line"><span class="lineno"> 2516</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a>(&amp;archive)) {</div>
<div class="line"><span class="lineno"> 2517</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2518</span>            boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 2519</span>            <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a8aa4fbcaa8c50693cb27dc65c31f0450">add_error</a>(<span class="stringliteral">&quot;Unable to finalize the archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 2520</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2521</span>        }</div>
<div class="line"><span class="lineno"> 2522</span> </div>
<div class="line"><span class="lineno"> 2523</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 2524</span> </div>
<div class="line"><span class="lineno"> 2525</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2526</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a0e021f45ca8ef93cca8af3f4f85610b4"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a0e021f45ca8ef93cca8af3f4f85610b4">Slic3r::_3MF_Exporter::_add_layer_height_profile_file_to_archive</a></div><div class="ttdeci">bool _add_layer_height_profile_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:3020</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a1662f676ca7b3f79339c9d234d1e0d2b"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a1662f676ca7b3f79339c9d234d1e0d2b">Slic3r::_3MF_Exporter::_add_thumbnail_file_to_archive</a></div><div class="ttdeci">bool _add_thumbnail_file_to_archive(mz_zip_archive &amp;archive, const ThumbnailData &amp;thumbnail_data)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2548</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a3128939c480e128deb236c89fe603bcf"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a3128939c480e128deb236c89fe603bcf">Slic3r::_3MF_Exporter::_add_sla_support_points_file_to_archive</a></div><div class="ttdeci">bool _add_sla_support_points_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:3112</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a4bd2d70e9d472a8625a53fced64bfe05"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a4bd2d70e9d472a8625a53fced64bfe05">Slic3r::_3MF_Exporter::_add_layer_config_ranges_file_to_archive</a></div><div class="ttdeci">bool _add_layer_config_ranges_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:3054</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a6b90e89b8564c11761341f79139a8bcc"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6b90e89b8564c11761341f79139a8bcc">Slic3r::_3MF_Exporter::IdToObjectDataMap</a></div><div class="ttdeci">std::map&lt; int, ObjectData &gt; IdToObjectDataMap</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2365</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a6d3b925bc0a075e466bc02a16b8aefe6"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6d3b925bc0a075e466bc02a16b8aefe6">Slic3r::_3MF_Exporter::_add_sla_drain_holes_file_to_archive</a></div><div class="ttdeci">bool _add_sla_drain_holes_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:3147</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a7626b0f42759f64d362d604eadee1808"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7626b0f42759f64d362d604eadee1808">Slic3r::_3MF_Exporter::_add_cut_information_file_to_archive</a></div><div class="ttdeci">bool _add_cut_information_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2957</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a7b102c740d3e4463580db7a4d64bb09c"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7b102c740d3e4463580db7a4d64bb09c">Slic3r::_3MF_Exporter::_add_print_config_file_to_archive</a></div><div class="ttdeci">bool _add_print_config_file_to_archive(mz_zip_archive &amp;archive, const DynamicPrintConfig &amp;config)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:3198</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a7c7910386af606f878fb7f55e7915df7"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a7c7910386af606f878fb7f55e7915df7">Slic3r::_3MF_Exporter::_add_model_file_to_archive</a></div><div class="ttdeci">bool _add_model_file_to_archive(const std::string &amp;filename, mz_zip_archive &amp;archive, const Model &amp;model, IdToObjectDataMap &amp;objects_data)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2595</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a820881d156b6ca0aea484fa4c297191d"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a820881d156b6ca0aea484fa4c297191d">Slic3r::_3MF_Exporter::_add_relationships_file_to_archive</a></div><div class="ttdeci">bool _add_relationships_file_to_archive(mz_zip_archive &amp;archive)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2565</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_aa07990688062e1b23367ef11c2da1c8e"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#aa07990688062e1b23367ef11c2da1c8e">Slic3r::_3MF_Exporter::_add_model_config_file_to_archive</a></div><div class="ttdeci">bool _add_model_config_file_to_archive(mz_zip_archive &amp;archive, const Model &amp;model, const IdToObjectDataMap &amp;objects_data)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:3219</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_aea5504b862067e88864ecae23fc05cfb"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#aea5504b862067e88864ecae23fc05cfb">Slic3r::_3MF_Exporter::_add_custom_gcode_per_print_z_file_to_archive</a></div><div class="ttdeci">bool _add_custom_gcode_per_print_z_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model, const DynamicPrintConfig *config)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:3350</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_afa7a6ad7159878c51e2f68009b785c17"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#afa7a6ad7159878c51e2f68009b785c17">Slic3r::_3MF_Exporter::_add_content_types_file_to_archive</a></div><div class="ttdeci">bool _add_content_types_file_to_archive(mz_zip_archive &amp;archive)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2528</div></div>
<div class="ttc" id="aminiz_8c_html_a0f7c5b26c1200daacd0eefa8744d9d1a"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a></div><div class="ttdeci">mz_bool mz_zip_writer_finalize_archive(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition</b> miniz.c:7462</div></div>
<div class="ttc" id="aminiz_8c_html_a8c64687454aca17948eb58730dc6f41b"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a></div><div class="ttdeci">void mz_zip_zero_struct(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition</b> miniz.c:3792</div></div>
<div class="ttc" id="aminiz_8h_html_da/df0/structmz__zip__archive"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a></div><div class="ttdef"><b>Definition</b> miniz.h:1053</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0491714a3ef5a2b30bc98b9568ecde30"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">Slic3r::close_zip_writer</a></div><div class="ttdeci">bool close_zip_writer(mz_zip_archive *zip)</div><div class="ttdef"><b>Definition</b> miniz_extension.cpp:73</div></div>
<div class="ttc" id="anamespace_slic3r_html_a70bb7debedfe9d66753ad2a14e610324"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a70bb7debedfe9d66753ad2a14e610324">Slic3r::open_zip_writer</a></div><div class="ttdeci">bool open_zip_writer(mz_zip_archive *zip, const std::string &amp;fname)</div><div class="ttdef"><b>Definition</b> miniz_extension.cpp:67</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00073">Slic3r::close_zip_writer()</a>, <a class="el" href="../../#l00026">Slic3r::ThumbnailData::is_valid()</a>, <a class="el" href="../../#l07462">mz_zip_writer_finalize_archive()</a>, <a class="el" href="../../#l03792">mz_zip_zero_struct()</a>, and <a class="el" href="../../#l00067">Slic3r::open_zip_writer()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a6e7cc902530ee2b87bf8699dff040782_cgraph.svg" width="536" height="266"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8aa4fbcaa8c50693cb27dc65c31f0450" name="a8aa4fbcaa8c50693cb27dc65c31f0450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa4fbcaa8c50693cb27dc65c31f0450">&#9670;&#160;</a></span>add_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::_3MF_Base::add_error </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  305</span>{ <a class="code hl_variable" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a5ff1fb3e19eb063f66737029cba7fa9e">m_errors</a>.push_back(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>); }</div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___base_html_a5ff1fb3e19eb063f66737029cba7fa9e"><div class="ttname"><a href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a5ff1fb3e19eb063f66737029cba7fa9e">Slic3r::_3MF_Base::m_errors</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_errors</div><div class="ttdef"><b>Definition</b> 3mf.cpp:302</div></div>
<div class="ttc" id="atga_8cpp_html_adbb625a19574e9e39e1d07df31b00b06"><div class="ttname"><a href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a></div><div class="ttdeci">static char error[256]</div><div class="ttdef"><b>Definition</b> tga.cpp:50</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00050">error</a>, and <a class="el" href="../../#l00302">Slic3r::_3MF_Base::m_errors</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00924">Slic3r::_3MF_Importer::_extract_model_from_archive()</a>, and <a class="el" href="../../#l00666">Slic3r::_3MF_Importer::_load_model_from_file()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../de/dda/class_slic3r_1_1__3_m_f___base_a8aa4fbcaa8c50693cb27dc65c31f0450_icgraph.svg" width="100%" height="393"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a11dd90834b34265e79d083d3933c0ff3" name="a11dd90834b34265e79d083d3933c0ff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11dd90834b34265e79d083d3933c0ff3">&#9670;&#160;</a></span>add_transformation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::_3MF_Exporter::add_transformation </td>
          <td>(</td>
          <td class="paramtype">std::stringstream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> &amp;&#160;</td>
          <td class="paramname"><em>tr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2927</span>    {</div>
<div class="line"><span class="lineno"> 2928</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> c = 0; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &lt; 4; ++<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>) {</div>
<div class="line"><span class="lineno"> 2929</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> r = 0; r &lt; 3; ++r) {</div>
<div class="line"><span class="lineno"> 2930</span>                stream &lt;&lt; tr(r, c);</div>
<div class="line"><span class="lineno"> 2931</span>                <span class="keywordflow">if</span> (r != 2 || c != 3) stream &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 2932</span>            }</div>
<div class="line"><span class="lineno"> 2933</span>        }</div>
<div class="line"><span class="lineno"> 2934</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad05048908abcf488cf29ae57129edcd9" name="ad05048908abcf488cf29ae57129edcd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad05048908abcf488cf29ae57129edcd9">&#9670;&#160;</a></span>clear_errors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::_3MF_Base::clear_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  306</span>{ <a class="code hl_variable" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a5ff1fb3e19eb063f66737029cba7fa9e">m_errors</a>.clear(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00302">Slic3r::_3MF_Base::m_errors</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00621">Slic3r::_3MF_Importer::load_model_from_file()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../de/dda/class_slic3r_1_1__3_m_f___base_ad05048908abcf488cf29ae57129edcd9_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a57c926a67837c8d8a8eb761a0492490f" name="a57c926a67837c8d8a8eb761a0492490f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57c926a67837c8d8a8eb761a0492490f">&#9670;&#160;</a></span>log_errors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::_3MF_Base::log_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  310</span>        {</div>
<div class="line"><span class="lineno">  311</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; <a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a> : <a class="code hl_variable" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#a5ff1fb3e19eb063f66737029cba7fa9e">m_errors</a>)</div>
<div class="line"><span class="lineno">  312</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>;</div>
<div class="line"><span class="lineno">  313</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00050">error</a>, and <a class="el" href="../../#l00302">Slic3r::_3MF_Base::m_errors</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03461">Slic3r::load_3mf()</a>, and <a class="el" href="../../#l03476">Slic3r::store_3mf()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../de/dda/class_slic3r_1_1__3_m_f___base_a57c926a67837c8d8a8eb761a0492490f_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a204a0a35ec9c353a50741ab9c0b56651" name="a204a0a35ec9c353a50741ab9c0b56651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a204a0a35ec9c353a50741ab9c0b56651">&#9670;&#160;</a></span>save_model_to_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::save_model_to_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fullpath_sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> *&#160;</td>
          <td class="paramname"><em>thumbnail_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>zip64</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2393</span>    {</div>
<div class="line"><span class="lineno"> 2394</span>        <a class="code hl_function" href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#ad05048908abcf488cf29ae57129edcd9">clear_errors</a>();</div>
<div class="line"><span class="lineno"> 2395</span>        <a class="code hl_variable" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#ac058b218e081fc6741604488260bdeb7">m_fullpath_sources</a> = fullpath_sources;</div>
<div class="line"><span class="lineno"> 2396</span>        <a class="code hl_variable" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a103b673d100183a44466bdeb275b6770">m_zip64</a> = zip64;</div>
<div class="line"><span class="lineno"> 2397</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6e7cc902530ee2b87bf8699dff040782">_save_model_to_file</a>(filename, model, config, thumbnail_data);</div>
<div class="line"><span class="lineno"> 2398</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___base_html_ad05048908abcf488cf29ae57129edcd9"><div class="ttname"><a href="../../de/dda/class_slic3r_1_1__3_m_f___base.html#ad05048908abcf488cf29ae57129edcd9">Slic3r::_3MF_Base::clear_errors</a></div><div class="ttdeci">void clear_errors()</div><div class="ttdef"><b>Definition</b> 3mf.cpp:306</div></div>
<div class="ttc" id="aclass_slic3r_1_1__3_m_f___exporter_html_a6e7cc902530ee2b87bf8699dff040782"><div class="ttname"><a href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html#a6e7cc902530ee2b87bf8699dff040782">Slic3r::_3MF_Exporter::_save_model_to_file</a></div><div class="ttdeci">bool _save_model_to_file(const std::string &amp;filename, Model &amp;model, const DynamicPrintConfig *config, const ThumbnailData *thumbnail_data)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2400</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l03476">Slic3r::store_3mf()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/dda/class_slic3r_1_1__3_m_f___exporter_a204a0a35ec9c353a50741ab9c0b56651_icgraph.svg" width="100%" height="457"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5ff1fb3e19eb063f66737029cba7fa9e" name="a5ff1fb3e19eb063f66737029cba7fa9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ff1fb3e19eb063f66737029cba7fa9e">&#9670;&#160;</a></span>m_errors</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; Slic3r::_3MF_Base::m_errors</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00305">Slic3r::_3MF_Base::add_error()</a>, <a class="el" href="../../#l00306">Slic3r::_3MF_Base::clear_errors()</a>, and <a class="el" href="../../#l00309">Slic3r::_3MF_Base::log_errors()</a>.</p>

</div>
</div>
<a id="ac058b218e081fc6741604488260bdeb7" name="ac058b218e081fc6741604488260bdeb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac058b218e081fc6741604488260bdeb7">&#9670;&#160;</a></span>m_fullpath_sources</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::m_fullpath_sources { true }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a103b673d100183a44466bdeb275b6770" name="a103b673d100183a44466bdeb275b6770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a103b673d100183a44466bdeb275b6770">&#9670;&#160;</a></span>m_zip64</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_3MF_Exporter::m_zip64 { true }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/libslic3r/Format/<a class="el" href="../../">3mf.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d7/dda/class_slic3r_1_1__3_m_f___exporter.html">_3MF_Exporter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
