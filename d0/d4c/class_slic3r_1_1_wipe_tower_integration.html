<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: Slic3r::WipeTowerIntegration Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d0/d4c/class_slic3r_1_1_wipe_tower_integration.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d9/d29/class_slic3r_1_1_wipe_tower_integration-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::WipeTowerIntegration Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../">src/libslic3r/GCode.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::WipeTowerIntegration:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d9/d4e/class_slic3r_1_1_wipe_tower_integration__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a47e7425b060677efa639ac1c25d024b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a47e7425b060677efa639ac1c25d024b3">WipeTowerIntegration</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> PrintConfig &amp;print_config, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &gt; &amp;priming, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::vector&lt; <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &gt; &gt; &amp;tool_changes, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &amp;final_purge)</td></tr>
<tr class="separator:a47e7425b060677efa639ac1c25d024b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7497d8d42cdcc1e6eab63612993aee92"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a7497d8d42cdcc1e6eab63612993aee92">prime</a> (<a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;gcodegen)</td></tr>
<tr class="separator:a7497d8d42cdcc1e6eab63612993aee92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16e8b64f43622e9f0af60b919b2f61c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a16e8b64f43622e9f0af60b919b2f61c6">next_layer</a> ()</td></tr>
<tr class="separator:a16e8b64f43622e9f0af60b919b2f61c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756231fc8c765bc08432e520fca5f49c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a756231fc8c765bc08432e520fca5f49c">tool_change</a> (<a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;gcodegen, int extruder_id, bool finish_layer)</td></tr>
<tr class="separator:a756231fc8c765bc08432e520fca5f49c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad176401561c0de48be24cc98ab44b4bf"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#ad176401561c0de48be24cc98ab44b4bf">finalize</a> (<a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;gcodegen)</td></tr>
<tr class="separator:ad176401561c0de48be24cc98ab44b4bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3c60453fffeaded5ed74bf807ac8b63"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#ab3c60453fffeaded5ed74bf807ac8b63">used_filament_length</a> () <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab3c60453fffeaded5ed74bf807ac8b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a28acb3449ddff4a51f341627ff08d29b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html">WipeTowerIntegration</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a28acb3449ddff4a51f341627ff08d29b">operator=</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html">WipeTowerIntegration</a> &amp;)</td></tr>
<tr class="separator:a28acb3449ddff4a51f341627ff08d29b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77890da960412cea8c288fe74a2d28cc"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a77890da960412cea8c288fe74a2d28cc">append_tcr</a> (<a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;gcodegen, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &amp;tcr, int new_extruder_id, double z=-1.) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a77890da960412cea8c288fe74a2d28cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a771e997a5fe634f6e4576978337086fd"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a771e997a5fe634f6e4576978337086fd">post_process_wipe_tower_moves</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &amp;tcr, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> &amp;translation, float <a class="el" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a>) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a771e997a5fe634f6e4576978337086fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a22b30058ebbc99a7e5c270f4ce6458d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a22b30058ebbc99a7e5c270f4ce6458d5">m_left</a></td></tr>
<tr class="separator:a22b30058ebbc99a7e5c270f4ce6458d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075718c7fb729620ccb589804f7993a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a075718c7fb729620ccb589804f7993a6">m_right</a></td></tr>
<tr class="separator:a075718c7fb729620ccb589804f7993a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a722e32ebde8833aa1ab02b37c62fc472"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a722e32ebde8833aa1ab02b37c62fc472">m_wipe_tower_pos</a></td></tr>
<tr class="separator:a722e32ebde8833aa1ab02b37c62fc472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ab27296c9de54d39b3235ddad2d26c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a6ab27296c9de54d39b3235ddad2d26c5">m_wipe_tower_rotation</a></td></tr>
<tr class="separator:a6ab27296c9de54d39b3235ddad2d26c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48c69b9c336315f879eef938994b94c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a48c69b9c336315f879eef938994b94c0">m_extruder_offsets</a></td></tr>
<tr class="separator:a48c69b9c336315f879eef938994b94c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa781301aa91ef51fd6a2d3498b0aa2d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#aa781301aa91ef51fd6a2d3498b0aa2d8">m_priming</a></td></tr>
<tr class="separator:aa781301aa91ef51fd6a2d3498b0aa2d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa8cf2cc0f08521e8ddc63bc62015a02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::vector&lt; <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &gt; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a></td></tr>
<tr class="separator:afa8cf2cc0f08521e8ddc63bc62015a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bbbdb71b9e0595564b4c6369cc72df1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a8bbbdb71b9e0595564b4c6369cc72df1">m_final_purge</a></td></tr>
<tr class="separator:a8bbbdb71b9e0595564b4c6369cc72df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8b027d8dc3fa7e23b050bb17f664b9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a></td></tr>
<tr class="separator:a0f8b027d8dc3fa7e23b050bb17f664b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71a1f9ba82309f7e23ab9e8a10a656e5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a71a1f9ba82309f7e23ab9e8a10a656e5">m_tool_change_idx</a></td></tr>
<tr class="separator:a71a1f9ba82309f7e23ab9e8a10a656e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80f1d9eb9171304288522d61b4567a43"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a80f1d9eb9171304288522d61b4567a43">m_last_wipe_tower_print_z</a> = 0.<a class="el" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a></td></tr>
<tr class="separator:a80f1d9eb9171304288522d61b4567a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a47e7425b060677efa639ac1c25d024b3" name="a47e7425b060677efa639ac1c25d024b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e7425b060677efa639ac1c25d024b3">&#9670;&#160;</a></span>WipeTowerIntegration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Slic3r::WipeTowerIntegration::WipeTowerIntegration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> PrintConfig &amp;&#160;</td>
          <td class="paramname"><em>print_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>priming</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::vector&lt; <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>tool_changes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &amp;&#160;</td>
          <td class="paramname"><em>final_purge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   68</span>                                                                                :</div>
<div class="line"><span class="lineno">   69</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a22b30058ebbc99a7e5c270f4ce6458d5">m_left</a>(<span class="comment">/*float(print_config.wipe_tower_x.value)*/</span> 0.f),</div>
<div class="line"><span class="lineno">   70</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a075718c7fb729620ccb589804f7993a6">m_right</a>(<span class="keywordtype">float</span>(<span class="comment">/*print_config.wipe_tower_x.value +*/</span> print_config.wipe_tower_width.value)),</div>
<div class="line"><span class="lineno">   71</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a722e32ebde8833aa1ab02b37c62fc472">m_wipe_tower_pos</a>(<span class="keywordtype">float</span>(print_config.wipe_tower_x.value), <span class="keywordtype">float</span>(print_config.wipe_tower_y.value)),</div>
<div class="line"><span class="lineno">   72</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a6ab27296c9de54d39b3235ddad2d26c5">m_wipe_tower_rotation</a>(<span class="keywordtype">float</span>(print_config.wipe_tower_rotation_angle)),</div>
<div class="line"><span class="lineno">   73</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a48c69b9c336315f879eef938994b94c0">m_extruder_offsets</a>(print_config.extruder_offset.values),</div>
<div class="line"><span class="lineno">   74</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#aa781301aa91ef51fd6a2d3498b0aa2d8">m_priming</a>(priming),</div>
<div class="line"><span class="lineno">   75</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a>(tool_changes),</div>
<div class="line"><span class="lineno">   76</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a8bbbdb71b9e0595564b4c6369cc72df1">m_final_purge</a>(final_purge),</div>
<div class="line"><span class="lineno">   77</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a>(-1),</div>
<div class="line"><span class="lineno">   78</span>        <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a71a1f9ba82309f7e23ab9e8a10a656e5">m_tool_change_idx</a>(0)</div>
<div class="line"><span class="lineno">   79</span>    {}</div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a075718c7fb729620ccb589804f7993a6"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a075718c7fb729620ccb589804f7993a6">Slic3r::WipeTowerIntegration::m_right</a></div><div class="ttdeci">const float m_right</div><div class="ttdef"><b>Definition</b> GCode.hpp:96</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a0f8b027d8dc3fa7e23b050bb17f664b9"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">Slic3r::WipeTowerIntegration::m_layer_idx</a></div><div class="ttdeci">int m_layer_idx</div><div class="ttdef"><b>Definition</b> GCode.hpp:106</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a22b30058ebbc99a7e5c270f4ce6458d5"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a22b30058ebbc99a7e5c270f4ce6458d5">Slic3r::WipeTowerIntegration::m_left</a></div><div class="ttdeci">const float m_left</div><div class="ttdef"><b>Definition</b> GCode.hpp:95</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a48c69b9c336315f879eef938994b94c0"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a48c69b9c336315f879eef938994b94c0">Slic3r::WipeTowerIntegration::m_extruder_offsets</a></div><div class="ttdeci">const std::vector&lt; Vec2d &gt; m_extruder_offsets</div><div class="ttdef"><b>Definition</b> GCode.hpp:99</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a6ab27296c9de54d39b3235ddad2d26c5"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a6ab27296c9de54d39b3235ddad2d26c5">Slic3r::WipeTowerIntegration::m_wipe_tower_rotation</a></div><div class="ttdeci">const float m_wipe_tower_rotation</div><div class="ttdef"><b>Definition</b> GCode.hpp:98</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a71a1f9ba82309f7e23ab9e8a10a656e5"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a71a1f9ba82309f7e23ab9e8a10a656e5">Slic3r::WipeTowerIntegration::m_tool_change_idx</a></div><div class="ttdeci">int m_tool_change_idx</div><div class="ttdef"><b>Definition</b> GCode.hpp:107</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a722e32ebde8833aa1ab02b37c62fc472"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a722e32ebde8833aa1ab02b37c62fc472">Slic3r::WipeTowerIntegration::m_wipe_tower_pos</a></div><div class="ttdeci">const Vec2f m_wipe_tower_pos</div><div class="ttdef"><b>Definition</b> GCode.hpp:97</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a8bbbdb71b9e0595564b4c6369cc72df1"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a8bbbdb71b9e0595564b4c6369cc72df1">Slic3r::WipeTowerIntegration::m_final_purge</a></div><div class="ttdeci">const WipeTower::ToolChangeResult &amp; m_final_purge</div><div class="ttdef"><b>Definition</b> GCode.hpp:104</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_aa781301aa91ef51fd6a2d3498b0aa2d8"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#aa781301aa91ef51fd6a2d3498b0aa2d8">Slic3r::WipeTowerIntegration::m_priming</a></div><div class="ttdeci">const std::vector&lt; WipeTower::ToolChangeResult &gt; &amp; m_priming</div><div class="ttdef"><b>Definition</b> GCode.hpp:102</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_afa8cf2cc0f08521e8ddc63bc62015a02"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">Slic3r::WipeTowerIntegration::m_tool_changes</a></div><div class="ttdeci">const std::vector&lt; std::vector&lt; WipeTower::ToolChangeResult &gt; &gt; &amp; m_tool_changes</div><div class="ttdef"><b>Definition</b> GCode.hpp:103</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a77890da960412cea8c288fe74a2d28cc" name="a77890da960412cea8c288fe74a2d28cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77890da960412cea8c288fe74a2d28cc">&#9670;&#160;</a></span>append_tcr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::WipeTowerIntegration::append_tcr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;&#160;</td>
          <td class="paramname"><em>gcodegen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &amp;&#160;</td>
          <td class="paramname"><em>tcr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_extruder_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>z</em> = <code>-1.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  206</span>    {</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">if</span> (new_extruder_id != -1 &amp;&amp; new_extruder_id != tcr.new_tool)</div>
<div class="line"><span class="lineno">  208</span>            <span class="keywordflow">throw</span> Slic3r::InvalidArgument(<span class="stringliteral">&quot;Error: WipeTowerIntegration::append_tcr was asked to do a toolchange it didn&#39;t expect.&quot;</span>);</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>        std::string <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>        <span class="comment">// Toolchangeresult.gcode assumes the wipe tower corner is at the origin (except for priming lines)</span></div>
<div class="line"><span class="lineno">  213</span>        <span class="comment">// We want to rotate and shift all extrusions (gcode postprocessing) and starting and ending position</span></div>
<div class="line"><span class="lineno">  214</span>        <span class="keywordtype">float</span> alpha = <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a6ab27296c9de54d39b3235ddad2d26c5">m_wipe_tower_rotation</a> / 180.f * float(<a class="code hl_define" href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>);</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>        <span class="keyword">auto</span> transform_wt_pt = [&amp;alpha, <span class="keyword">this</span>](<span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a>&amp; pt) -&gt; <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> {</div>
<div class="line"><span class="lineno">  217</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> out = <a class="code hl_typedef" href="../../d5/d00/group___geometry___module.html#ga35e2cace3ada497794734edb8bc33b6e">Eigen::Rotation2Df</a>(alpha) * pt;</div>
<div class="line"><span class="lineno">  218</span>            out += <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a722e32ebde8833aa1ab02b37c62fc472">m_wipe_tower_pos</a>;</div>
<div class="line"><span class="lineno">  219</span>            <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  220</span>        };</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> start_pos = tcr.start_pos;</div>
<div class="line"><span class="lineno">  223</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> end_pos = tcr.end_pos;</div>
<div class="line"><span class="lineno">  224</span>        <span class="keywordflow">if</span> (! tcr.priming) {</div>
<div class="line"><span class="lineno">  225</span>            start_pos = transform_wt_pt(start_pos);</div>
<div class="line"><span class="lineno">  226</span>            end_pos = transform_wt_pt(end_pos);</div>
<div class="line"><span class="lineno">  227</span>        }</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> wipe_tower_offset = tcr.priming ? Vec2f::Zero() : <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a722e32ebde8833aa1ab02b37c62fc472">m_wipe_tower_pos</a>;</div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordtype">float</span> wipe_tower_rotation = tcr.priming ? 0.f : alpha;</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>        std::string tcr_rotated_gcode = <a class="code hl_function" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a771e997a5fe634f6e4576978337086fd">post_process_wipe_tower_moves</a>(tcr, wipe_tower_offset, wipe_tower_rotation);</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>        <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.writer().unlift(); <span class="comment">// Make sure there is no z-hop (in most cases, there isn&#39;t).</span></div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>        <span class="keywordtype">double</span> current_z = gcodegen.writer().get_position().z();</div>
<div class="line"><span class="lineno">  237</span>        <span class="keywordflow">if</span> (z == -1.) <span class="comment">// in case no specific z was provided, print at current_z pos</span></div>
<div class="line"><span class="lineno">  238</span>            z = current_z;</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> needs_toolchange = gcodegen.writer().need_toolchange(new_extruder_id);</div>
<div class="line"><span class="lineno">  241</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> will_go_down = ! <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">is_approx</a>(z, current_z);</div>
<div class="line"><span class="lineno">  242</span>        <span class="keywordflow">if</span> (tcr.force_travel || ! needs_toolchange || (gcodegen.config().single_extruder_multi_material &amp;&amp; ! tcr.priming)) {</div>
<div class="line"><span class="lineno">  243</span>            <span class="comment">// Move over the wipe tower. If this is not single-extruder MM, the first wipe tower move following the</span></div>
<div class="line"><span class="lineno">  244</span>            <span class="comment">// toolchange will travel there anyway (if there is a toolchange).</span></div>
<div class="line"><span class="lineno">  245</span>            <span class="comment">// FIXME: It would be better if the wipe tower set the force_travel flag for all toolchanges,</span></div>
<div class="line"><span class="lineno">  246</span>            <span class="comment">// then we could simplify the condition and make it more readable.</span></div>
<div class="line"><span class="lineno">  247</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.retract();</div>
<div class="line"><span class="lineno">  248</span>            gcodegen.m_avoid_crossing_perimeters.use_external_mp_once();</div>
<div class="line"><span class="lineno">  249</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.travel_to(</div>
<div class="line"><span class="lineno">  250</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7246c3aef66e2889053ad36b7dc4ac63">wipe_tower_point_to_object_point</a>(gcodegen, start_pos),</div>
<div class="line"><span class="lineno">  251</span>                <a class="code hl_variable" href="../../d5/d21/struct_slic3r_1_1_extrusion_role.html#ab0c26c328d40adba38bf103d36436c95">ExtrusionRole::Mixed</a>,</div>
<div class="line"><span class="lineno">  252</span>                <span class="stringliteral">&quot;Travel to a Wipe Tower&quot;</span>);</div>
<div class="line"><span class="lineno">  253</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.unretract();</div>
<div class="line"><span class="lineno">  254</span>        }</div>
<div class="line"><span class="lineno">  255</span>        </div>
<div class="line"><span class="lineno">  256</span>        <span class="keywordflow">if</span> (will_go_down) {</div>
<div class="line"><span class="lineno">  257</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.writer().retract();</div>
<div class="line"><span class="lineno">  258</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.writer().travel_to_z(z, <span class="stringliteral">&quot;Travel down to the last wipe tower layer.&quot;</span>);</div>
<div class="line"><span class="lineno">  259</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.writer().unretract();</div>
<div class="line"><span class="lineno">  260</span>        }</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>        std::string toolchange_gcode_str;</div>
<div class="line"><span class="lineno">  263</span>        std::string deretraction_str;</div>
<div class="line"><span class="lineno">  264</span>        <span class="keywordflow">if</span> (tcr.priming || (new_extruder_id &gt;= 0 &amp;&amp; needs_toolchange)) {</div>
<div class="line"><span class="lineno">  265</span>            <span class="keywordflow">if</span> (gcodegen.config().single_extruder_multi_material)</div>
<div class="line"><span class="lineno">  266</span>                gcodegen.m_wipe.reset_path(); <span class="comment">// We don&#39;t want wiping on the ramming lines.</span></div>
<div class="line"><span class="lineno">  267</span>            toolchange_gcode_str = gcodegen.set_extruder(new_extruder_id, tcr.print_z); <span class="comment">// TODO: toolchange_z vs print_z</span></div>
<div class="line"><span class="lineno">  268</span>            <span class="keywordflow">if</span> (gcodegen.config().wipe_tower)</div>
<div class="line"><span class="lineno">  269</span>                deretraction_str = gcodegen.unretract();</div>
<div class="line"><span class="lineno">  270</span>        }</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>        </div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>        <span class="comment">// Insert the toolchange and deretraction gcode into the generated gcode.</span></div>
<div class="line"><span class="lineno">  276</span>        DynamicConfig config;</div>
<div class="line"><span class="lineno">  277</span>        config.set_key_value(<span class="stringliteral">&quot;toolchange_gcode&quot;</span>, <span class="keyword">new</span> ConfigOptionString(toolchange_gcode_str));</div>
<div class="line"><span class="lineno">  278</span>        config.set_key_value(<span class="stringliteral">&quot;deretraction_from_wipe_tower_generator&quot;</span>, <span class="keyword">new</span> ConfigOptionString(deretraction_str));</div>
<div class="line"><span class="lineno">  279</span>        std::string tcr_gcode, tcr_escaped_gcode = gcodegen.placeholder_parser_process(<span class="stringliteral">&quot;tcr_rotated_gcode&quot;</span>, tcr_rotated_gcode, new_extruder_id, &amp;config);</div>
<div class="line"><span class="lineno">  280</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#adc08139e1bb59d39e8faa5ef4754c5e5">unescape_string_cstyle</a>(tcr_escaped_gcode, tcr_gcode);</div>
<div class="line"><span class="lineno">  281</span>        <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += tcr_gcode;</div>
<div class="line"><span class="lineno">  282</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ae8d6e6e717d5e93e72d97b30431a0f78">check_add_eol</a>(toolchange_gcode_str);</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>        <span class="comment">// A phony move to the end position at the wipe tower.</span></div>
<div class="line"><span class="lineno">  285</span>        gcodegen.writer().travel_to_xy(end_pos.cast&lt;<span class="keywordtype">double</span>&gt;());</div>
<div class="line"><span class="lineno">  286</span>        gcodegen.set_last_pos(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7246c3aef66e2889053ad36b7dc4ac63">wipe_tower_point_to_object_point</a>(gcodegen, end_pos));</div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">is_approx</a>(z, current_z)) {</div>
<div class="line"><span class="lineno">  288</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.writer().retract();</div>
<div class="line"><span class="lineno">  289</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.writer().travel_to_z(current_z, <span class="stringliteral">&quot;Travel back up to the topmost object layer.&quot;</span>);</div>
<div class="line"><span class="lineno">  290</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.writer().unretract();</div>
<div class="line"><span class="lineno">  291</span>        }</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  294</span>            <span class="comment">// Prepare a future wipe.</span></div>
<div class="line"><span class="lineno">  295</span>            gcodegen.m_wipe.reset_path();</div>
<div class="line"><span class="lineno">  296</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a>&amp; wipe_pt : tcr.wipe_path)</div>
<div class="line"><span class="lineno">  297</span>                gcodegen.m_wipe.path.points.emplace_back(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7246c3aef66e2889053ad36b7dc4ac63">wipe_tower_point_to_object_point</a>(gcodegen, transform_wt_pt(wipe_pt)));</div>
<div class="line"><span class="lineno">  298</span>        }</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>        <span class="comment">// Let the planner know we are traveling between objects.</span></div>
<div class="line"><span class="lineno">  301</span>        gcodegen.m_avoid_crossing_perimeters.use_external_mp_once();</div>
<div class="line"><span class="lineno">  302</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  303</span>    }</div>
<div class="ttc" id="a_extrusion_simulator_8cpp_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="../../de/ddd/_extrusion_simulator_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition</b> ExtrusionSimulator.cpp:20</div></div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a771e997a5fe634f6e4576978337086fd"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a771e997a5fe634f6e4576978337086fd">Slic3r::WipeTowerIntegration::post_process_wipe_tower_moves</a></div><div class="ttdeci">std::string post_process_wipe_tower_moves(const WipeTower::ToolChangeResult &amp;tcr, const Vec2f &amp;translation, float angle) const</div><div class="ttdef"><b>Definition</b> GCode.cpp:307</div></div>
<div class="ttc" id="agroup___geometry___module_html_ga35e2cace3ada497794734edb8bc33b6e"><div class="ttname"><a href="../../d5/d00/group___geometry___module.html#ga35e2cace3ada497794734edb8bc33b6e">Eigen::Rotation2Df</a></div><div class="ttdeci">Rotation2D&lt; float &gt; Rotation2Df</div><div class="ttdef"><b>Definition</b> Rotation2D.h:165</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">Slic3r::Utils::TimeFormat::gcode</a></div><div class="ttdeci">@ gcode</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7246c3aef66e2889053ad36b7dc4ac63"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7246c3aef66e2889053ad36b7dc4ac63">Slic3r::wipe_tower_point_to_object_point</a></div><div class="ttdeci">static Point wipe_tower_point_to_object_point(GCode &amp;gcodegen, const Vec2f &amp;wipe_tower_pt)</div><div class="ttdef"><b>Definition</b> GCode.cpp:200</div></div>
<div class="ttc" id="anamespace_slic3r_html_a93b359a57ef07c110b0f8c62d0a15045"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a93b359a57ef07c110b0f8c62d0a15045">Slic3r::is_approx</a></div><div class="ttdeci">constexpr bool is_approx(Number value, Number test_value, Number precision=EPSILON)</div><div class="ttdef"><b>Definition</b> libslic3r.h:271</div></div>
<div class="ttc" id="anamespace_slic3r_html_abe1c34afe5a07b8b1a7823ecfe2d1722"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Slic3r::Vec2f</a></div><div class="ttdeci">Eigen::Matrix&lt; float, 2, 1, Eigen::DontAlign &gt; Vec2f</div><div class="ttdef"><b>Definition</b> Point.hpp:48</div></div>
<div class="ttc" id="anamespace_slic3r_html_adc08139e1bb59d39e8faa5ef4754c5e5"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#adc08139e1bb59d39e8faa5ef4754c5e5">Slic3r::unescape_string_cstyle</a></div><div class="ttdeci">bool unescape_string_cstyle(const std::string &amp;str, std::string &amp;str_out)</div><div class="ttdef"><b>Definition</b> Config.cpp:107</div></div>
<div class="ttc" id="anamespace_slic3r_html_ae8d6e6e717d5e93e72d97b30431a0f78"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ae8d6e6e717d5e93e72d97b30431a0f78">Slic3r::check_add_eol</a></div><div class="ttdeci">static void check_add_eol(std::string &amp;gcode)</div><div class="ttdef"><b>Definition</b> GCode.cpp:75</div></div>
<div class="ttc" id="astruct_slic3r_1_1_extrusion_role_html_ab0c26c328d40adba38bf103d36436c95"><div class="ttname"><a href="../../d5/d21/struct_slic3r_1_1_extrusion_role.html#ab0c26c328d40adba38bf103d36436c95">Slic3r::ExtrusionRole::Mixed</a></div><div class="ttdeci">static constexpr const ExtrusionRoleModifiers Mixed</div><div class="ttdef"><b>Definition</b> ExtrusionRole.hpp:79</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00075">Slic3r::check_add_eol()</a>, <a class="el" href="../../#l00172">Slic3r::GCode::config()</a>, <a class="el" href="../../#l00054">Slic3r::WipeTower::ToolChangeResult::end_pos</a>, <a class="el" href="../../#l00088">Slic3r::WipeTower::ToolChangeResult::force_travel</a>, <a class="el" href="../../#l00075">Slic3r::GCodeWriter::get_position()</a>, <a class="el" href="../../#l00271">Slic3r::is_approx()</a>, <a class="el" href="../../#l00379">Slic3r::GCode::m_avoid_crossing_perimeters</a>, <a class="el" href="../../#l00020">M_PI</a>, <a class="el" href="../../#l00378">Slic3r::GCode::m_wipe</a>, <a class="el" href="../../#l00097">m_wipe_tower_pos</a>, <a class="el" href="../../#l00098">m_wipe_tower_rotation</a>, <a class="el" href="../../#l00079">Slic3r::ExtrusionRole::Mixed</a>, <a class="el" href="../../#l00051">Slic3r::GCodeWriter::need_toolchange()</a>, <a class="el" href="../../#l00073">Slic3r::WipeTower::ToolChangeResult::new_tool</a>, <a class="el" href="../../#l00054">Slic3r::Wipe::path</a>, <a class="el" href="../../#l01683">Slic3r::GCode::placeholder_parser_process()</a>, <a class="el" href="../../#l00018">Slic3r::MultiPoint::points</a>, <a class="el" href="../../#l00307">post_process_wipe_tower_moves()</a>, <a class="el" href="../../#l00060">Slic3r::WipeTower::ToolChangeResult::priming</a>, <a class="el" href="../../#l00043">Slic3r::WipeTower::ToolChangeResult::print_z</a>, <a class="el" href="../../#l00058">Slic3r::Wipe::reset_path()</a>, <a class="el" href="../../#l00378">Slic3r::GCodeWriter::retract()</a>, <a class="el" href="../../#l03290">Slic3r::GCode::retract()</a>, <a class="el" href="../../#l03316">Slic3r::GCode::set_extruder()</a>, <a class="el" href="../../#l02431">Slic3r::DynamicConfig::set_key_value()</a>, <a class="el" href="../../#l00278">Slic3r::GCode::set_last_pos()</a>, <a class="el" href="../../#l00051">Slic3r::WipeTower::ToolChangeResult::start_pos</a>, <a class="el" href="../../#l03169">Slic3r::GCode::travel_to()</a>, <a class="el" href="../../#l00260">Slic3r::GCodeWriter::travel_to_xy()</a>, <a class="el" href="../../#l00305">Slic3r::GCodeWriter::travel_to_z()</a>, <a class="el" href="../../#l00107">Slic3r::unescape_string_cstyle()</a>, <a class="el" href="../../#l00479">Slic3r::GCodeWriter::unlift()</a>, <a class="el" href="../../#l00330">Slic3r::GCode::unretract()</a>, <a class="el" href="../../#l00435">Slic3r::GCodeWriter::unretract()</a>, <a class="el" href="../../#l00020">Slic3r::AvoidCrossingPerimeters::use_external_mp_once()</a>, <a class="el" href="../../#l00067">Slic3r::WipeTower::ToolChangeResult::wipe_path</a>, <a class="el" href="../../#l00200">Slic3r::wipe_tower_point_to_object_point()</a>, and <a class="el" href="../../#l00174">Slic3r::GCode::writer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00423">finalize()</a>, <a class="el" href="../../#l00383">prime()</a>, and <a class="el" href="../../#l00393">tool_change()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration_a77890da960412cea8c288fe74a2d28cc_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration_a77890da960412cea8c288fe74a2d28cc_icgraph.svg" width="436" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad176401561c0de48be24cc98ab44b4bf" name="ad176401561c0de48be24cc98ab44b4bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad176401561c0de48be24cc98ab44b4bf">&#9670;&#160;</a></span>finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::WipeTowerIntegration::finalize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;&#160;</td>
          <td class="paramname"><em>gcodegen</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  424</span>    {</div>
<div class="line"><span class="lineno">  425</span>        std::string <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  426</span>        <span class="keywordflow">if</span> (std::abs(gcodegen.writer().get_position().z() - <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a8bbbdb71b9e0595564b4c6369cc72df1">m_final_purge</a>.<a class="code hl_variable" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html#a40f17010d3f93521caf7eb5e5fd01225">print_z</a>) &gt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno">  427</span>            <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += gcodegen.change_layer(<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a8bbbdb71b9e0595564b4c6369cc72df1">m_final_purge</a>.<a class="code hl_variable" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html#a40f17010d3f93521caf7eb5e5fd01225">print_z</a>);</div>
<div class="line"><span class="lineno">  428</span>        <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += <a class="code hl_function" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a77890da960412cea8c288fe74a2d28cc">append_tcr</a>(gcodegen, <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a8bbbdb71b9e0595564b4c6369cc72df1">m_final_purge</a>, -1);</div>
<div class="line"><span class="lineno">  429</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  430</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a77890da960412cea8c288fe74a2d28cc"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a77890da960412cea8c288fe74a2d28cc">Slic3r::WipeTowerIntegration::append_tcr</a></div><div class="ttdeci">std::string append_tcr(GCode &amp;gcodegen, const WipeTower::ToolChangeResult &amp;tcr, int new_extruder_id, double z=-1.) const</div><div class="ttdef"><b>Definition</b> GCode.cpp:205</div></div>
<div class="ttc" id="alibslic3r_8h_html_a75f355966e0a97665eaf5a4c79baa7af"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a></div><div class="ttdeci">static constexpr double EPSILON</div><div class="ttdef"><b>Definition</b> libslic3r.h:51</div></div>
<div class="ttc" id="astruct_slic3r_1_1_wipe_tower_1_1_tool_change_result_html_a40f17010d3f93521caf7eb5e5fd01225"><div class="ttname"><a href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html#a40f17010d3f93521caf7eb5e5fd01225">Slic3r::WipeTower::ToolChangeResult::print_z</a></div><div class="ttdeci">float print_z</div><div class="ttdef"><b>Definition</b> WipeTower.hpp:43</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00205">append_tcr()</a>, <a class="el" href="../../#l02632">Slic3r::GCode::change_layer()</a>, <a class="el" href="../../#l00051">EPSILON</a>, <a class="el" href="../../#l00075">Slic3r::GCodeWriter::get_position()</a>, <a class="el" href="../../#l00104">m_final_purge</a>, <a class="el" href="../../#l00043">Slic3r::WipeTower::ToolChangeResult::print_z</a>, and <a class="el" href="../../#l00174">Slic3r::GCode::writer()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration_ad176401561c0de48be24cc98ab44b4bf_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a16e8b64f43622e9f0af60b919b2f61c6" name="a16e8b64f43622e9f0af60b919b2f61c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16e8b64f43622e9f0af60b919b2f61c6">&#9670;&#160;</a></span>next_layer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::WipeTowerIntegration::next_layer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   82</span>{ ++ <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a>; <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a71a1f9ba82309f7e23ab9e8a10a656e5">m_tool_change_idx</a> = 0; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00106">m_layer_idx</a>, and <a class="el" href="../../#l00107">m_tool_change_idx</a>.</p>

</div>
</div>
<a id="a28acb3449ddff4a51f341627ff08d29b" name="a28acb3449ddff4a51f341627ff08d29b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28acb3449ddff4a51f341627ff08d29b">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html">WipeTowerIntegration</a> &amp; Slic3r::WipeTowerIntegration::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html">WipeTowerIntegration</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a771e997a5fe634f6e4576978337086fd" name="a771e997a5fe634f6e4576978337086fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a771e997a5fe634f6e4576978337086fd">&#9670;&#160;</a></span>post_process_wipe_tower_moves()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::WipeTowerIntegration::post_process_wipe_tower_moves </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a> &amp;&#160;</td>
          <td class="paramname"><em>tcr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> &amp;&#160;</td>
          <td class="paramname"><em>translation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  308</span>    {</div>
<div class="line"><span class="lineno">  309</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> extruder_offset = <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a48c69b9c336315f879eef938994b94c0">m_extruder_offsets</a>[tcr.initial_tool].cast&lt;<span class="keywordtype">float</span>&gt;();</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>        std::istringstream gcode_str(tcr.gcode);</div>
<div class="line"><span class="lineno">  312</span>        std::string gcode_out;</div>
<div class="line"><span class="lineno">  313</span>        std::string line;</div>
<div class="line"><span class="lineno">  314</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a> = tcr.start_pos;</div>
<div class="line"><span class="lineno">  315</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> transformed_pos = <a class="code hl_typedef" href="../../d5/d00/group___geometry___module.html#ga35e2cace3ada497794734edb8bc33b6e">Eigen::Rotation2Df</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a>) * <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a> + translation;</div>
<div class="line"><span class="lineno">  316</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> old_pos(-1000.1f, -1000.1f);</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">while</span> (gcode_str) {</div>
<div class="line"><span class="lineno">  319</span>            std::getline(gcode_str, line);  <span class="comment">// we read the gcode line by line</span></div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>            <span class="comment">// All G1 commands should be translated and rotated. X and Y coords are</span></div>
<div class="line"><span class="lineno">  322</span>            <span class="comment">// only pushed to the output when they differ from last time.</span></div>
<div class="line"><span class="lineno">  323</span>            <span class="comment">// WT generator can override this by appending the never_skip_tag</span></div>
<div class="line"><span class="lineno">  324</span>            <span class="keywordflow">if</span> (boost::starts_with(line, <span class="stringliteral">&quot;G1 &quot;</span>)) {</div>
<div class="line"><span class="lineno">  325</span>                <span class="keywordtype">bool</span> never_skip = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  326</span>                <span class="keyword">auto</span> it = line.find(<a class="code hl_function" href="../../db/d2e/class_slic3r_1_1_wipe_tower.html#a984bd17e162cfaf19285cadffe5d563f">WipeTower::never_skip_tag</a>());</div>
<div class="line"><span class="lineno">  327</span>                <span class="keywordflow">if</span> (it != std::string::npos) {</div>
<div class="line"><span class="lineno">  328</span>                    <span class="comment">// remove the tag and remember we saw it</span></div>
<div class="line"><span class="lineno">  329</span>                    never_skip = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  330</span>                    line.erase(it, it + <a class="code hl_function" href="../../db/d2e/class_slic3r_1_1_wipe_tower.html#a984bd17e162cfaf19285cadffe5d563f">WipeTower::never_skip_tag</a>().<a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">size</a>());</div>
<div class="line"><span class="lineno">  331</span>                }</div>
<div class="line"><span class="lineno">  332</span>                std::ostringstream line_out;</div>
<div class="line"><span class="lineno">  333</span>                std::istringstream line_str(line);</div>
<div class="line"><span class="lineno">  334</span>                line_str &gt;&gt; std::noskipws;  <span class="comment">// don&#39;t skip whitespace</span></div>
<div class="line"><span class="lineno">  335</span>                <span class="keywordtype">char</span> ch = 0;</div>
<div class="line"><span class="lineno">  336</span>                line_str &gt;&gt; ch &gt;&gt; ch; <span class="comment">// read the &quot;G1&quot;</span></div>
<div class="line"><span class="lineno">  337</span>                <span class="keywordflow">while</span> (line_str &gt;&gt; ch) {</div>
<div class="line"><span class="lineno">  338</span>                    <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;X&#39;</span> || ch == <span class="charliteral">&#39;Y&#39;</span>)</div>
<div class="line"><span class="lineno">  339</span>                        line_str &gt;&gt; (ch == <span class="charliteral">&#39;X&#39;</span> ? <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>.x() : <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>.y());</div>
<div class="line"><span class="lineno">  340</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  341</span>                        line_out &lt;&lt; ch;</div>
<div class="line"><span class="lineno">  342</span>                }</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>                transformed_pos = <a class="code hl_typedef" href="../../d5/d00/group___geometry___module.html#ga35e2cace3ada497794734edb8bc33b6e">Eigen::Rotation2Df</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">angle</a>) * <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a> + translation;</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>                <span class="keywordflow">if</span> (transformed_pos != old_pos || never_skip) {</div>
<div class="line"><span class="lineno">  347</span>                    line = line_out.str();</div>
<div class="line"><span class="lineno">  348</span>                    boost::trim_left(line); <span class="comment">// Remove leading spaces</span></div>
<div class="line"><span class="lineno">  349</span>                    std::ostringstream oss;</div>
<div class="line"><span class="lineno">  350</span>                    oss &lt;&lt; std::fixed &lt;&lt; std::setprecision(3) &lt;&lt; <span class="stringliteral">&quot;G1&quot;</span>;</div>
<div class="line"><span class="lineno">  351</span>                    <span class="keywordflow">if</span> (transformed_pos.x() != old_pos.x() || never_skip)</div>
<div class="line"><span class="lineno">  352</span>                        oss &lt;&lt; <span class="stringliteral">&quot; X&quot;</span> &lt;&lt; transformed_pos.x() - extruder_offset.x();</div>
<div class="line"><span class="lineno">  353</span>                    <span class="keywordflow">if</span> (transformed_pos.y() != old_pos.y() || never_skip)</div>
<div class="line"><span class="lineno">  354</span>                        oss &lt;&lt; <span class="stringliteral">&quot; Y&quot;</span> &lt;&lt; transformed_pos.y() - extruder_offset.y();</div>
<div class="line"><span class="lineno">  355</span>                    <span class="keywordflow">if</span> (! line.empty())</div>
<div class="line"><span class="lineno">  356</span>                        oss &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  357</span>                    line = oss.str() + line;</div>
<div class="line"><span class="lineno">  358</span>                    old_pos = transformed_pos;</div>
<div class="line"><span class="lineno">  359</span>                }</div>
<div class="line"><span class="lineno">  360</span>            }</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>            gcode_out += line + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>            <span class="comment">// If this was a toolchange command, we should change current extruder offset</span></div>
<div class="line"><span class="lineno">  365</span>            <span class="keywordflow">if</span> (line == <span class="stringliteral">&quot;[toolchange_gcode]&quot;</span>) {</div>
<div class="line"><span class="lineno">  366</span>                extruder_offset = <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a48c69b9c336315f879eef938994b94c0">m_extruder_offsets</a>[tcr.new_tool].cast&lt;<span class="keywordtype">float</span>&gt;();</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>                <span class="comment">// If the extruder offset changed, add an extra move so everything is continuous</span></div>
<div class="line"><span class="lineno">  369</span>                <span class="keywordflow">if</span> (extruder_offset != <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a48c69b9c336315f879eef938994b94c0">m_extruder_offsets</a>[tcr.initial_tool].cast&lt;<span class="keywordtype">float</span>&gt;()) {</div>
<div class="line"><span class="lineno">  370</span>                    std::ostringstream oss;</div>
<div class="line"><span class="lineno">  371</span>                    oss &lt;&lt; std::fixed &lt;&lt; std::setprecision(3)</div>
<div class="line"><span class="lineno">  372</span>                        &lt;&lt; <span class="stringliteral">&quot;G1 X&quot;</span> &lt;&lt; transformed_pos.x() - extruder_offset.x()</div>
<div class="line"><span class="lineno">  373</span>                        &lt;&lt; <span class="stringliteral">&quot; Y&quot;</span> &lt;&lt; transformed_pos.y() - extruder_offset.y()</div>
<div class="line"><span class="lineno">  374</span>                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  375</span>                    gcode_out += oss.str();</div>
<div class="line"><span class="lineno">  376</span>                }</div>
<div class="line"><span class="lineno">  377</span>            }</div>
<div class="line"><span class="lineno">  378</span>        }</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">return</span> gcode_out;</div>
<div class="line"><span class="lineno">  380</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_html_a984bd17e162cfaf19285cadffe5d563f"><div class="ttname"><a href="../../db/d2e/class_slic3r_1_1_wipe_tower.html#a984bd17e162cfaf19285cadffe5d563f">Slic3r::WipeTower::never_skip_tag</a></div><div class="ttdeci">static const std::string never_skip_tag()</div><div class="ttdef"><b>Definition</b> WipeTower.hpp:24</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a2d49c0885f5562f98fbb19cbe6590d11"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">Slic3r::sla::pos</a></div><div class="ttdeci">Vec3d pos(const Pt &amp;p)</div><div class="ttdef"><b>Definition</b> ReprojectPointsOnMesh.hpp:14</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7927d0ca1b31b8f9284ea268b11d27d5"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7927d0ca1b31b8f9284ea268b11d27d5">Slic3r::angle</a></div><div class="ttdeci">double angle(const Eigen::MatrixBase&lt; Derived &gt; &amp;v1, const Eigen::MatrixBase&lt; Derived2 &gt; &amp;v2)</div><div class="ttdef"><b>Definition</b> Point.hpp:112</div></div>
<div class="ttc" id="anamespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail_html_a876af6f91231ae4e7e7316f5402682dc"><div class="ttname"><a href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">TCB_SPAN_NAMESPACE_NAME::detail::size</a></div><div class="ttdeci">constexpr auto size(const C &amp;c) -&gt; decltype(c.size())</div><div class="ttdef"><b>Definition</b> span.hpp:183</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00112">Slic3r::angle()</a>, <a class="el" href="../../#l00046">Slic3r::WipeTower::ToolChangeResult::gcode</a>, <a class="el" href="../../#l00070">Slic3r::WipeTower::ToolChangeResult::initial_tool</a>, <a class="el" href="../../#l00099">m_extruder_offsets</a>, <a class="el" href="../../#l00024">Slic3r::WipeTower::never_skip_tag()</a>, <a class="el" href="../../#l00073">Slic3r::WipeTower::ToolChangeResult::new_tool</a>, and <a class="el" href="../../#l00051">Slic3r::WipeTower::ToolChangeResult::start_pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00205">append_tcr()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration_a771e997a5fe634f6e4576978337086fd_cgraph.svg" width="570" height="102"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration_a771e997a5fe634f6e4576978337086fd_icgraph.svg" width="100%" height="437"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a7497d8d42cdcc1e6eab63612993aee92" name="a7497d8d42cdcc1e6eab63612993aee92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7497d8d42cdcc1e6eab63612993aee92">&#9670;&#160;</a></span>prime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::WipeTowerIntegration::prime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;&#160;</td>
          <td class="paramname"><em>gcodegen</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  384</span>    {</div>
<div class="line"><span class="lineno">  385</span>        std::string <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  386</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> WipeTower::ToolChangeResult&amp; tcr : <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#aa781301aa91ef51fd6a2d3498b0aa2d8">m_priming</a>) {</div>
<div class="line"><span class="lineno">  387</span>            <span class="keywordflow">if</span> (! tcr.extrusions.empty())</div>
<div class="line"><span class="lineno">  388</span>                <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += <a class="code hl_function" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a77890da960412cea8c288fe74a2d28cc">append_tcr</a>(gcodegen, tcr, tcr.new_tool);</div>
<div class="line"><span class="lineno">  389</span>        }</div>
<div class="line"><span class="lineno">  390</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  391</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00205">append_tcr()</a>, and <a class="el" href="../../#l00102">m_priming</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration_a7497d8d42cdcc1e6eab63612993aee92_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a756231fc8c765bc08432e520fca5f49c" name="a756231fc8c765bc08432e520fca5f49c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a756231fc8c765bc08432e520fca5f49c">&#9670;&#160;</a></span>tool_change()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::WipeTowerIntegration::tool_change </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;&#160;</td>
          <td class="paramname"><em>gcodegen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>extruder_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>finish_layer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  394</span>    {</div>
<div class="line"><span class="lineno">  395</span>        std::string <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  396</span>        assert(<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno">  397</span>        <span class="keywordflow">if</span> (gcodegen.writer().need_toolchange(extruder_id) || finish_layer) {</div>
<div class="line"><span class="lineno">  398</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a> &lt; (<span class="keywordtype">int</span>)<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a>.size()) {</div>
<div class="line"><span class="lineno">  399</span>                <span class="keywordflow">if</span> (!(<span class="keywordtype">size_t</span>(<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a71a1f9ba82309f7e23ab9e8a10a656e5">m_tool_change_idx</a>) &lt; <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a>[<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a>].<a class="code hl_function" href="../../d7/d96/namespace_t_c_b___s_p_a_n___n_a_m_e_s_p_a_c_e___n_a_m_e_1_1detail.html#a876af6f91231ae4e7e7316f5402682dc">size</a>()))</div>
<div class="line"><span class="lineno">  400</span>                    <span class="keywordflow">throw</span> Slic3r::RuntimeError(<span class="stringliteral">&quot;Wipe tower generation failed, possibly due to empty first layer.&quot;</span>);</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>                <span class="comment">// Calculate where the wipe tower layer will be printed. -1 means that print z will not change,</span></div>
<div class="line"><span class="lineno">  403</span>                <span class="comment">// resulting in a wipe tower with sparse layers.</span></div>
<div class="line"><span class="lineno">  404</span>                <span class="keywordtype">double</span> wipe_tower_z = -1;</div>
<div class="line"><span class="lineno">  405</span>                <span class="keywordtype">bool</span> ignore_sparse = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  406</span>                <span class="keywordflow">if</span> (gcodegen.config().wipe_tower_no_sparse_layers.value) {</div>
<div class="line"><span class="lineno">  407</span>                    wipe_tower_z = <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a80f1d9eb9171304288522d61b4567a43">m_last_wipe_tower_print_z</a>;</div>
<div class="line"><span class="lineno">  408</span>                    ignore_sparse = (<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a>[<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a>].size() == 1 &amp;&amp; <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a>[<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a>].front().initial_tool == <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a>[<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a>].front().new_tool &amp;&amp; <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a> != 0);</div>
<div class="line"><span class="lineno">  409</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a71a1f9ba82309f7e23ab9e8a10a656e5">m_tool_change_idx</a> == 0 &amp;&amp; !ignore_sparse)</div>
<div class="line"><span class="lineno">  410</span>                        wipe_tower_z = <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a80f1d9eb9171304288522d61b4567a43">m_last_wipe_tower_print_z</a> + <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a>[<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a>].front().layer_height;</div>
<div class="line"><span class="lineno">  411</span>                }</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>                <span class="keywordflow">if</span> (!ignore_sparse) {</div>
<div class="line"><span class="lineno">  414</span>                    <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> += <a class="code hl_function" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a77890da960412cea8c288fe74a2d28cc">append_tcr</a>(gcodegen, <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#afa8cf2cc0f08521e8ddc63bc62015a02">m_tool_changes</a>[<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a0f8b027d8dc3fa7e23b050bb17f664b9">m_layer_idx</a>][<a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a71a1f9ba82309f7e23ab9e8a10a656e5">m_tool_change_idx</a>++], extruder_id, wipe_tower_z);</div>
<div class="line"><span class="lineno">  415</span>                    <a class="code hl_variable" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a80f1d9eb9171304288522d61b4567a43">m_last_wipe_tower_print_z</a> = wipe_tower_z;</div>
<div class="line"><span class="lineno">  416</span>                }</div>
<div class="line"><span class="lineno">  417</span>            }</div>
<div class="line"><span class="lineno">  418</span>        }</div>
<div class="line"><span class="lineno">  419</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  420</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1_wipe_tower_integration_html_a80f1d9eb9171304288522d61b4567a43"><div class="ttname"><a href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html#a80f1d9eb9171304288522d61b4567a43">Slic3r::WipeTowerIntegration::m_last_wipe_tower_print_z</a></div><div class="ttdeci">double m_last_wipe_tower_print_z</div><div class="ttdef"><b>Definition</b> GCode.hpp:108</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00205">append_tcr()</a>, <a class="el" href="../../#l00172">Slic3r::GCode::config()</a>, <a class="el" href="../../#l00108">m_last_wipe_tower_print_z</a>, <a class="el" href="../../#l00106">m_layer_idx</a>, <a class="el" href="../../#l00107">m_tool_change_idx</a>, <a class="el" href="../../#l00103">m_tool_changes</a>, <a class="el" href="../../#l00051">Slic3r::GCodeWriter::need_toolchange()</a>, and <a class="el" href="../../#l00174">Slic3r::GCode::writer()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration_a756231fc8c765bc08432e520fca5f49c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ab3c60453fffeaded5ed74bf807ac8b63" name="ab3c60453fffeaded5ed74bf807ac8b63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3c60453fffeaded5ed74bf807ac8b63">&#9670;&#160;</a></span>used_filament_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; float &gt; Slic3r::WipeTowerIntegration::used_filament_length </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a48c69b9c336315f879eef938994b94c0" name="a48c69b9c336315f879eef938994b94c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48c69b9c336315f879eef938994b94c0">&#9670;&#160;</a></span>m_extruder_offsets</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt;<a class="el" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>&gt; Slic3r::WipeTowerIntegration::m_extruder_offsets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00307">post_process_wipe_tower_moves()</a>.</p>

</div>
</div>
<a id="a8bbbdb71b9e0595564b4c6369cc72df1" name="a8bbbdb71b9e0595564b4c6369cc72df1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bbbdb71b9e0595564b4c6369cc72df1">&#9670;&#160;</a></span>m_final_purge</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a>&amp; Slic3r::WipeTowerIntegration::m_final_purge</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00423">finalize()</a>.</p>

</div>
</div>
<a id="a80f1d9eb9171304288522d61b4567a43" name="a80f1d9eb9171304288522d61b4567a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80f1d9eb9171304288522d61b4567a43">&#9670;&#160;</a></span>m_last_wipe_tower_print_z</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double Slic3r::WipeTowerIntegration::m_last_wipe_tower_print_z = 0.<a class="el" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00393">tool_change()</a>.</p>

</div>
</div>
<a id="a0f8b027d8dc3fa7e23b050bb17f664b9" name="a0f8b027d8dc3fa7e23b050bb17f664b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f8b027d8dc3fa7e23b050bb17f664b9">&#9670;&#160;</a></span>m_layer_idx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Slic3r::WipeTowerIntegration::m_layer_idx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00082">next_layer()</a>, and <a class="el" href="../../#l00393">tool_change()</a>.</p>

</div>
</div>
<a id="a22b30058ebbc99a7e5c270f4ce6458d5" name="a22b30058ebbc99a7e5c270f4ce6458d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22b30058ebbc99a7e5c270f4ce6458d5">&#9670;&#160;</a></span>m_left</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float Slic3r::WipeTowerIntegration::m_left</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa781301aa91ef51fd6a2d3498b0aa2d8" name="aa781301aa91ef51fd6a2d3498b0aa2d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa781301aa91ef51fd6a2d3498b0aa2d8">&#9670;&#160;</a></span>m_priming</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt;<a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a>&gt;&amp; Slic3r::WipeTowerIntegration::m_priming</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00383">prime()</a>.</p>

</div>
</div>
<a id="a075718c7fb729620ccb589804f7993a6" name="a075718c7fb729620ccb589804f7993a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a075718c7fb729620ccb589804f7993a6">&#9670;&#160;</a></span>m_right</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float Slic3r::WipeTowerIntegration::m_right</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a71a1f9ba82309f7e23ab9e8a10a656e5" name="a71a1f9ba82309f7e23ab9e8a10a656e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71a1f9ba82309f7e23ab9e8a10a656e5">&#9670;&#160;</a></span>m_tool_change_idx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Slic3r::WipeTowerIntegration::m_tool_change_idx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00082">next_layer()</a>, and <a class="el" href="../../#l00393">tool_change()</a>.</p>

</div>
</div>
<a id="afa8cf2cc0f08521e8ddc63bc62015a02" name="afa8cf2cc0f08521e8ddc63bc62015a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa8cf2cc0f08521e8ddc63bc62015a02">&#9670;&#160;</a></span>m_tool_changes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt;std::vector&lt;<a class="el" href="../../dc/deb/struct_slic3r_1_1_wipe_tower_1_1_tool_change_result.html">WipeTower::ToolChangeResult</a>&gt; &gt;&amp; Slic3r::WipeTowerIntegration::m_tool_changes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00393">tool_change()</a>.</p>

</div>
</div>
<a id="a722e32ebde8833aa1ab02b37c62fc472" name="a722e32ebde8833aa1ab02b37c62fc472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a722e32ebde8833aa1ab02b37c62fc472">&#9670;&#160;</a></span>m_wipe_tower_pos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#abe1c34afe5a07b8b1a7823ecfe2d1722">Vec2f</a> Slic3r::WipeTowerIntegration::m_wipe_tower_pos</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00205">append_tcr()</a>.</p>

</div>
</div>
<a id="a6ab27296c9de54d39b3235ddad2d26c5" name="a6ab27296c9de54d39b3235ddad2d26c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ab27296c9de54d39b3235ddad2d26c5">&#9670;&#160;</a></span>m_wipe_tower_rotation</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float Slic3r::WipeTowerIntegration::m_wipe_tower_rotation</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00205">append_tcr()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/libslic3r/<a class="el" href="../../">GCode.hpp</a></li>
<li>src/libslic3r/<a class="el" href="../../">GCode.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d0/d4c/class_slic3r_1_1_wipe_tower_integration.html">WipeTowerIntegration</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
