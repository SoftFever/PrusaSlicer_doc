<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: Slic3r::ExtrusionQualityEstimator Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../da/dce/class_slic3r_1_1_extrusion_quality_estimator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::ExtrusionQualityEstimator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../">src/libslic3r/GCode/ExtrusionProcessor.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::ExtrusionQualityEstimator:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/d24/class_slic3r_1_1_extrusion_quality_estimator__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a336591cd00cd0ba76ff5bc43f8cfb2f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#a336591cd00cd0ba76ff5bc43f8cfb2f2">set_current_object</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *object)</td></tr>
<tr class="separator:a336591cd00cd0ba76ff5bc43f8cfb2f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa05b57bb1941dd827a8be3fe32cc5137"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#aa05b57bb1941dd827a8be3fe32cc5137">prepare_for_new_layer</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d68/class_slic3r_1_1_layer.html">Layer</a> *layer)</td></tr>
<tr class="separator:aa05b57bb1941dd827a8be3fe32cc5137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb1377cf685aef6eb585307bddce29d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#d3/dc3/struct_slic3r_1_1_processed_point">ProcessedPoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#accb1377cf685aef6eb585307bddce29d">estimate_speed_from_extrusion_quality</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/dbc/class_slic3r_1_1_extrusion_path.html">ExtrusionPath</a> &amp;path, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::pair&lt; int, <a class="el" href="../../da/d93/class_slic3r_1_1_config_option_float_or_percent.html">ConfigOptionFloatOrPercent</a> &gt; &gt; overhangs_w_speeds, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::pair&lt; int, <a class="el" href="../../de/db8/namespace_slic3r.html#acc4b2f9a66dada520c793fa5169d054d">ConfigOptionInts</a> &gt; &gt; overhangs_w_fan_speeds, size_t extruder_id, float ext_perimeter_speed, float original_speed)</td></tr>
<tr class="separator:accb1377cf685aef6eb585307bddce29d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae2ceb7e661b3b9bd973d0a979f1c87c5"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *, <a class="el" href="../../db/d18/class_slic3r_1_1_a_a_b_b_tree_lines_1_1_lines_distancer.html">AABBTreeLines::LinesDistancer</a>&lt; <a class="el" href="../../d4/d28/class_slic3r_1_1_linef.html">Linef</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ae2ceb7e661b3b9bd973d0a979f1c87c5">prev_layer_boundaries</a></td></tr>
<tr class="separator:ae2ceb7e661b3b9bd973d0a979f1c87c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac387164768c5437a5e5e1cd1088b7aa5"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *, <a class="el" href="../../db/d18/class_slic3r_1_1_a_a_b_b_tree_lines_1_1_lines_distancer.html">AABBTreeLines::LinesDistancer</a>&lt; <a class="el" href="../../d4/d28/class_slic3r_1_1_linef.html">Linef</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ac387164768c5437a5e5e1cd1088b7aa5">next_layer_boundaries</a></td></tr>
<tr class="separator:ac387164768c5437a5e5e1cd1088b7aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2106a37f0894dbefc4e6f1a3955c536b"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *, <a class="el" href="../../db/d18/class_slic3r_1_1_a_a_b_b_tree_lines_1_1_lines_distancer.html">AABBTreeLines::LinesDistancer</a>&lt; <a class="el" href="../../d7/d28/class_slic3r_1_1_curled_line.html">CurledLine</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#a2106a37f0894dbefc4e6f1a3955c536b">prev_curled_extrusions</a></td></tr>
<tr class="separator:a2106a37f0894dbefc4e6f1a3955c536b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5cc7c27b4478e864c1d57867e9d5f9c"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *, <a class="el" href="../../db/d18/class_slic3r_1_1_a_a_b_b_tree_lines_1_1_lines_distancer.html">AABBTreeLines::LinesDistancer</a>&lt; <a class="el" href="../../d7/d28/class_slic3r_1_1_curled_line.html">CurledLine</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#af5cc7c27b4478e864c1d57867e9d5f9c">next_curled_extrusions</a></td></tr>
<tr class="separator:af5cc7c27b4478e864c1d57867e9d5f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c9ad9e3e6ee046c1fd887f6bb43281"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ad9c9ad9e3e6ee046c1fd887f6bb43281">current_object</a></td></tr>
<tr class="separator:ad9c9ad9e3e6ee046c1fd887f6bb43281"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Member Function Documentation</h2>
<a id="accb1377cf685aef6eb585307bddce29d" name="accb1377cf685aef6eb585307bddce29d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accb1377cf685aef6eb585307bddce29d">&#9670;&#160;</a></span>estimate_speed_from_extrusion_quality()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#d3/dc3/struct_slic3r_1_1_processed_point">ProcessedPoint</a> &gt; Slic3r::ExtrusionQualityEstimator::estimate_speed_from_extrusion_quality </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/dbc/class_slic3r_1_1_extrusion_path.html">ExtrusionPath</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::pair&lt; int, <a class="el" href="../../da/d93/class_slic3r_1_1_config_option_float_or_percent.html">ConfigOptionFloatOrPercent</a> &gt; &gt;&#160;</td>
          <td class="paramname"><em>overhangs_w_speeds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::vector&lt; std::pair&lt; int, <a class="el" href="../../de/db8/namespace_slic3r.html#acc4b2f9a66dada520c793fa5169d054d">ConfigOptionInts</a> &gt; &gt;&#160;</td>
          <td class="paramname"><em>overhangs_w_fan_speeds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>extruder_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ext_perimeter_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>original_speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  250</span>    {</div>
<div class="line"><span class="lineno">  251</span>        <span class="keywordtype">float</span>                  speed_base = ext_perimeter_speed &gt; 0 ? ext_perimeter_speed : original_speed;</div>
<div class="line"><span class="lineno">  252</span>        std::map&lt;float, float&gt; speed_sections;</div>
<div class="line"><span class="lineno">  253</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; overhangs_w_speeds.size(); i++) {</div>
<div class="line"><span class="lineno">  254</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a>           = path.width * (1.0 - (overhangs_w_speeds[i].first / 100.0));</div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordtype">float</span> speed              = overhangs_w_speeds[i].second.percent ? (speed_base * overhangs_w_speeds[i].second.value / 100.0) :</div>
<div class="line"><span class="lineno">  256</span>                                                                              overhangs_w_speeds[i].second.value;</div>
<div class="line"><span class="lineno">  257</span>            <span class="keywordflow">if</span> (speed &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>) speed = speed_base;</div>
<div class="line"><span class="lineno">  258</span>            speed_sections[<a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a>] = speed;</div>
<div class="line"><span class="lineno">  259</span>        }</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>        std::map&lt;float, float&gt; fan_speed_sections;</div>
<div class="line"><span class="lineno">  262</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; overhangs_w_fan_speeds.size(); i++) {</div>
<div class="line"><span class="lineno">  263</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a>           = path.width * (1.0 - (overhangs_w_fan_speeds[i].first / 100.0));</div>
<div class="line"><span class="lineno">  264</span>            <span class="keywordtype">float</span> fan_speed            = overhangs_w_fan_speeds[i].second.get_at(extruder_id);</div>
<div class="line"><span class="lineno">  265</span>            fan_speed_sections[<a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a>] = fan_speed;</div>
<div class="line"><span class="lineno">  266</span>        }</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>        std::vector&lt;ExtendedPoint&gt; extended_points =</div>
<div class="line"><span class="lineno">  269</span>            estimate_points_properties&lt;true, true, true, true&gt;(path.polyline.points, <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ae2ceb7e661b3b9bd973d0a979f1c87c5">prev_layer_boundaries</a>[<a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ad9c9ad9e3e6ee046c1fd887f6bb43281">current_object</a>], path.width);</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>        std::vector&lt;ProcessedPoint&gt; processed_points;</div>
<div class="line"><span class="lineno">  272</span>        processed_points.reserve(extended_points.size());</div>
<div class="line"><span class="lineno">  273</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; extended_points.size(); i++) {</div>
<div class="line"><span class="lineno">  274</span>            <span class="keyword">const</span> ExtendedPoint &amp;curr = extended_points[i];</div>
<div class="line"><span class="lineno">  275</span>            <span class="keyword">const</span> ExtendedPoint &amp;next = extended_points[i + 1 &lt; extended_points.size() ? i + 1 : i];</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>            <span class="comment">// The following code artifically increases the distance to provide slowdown for extrusions that are over curled lines</span></div>
<div class="line"><span class="lineno">  278</span>            <span class="keywordtype">float</span> artificial_distance_to_curled_lines = 0.0;</div>
<div class="line"><span class="lineno">  279</span>            <span class="keyword">const</span> <span class="keywordtype">double</span> dist_limit = 10.0 * path.width;</div>
<div class="line"><span class="lineno">  280</span>            {</div>
<div class="line"><span class="lineno">  281</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a> middle = 0.5 * (curr.position + next.position);</div>
<div class="line"><span class="lineno">  282</span>                <span class="keyword">auto</span> line_indices = <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#a2106a37f0894dbefc4e6f1a3955c536b">prev_curled_extrusions</a>[<a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ad9c9ad9e3e6ee046c1fd887f6bb43281">current_object</a>].all_lines_in_radius(Point::new_scale(middle), <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(dist_limit));</div>
<div class="line"><span class="lineno">  283</span>                <span class="keywordflow">if</span> (!line_indices.empty()) {</div>
<div class="line"><span class="lineno">  284</span>                    <span class="keywordtype">double</span> len   = (next.position - curr.position).norm();</div>
<div class="line"><span class="lineno">  285</span>                    <span class="comment">// For long lines, there is a problem with the additional slowdown. If by accident, there is small curled line near the middle of this long line</span></div>
<div class="line"><span class="lineno">  286</span>                    <span class="comment">//  The whole segment gets slower unnecesarily. For these long lines, we do additional check whether it is worth slowing down.</span></div>
<div class="line"><span class="lineno">  287</span>                    <span class="comment">// NOTE that this is still quite rough approximation, e.g. we are still checking lines only near the middle point</span></div>
<div class="line"><span class="lineno">  288</span>                    <span class="comment">// TODO maybe split the lines into smaller segments before running this alg? but can be demanding, and GCode will be huge</span></div>
<div class="line"><span class="lineno">  289</span>                    <span class="keywordflow">if</span> (len &gt; 8) {</div>
<div class="line"><span class="lineno">  290</span>                        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a> dir   = <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>(next.position - curr.position) / len;</div>
<div class="line"><span class="lineno">  291</span>                        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a7c4f29407893c334a6cb7a87bf045c0d">right</a> = <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>(-dir.y(), dir.x());</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>                        <a class="code hl_typedef" href="../../dc/db2/namespacepriv.html#af88c142a935f18fc3794a6a8f2bebaf7">Polygon</a> box_of_influence = {</div>
<div class="line"><span class="lineno">  294</span>                            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>(<a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>(curr.position + right * dist_limit)),</div>
<div class="line"><span class="lineno">  295</span>                            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>(<a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>(next.position + right * dist_limit)),</div>
<div class="line"><span class="lineno">  296</span>                            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>(<a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>(next.position - right * dist_limit)),</div>
<div class="line"><span class="lineno">  297</span>                            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>(<a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>(curr.position - right * dist_limit)),</div>
<div class="line"><span class="lineno">  298</span>                        };</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>                        <span class="keywordtype">double</span> projected_lengths_sum = 0;</div>
<div class="line"><span class="lineno">  301</span>                        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx : line_indices) {</div>
<div class="line"><span class="lineno">  302</span>                            <span class="keyword">const</span> CurledLine &amp;line   = <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#a2106a37f0894dbefc4e6f1a3955c536b">prev_curled_extrusions</a>[<a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ad9c9ad9e3e6ee046c1fd887f6bb43281">current_object</a>].get_line(idx);</div>
<div class="line"><span class="lineno">  303</span>                            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0913e2e6b7d28032c33cfee03f145fba">Lines</a>             <a class="code hl_function" href="../../de/d88/namespace_slic3r_1_1_fill_lightning.html#a4c0c1c415ccfc59b94493fbdb4327cc3">inside</a> = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0d1dc28c0b564a1adbfbefbc89ae9664">intersection_ln</a>({{line.a, line.b}}, {box_of_influence});</div>
<div class="line"><span class="lineno">  304</span>                            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../de/d88/namespace_slic3r_1_1_fill_lightning.html#a4c0c1c415ccfc59b94493fbdb4327cc3">inside</a>.empty())</div>
<div class="line"><span class="lineno">  305</span>                                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  306</span>                            <span class="keywordtype">double</span> projected_length = <a class="code hl_function" href="../../d6/d88/namespace_eigen_1_1half__impl.html#a03f37f7cb0691e122e6181b6891280e2">abs</a>(dir.dot(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab29c118b6283d273408c9700d78ae564">unscaled</a>(<a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>((<a class="code hl_function" href="../../de/d88/namespace_slic3r_1_1_fill_lightning.html#a4c0c1c415ccfc59b94493fbdb4327cc3">inside</a>.back().b - <a class="code hl_function" href="../../de/d88/namespace_slic3r_1_1_fill_lightning.html#a4c0c1c415ccfc59b94493fbdb4327cc3">inside</a>.back().a).cast&lt;<span class="keywordtype">double</span>&gt;()))));</div>
<div class="line"><span class="lineno">  307</span>                            projected_lengths_sum += projected_length;</div>
<div class="line"><span class="lineno">  308</span>                        }</div>
<div class="line"><span class="lineno">  309</span>                        <span class="keywordflow">if</span> (projected_lengths_sum &lt; 0.4 * len) {</div>
<div class="line"><span class="lineno">  310</span>                            line_indices.clear();</div>
<div class="line"><span class="lineno">  311</span>                        }</div>
<div class="line"><span class="lineno">  312</span>                    }</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>                    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx : line_indices) {</div>
<div class="line"><span class="lineno">  315</span>                        <span class="keyword">const</span> CurledLine &amp;line                 = <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#a2106a37f0894dbefc4e6f1a3955c536b">prev_curled_extrusions</a>[<a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ad9c9ad9e3e6ee046c1fd887f6bb43281">current_object</a>].get_line(idx);</div>
<div class="line"><span class="lineno">  316</span>                        <span class="keywordtype">float</span>             distance_from_curled = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab29c118b6283d273408c9700d78ae564">unscaled</a>(<a class="code hl_function" href="../../dd/dd0/namespace_slic3r_1_1line__alg.html#a6e1460bee943c3d52bd95af4660201e1">line_alg::distance_to</a>(line, Point::new_scale(middle)));</div>
<div class="line"><span class="lineno">  317</span>                        <span class="keywordtype">float</span>             <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">dist</a>                 = path.width * (1.0 - (distance_from_curled / dist_limit)) *</div>
<div class="line"><span class="lineno">  318</span>                                     (1.0 - (distance_from_curled / dist_limit)) *</div>
<div class="line"><span class="lineno">  319</span>                                     (line.curled_height / (path.height * 10.0f)); <span class="comment">// max_curled_height_factor from SupportSpotGenerator</span></div>
<div class="line"><span class="lineno">  320</span>                        artificial_distance_to_curled_lines = std::max(artificial_distance_to_curled_lines, dist);</div>
<div class="line"><span class="lineno">  321</span>                    }</div>
<div class="line"><span class="lineno">  322</span>                }</div>
<div class="line"><span class="lineno">  323</span>            }</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>            <span class="keyword">auto</span> interpolate_speed = [](<span class="keyword">const</span> std::map&lt;float, float&gt; &amp;values, <span class="keywordtype">float</span> <a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a>) {</div>
<div class="line"><span class="lineno">  326</span>                <span class="keyword">auto</span> upper_dist = values.lower_bound(distance);</div>
<div class="line"><span class="lineno">  327</span>                <span class="keywordflow">if</span> (upper_dist == values.end()) {</div>
<div class="line"><span class="lineno">  328</span>                    <span class="keywordflow">return</span> values.rbegin()-&gt;second;</div>
<div class="line"><span class="lineno">  329</span>                }</div>
<div class="line"><span class="lineno">  330</span>                <span class="keywordflow">if</span> (upper_dist == values.begin()) {</div>
<div class="line"><span class="lineno">  331</span>                    <span class="keywordflow">return</span> upper_dist-&gt;second;</div>
<div class="line"><span class="lineno">  332</span>                }</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>                <span class="keyword">auto</span>  lower_dist = std::prev(upper_dist);</div>
<div class="line"><span class="lineno">  335</span>                <span class="keywordtype">float</span> t          = (<a class="code hl_function" href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">distance</a> - lower_dist-&gt;first) / (upper_dist-&gt;first - lower_dist-&gt;first);</div>
<div class="line"><span class="lineno">  336</span>                <span class="keywordflow">return</span> (1.0f - t) * lower_dist-&gt;second + t * upper_dist-&gt;second;</div>
<div class="line"><span class="lineno">  337</span>            };</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>            <span class="keywordtype">float</span> extrusion_speed   = std::min(interpolate_speed(speed_sections, curr.distance),</div>
<div class="line"><span class="lineno">  340</span>                                               interpolate_speed(speed_sections, next.distance));</div>
<div class="line"><span class="lineno">  341</span>            <span class="keywordtype">float</span> curled_base_speed = interpolate_speed(speed_sections, artificial_distance_to_curled_lines);</div>
<div class="line"><span class="lineno">  342</span>            <span class="keywordtype">float</span> final_speed       = std::min(curled_base_speed, extrusion_speed);</div>
<div class="line"><span class="lineno">  343</span>            <span class="keywordtype">float</span> fan_speed         = std::min(interpolate_speed(fan_speed_sections, curr.distance),</div>
<div class="line"><span class="lineno">  344</span>                                               interpolate_speed(fan_speed_sections, next.distance));</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>            processed_points.push_back({<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">scaled</a>(curr.position), final_speed, int(fan_speed)});</div>
<div class="line"><span class="lineno">  347</span>        }</div>
<div class="line"><span class="lineno">  348</span>        <span class="keywordflow">return</span> processed_points;</div>
<div class="line"><span class="lineno">  349</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1_extrusion_quality_estimator_html_a2106a37f0894dbefc4e6f1a3955c536b"><div class="ttname"><a href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#a2106a37f0894dbefc4e6f1a3955c536b">Slic3r::ExtrusionQualityEstimator::prev_curled_extrusions</a></div><div class="ttdeci">std::unordered_map&lt; const PrintObject *, AABBTreeLines::LinesDistancer&lt; CurledLine &gt; &gt; prev_curled_extrusions</div><div class="ttdef"><b>Definition</b> ExtrusionProcessor.hpp:225</div></div>
<div class="ttc" id="aclass_slic3r_1_1_extrusion_quality_estimator_html_ad9c9ad9e3e6ee046c1fd887f6bb43281"><div class="ttname"><a href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ad9c9ad9e3e6ee046c1fd887f6bb43281">Slic3r::ExtrusionQualityEstimator::current_object</a></div><div class="ttdeci">const PrintObject * current_object</div><div class="ttdef"><b>Definition</b> ExtrusionProcessor.hpp:227</div></div>
<div class="ttc" id="aclass_slic3r_1_1_extrusion_quality_estimator_html_ae2ceb7e661b3b9bd973d0a979f1c87c5"><div class="ttname"><a href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ae2ceb7e661b3b9bd973d0a979f1c87c5">Slic3r::ExtrusionQualityEstimator::prev_layer_boundaries</a></div><div class="ttdeci">std::unordered_map&lt; const PrintObject *, AABBTreeLines::LinesDistancer&lt; Linef &gt; &gt; prev_layer_boundaries</div><div class="ttdef"><b>Definition</b> ExtrusionProcessor.hpp:223</div></div>
<div class="ttc" id="alibslic3r_8h_html_a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a></div><div class="ttdeci">#define scale_(val)</div><div class="ttdef"><b>Definition</b> libslic3r.h:69</div></div>
<div class="ttc" id="alibslic3r_8h_html_a75f355966e0a97665eaf5a4c79baa7af"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a></div><div class="ttdeci">static constexpr double EPSILON</div><div class="ttdef"><b>Definition</b> libslic3r.h:51</div></div>
<div class="ttc" id="anamespace_eigen_1_1half__impl_html_a03f37f7cb0691e122e6181b6891280e2"><div class="ttname"><a href="../../d6/d88/namespace_eigen_1_1half__impl.html#a03f37f7cb0691e122e6181b6891280e2">Eigen::half_impl::abs</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC half abs(const half &amp;a)</div><div class="ttdef"><b>Definition</b> Half.h:445</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_fill_lightning_html_a4c0c1c415ccfc59b94493fbdb4327cc3"><div class="ttname"><a href="../../de/d88/namespace_slic3r_1_1_fill_lightning.html#a4c0c1c415ccfc59b94493fbdb4327cc3">Slic3r::FillLightning::inside</a></div><div class="ttdeci">bool inside(const Polygons &amp;polygons, const Point &amp;p)</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_geometry_html_a2b2112c1026a31e7c4c00693ca0bc2e2"><div class="ttname"><a href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">Slic3r::Geometry::dist</a></div><div class="ttdeci">T dist(const boost::polygon::point_data&lt; T &gt; &amp;p1, const boost::polygon::point_data&lt; T &gt; &amp;p2)</div><div class="ttdef"><b>Definition</b> Geometry.cpp:280</div></div>
<div class="ttc" id="anamespace_slic3r_1_1line__alg_html_a6e1460bee943c3d52bd95af4660201e1"><div class="ttname"><a href="../../dd/dd0/namespace_slic3r_1_1line__alg.html#a6e1460bee943c3d52bd95af4660201e1">Slic3r::line_alg::distance_to</a></div><div class="ttdeci">double distance_to(const L &amp;line, const Vec&lt; Dim&lt; L &gt;, Scalar&lt; L &gt; &gt; &amp;point)</div><div class="ttdef"><b>Definition</b> Line.hpp:82</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0913e2e6b7d28032c33cfee03f145fba"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0913e2e6b7d28032c33cfee03f145fba">Slic3r::Lines</a></div><div class="ttdeci">std::vector&lt; Line &gt; Lines</div><div class="ttdef"><b>Definition</b> Line.hpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0d1dc28c0b564a1adbfbefbc89ae9664"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0d1dc28c0b564a1adbfbefbc89ae9664">Slic3r::intersection_ln</a></div><div class="ttdeci">Slic3r::Lines intersection_ln(const Slic3r::Lines &amp;subject, const Slic3r::Polygons &amp;clip)</div><div class="ttdef"><b>Definition</b> ClipperUtils.hpp:482</div></div>
<div class="ttc" id="anamespace_slic3r_html_a20c9ce8050ad12a2fbc3d2e07937a1e8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a20c9ce8050ad12a2fbc3d2e07937a1e8">Slic3r::scaled</a></div><div class="ttdeci">BoundingBox scaled(const BoundingBoxf &amp;bb)</div><div class="ttdef"><b>Definition</b> BoundingBox.hpp:240</div></div>
<div class="ttc" id="anamespace_slic3r_html_a40e8e384542f32f8150cabd3db031651"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Slic3r::Vec2d</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 2, 1, Eigen::DontAlign &gt; Vec2d</div><div class="ttdef"><b>Definition</b> Point.hpp:51</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab29c118b6283d273408c9700d78ae564"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab29c118b6283d273408c9700d78ae564">Slic3r::unscaled</a></div><div class="ttdeci">constexpr Eigen::Matrix&lt; Tout, 2, EigenArgs... &gt; unscaled(const Slic3r::ClipperLib::IntPoint &amp;v) noexcept</div><div class="ttdef"><b>Definition</b> Arrange.cpp:55</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1pointlike_html_a34942e34560027545c1146c7861c5e3a"><div class="ttname"><a href="../../df/d4e/namespacelibnest2d_1_1pointlike.html#a34942e34560027545c1146c7861c5e3a">libnest2d::pointlike::distance</a></div><div class="ttdeci">double distance(const P &amp;p1, const P &amp;p2)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:329</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_ad1b266b182e7c12ec61378819e3785f1a7c4f29407893c334a6cb7a87bf045c0d"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a7c4f29407893c334a6cb7a87bf045c0d">marchsq::__impl::Dir::right</a></div><div class="ttdeci">@ right</div></div>
<div class="ttc" id="anamespacepriv_html_af88c142a935f18fc3794a6a8f2bebaf7"><div class="ttname"><a href="../../dc/db2/namespacepriv.html#af88c142a935f18fc3794a6a8f2bebaf7">priv::Polygon</a></div><div class="ttdeci">Slic3r::Polygon Polygon</div><div class="ttdef"><b>Definition</b> Emboss.cpp:34</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00197">Slic3r::Line::a</a>, <a class="el" href="../../#l00198">Slic3r::Line::b</a>, <a class="el" href="../../#l00221">Slic3r::CurledLine::curled_height</a>, <a class="el" href="../../#l00227">current_object</a>, <a class="el" href="../../#l00034">Slic3r::ExtendedPoint::distance</a>, <a class="el" href="../../#l00082">Slic3r::line_alg::distance_to()</a>, <a class="el" href="../../#l00051">EPSILON</a>, <a class="el" href="../../#l00069">Slic3r::ExtrusionPath::height</a>, <a class="el" href="../../#l00482">Slic3r::intersection_ln()</a>, <a class="el" href="../../#l00018">Slic3r::MultiPoint::points</a>, <a class="el" href="../../#l00063">Slic3r::ExtrusionPath::polyline</a>, <a class="el" href="../../#l00033">Slic3r::ExtendedPoint::position</a>, <a class="el" href="../../#l00225">prev_curled_extrusions</a>, <a class="el" href="../../#l00223">prev_layer_boundaries</a>, <a class="el" href="../../#l00069">scale_</a>, <a class="el" href="../../#l00240">Slic3r::scaled()</a>, <a class="el" href="../../#l00055">Slic3r::unscaled()</a>, and <a class="el" href="../../#l00067">Slic3r::ExtrusionPath::width</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02920">Slic3r::GCode::_extrude()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator_accb1377cf685aef6eb585307bddce29d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator_accb1377cf685aef6eb585307bddce29d_icgraph.svg" width="100%" height="433"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa05b57bb1941dd827a8be3fe32cc5137" name="aa05b57bb1941dd827a8be3fe32cc5137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa05b57bb1941dd827a8be3fe32cc5137">&#9670;&#160;</a></span>prepare_for_new_layer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::ExtrusionQualityEstimator::prepare_for_new_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d68/class_slic3r_1_1_layer.html">Layer</a> *&#160;</td>
          <td class="paramname"><em>layer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  233</span>    {</div>
<div class="line"><span class="lineno">  234</span>        <span class="keywordflow">if</span> (layer == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">  235</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  236</span>        <span class="keyword">const</span> PrintObject *<span class="keywordtype">object</span>      = layer-&gt;object();</div>
<div class="line"><span class="lineno">  237</span>        <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ae2ceb7e661b3b9bd973d0a979f1c87c5">prev_layer_boundaries</a>[object]  = <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ac387164768c5437a5e5e1cd1088b7aa5">next_layer_boundaries</a>[object];</div>
<div class="line"><span class="lineno">  238</span>        <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ac387164768c5437a5e5e1cd1088b7aa5">next_layer_boundaries</a>[object]  = AABBTreeLines::LinesDistancer&lt;Linef&gt;{<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a714b3d88806c015f182e6e3071bb2494">to_unscaled_linesf</a>(layer-&gt;lslices)};</div>
<div class="line"><span class="lineno">  239</span>        <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#a2106a37f0894dbefc4e6f1a3955c536b">prev_curled_extrusions</a>[object] = <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#af5cc7c27b4478e864c1d57867e9d5f9c">next_curled_extrusions</a>[object];</div>
<div class="line"><span class="lineno">  240</span>        <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#af5cc7c27b4478e864c1d57867e9d5f9c">next_curled_extrusions</a>[object] = AABBTreeLines::LinesDistancer&lt;CurledLine&gt;{layer-&gt;curled_lines};</div>
<div class="line"><span class="lineno">  241</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1_extrusion_quality_estimator_html_ac387164768c5437a5e5e1cd1088b7aa5"><div class="ttname"><a href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ac387164768c5437a5e5e1cd1088b7aa5">Slic3r::ExtrusionQualityEstimator::next_layer_boundaries</a></div><div class="ttdeci">std::unordered_map&lt; const PrintObject *, AABBTreeLines::LinesDistancer&lt; Linef &gt; &gt; next_layer_boundaries</div><div class="ttdef"><b>Definition</b> ExtrusionProcessor.hpp:224</div></div>
<div class="ttc" id="aclass_slic3r_1_1_extrusion_quality_estimator_html_af5cc7c27b4478e864c1d57867e9d5f9c"><div class="ttname"><a href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#af5cc7c27b4478e864c1d57867e9d5f9c">Slic3r::ExtrusionQualityEstimator::next_curled_extrusions</a></div><div class="ttdeci">std::unordered_map&lt; const PrintObject *, AABBTreeLines::LinesDistancer&lt; CurledLine &gt; &gt; next_curled_extrusions</div><div class="ttdef"><b>Definition</b> ExtrusionProcessor.hpp:226</div></div>
<div class="ttc" id="anamespace_slic3r_html_a714b3d88806c015f182e6e3071bb2494"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a714b3d88806c015f182e6e3071bb2494">Slic3r::to_unscaled_linesf</a></div><div class="ttdeci">Linesf to_unscaled_linesf(const ExPolygons &amp;src)</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:175</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00329">Slic3r::Layer::curled_lines</a>, <a class="el" href="../../#l00339">Slic3r::Layer::lslices</a>, <a class="el" href="../../#l00226">next_curled_extrusions</a>, <a class="el" href="../../#l00224">next_layer_boundaries</a>, <a class="el" href="../../#l00317">Slic3r::Layer::object()</a>, <a class="el" href="../../#l00225">prev_curled_extrusions</a>, <a class="el" href="../../#l00223">prev_layer_boundaries</a>, and <a class="el" href="../../#l00175">Slic3r::to_unscaled_linesf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02112">Slic3r::GCode::process_layer()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator_aa05b57bb1941dd827a8be3fe32cc5137_cgraph.svg" width="539" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator_aa05b57bb1941dd827a8be3fe32cc5137_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a336591cd00cd0ba76ff5bc43f8cfb2f2" name="a336591cd00cd0ba76ff5bc43f8cfb2f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a336591cd00cd0ba76ff5bc43f8cfb2f2">&#9670;&#160;</a></span>set_current_object()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::ExtrusionQualityEstimator::set_current_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  230</span>{ <a class="code hl_variable" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html#ad9c9ad9e3e6ee046c1fd887f6bb43281">current_object</a> = object; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00227">current_object</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02347">Slic3r::GCode::process_layer_single_object()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator_a336591cd00cd0ba76ff5bc43f8cfb2f2_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad9c9ad9e3e6ee046c1fd887f6bb43281" name="ad9c9ad9e3e6ee046c1fd887f6bb43281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c9ad9e3e6ee046c1fd887f6bb43281">&#9670;&#160;</a></span>current_object</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a>* Slic3r::ExtrusionQualityEstimator::current_object</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00243">estimate_speed_from_extrusion_quality()</a>, and <a class="el" href="../../#l00230">set_current_object()</a>.</p>

</div>
</div>
<a id="af5cc7c27b4478e864c1d57867e9d5f9c" name="af5cc7c27b4478e864c1d57867e9d5f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5cc7c27b4478e864c1d57867e9d5f9c">&#9670;&#160;</a></span>next_curled_extrusions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *, <a class="el" href="../../db/d18/class_slic3r_1_1_a_a_b_b_tree_lines_1_1_lines_distancer.html">AABBTreeLines::LinesDistancer</a>&lt;<a class="el" href="../../d7/d28/class_slic3r_1_1_curled_line.html">CurledLine</a>&gt; &gt; Slic3r::ExtrusionQualityEstimator::next_curled_extrusions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00232">prepare_for_new_layer()</a>.</p>

</div>
</div>
<a id="ac387164768c5437a5e5e1cd1088b7aa5" name="ac387164768c5437a5e5e1cd1088b7aa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac387164768c5437a5e5e1cd1088b7aa5">&#9670;&#160;</a></span>next_layer_boundaries</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *, <a class="el" href="../../db/d18/class_slic3r_1_1_a_a_b_b_tree_lines_1_1_lines_distancer.html">AABBTreeLines::LinesDistancer</a>&lt;<a class="el" href="../../d4/d28/class_slic3r_1_1_linef.html">Linef</a>&gt; &gt; Slic3r::ExtrusionQualityEstimator::next_layer_boundaries</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00232">prepare_for_new_layer()</a>.</p>

</div>
</div>
<a id="a2106a37f0894dbefc4e6f1a3955c536b" name="a2106a37f0894dbefc4e6f1a3955c536b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2106a37f0894dbefc4e6f1a3955c536b">&#9670;&#160;</a></span>prev_curled_extrusions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *, <a class="el" href="../../db/d18/class_slic3r_1_1_a_a_b_b_tree_lines_1_1_lines_distancer.html">AABBTreeLines::LinesDistancer</a>&lt;<a class="el" href="../../d7/d28/class_slic3r_1_1_curled_line.html">CurledLine</a>&gt; &gt; Slic3r::ExtrusionQualityEstimator::prev_curled_extrusions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00243">estimate_speed_from_extrusion_quality()</a>, and <a class="el" href="../../#l00232">prepare_for_new_layer()</a>.</p>

</div>
</div>
<a id="ae2ceb7e661b3b9bd973d0a979f1c87c5" name="ae2ceb7e661b3b9bd973d0a979f1c87c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2ceb7e661b3b9bd973d0a979f1c87c5">&#9670;&#160;</a></span>prev_layer_boundaries</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *, <a class="el" href="../../db/d18/class_slic3r_1_1_a_a_b_b_tree_lines_1_1_lines_distancer.html">AABBTreeLines::LinesDistancer</a>&lt;<a class="el" href="../../d4/d28/class_slic3r_1_1_linef.html">Linef</a>&gt; &gt; Slic3r::ExtrusionQualityEstimator::prev_layer_boundaries</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00243">estimate_speed_from_extrusion_quality()</a>, and <a class="el" href="../../#l00232">prepare_for_new_layer()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/libslic3r/GCode/<a class="el" href="../../">ExtrusionProcessor.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d5/d3b/class_slic3r_1_1_extrusion_quality_estimator.html">ExtrusionQualityEstimator</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
