<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prusa Slicer: Slic3r::PresetUpdater::priv Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../PrusaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">Prusa Slicer<span id="projectnumber">&#160;2.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../dc/dd6/struct_slic3r_1_1_preset_updater_1_1priv-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::PresetUpdater::priv Struct Reference</div></div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::PresetUpdater::priv:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d47/struct_slic3r_1_1_preset_updater_1_1priv__coll__graph.svg" width="100%" height="530"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1857cb07beae11319533c7e780a6495e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a1857cb07beae11319533c7e780a6495e">priv</a> ()</td></tr>
<tr class="separator:a1857cb07beae11319533c7e780a6495e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6d635e3779366bb0563631d0a0006b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a8a6d635e3779366bb0563631d0a0006b">set_download_prefs</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d00/class_slic3r_1_1_app_config.html">AppConfig</a> *app_config)</td></tr>
<tr class="separator:a8a6d635e3779366bb0563631d0a0006b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a941e7a6e74d0bcf93b9c2bb05dbd09c0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;url, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> fs::path &amp;target_path) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a941e7a6e74d0bcf93b9c2bb05dbd09c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4940e42de9639ab2aa228b35ebb63c81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a4940e42de9639ab2aa228b35ebb63c81">prune_tmps</a> () <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a4940e42de9639ab2aa228b35ebb63c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8476c7e87f53c7f14649f21d517f3aab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a8476c7e87f53c7f14649f21d517f3aab">sync_config</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#aa24f0a299fb2753157d671ad042d0910">VendorMap</a> vendors, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;index_archive_url)</td></tr>
<tr class="separator:a8476c7e87f53c7f14649f21d517f3aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee9a20630ab3cf5873911138c954ead"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#abee9a20630ab3cf5873911138c954ead">check_install_indices</a> () <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:abee9a20630ab3cf5873911138c954ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff1209280aef6cb26f85a010a51f39f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/db8/namespace_slic3r.html#d9/df6/struct_slic3r_1_1_updates">Updates</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#aff1209280aef6cb26f85a010a51f39f7">get_config_updates</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d0/d1c/class_slic3r_1_1_semver.html">Semver</a> &amp;old_slic3r_version) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aff1209280aef6cb26f85a010a51f39f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae18f7e65fd6a305f1afcec993c6e2c90"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#ae18f7e65fd6a305f1afcec993c6e2c90">perform_updates</a> (<a class="el" href="../../de/db8/namespace_slic3r.html#d9/df6/struct_slic3r_1_1_updates">Updates</a> &amp;&amp;<a class="el" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>, bool snapshot=true) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae18f7e65fd6a305f1afcec993c6e2c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece548bbddd5962dc71aa5057a0a32ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#aece548bbddd5962dc71aa5057a0a32ad">set_waiting_updates</a> (<a class="el" href="../../de/db8/namespace_slic3r.html#d9/df6/struct_slic3r_1_1_updates">Updates</a> u)</td></tr>
<tr class="separator:aece548bbddd5962dc71aa5057a0a32ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e4467777ab333009919e967a9eafaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af7e4467777ab333009919e967a9eafaf">get_missing_resource</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;vendor, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;filename, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;url) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af7e4467777ab333009919e967a9eafaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ab86b21916933d5126eb64004f18b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#aa0ab86b21916933d5126eb64004f18b0">get_or_copy_missing_resource</a> (<a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;vendor, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;filename, <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;url) <a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aa0ab86b21916933d5126eb64004f18b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20ae55e56b85c813b4361ad08fd59f20"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a20ae55e56b85c813b4361ad08fd59f20">update_index_db</a> ()</td></tr>
<tr class="separator:a20ae55e56b85c813b4361ad08fd59f20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a9aa4adf03d64f554268f5d7a361ffc36"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a9aa4adf03d64f554268f5d7a361ffc36">index_db</a></td></tr>
<tr class="separator:a9aa4adf03d64f554268f5d7a361ffc36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad095998a4965d49ef60cd34950cc8015"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#ad095998a4965d49ef60cd34950cc8015">enabled_version_check</a></td></tr>
<tr class="separator:ad095998a4965d49ef60cd34950cc8015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255e3e6a853e64eec598429806f9f2c6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a255e3e6a853e64eec598429806f9f2c6">enabled_config_update</a></td></tr>
<tr class="separator:a255e3e6a853e64eec598429806f9f2c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba85d0a6fd5e6b60876f7d594838e56"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a3ba85d0a6fd5e6b60876f7d594838e56">version_check_url</a></td></tr>
<tr class="separator:a3ba85d0a6fd5e6b60876f7d594838e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88634a7648d871f97108572cd4f47cb2"><td class="memItemLeft" align="right" valign="top">fs::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a></td></tr>
<tr class="separator:a88634a7648d871f97108572cd4f47cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371c259f91f6c736a4a59a2bb71ca042"><td class="memItemLeft" align="right" valign="top">fs::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a></td></tr>
<tr class="separator:a371c259f91f6c736a4a59a2bb71ca042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b772e680a5ca2fd88eae6c7ae4e4c6"><td class="memItemLeft" align="right" valign="top">fs::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">rsrc_path</a></td></tr>
<tr class="separator:a12b772e680a5ca2fd88eae6c7ae4e4c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde3af38e04d0285249d847b004c23f4"><td class="memItemLeft" align="right" valign="top">fs::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#adde3af38e04d0285249d847b004c23f4">vendor_path</a></td></tr>
<tr class="separator:adde3af38e04d0285249d847b004c23f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00decc3399244b5aca6e99ef79ae3a0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a></td></tr>
<tr class="separator:af00decc3399244b5aca6e99ef79ae3a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d3693efa8b964fa904018baa8ef29b9"><td class="memItemLeft" align="right" valign="top">std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a3d3693efa8b964fa904018baa8ef29b9">thread</a></td></tr>
<tr class="separator:a3d3693efa8b964fa904018baa8ef29b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58ce233e25e1e0e9d0dc4b0b4ebf8946"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a58ce233e25e1e0e9d0dc4b0b4ebf8946">has_waiting_updates</a> { false }</td></tr>
<tr class="separator:a58ce233e25e1e0e9d0dc4b0b4ebf8946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f49f4486a39f2fab2910b14f717a99d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/db8/namespace_slic3r.html#d9/df6/struct_slic3r_1_1_updates">Updates</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a5f49f4486a39f2fab2910b14f717a99d">waiting_updates</a></td></tr>
<tr class="separator:a5f49f4486a39f2fab2910b14f717a99d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1857cb07beae11319533c7e780a6495e" name="a1857cb07beae11319533c7e780a6495e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1857cb07beae11319533c7e780a6495e">&#9670;&#160;</a></span>priv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Slic3r::PresetUpdater::priv::priv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  193</span>  : <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a>(fs::path(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a52157a1dec9ce067a7e19b02ef13e1f3">Slic3r::data_dir</a>()) / <span class="stringliteral">&quot;cache&quot;</span>)</div>
<div class="line"><span class="lineno">  194</span>  , <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a>(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / <span class="stringliteral">&quot;vendor&quot;</span>)</div>
<div class="line"><span class="lineno">  195</span>  , <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">rsrc_path</a>(fs::path(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a98b4dcd95032a990c6541512e9719696">resources_dir</a>()) / <span class="stringliteral">&quot;profiles&quot;</span>)</div>
<div class="line"><span class="lineno">  196</span>  , <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#adde3af38e04d0285249d847b004c23f4">vendor_path</a>(fs::path(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a52157a1dec9ce067a7e19b02ef13e1f3">Slic3r::data_dir</a>()) / <span class="stringliteral">&quot;vendor&quot;</span>)</div>
<div class="line"><span class="lineno">  197</span>  , <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  198</span>{</div>
<div class="line"><span class="lineno">  199</span>  <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a8a6d635e3779366bb0563631d0a0006b">set_download_prefs</a>(GUI::wxGetApp().app_config);</div>
<div class="line"><span class="lineno">  200</span>  <span class="comment">// Install indicies from resources. Only installs those that are either missing or older than in resources.</span></div>
<div class="line"><span class="lineno">  201</span>  <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#abee9a20630ab3cf5873911138c954ead">check_install_indices</a>();</div>
<div class="line"><span class="lineno">  202</span>  <span class="comment">// Load indices from the cache directory.</span></div>
<div class="line"><span class="lineno">  203</span>  <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a9aa4adf03d64f554268f5d7a361ffc36">index_db</a> = Index::load_db();</div>
<div class="line"><span class="lineno">  204</span>}</div>
<div class="ttc" id="anamespace_slic3r_html_a52157a1dec9ce067a7e19b02ef13e1f3"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a52157a1dec9ce067a7e19b02ef13e1f3">Slic3r::data_dir</a></div><div class="ttdeci">const std::string &amp; data_dir()</div><div class="ttdef"><b>Definition</b> utils.cpp:206</div></div>
<div class="ttc" id="anamespace_slic3r_html_a98b4dcd95032a990c6541512e9719696"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a98b4dcd95032a990c6541512e9719696">Slic3r::resources_dir</a></div><div class="ttdeci">const std::string &amp; resources_dir()</div><div class="ttdef"><b>Definition</b> utils.cpp:167</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a12b772e680a5ca2fd88eae6c7ae4e4c6"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">Slic3r::PresetUpdater::priv::rsrc_path</a></div><div class="ttdeci">fs::path rsrc_path</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:165</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a371c259f91f6c736a4a59a2bb71ca042"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">Slic3r::PresetUpdater::priv::cache_vendor_path</a></div><div class="ttdeci">fs::path cache_vendor_path</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:164</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a88634a7648d871f97108572cd4f47cb2"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">Slic3r::PresetUpdater::priv::cache_path</a></div><div class="ttdeci">fs::path cache_path</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:163</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a8a6d635e3779366bb0563631d0a0006b"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a8a6d635e3779366bb0563631d0a0006b">Slic3r::PresetUpdater::priv::set_download_prefs</a></div><div class="ttdeci">void set_download_prefs(const AppConfig *app_config)</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:212</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a9aa4adf03d64f554268f5d7a361ffc36"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a9aa4adf03d64f554268f5d7a361ffc36">Slic3r::PresetUpdater::priv::index_db</a></div><div class="ttdeci">std::vector&lt; Index &gt; index_db</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:157</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_abee9a20630ab3cf5873911138c954ead"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#abee9a20630ab3cf5873911138c954ead">Slic3r::PresetUpdater::priv::check_install_indices</a></div><div class="ttdeci">void check_install_indices() const</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:773</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_adde3af38e04d0285249d847b004c23f4"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#adde3af38e04d0285249d847b004c23f4">Slic3r::PresetUpdater::priv::vendor_path</a></div><div class="ttdeci">fs::path vendor_path</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:166</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_af00decc3399244b5aca6e99ef79ae3a0"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">Slic3r::PresetUpdater::priv::cancel</a></div><div class="ttdeci">bool cancel</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:168</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00773">check_install_indices()</a>, <a class="el" href="../../#l00157">index_db</a>, and <a class="el" href="../../#l00212">set_download_prefs()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_a1857cb07beae11319533c7e780a6495e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abee9a20630ab3cf5873911138c954ead" name="abee9a20630ab3cf5873911138c954ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee9a20630ab3cf5873911138c954ead">&#9670;&#160;</a></span>check_install_indices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PresetUpdater::priv::check_install_indices </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  774</span>{</div>
<div class="line"><span class="lineno">  775</span>  BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Checking if indices need to be installed from resources...&quot;</span>;</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;dir_entry : <a class="code hl_namespace" href="../../d4/da9/namespaceboost.html">boost</a>::filesystem::directory_iterator(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">rsrc_path</a>))</div>
<div class="line"><span class="lineno">  778</span>    <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#acdcfef17d88de636c0efb5190313fa95">is_idx_file</a>(dir_entry)) {</div>
<div class="line"><span class="lineno">  779</span>      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;path = dir_entry.path();</div>
<div class="line"><span class="lineno">  780</span>      <span class="keyword">const</span> <span class="keyword">auto</span> path_in_cache = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / path.filename();</div>
<div class="line"><span class="lineno">  781</span> </div>
<div class="line"><span class="lineno">  782</span>      <span class="keywordflow">if</span> (! fs::exists(path_in_cache)) {</div>
<div class="line"><span class="lineno">  783</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Install index from resources: &quot;</span> &lt;&lt; path.filename();</div>
<div class="line"><span class="lineno">  784</span>        <a class="code hl_function" href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#a891b96f51b3e718f980614354f4e40de">copy_file_fix</a>(path, path_in_cache);</div>
<div class="line"><span class="lineno">  785</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  786</span>        <a class="code hl_class" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a> idx_rsrc, idx_cache;</div>
<div class="line"><span class="lineno">  787</span>        idx_rsrc.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">load</a>(path);</div>
<div class="line"><span class="lineno">  788</span>        idx_cache.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">load</a>(path_in_cache);</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>        <span class="keywordflow">if</span> (idx_cache.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#afc8ffd7144822ad672f0e6592628555e">version</a>() &lt; idx_rsrc.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#afc8ffd7144822ad672f0e6592628555e">version</a>()) {</div>
<div class="line"><span class="lineno">  791</span>          BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Update index from resources: &quot;</span> &lt;&lt; path.filename();</div>
<div class="line"><span class="lineno">  792</span>          <a class="code hl_function" href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#a891b96f51b3e718f980614354f4e40de">copy_file_fix</a>(path, path_in_cache);</div>
<div class="line"><span class="lineno">  793</span>        }</div>
<div class="line"><span class="lineno">  794</span>      }</div>
<div class="line"><span class="lineno">  795</span>    }</div>
<div class="line"><span class="lineno">  796</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_g_u_i_1_1_config_1_1_index_html"><div class="ttname"><a href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Slic3r::GUI::Config::Index</a></div><div class="ttdef"><b>Definition</b> Version.hpp:55</div></div>
<div class="ttc" id="aclass_slic3r_1_1_g_u_i_1_1_config_1_1_index_html_a4e8ac4c8876fd25e06e8b56dc1da660b"><div class="ttname"><a href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">Slic3r::GUI::Config::Index::load</a></div><div class="ttdeci">size_t load(const boost::filesystem::path &amp;path)</div><div class="ttdef"><b>Definition</b> Version.cpp:120</div></div>
<div class="ttc" id="aclass_slic3r_1_1_g_u_i_1_1_config_1_1_index_html_afc8ffd7144822ad672f0e6592628555e"><div class="ttname"><a href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#afc8ffd7144822ad672f0e6592628555e">Slic3r::GUI::Config::Index::version</a></div><div class="ttdeci">Semver version() const</div><div class="ttdef"><b>Definition</b> Version.cpp:201</div></div>
<div class="ttc" id="alexer_8c_html_ad4a65b873df5c05570846b5413b41dfd"><div class="ttname"><a href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a></div><div class="ttdeci">if(!(yy_init))</div><div class="ttdef"><b>Definition</b> lexer.c:1190</div></div>
<div class="ttc" id="anamespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03_html_a891b96f51b3e718f980614354f4e40de"><div class="ttname"><a href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#a891b96f51b3e718f980614354f4e40de">Slic3r::anonymous_namespace{PresetUpdater.cpp}::copy_file_fix</a></div><div class="ttdeci">void copy_file_fix(const fs::path &amp;source, const fs::path &amp;target)</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:56</div></div>
<div class="ttc" id="anamespace_slic3r_html_acdcfef17d88de636c0efb5190313fa95"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#acdcfef17d88de636c0efb5190313fa95">Slic3r::is_idx_file</a></div><div class="ttdeci">bool is_idx_file(const boost::filesystem::directory_entry &amp;dir_entry)</div><div class="ttdef"><b>Definition</b> utils.cpp:778</div></div>
<div class="ttc" id="anamespaceboost_html"><div class="ttname"><a href="../../d4/da9/namespaceboost.html">boost</a></div><div class="ttdef"><b>Definition</b> args.hpp:18</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00778">Slic3r::is_idx_file()</a>, <a class="el" href="../../#l00120">Slic3r::GUI::Config::Index::load()</a>, and <a class="el" href="../../#l00201">Slic3r::GUI::Config::Index::version()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00192">priv()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_abee9a20630ab3cf5873911138c954ead_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_abee9a20630ab3cf5873911138c954ead_icgraph.svg" width="352" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aff1209280aef6cb26f85a010a51f39f7" name="aff1209280aef6cb26f85a010a51f39f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff1209280aef6cb26f85a010a51f39f7">&#9670;&#160;</a></span>get_config_updates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/db8/namespace_slic3r.html#d9/df6/struct_slic3r_1_1_updates">Updates</a> Slic3r::PresetUpdater::priv::get_config_updates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d0/d1c/class_slic3r_1_1_semver.html">Semver</a> &amp;&#160;</td>
          <td class="paramname"><em>old_slic3r_version</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  802</span>{</div>
<div class="line"><span class="lineno">  803</span>  Updates <a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>;</div>
<div class="line"><span class="lineno">  804</span> </div>
<div class="line"><span class="lineno">  805</span>  BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Checking for cached configuration updates...&quot;</span>;</div>
<div class="line"><span class="lineno">  806</span> </div>
<div class="line"><span class="lineno">  807</span>  <span class="comment">// Over all indices from the cache directory:</span></div>
<div class="line"><span class="lineno">  808</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a>&amp; idx : <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a9aa4adf03d64f554268f5d7a361ffc36">index_db</a>) {</div>
<div class="line"><span class="lineno">  809</span>    <span class="keyword">auto</span> bundle_path = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#adde3af38e04d0285249d847b004c23f4">vendor_path</a> / (idx.vendor() + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  810</span>    <span class="keyword">auto</span> bundle_path_idx = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#adde3af38e04d0285249d847b004c23f4">vendor_path</a> / idx.path().filename();</div>
<div class="line"><span class="lineno">  811</span> </div>
<div class="line"><span class="lineno">  812</span>    <span class="keywordflow">if</span> (! fs::exists(bundle_path)) {</div>
<div class="line"><span class="lineno">  813</span>      BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Confing bundle not installed for vendor %1%, skipping: &quot;</span>, idx.vendor());</div>
<div class="line"><span class="lineno">  814</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  815</span>    }</div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>    <span class="comment">// Perform a basic load and check the version of the installed preset bundle.</span></div>
<div class="line"><span class="lineno">  818</span>    VendorProfile vp;</div>
<div class="line"><span class="lineno">  819</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  820</span>      vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(bundle_path, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  821</span>    }</div>
<div class="line"><span class="lineno">  822</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  823</span>      BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1% at %2%, message: %3%&quot;</span>, idx.vendor(), bundle_path, e.what());</div>
<div class="line"><span class="lineno">  824</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  825</span>    }</div>
<div class="line"><span class="lineno">  826</span>    <span class="comment">// Getting a recommended version from the latest index, wich may have been downloaded</span></div>
<div class="line"><span class="lineno">  827</span>    <span class="comment">// from the internet, or installed / updated from the installation resources.</span></div>
<div class="line"><span class="lineno">  828</span>    <span class="keyword">auto</span> recommended = idx.recommended();</div>
<div class="line"><span class="lineno">  829</span>    <span class="keywordflow">if</span> (recommended == idx.end()) {</div>
<div class="line"><span class="lineno">  830</span>      BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;No recommended version for vendor: %1%, invalid index? Giving up.&quot;</span>, idx.vendor());</div>
<div class="line"><span class="lineno">  831</span>      <span class="comment">// XXX: what should be done here?</span></div>
<div class="line"><span class="lineno">  832</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  833</span>    }</div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span>    <span class="keyword">const</span> <span class="keyword">auto</span> ver_current = idx.find(vp.config_version);</div>
<div class="line"><span class="lineno">  836</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> ver_current_found = ver_current != idx.end();</div>
<div class="line"><span class="lineno">  837</span> </div>
<div class="line"><span class="lineno">  838</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Vendor: %1%, version installed: %2%%3%, version cached: %4%&quot;</span>,</div>
<div class="line"><span class="lineno">  839</span>      vp.name,</div>
<div class="line"><span class="lineno">  840</span>      vp.config_version.to_string(),</div>
<div class="line"><span class="lineno">  841</span>      (ver_current_found ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; (not found in index!)&quot;</span>),</div>
<div class="line"><span class="lineno">  842</span>      recommended-&gt;config_version.<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aeb3fca8348ccc662e2259780bf8bd621">to_string</a>());</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>    <span class="keywordflow">if</span> (! ver_current_found) {</div>
<div class="line"><span class="lineno">  845</span>      <span class="comment">// Any published config shall be always found in the latest config index.</span></div>
<div class="line"><span class="lineno">  846</span>      <span class="keyword">auto</span> message = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Preset bundle `%1%` version not found in index: %2%&quot;</span>, idx.vendor(), vp.config_version.to_string());</div>
<div class="line"><span class="lineno">  847</span>      BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; message;</div>
<div class="line"><span class="lineno">  848</span>      <a class="code hl_function" href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a0bc89a10493a9b11b4462f72adacfa15">GUI::show_error</a>(<span class="keyword">nullptr</span>, message);</div>
<div class="line"><span class="lineno">  849</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  850</span>    }</div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span>    <span class="keywordtype">bool</span> current_not_supported = <span class="keyword">false</span>; <span class="comment">//if slcr is incompatible but situation is not downgrade, we do forced updated and this bool is information to do it </span></div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>    <span class="keywordflow">if</span> (ver_current_found &amp;&amp; !ver_current-&gt;is_current_slic3r_supported()){</div>
<div class="line"><span class="lineno">  855</span>      <span class="keywordflow">if</span> (ver_current-&gt;is_current_slic3r_downgrade()) {</div>
<div class="line"><span class="lineno">  856</span>        <span class="comment">// &quot;Reconfigure&quot; situation.</span></div>
<div class="line"><span class="lineno">  857</span>        BOOST_LOG_TRIVIAL(warning) &lt;&lt; <span class="stringliteral">&quot;Current Slic3r incompatible with installed bundle: &quot;</span> &lt;&lt; bundle_path.string();</div>
<div class="line"><span class="lineno">  858</span>        <a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>.incompats.emplace_back(std::move(bundle_path), *ver_current, vp.name);</div>
<div class="line"><span class="lineno">  859</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  860</span>      }</div>
<div class="line"><span class="lineno">  861</span>    current_not_supported = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  862</span>    }</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>    <span class="keywordflow">if</span> (recommended-&gt;config_version &lt; vp.config_version) {</div>
<div class="line"><span class="lineno">  865</span>      BOOST_LOG_TRIVIAL(warning) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Recommended config version for the currently running PrusaSlicer is older than the currently installed config for vendor %1%. This should not happen.&quot;</span>, idx.vendor());</div>
<div class="line"><span class="lineno">  866</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  867</span>    }</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>    <span class="keywordflow">if</span> (recommended-&gt;config_version == vp.config_version) {</div>
<div class="line"><span class="lineno">  870</span>      <span class="comment">// The recommended config bundle is already installed.</span></div>
<div class="line"><span class="lineno">  871</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  872</span>    }</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>    <span class="comment">// Config bundle update situation. The recommended config bundle version for this PrusaSlicer version from the index from the cache is newer</span></div>
<div class="line"><span class="lineno">  875</span>    <span class="comment">// than the version of the currently installed config bundle.</span></div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>    <span class="comment">// The config index inside the cache directory (given by idx.path()) is one of the following:</span></div>
<div class="line"><span class="lineno">  878</span>    <span class="comment">// 1) The last config index downloaded by any previously running PrusaSlicer instance</span></div>
<div class="line"><span class="lineno">  879</span>    <span class="comment">// 2) The last config index installed by any previously running PrusaSlicer instance (older or newer) from its resources.</span></div>
<div class="line"><span class="lineno">  880</span>    <span class="comment">// 3) The last config index installed by the currently running PrusaSlicer instance from its resources.</span></div>
<div class="line"><span class="lineno">  881</span>    <span class="comment">// The config index is always the newest one (given by its newest config bundle referenced), and older config indices shall fully contain</span></div>
<div class="line"><span class="lineno">  882</span>    <span class="comment">// the content of the older config indices.</span></div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>    <span class="comment">// Config bundle inside the cache directory.</span></div>
<div class="line"><span class="lineno">  885</span>    fs::path path_in_cache    = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / (idx.vendor() + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  886</span>    <span class="comment">// Config bundle inside the resources directory.</span></div>
<div class="line"><span class="lineno">  887</span>    fs::path path_in_rsrc     = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">rsrc_path</a>  / (idx.vendor() + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  888</span>    <span class="comment">// Config index inside the resources directory.</span></div>
<div class="line"><span class="lineno">  889</span>    fs::path path_idx_in_rsrc   = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">rsrc_path</a>  / (idx.vendor() + <span class="stringliteral">&quot;.idx&quot;</span>);</div>
<div class="line"><span class="lineno">  890</span> </div>
<div class="line"><span class="lineno">  891</span>    <span class="comment">// Search for a valid config bundle in the cache directory.</span></div>
<div class="line"><span class="lineno">  892</span>    <span class="keywordtype">bool</span>    found = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  893</span>    Update      <a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#ae84ce77f51b092f99dc19b9e381068d0">new_update</a>;</div>
<div class="line"><span class="lineno">  894</span>    fs::path  bundle_path_idx_to_install;</div>
<div class="line"><span class="lineno">  895</span>    <span class="keywordflow">if</span> (fs::exists(path_in_cache)) {</div>
<div class="line"><span class="lineno">  896</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  897</span>        VendorProfile new_vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(path_in_cache, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  898</span>        <span class="keywordflow">if</span> (new_vp.config_version == recommended-&gt;config_version) {</div>
<div class="line"><span class="lineno">  899</span>          <span class="comment">// The config bundle from the cache directory matches the recommended version of the index from the cache directory.</span></div>
<div class="line"><span class="lineno">  900</span>          <span class="comment">// This is the newest known recommended config. Use it.</span></div>
<div class="line"><span class="lineno">  901</span>          <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../de/d55/namespace_slic3r_1_1_preset_utils.html#ab4bcc639233895eecfb902bb1b80b364">PresetUtils::vendor_profile_has_all_resources</a>(new_vp)) {</div>
<div class="line"><span class="lineno">  902</span>            BOOST_LOG_TRIVIAL(warning) &lt;&lt; <span class="stringliteral">&quot;Some resources are missing for update of vedor &quot;</span> &lt;&lt; new_vp.id;</div>
<div class="line"><span class="lineno">  903</span>          }</div>
<div class="line"><span class="lineno">  904</span>          <a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#ae84ce77f51b092f99dc19b9e381068d0">new_update</a> = Update(std::move(path_in_cache), std::move(bundle_path), *recommended, vp.name, vp.changelog_url, current_not_supported);</div>
<div class="line"><span class="lineno">  905</span>          <span class="comment">// and install the config index from the cache into vendor&#39;s directory.</span></div>
<div class="line"><span class="lineno">  906</span>          bundle_path_idx_to_install = idx.path();</div>
<div class="line"><span class="lineno">  907</span>          found = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  908</span>        }</div>
<div class="line"><span class="lineno">  909</span>      } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;ex) {</div>
<div class="line"><span class="lineno">  910</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Failed to load the config bundle `%1%`: %2%&quot;</span>, path_in_cache.string(), ex.what());</div>
<div class="line"><span class="lineno">  911</span>      }</div>
<div class="line"><span class="lineno">  912</span>    }</div>
<div class="line"><span class="lineno">  913</span> </div>
<div class="line"><span class="lineno">  914</span>    <span class="comment">// Keep the rsrc_idx outside of the next block, as we will reference the &quot;recommended&quot; version by an iterator.</span></div>
<div class="line"><span class="lineno">  915</span>    <a class="code hl_class" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a> rsrc_idx;</div>
<div class="line"><span class="lineno">  916</span>    <span class="keywordflow">if</span> (! found &amp;&amp; fs::exists(path_in_rsrc) &amp;&amp; fs::exists(path_idx_in_rsrc)) {</div>
<div class="line"><span class="lineno">  917</span>      <span class="comment">// Trying the config bundle from resources (from the installation).</span></div>
<div class="line"><span class="lineno">  918</span>      <span class="comment">// In that case, the recommended version number has to be compared against the recommended version reported by the config index from resources as well, </span></div>
<div class="line"><span class="lineno">  919</span>      <span class="comment">// as the config index in the cache directory may already be newer, recommending a newer config bundle than available in cache or resources.</span></div>
<div class="line"><span class="lineno">  920</span>      VendorProfile rsrc_vp;</div>
<div class="line"><span class="lineno">  921</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  922</span>        rsrc_vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(path_in_rsrc, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  923</span>      } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;ex) {</div>
<div class="line"><span class="lineno">  924</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Cannot load the config bundle at `%1%`: %2%&quot;</span>, path_in_rsrc.string(), ex.what());</div>
<div class="line"><span class="lineno">  925</span>      }</div>
<div class="line"><span class="lineno">  926</span>      <span class="keywordflow">if</span> (rsrc_vp.valid()) {</div>
<div class="line"><span class="lineno">  927</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  928</span>          rsrc_idx.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">load</a>(path_idx_in_rsrc);</div>
<div class="line"><span class="lineno">  929</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;ex) {</div>
<div class="line"><span class="lineno">  930</span>          BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Cannot load the config index at `%1%`: %2%&quot;</span>, path_idx_in_rsrc.string(), ex.what());</div>
<div class="line"><span class="lineno">  931</span>        }</div>
<div class="line"><span class="lineno">  932</span>        recommended = rsrc_idx.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a30a0a5acdd8214d6e803b9e40b77d385">recommended</a>();</div>
<div class="line"><span class="lineno">  933</span>        <span class="keywordflow">if</span> (recommended != rsrc_idx.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#ae3ff9e1e88b69494f5052be75793ab68">end</a>() &amp;&amp; recommended-&gt;config_version == rsrc_vp.config_version &amp;&amp; recommended-&gt;config_version &gt; vp.config_version) {</div>
<div class="line"><span class="lineno">  934</span>          <a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#ae84ce77f51b092f99dc19b9e381068d0">new_update</a> = Update(std::move(path_in_rsrc), std::move(bundle_path), *recommended, vp.name, vp.changelog_url, current_not_supported);</div>
<div class="line"><span class="lineno">  935</span>          bundle_path_idx_to_install = path_idx_in_rsrc;</div>
<div class="line"><span class="lineno">  936</span>          found = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  937</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  938</span>          BOOST_LOG_TRIVIAL(warning) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;The recommended config version for vendor `%1%` in resources does not match the recommended\n&quot;</span></div>
<div class="line"><span class="lineno">  939</span>                                                   <span class="stringliteral">&quot; config version for this version of PrusaSlicer. Corrupted installation?&quot;</span>, idx.vendor());</div>
<div class="line"><span class="lineno">  940</span>        }</div>
<div class="line"><span class="lineno">  941</span>      }</div>
<div class="line"><span class="lineno">  942</span>    }</div>
<div class="line"><span class="lineno">  943</span> </div>
<div class="line"><span class="lineno">  944</span>    <span class="keywordflow">if</span> (found) {</div>
<div class="line"><span class="lineno">  945</span>      <span class="comment">// Load &#39;installed&#39; idx, if any.</span></div>
<div class="line"><span class="lineno">  946</span>      <span class="comment">// &#39;Installed&#39; indices are kept alongside the bundle in the `vendor` subdir</span></div>
<div class="line"><span class="lineno">  947</span>      <span class="comment">// for bookkeeping to remember a cancelled update and not offer it again.</span></div>
<div class="line"><span class="lineno">  948</span>      <span class="keywordflow">if</span> (fs::exists(bundle_path_idx)) {</div>
<div class="line"><span class="lineno">  949</span>        <a class="code hl_class" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a> existing_idx;</div>
<div class="line"><span class="lineno">  950</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  951</span>          existing_idx.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">load</a>(bundle_path_idx);</div>
<div class="line"><span class="lineno">  952</span>          <span class="comment">// Find a recommended config bundle version for the slic3r version last executed. This makes sure that a config bundle update will not be missed</span></div>
<div class="line"><span class="lineno">  953</span>          <span class="comment">// when upgrading an application. On the other side, the user will be bugged every time he will switch between slic3r versions.</span></div>
<div class="line"><span class="lineno">  954</span>                    <span class="comment">/*const auto existing_recommended = existing_idx.recommended(old_slic3r_version);</span></div>
<div class="line"><span class="lineno">  955</span><span class="comment">                    if (existing_recommended != existing_idx.end() &amp;&amp; recommended-&gt;config_version == existing_recommended-&gt;config_version) {</span></div>
<div class="line"><span class="lineno">  956</span><span class="comment">            // The user has already seen (and presumably rejected) this update</span></div>
<div class="line"><span class="lineno">  957</span><span class="comment">            BOOST_LOG_TRIVIAL(info) &lt;&lt; format(&quot;Downloaded index for `%1%` is the same as installed one, not offering an update.&quot;,idx.vendor());</span></div>
<div class="line"><span class="lineno">  958</span><span class="comment">            continue;</span></div>
<div class="line"><span class="lineno">  959</span><span class="comment">          }*/</span></div>
<div class="line"><span class="lineno">  960</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;err) {</div>
<div class="line"><span class="lineno">  961</span>          BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Cannot load the installed index at `%1%`: %2%&quot;</span>, bundle_path_idx, err.what());</div>
<div class="line"><span class="lineno">  962</span>        }</div>
<div class="line"><span class="lineno">  963</span>      }</div>
<div class="line"><span class="lineno">  964</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  965</span>      <span class="comment">// Check if the update is already present in a snapshot</span></div>
<div class="line"><span class="lineno">  966</span>      <span class="keywordflow">if</span>(!current_not_supported)</div>
<div class="line"><span class="lineno">  967</span>      {</div>
<div class="line"><span class="lineno">  968</span>        <span class="keyword">const</span> <span class="keyword">auto</span> recommended_snap = SnapshotDB::singleton().snapshot_with_vendor_preset(vp.name, recommended-&gt;config_version);</div>
<div class="line"><span class="lineno">  969</span>        <span class="keywordflow">if</span> (recommended_snap != SnapshotDB::singleton().<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">end</a>()) {</div>
<div class="line"><span class="lineno">  970</span>          BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Bundle update %1% %2% already found in snapshot %3%, skipping...&quot;</span>,</div>
<div class="line"><span class="lineno">  971</span>            vp.name,</div>
<div class="line"><span class="lineno">  972</span>            recommended-&gt;config_version.to_string(),</div>
<div class="line"><span class="lineno">  973</span>            recommended_snap-&gt;id);</div>
<div class="line"><span class="lineno">  974</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  975</span>        }</div>
<div class="line"><span class="lineno">  976</span>      }</div>
<div class="line"><span class="lineno">  977</span><span class="preprocessor">#endif </span><span class="comment">// 0</span></div>
<div class="line"><span class="lineno">  978</span>      <a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>.updates.emplace_back(std::move(<a class="code hl_function" href="../../d2/d68/libavrdude_8h.html#ae84ce77f51b092f99dc19b9e381068d0">new_update</a>));</div>
<div class="line"><span class="lineno">  979</span>      <span class="comment">// &#39;Install&#39; the index in the vendor directory. This is used to memoize</span></div>
<div class="line"><span class="lineno">  980</span>      <span class="comment">// offered updates and to not offer the same update again if it was cancelled by the user.</span></div>
<div class="line"><span class="lineno">  981</span>      <a class="code hl_function" href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#a891b96f51b3e718f980614354f4e40de">copy_file_fix</a>(bundle_path_idx_to_install, bundle_path_idx);</div>
<div class="line"><span class="lineno">  982</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  983</span>      BOOST_LOG_TRIVIAL(warning) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Index for vendor %1% indicates update (%2%) but the new bundle was found neither in cache nor resources&quot;</span>,</div>
<div class="line"><span class="lineno">  984</span>        idx.vendor(),</div>
<div class="line"><span class="lineno">  985</span>        recommended-&gt;config_version.to_string());</div>
<div class="line"><span class="lineno">  986</span>    }</div>
<div class="line"><span class="lineno">  987</span>  }</div>
<div class="line"><span class="lineno">  988</span> </div>
<div class="line"><span class="lineno">  989</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>;</div>
<div class="line"><span class="lineno">  990</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_g_u_i_1_1_config_1_1_index_html_a30a0a5acdd8214d6e803b9e40b77d385"><div class="ttname"><a href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a30a0a5acdd8214d6e803b9e40b77d385">Slic3r::GUI::Config::Index::recommended</a></div><div class="ttdeci">const_iterator recommended() const</div><div class="ttdef"><b>Definition</b> Version.cpp:229</div></div>
<div class="ttc" id="aclass_slic3r_1_1_g_u_i_1_1_config_1_1_index_html_ae3ff9e1e88b69494f5052be75793ab68"><div class="ttname"><a href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#ae3ff9e1e88b69494f5052be75793ab68">Slic3r::GUI::Config::Index::end</a></div><div class="ttdeci">const_iterator end() const</div><div class="ttdef"><b>Definition</b> Version.hpp:68</div></div>
<div class="ttc" id="aclass_slic3r_1_1_vendor_profile_html_abe2eace8ff1ce23bff40b7ee23eba162"><div class="ttname"><a href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">Slic3r::VendorProfile::from_ini</a></div><div class="ttdeci">static VendorProfile from_ini(const boost::filesystem::path &amp;path, bool load_all=true)</div><div class="ttdef"><b>Definition</b> Preset.cpp:76</div></div>
<div class="ttc" id="alibavrdude_8h_html_ae84ce77f51b092f99dc19b9e381068d0"><div class="ttname"><a href="../../d2/d68/libavrdude_8h.html#ae84ce77f51b092f99dc19b9e381068d0">new_update</a></div><div class="ttdeci">UPDATE * new_update(int op, char *memtype, int filefmt, char *filename, unsigned section)</div><div class="ttdef"><b>Definition</b> update.c:201</div></div>
<div class="ttc" id="amain_8c_html_a024fc544462c9760de054ee2fe61dce1"><div class="ttname"><a href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a></div><div class="ttdeci">static LISTID updates</div><div class="ttdef"><b>Definition</b> main.c:186</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_g_u_i_html_a0bc89a10493a9b11b4462f72adacfa15"><div class="ttname"><a href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a0bc89a10493a9b11b4462f72adacfa15">Slic3r::GUI::show_error</a></div><div class="ttdeci">void show_error(wxWindow *parent, const wxString &amp;message, bool monospaced_font)</div><div class="ttdef"><b>Definition</b> GUI.cpp:224</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_preset_utils_html_ab4bcc639233895eecfb902bb1b80b364"><div class="ttname"><a href="../../de/d55/namespace_slic3r_1_1_preset_utils.html#ab4bcc639233895eecfb902bb1b80b364">Slic3r::PresetUtils::vendor_profile_has_all_resources</a></div><div class="ttdeci">bool vendor_profile_has_all_resources(const VendorProfile &amp;vp)</div><div class="ttdef"><b>Definition</b> Preset.cpp:2277</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab28c13d286b2d1767d7c63b020ebd042"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">Slic3r::format</a></div><div class="ttdeci">std::string format(const char *fmt, TArgs &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> format.hpp:44</div></div>
<div class="ttc" id="anamespace_slic3r_html_aeb3fca8348ccc662e2259780bf8bd621"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aeb3fca8348ccc662e2259780bf8bd621">Slic3r::to_string</a></div><div class="ttdeci">std::string to_string(const Vec2crd &amp;pt)</div><div class="ttdef"><b>Definition</b> Point.hpp:139</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_ac9b51e95f63e38d00e5fc46bb96927c3"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#ac9b51e95f63e38d00e5fc46bb96927c3">libnest2d::shapelike::end</a></div><div class="ttdeci">S::iterator end(S &amp;sh, const PathTag &amp;)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:620</div></div>
<div class="ttc" id="atga_8cpp_html_adbb625a19574e9e39e1d07df31b00b06"><div class="ttname"><a href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a></div><div class="ttdeci">static char error[256]</div><div class="ttdef"><b>Definition</b> tga.cpp:50</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00036">Slic3r::VendorProfile::changelog_url</a>, <a class="el" href="../../#l00034">Slic3r::VendorProfile::config_version</a>, <a class="el" href="../../#l00068">Slic3r::GUI::Config::Index::end()</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00044">Slic3r::format()</a>, <a class="el" href="../../#l00076">Slic3r::VendorProfile::from_ini()</a>, <a class="el" href="../../#l00033">Slic3r::VendorProfile::id</a>, <a class="el" href="../../#l00120">Slic3r::GUI::Config::Index::load()</a>, <a class="el" href="../../#l00032">Slic3r::VendorProfile::name</a>, <a class="el" href="../../#l00201">new_update()</a>, <a class="el" href="../../#l00229">Slic3r::GUI::Config::Index::recommended()</a>, <a class="el" href="../../#l00224">Slic3r::GUI::show_error()</a>, <a class="el" href="../../#l00153">Slic3r::Semver::to_string()</a>, <a class="el" href="../../#l00186">updates</a>, <a class="el" href="../../#l00075">Slic3r::VendorProfile::valid()</a>, and <a class="el" href="../../#l02277">Slic3r::PresetUtils::vendor_profile_has_all_resources()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_aff1209280aef6cb26f85a010a51f39f7_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a941e7a6e74d0bcf93b9c2bb05dbd09c0" name="a941e7a6e74d0bcf93b9c2bb05dbd09c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a941e7a6e74d0bcf93b9c2bb05dbd09c0">&#9670;&#160;</a></span>get_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PresetUpdater::priv::get_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> fs::path &amp;&#160;</td>
          <td class="paramname"><em>target_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  221</span>{</div>
<div class="line"><span class="lineno">  222</span>  <span class="keywordtype">bool</span> res = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  223</span>  fs::path tmp_path = target_path;</div>
<div class="line"><span class="lineno">  224</span>  tmp_path += <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;.%1%%2%&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a75172b21afb075cfcb6ebd3612077071">get_current_pid</a>(), <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#aa599e9246c446ebd84578cd5c19c63e5">TMP_EXTENSION</a>);</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>  BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Get: `%1%`\n\t-&gt; `%2%`\n\tvia tmp path `%3%`&quot;</span>,</div>
<div class="line"><span class="lineno">  227</span>    url,</div>
<div class="line"><span class="lineno">  228</span>    target_path.string(),</div>
<div class="line"><span class="lineno">  229</span>    tmp_path.string());</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>  <a class="code hl_function" href="../../d4/dbf/class_slic3r_1_1_http.html#aece8b9cd77673a474fe97331604914aa">Http::get</a>(url)</div>
<div class="line"><span class="lineno">  232</span>        .<a class="code hl_function" href="../../d4/dbf/class_slic3r_1_1_http.html#afda74f7b9247f37db6075db0d5d7de67">on_progress</a>([](Http::Progress, <span class="keywordtype">bool</span> &amp;<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>) {</div>
<div class="line"><span class="lineno">  233</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>) { <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a> = <span class="keyword">true</span>; }</div>
<div class="line"><span class="lineno">  234</span>    })</div>
<div class="line"><span class="lineno">  235</span>    .on_error([&amp;](std::string body, std::string <a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>, <span class="keywordtype">unsigned</span> http_status) {</div>
<div class="line"><span class="lineno">  236</span>      (<a class="code hl_function" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>)body;</div>
<div class="line"><span class="lineno">  237</span>      BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Error getting: `%1%`: HTTP %2%, %3%&quot;</span>,</div>
<div class="line"><span class="lineno">  238</span>        url,</div>
<div class="line"><span class="lineno">  239</span>        http_status,</div>
<div class="line"><span class="lineno">  240</span>        <a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>);</div>
<div class="line"><span class="lineno">  241</span>    })</div>
<div class="line"><span class="lineno">  242</span>    .on_complete([&amp;](std::string body, <span class="keywordtype">unsigned</span> <span class="comment">/* http_status */</span>) {</div>
<div class="line"><span class="lineno">  243</span>      fs::fstream file(tmp_path, std::ios::out | std::ios::binary | std::ios::trunc);</div>
<div class="line"><span class="lineno">  244</span>      file.write(body.c_str(), body.size());</div>
<div class="line"><span class="lineno">  245</span>      file.close();</div>
<div class="line"><span class="lineno">  246</span>      fs::rename(tmp_path, target_path);</div>
<div class="line"><span class="lineno">  247</span>      res = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  248</span>    })</div>
<div class="line"><span class="lineno">  249</span>    .perform_sync();</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>  <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  252</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_http_html_aece8b9cd77673a474fe97331604914aa"><div class="ttname"><a href="../../d4/dbf/class_slic3r_1_1_http.html#aece8b9cd77673a474fe97331604914aa">Slic3r::Http::get</a></div><div class="ttdeci">static Http get(std::string url)</div><div class="ttdef"><b>Definition</b> Http.cpp:607</div></div>
<div class="ttc" id="aclass_slic3r_1_1_http_html_afda74f7b9247f37db6075db0d5d7de67"><div class="ttname"><a href="../../d4/dbf/class_slic3r_1_1_http.html#afda74f7b9247f37db6075db0d5d7de67">Slic3r::Http::on_progress</a></div><div class="ttdeci">Http &amp; on_progress(ProgressFn fn)</div><div class="ttdef"><b>Definition</b> Http.cpp:571</div></div>
<div class="ttc" id="aglu-libtess_8h_html_a4292190e3f1f6b373a760c7d9316ad3c"><div class="ttname"><a href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a></div><div class="ttdeci">typedef void(GLAPIENTRYP _GLUfuncptr)(void)</div></div>
<div class="ttc" id="anamespace_slic3r_html_a75172b21afb075cfcb6ebd3612077071"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a75172b21afb075cfcb6ebd3612077071">Slic3r::get_current_pid</a></div><div class="ttdeci">unsigned get_current_pid()</div><div class="ttdef"><b>Definition</b> utils.cpp:924</div></div>
<div class="ttc" id="anamespace_slic3r_html_aa599e9246c446ebd84578cd5c19c63e5"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aa599e9246c446ebd84578cd5c19c63e5">Slic3r::TMP_EXTENSION</a></div><div class="ttdeci">static const char * TMP_EXTENSION</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:53</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00044">Slic3r::format()</a>, <a class="el" href="../../#l00607">Slic3r::Http::get()</a>, <a class="el" href="../../#l00924">Slic3r::get_current_pid()</a>, <a class="el" href="../../#l00571">Slic3r::Http::on_progress()</a>, <a class="el" href="../../#l00053">Slic3r::TMP_EXTENSION</a>, and <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_a941e7a6e74d0bcf93b9c2bb05dbd09c0_cgraph.svg" width="570" height="242"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af7e4467777ab333009919e967a9eafaf" name="af7e4467777ab333009919e967a9eafaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7e4467777ab333009919e967a9eafaf">&#9670;&#160;</a></span>get_missing_resource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PresetUpdater::priv::get_missing_resource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  265</span>{</div>
<div class="line"><span class="lineno">  266</span>  <span class="keywordflow">if</span> (filename.empty() || vendor.empty())</div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>  <span class="keywordflow">if</span> (!boost::starts_with(url, <span class="stringliteral">&quot;http://files.prusa3d.com/wp-content/uploads/repository/&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  270</span>    !boost::starts_with(url, <span class="stringliteral">&quot;https://files.prusa3d.com/wp-content/uploads/repository/&quot;</span>))</div>
<div class="line"><span class="lineno">  271</span>  {</div>
<div class="line"><span class="lineno">  272</span>    <span class="keywordflow">throw</span> Slic3r::CriticalException(<a class="code hl_function" href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a931a812146d00b37d0b68093aca9d688">GUI::format</a>(<span class="stringliteral">&quot;URL outside prusa3d.com network: %1%&quot;</span>, url));</div>
<div class="line"><span class="lineno">  273</span>  }</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>  std::string escaped_filename = <a class="code hl_function" href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#abfc559e48c5ddb2287b128b994846003">escape_string_url</a>(filename);</div>
<div class="line"><span class="lineno">  276</span>  <span class="keyword">const</span> fs::path file_in_vendor(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#adde3af38e04d0285249d847b004c23f4">vendor_path</a> / (vendor + <span class="stringliteral">&quot;/&quot;</span> + filename));</div>
<div class="line"><span class="lineno">  277</span>  <span class="keyword">const</span> fs::path file_in_rsrc(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">rsrc_path</a> / (vendor + <span class="stringliteral">&quot;/&quot;</span> + filename));</div>
<div class="line"><span class="lineno">  278</span>  <span class="keyword">const</span> fs::path file_in_cache(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / (vendor + <span class="stringliteral">&quot;/&quot;</span> + filename));</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>  <span class="keywordflow">if</span> (fs::exists(file_in_vendor)) { <span class="comment">// Already in vendor. No need to do anything.</span></div>
<div class="line"><span class="lineno">  281</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Resource &quot;</span> &lt;&lt; vendor &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; found in vendor folder. No need to download.&quot;</span>;</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  283</span>  }</div>
<div class="line"><span class="lineno">  284</span>  <span class="keywordflow">if</span> (fs::exists(file_in_rsrc)) { <span class="comment">// In resources dir since installation. No need to do anything.</span></div>
<div class="line"><span class="lineno">  285</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Resource &quot;</span> &lt;&lt; vendor &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; found in resources folder. No need to download.&quot;</span>;</div>
<div class="line"><span class="lineno">  286</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  287</span>  }</div>
<div class="line"><span class="lineno">  288</span>  <span class="keywordflow">if</span> (fs::exists(file_in_cache)) { <span class="comment">// In cache/venodr_name/ dir. No need to do anything.</span></div>
<div class="line"><span class="lineno">  289</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Resource &quot;</span> &lt;&lt; vendor &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; found in cache folder. No need to download.&quot;</span>;</div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  291</span>  }</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>  BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Resources check could not find &quot;</span> &lt;&lt; vendor &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; bed texture. Downloading.&quot;</span>;</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span>  <span class="keyword">const</span> <span class="keyword">auto</span> resource_url = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;%1%%2%%3%&quot;</span>, url, url.back() == <span class="charliteral">&#39;/&#39;</span> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;/&quot;</span>, escaped_filename); <span class="comment">// vendor should already be in url </span></div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>  <span class="keywordflow">if</span> (!fs::exists(file_in_cache.parent_path()))</div>
<div class="line"><span class="lineno">  298</span>    fs::create_directory(file_in_cache.parent_path());</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>  <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a>(resource_url, file_in_cache);</div>
<div class="line"><span class="lineno">  301</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  302</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_g_u_i_html_a931a812146d00b37d0b68093aca9d688"><div class="ttname"><a href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a931a812146d00b37d0b68093aca9d688">Slic3r::GUI::format</a></div><div class="ttdeci">std::string format(const char *fmt, TArgs &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> format.hpp:56</div></div>
<div class="ttc" id="anamespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03_html_abfc559e48c5ddb2287b128b994846003"><div class="ttname"><a href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#abfc559e48c5ddb2287b128b994846003">Slic3r::anonymous_namespace{PresetUpdater.cpp}::escape_string_url</a></div><div class="ttdeci">std::string escape_string_url(const std::string &amp;unescaped)</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:72</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a941e7a6e74d0bcf93b9c2bb05dbd09c0"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">Slic3r::PresetUpdater::priv::get_file</a></div><div class="ttdeci">bool get_file(const std::string &amp;url, const fs::path &amp;target_path) const</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:220</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00044">Slic3r::format()</a>, and <a class="el" href="../../#l00056">Slic3r::GUI::format()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_af7e4467777ab333009919e967a9eafaf_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa0ab86b21916933d5126eb64004f18b0" name="aa0ab86b21916933d5126eb64004f18b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0ab86b21916933d5126eb64004f18b0">&#9670;&#160;</a></span>get_or_copy_missing_resource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PresetUpdater::priv::get_or_copy_missing_resource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  305</span>{</div>
<div class="line"><span class="lineno">  306</span>  <span class="keywordflow">if</span> (filename.empty() || vendor.empty())</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>  std::string escaped_filename = <a class="code hl_function" href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#abfc559e48c5ddb2287b128b994846003">escape_string_url</a>(filename);</div>
<div class="line"><span class="lineno">  310</span>  <span class="keyword">const</span> fs::path file_in_vendor(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#adde3af38e04d0285249d847b004c23f4">vendor_path</a> / (vendor + <span class="stringliteral">&quot;/&quot;</span> + filename));</div>
<div class="line"><span class="lineno">  311</span>  <span class="keyword">const</span> fs::path file_in_rsrc(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">rsrc_path</a> / (vendor + <span class="stringliteral">&quot;/&quot;</span> + filename));</div>
<div class="line"><span class="lineno">  312</span>  <span class="keyword">const</span> fs::path file_in_cache(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / (vendor + <span class="stringliteral">&quot;/&quot;</span> + filename));</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>  <span class="keywordflow">if</span> (fs::exists(file_in_vendor)) { <span class="comment">// Already in vendor. No need to do anything.</span></div>
<div class="line"><span class="lineno">  315</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Resource &quot;</span> &lt;&lt; vendor &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; found in vendor folder. No need to download.&quot;</span>;</div>
<div class="line"><span class="lineno">  316</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  317</span>  }</div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordflow">if</span> (fs::exists(file_in_rsrc)) { <span class="comment">// In resources dir since installation. No need to do anything.</span></div>
<div class="line"><span class="lineno">  319</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Resource &quot;</span> &lt;&lt; vendor &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; found in resources folder. No need to download.&quot;</span>;</div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  321</span>  }</div>
<div class="line"><span class="lineno">  322</span>  <span class="keywordflow">if</span> (!fs::exists(file_in_cache)) { <span class="comment">// No file to copy. Download it to straight to the vendor dir.</span></div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">if</span> (!boost::starts_with(url, <span class="stringliteral">&quot;http://files.prusa3d.com/wp-content/uploads/repository/&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  324</span>      !boost::starts_with(url, <span class="stringliteral">&quot;https://files.prusa3d.com/wp-content/uploads/repository/&quot;</span>))</div>
<div class="line"><span class="lineno">  325</span>    {</div>
<div class="line"><span class="lineno">  326</span>      <span class="keywordflow">throw</span> Slic3r::CriticalException(<a class="code hl_function" href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a931a812146d00b37d0b68093aca9d688">GUI::format</a>(<span class="stringliteral">&quot;URL outside prusa3d.com network: %1%&quot;</span>, url));</div>
<div class="line"><span class="lineno">  327</span>    }</div>
<div class="line"><span class="lineno">  328</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Downloading resources missing in cache directory: &quot;</span> &lt;&lt; vendor &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; filename;</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>    <span class="keyword">const</span> <span class="keyword">auto</span> resource_url = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;%1%%2%%3%&quot;</span>, url, url.back() == <span class="charliteral">&#39;/&#39;</span> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;/&quot;</span>, escaped_filename); <span class="comment">// vendor should already be in url </span></div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">if</span> (!fs::exists(file_in_vendor.parent_path()))</div>
<div class="line"><span class="lineno">  333</span>      fs::create_directory(file_in_vendor.parent_path());</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a>(resource_url, file_in_vendor);</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  337</span>  }</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>  <span class="keywordflow">if</span> (!fs::exists(file_in_vendor.parent_path())) <span class="comment">// create vendor_name dir in vendor </span></div>
<div class="line"><span class="lineno">  340</span>    fs::create_directory(file_in_vendor.parent_path());</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>  BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;Copiing: &quot;</span> &lt;&lt; file_in_cache &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; file_in_vendor;</div>
<div class="line"><span class="lineno">  343</span>  <a class="code hl_function" href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#a891b96f51b3e718f980614354f4e40de">copy_file_fix</a>(file_in_cache, file_in_vendor);</div>
<div class="line"><span class="lineno">  344</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00044">Slic3r::format()</a>, and <a class="el" href="../../#l00056">Slic3r::GUI::format()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_aa0ab86b21916933d5126eb64004f18b0_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ae18f7e65fd6a305f1afcec993c6e2c90" name="ae18f7e65fd6a305f1afcec993c6e2c90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae18f7e65fd6a305f1afcec993c6e2c90">&#9670;&#160;</a></span>perform_updates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PresetUpdater::priv::perform_updates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#d9/df6/struct_slic3r_1_1_updates">Updates</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>updates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>snapshot</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  993</span>{</div>
<div class="line"><span class="lineno">  994</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>.incompats.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  995</span>    <span class="keywordflow">if</span> (snapshot) {</div>
<div class="line"><span class="lineno">  996</span>      BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Taking a snapshot...&quot;</span>;</div>
<div class="line"><span class="lineno">  997</span>      <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d9/d53/namespace_slic3r_1_1_g_u_i_1_1_config.html#a8b015cca1c01df2d447de7dca71fd3ab">GUI::Config::take_config_snapshot_cancel_on_error</a>(*GUI::wxGetApp().app_config, Snapshot::SNAPSHOT_DOWNGRADE, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  998</span>        <a class="code hl_define" href="../../dc/d74/_s_l_a_print_8cpp.html#a593376f893cca350b46fd5ad9f5b9274">_u8L</a>(<span class="stringliteral">&quot;Continue and install configuration updates?&quot;</span>)))</div>
<div class="line"><span class="lineno">  999</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1000</span>    }</div>
<div class="line"><span class="lineno"> 1001</span>    </div>
<div class="line"><span class="lineno"> 1002</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Deleting %1% incompatible bundles&quot;</span>, <a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>.incompats.size());</div>
<div class="line"><span class="lineno"> 1003</span> </div>
<div class="line"><span class="lineno"> 1004</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;incompat : <a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>.incompats) {</div>
<div class="line"><span class="lineno"> 1005</span>      BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; incompat;</div>
<div class="line"><span class="lineno"> 1006</span>      incompat.remove();</div>
<div class="line"><span class="lineno"> 1007</span>    }</div>
<div class="line"><span class="lineno"> 1008</span> </div>
<div class="line"><span class="lineno"> 1009</span>    </div>
<div class="line"><span class="lineno"> 1010</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>.updates.size() &gt; 0) {</div>
<div class="line"><span class="lineno"> 1011</span>    </div>
<div class="line"><span class="lineno"> 1012</span>    <span class="keywordflow">if</span> (snapshot) {</div>
<div class="line"><span class="lineno"> 1013</span>      BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Taking a snapshot...&quot;</span>;</div>
<div class="line"><span class="lineno"> 1014</span>      <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d9/d53/namespace_slic3r_1_1_g_u_i_1_1_config.html#a8b015cca1c01df2d447de7dca71fd3ab">GUI::Config::take_config_snapshot_cancel_on_error</a>(*GUI::wxGetApp().app_config, Snapshot::SNAPSHOT_UPGRADE, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno"> 1015</span>        <a class="code hl_define" href="../../dc/d74/_s_l_a_print_8cpp.html#a593376f893cca350b46fd5ad9f5b9274">_u8L</a>(<span class="stringliteral">&quot;Continue and install configuration updates?&quot;</span>)))</div>
<div class="line"><span class="lineno"> 1016</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1017</span>    }</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Performing %1% updates&quot;</span>, <a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>.updates.size());</div>
<div class="line"><span class="lineno"> 1020</span> </div>
<div class="line"><span class="lineno"> 1021</span>    wxProgressDialog progress_dialog(<a class="code hl_define" href="../../d4/d54/slic3r_2_g_u_i_2_i18_n_8hpp.html#a7a5970404f762cc8fada02d3018fb45a">_L</a>(<span class="stringliteral">&quot;Installing profiles&quot;</span>), <a class="code hl_define" href="../../d4/d54/slic3r_2_g_u_i_2_i18_n_8hpp.html#a7a5970404f762cc8fada02d3018fb45a">_L</a>(<span class="stringliteral">&quot;Installing profiles&quot;</span>) , 100, <span class="keyword">nullptr</span>, wxPD_AUTO_HIDE);</div>
<div class="line"><span class="lineno"> 1022</span>    progress_dialog.Pulse();</div>
<div class="line"><span class="lineno"> 1023</span>    </div>
<div class="line"><span class="lineno"> 1024</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;update : <a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>.<a class="code hl_variable" href="../../d0/d29/main_8c.html#a024fc544462c9760de054ee2fe61dce1">updates</a>) {</div>
<div class="line"><span class="lineno"> 1025</span>      BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; update;</div>
<div class="line"><span class="lineno"> 1026</span> </div>
<div class="line"><span class="lineno"> 1027</span>      update.install();</div>
<div class="line"><span class="lineno"> 1028</span> </div>
<div class="line"><span class="lineno"> 1029</span>      PresetBundle bundle;</div>
<div class="line"><span class="lineno"> 1030</span>      <span class="comment">// Throw when parsing invalid configuration. Only valid configuration is supposed to be provided over the air.</span></div>
<div class="line"><span class="lineno"> 1031</span>      bundle.load_configbundle(update.source.string(), <a class="code hl_enumvalue" href="../../d9/d4b/class_slic3r_1_1_preset_bundle.html#ae7b343f817501efbf96827c552abb334ab2c7f4a8066e9282c138a831a812c826">PresetBundle::LoadConfigBundleAttribute::LoadSystem</a>, <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0a92e08bbd670bde8e86c19d698a8f2ba029990dc10122c6c00c23dc905594f5d">ForwardCompatibilitySubstitutionRule::Disable</a>);</div>
<div class="line"><span class="lineno"> 1032</span> </div>
<div class="line"><span class="lineno"> 1033</span>      BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Deleting %1% conflicting presets&quot;</span>, bundle.prints.size() + bundle.filaments.size() + bundle.printers.size());</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>      <span class="keyword">auto</span> preset_remover = [](<span class="keyword">const</span> Preset &amp;preset) {</div>
<div class="line"><span class="lineno"> 1036</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; preset.file;</div>
<div class="line"><span class="lineno"> 1037</span>        fs::remove(preset.file);</div>
<div class="line"><span class="lineno"> 1038</span>      };</div>
<div class="line"><span class="lineno"> 1039</span> </div>
<div class="line"><span class="lineno"> 1040</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;preset : bundle.prints)    { preset_remover(preset); }</div>
<div class="line"><span class="lineno"> 1041</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;preset : bundle.filaments) { preset_remover(preset); }</div>
<div class="line"><span class="lineno"> 1042</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;preset : bundle.printers)  { preset_remover(preset); }</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>      <span class="comment">// Also apply the `obsolete_presets` property, removing obsolete ini files</span></div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>      BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Deleting %1% obsolete presets&quot;</span>,</div>
<div class="line"><span class="lineno"> 1047</span>        bundle.obsolete_presets.prints.size() + bundle.obsolete_presets.filaments.size() + bundle.obsolete_presets.printers.size());</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>      <span class="keyword">auto</span> obsolete_remover = [](<span class="keyword">const</span> <span class="keywordtype">char</span> *subdir, <span class="keyword">const</span> std::string &amp;preset) {</div>
<div class="line"><span class="lineno"> 1050</span>        <span class="keyword">auto</span> path = fs::path(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a52157a1dec9ce067a7e19b02ef13e1f3">Slic3r::data_dir</a>()) / subdir / preset;</div>
<div class="line"><span class="lineno"> 1051</span>        path += <span class="stringliteral">&quot;.ini&quot;</span>;</div>
<div class="line"><span class="lineno"> 1052</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; path.string();</div>
<div class="line"><span class="lineno"> 1053</span>        fs::remove(path);</div>
<div class="line"><span class="lineno"> 1054</span>      };</div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1056</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;name : bundle.obsolete_presets.prints)    { obsolete_remover(<span class="stringliteral">&quot;print&quot;</span>, name); }</div>
<div class="line"><span class="lineno"> 1057</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;name : bundle.obsolete_presets.filaments) { obsolete_remover(<span class="stringliteral">&quot;filament&quot;</span>, name); }</div>
<div class="line"><span class="lineno"> 1058</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;name : bundle.obsolete_presets.sla_prints) { obsolete_remover(<span class="stringliteral">&quot;sla_print&quot;</span>, name); } </div>
<div class="line"><span class="lineno"> 1059</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;name : bundle.obsolete_presets.sla_materials<span class="comment">/*filaments*/</span>) { obsolete_remover(<span class="stringliteral">&quot;sla_material&quot;</span>, name); } </div>
<div class="line"><span class="lineno"> 1060</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;name : bundle.obsolete_presets.printers)  { obsolete_remover(<span class="stringliteral">&quot;printer&quot;</span>, name); }</div>
<div class="line"><span class="lineno"> 1061</span>      </div>
<div class="line"><span class="lineno"> 1062</span>      <span class="comment">// check if any resorces of installed bundle are missing. If so, new ones should be already downloaded at cache/vendor_id/</span></div>
<div class="line"><span class="lineno"> 1063</span>      VendorProfile vp;</div>
<div class="line"><span class="lineno"> 1064</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1065</span>        vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(update.target, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1066</span>      }</div>
<div class="line"><span class="lineno"> 1067</span>      <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno"> 1068</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1%, message: %2%&quot;</span>, update.target, e.what());</div>
<div class="line"><span class="lineno"> 1069</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1070</span>      }</div>
<div class="line"><span class="lineno"> 1071</span>      progress_dialog.Update(1, <a class="code hl_function" href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a252e4767c2ea4b09fe7996e808719812">GUI::format_wxstr</a>(<a class="code hl_define" href="../../d4/d54/slic3r_2_g_u_i_2_i18_n_8hpp.html#a7a5970404f762cc8fada02d3018fb45a">_L</a>(<span class="stringliteral">&quot;Downloading resources for %1%.&quot;</span>),vp.id));</div>
<div class="line"><span class="lineno"> 1072</span>      progress_dialog.Pulse();</div>
<div class="line"><span class="lineno"> 1073</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; model : vp.models) {</div>
<div class="line"><span class="lineno"> 1074</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; resource : { model.bed_texture, model.bed_model, model.thumbnail }) {</div>
<div class="line"><span class="lineno"> 1075</span>          <span class="keywordflow">if</span> (resource.empty())</div>
<div class="line"><span class="lineno"> 1076</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1077</span>          <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1078</span>          {</div>
<div class="line"><span class="lineno"> 1079</span>            <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#aa0ab86b21916933d5126eb64004f18b0">get_or_copy_missing_resource</a>(vp.id, resource, vp.config_update_url);</div>
<div class="line"><span class="lineno"> 1080</span>          }</div>
<div class="line"><span class="lineno"> 1081</span>          <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e)</div>
<div class="line"><span class="lineno"> 1082</span>          {</div>
<div class="line"><span class="lineno"> 1083</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to prepare &quot;</span> &lt;&lt; resource &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; vp.id &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; model.id &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what();</div>
<div class="line"><span class="lineno"> 1084</span>          }</div>
<div class="line"><span class="lineno"> 1085</span>        }</div>
<div class="line"><span class="lineno"> 1086</span>      } </div>
<div class="line"><span class="lineno"> 1087</span>    }</div>
<div class="line"><span class="lineno"> 1088</span> </div>
<div class="line"><span class="lineno"> 1089</span>    progress_dialog.Destroy();</div>
<div class="line"><span class="lineno"> 1090</span>  }</div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1093</span>}</div>
<div class="ttc" id="a_s_l_a_print_8cpp_html_a593376f893cca350b46fd5ad9f5b9274"><div class="ttname"><a href="../../dc/d74/_s_l_a_print_8cpp.html#a593376f893cca350b46fd5ad9f5b9274">_u8L</a></div><div class="ttdeci">#define _u8L(s)</div><div class="ttdoc">macro used to mark string used at localization, return same string</div><div class="ttdef"><b>Definition</b> SLAPrint.cpp:29</div></div>
<div class="ttc" id="aclass_slic3r_1_1_preset_bundle_html_ae7b343f817501efbf96827c552abb334ab2c7f4a8066e9282c138a831a812c826"><div class="ttname"><a href="../../d9/d4b/class_slic3r_1_1_preset_bundle.html#ae7b343f817501efbf96827c552abb334ab2c7f4a8066e9282c138a831a812c826">Slic3r::PresetBundle::LoadSystem</a></div><div class="ttdeci">@ LoadSystem</div><div class="ttdef"><b>Definition</b> PresetBundle.hpp:115</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_g_u_i_1_1_config_html_a8b015cca1c01df2d447de7dca71fd3ab"><div class="ttname"><a href="../../d9/d53/namespace_slic3r_1_1_g_u_i_1_1_config.html#a8b015cca1c01df2d447de7dca71fd3ab">Slic3r::GUI::Config::take_config_snapshot_cancel_on_error</a></div><div class="ttdeci">bool take_config_snapshot_cancel_on_error(const AppConfig &amp;app_config, Snapshot::Reason reason, const std::string &amp;comment, const std::string &amp;message, Snapshot const **psnapshot)</div><div class="ttdef"><b>Definition</b> Snapshot.cpp:589</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_g_u_i_html_a252e4767c2ea4b09fe7996e808719812"><div class="ttname"><a href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a252e4767c2ea4b09fe7996e808719812">Slic3r::GUI::format_wxstr</a></div><div class="ttdeci">wxString format_wxstr(const char *fmt, TArgs &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> format.hpp:42</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0a92e08bbd670bde8e86c19d698a8f2ba029990dc10122c6c00c23dc905594f5d"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0a92e08bbd670bde8e86c19d698a8f2ba029990dc10122c6c00c23dc905594f5d">Slic3r::Disable</a></div><div class="ttdeci">@ Disable</div><div class="ttdef"><b>Definition</b> Config.hpp:219</div></div>
<div class="ttc" id="aslic3r_2_g_u_i_2_i18_n_8hpp_html_a7a5970404f762cc8fada02d3018fb45a"><div class="ttname"><a href="../../d4/d54/slic3r_2_g_u_i_2_i18_n_8hpp.html#a7a5970404f762cc8fada02d3018fb45a">_L</a></div><div class="ttdeci">#define _L(s)</div><div class="ttdef"><b>Definition</b> I18N.hpp:3</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_aa0ab86b21916933d5126eb64004f18b0"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#aa0ab86b21916933d5126eb64004f18b0">Slic3r::PresetUpdater::priv::get_or_copy_missing_resource</a></div><div class="ttdeci">void get_or_copy_missing_resource(const std::string &amp;vendor, const std::string &amp;filename, const std::string &amp;url) const</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:304</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00003">_L</a>, <a class="el" href="../../#l00029">_u8L</a>, <a class="el" href="../../#l00035">Slic3r::VendorProfile::config_update_url</a>, <a class="el" href="../../#l00206">Slic3r::data_dir()</a>, <a class="el" href="../../#l00219">Slic3r::Disable</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00048">Slic3r::PresetBundle::filaments</a>, <a class="el" href="../../#l00075">Slic3r::PresetBundle::ObsoletePresets::filaments</a>, <a class="el" href="../../#l00044">Slic3r::format()</a>, <a class="el" href="../../#l00042">Slic3r::GUI::format_wxstr()</a>, <a class="el" href="../../#l00076">Slic3r::VendorProfile::from_ini()</a>, <a class="el" href="../../#l00033">Slic3r::VendorProfile::id</a>, <a class="el" href="../../#l01326">Slic3r::PresetBundle::load_configbundle()</a>, <a class="el" href="../../#l00115">Slic3r::PresetBundle::LoadSystem</a>, <a class="el" href="../../#l00067">Slic3r::VendorProfile::models</a>, <a class="el" href="../../#l00079">Slic3r::PresetBundle::obsolete_presets</a>, <a class="el" href="../../#l00052">Slic3r::PresetBundle::printers</a>, <a class="el" href="../../#l00077">Slic3r::PresetBundle::ObsoletePresets::printers</a>, <a class="el" href="../../#l00046">Slic3r::PresetBundle::prints</a>, <a class="el" href="../../#l00073">Slic3r::PresetBundle::ObsoletePresets::prints</a>, <a class="el" href="../../#l00459">Slic3r::PresetCollection::size()</a>, <a class="el" href="../../#l00076">Slic3r::PresetBundle::ObsoletePresets::sla_materials</a>, <a class="el" href="../../#l00074">Slic3r::PresetBundle::ObsoletePresets::sla_prints</a>, <a class="el" href="../../#l00589">Slic3r::GUI::Config::take_config_snapshot_cancel_on_error()</a>, and <a class="el" href="../../#l00186">updates</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_ae18f7e65fd6a305f1afcec993c6e2c90_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a4940e42de9639ab2aa228b35ebb63c81" name="a4940e42de9639ab2aa228b35ebb63c81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4940e42de9639ab2aa228b35ebb63c81">&#9670;&#160;</a></span>prune_tmps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PresetUpdater::priv::prune_tmps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  256</span>{</div>
<div class="line"><span class="lineno">  257</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;dir_entry : <a class="code hl_namespace" href="../../d4/da9/namespaceboost.html">boost</a>::filesystem::directory_iterator(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a>))</div>
<div class="line"><span class="lineno">  258</span>    <a class="code hl_function" href="../../d8/d33/lexer_8c.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a33fa953d3072d7f8de66af83a9a6ccb4">is_plain_file</a>(dir_entry) &amp;&amp; dir_entry.path().extension() == <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#aa599e9246c446ebd84578cd5c19c63e5">TMP_EXTENSION</a>) {</div>
<div class="line"><span class="lineno">  259</span>      BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;Cache prune: &quot;</span> &lt;&lt; dir_entry.path().string();</div>
<div class="line"><span class="lineno">  260</span>      fs::remove(dir_entry.path());</div>
<div class="line"><span class="lineno">  261</span>    }</div>
<div class="line"><span class="lineno">  262</span>}</div>
<div class="ttc" id="anamespace_slic3r_html_a33fa953d3072d7f8de66af83a9a6ccb4"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a33fa953d3072d7f8de66af83a9a6ccb4">Slic3r::is_plain_file</a></div><div class="ttdeci">bool is_plain_file(const boost::filesystem::directory_entry &amp;dir_entry)</div><div class="ttdef"><b>Definition</b> utils.cpp:761</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00761">Slic3r::is_plain_file()</a>, and <a class="el" href="../../#l00053">Slic3r::TMP_EXTENSION</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_a4940e42de9639ab2aa228b35ebb63c81_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8a6d635e3779366bb0563631d0a0006b" name="a8a6d635e3779366bb0563631d0a0006b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a6d635e3779366bb0563631d0a0006b">&#9670;&#160;</a></span>set_download_prefs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PresetUpdater::priv::set_download_prefs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d00/class_slic3r_1_1_app_config.html">AppConfig</a> *&#160;</td>
          <td class="paramname"><em>app_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  213</span>{</div>
<div class="line"><span class="lineno">  214</span>  <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#ad095998a4965d49ef60cd34950cc8015">enabled_version_check</a> = app_config-&gt;get(<span class="stringliteral">&quot;notify_release&quot;</span>) != <span class="stringliteral">&quot;none&quot;</span>;</div>
<div class="line"><span class="lineno">  215</span>  <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a3ba85d0a6fd5e6b60876f7d594838e56">version_check_url</a> = app_config-&gt;version_check_url();</div>
<div class="line"><span class="lineno">  216</span>  <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a255e3e6a853e64eec598429806f9f2c6">enabled_config_update</a> = app_config-&gt;get_bool(<span class="stringliteral">&quot;preset_update&quot;</span>) &amp;&amp; !app_config-&gt;legacy_datadir();</div>
<div class="line"><span class="lineno">  217</span>}</div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a255e3e6a853e64eec598429806f9f2c6"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a255e3e6a853e64eec598429806f9f2c6">Slic3r::PresetUpdater::priv::enabled_config_update</a></div><div class="ttdeci">bool enabled_config_update</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:160</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a3ba85d0a6fd5e6b60876f7d594838e56"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a3ba85d0a6fd5e6b60876f7d594838e56">Slic3r::PresetUpdater::priv::version_check_url</a></div><div class="ttdeci">std::string version_check_url</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:161</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_ad095998a4965d49ef60cd34950cc8015"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#ad095998a4965d49ef60cd34950cc8015">Slic3r::PresetUpdater::priv::enabled_version_check</a></div><div class="ttdeci">bool enabled_version_check</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:159</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00047">Slic3r::AppConfig::get()</a>, <a class="el" href="../../#l00061">Slic3r::AppConfig::get_bool()</a>, <a class="el" href="../../#l00134">Slic3r::AppConfig::legacy_datadir()</a>, and <a class="el" href="../../#l00739">Slic3r::AppConfig::version_check_url()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00192">priv()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_a8a6d635e3779366bb0563631d0a0006b_cgraph.svg" width="562" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_a8a6d635e3779366bb0563631d0a0006b_icgraph.svg" width="380" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aece548bbddd5962dc71aa5057a0a32ad" name="aece548bbddd5962dc71aa5057a0a32ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece548bbddd5962dc71aa5057a0a32ad">&#9670;&#160;</a></span>set_waiting_updates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PresetUpdater::priv::set_waiting_updates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#d9/df6/struct_slic3r_1_1_updates">Updates</a>&#160;</td>
          <td class="paramname"><em>u</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1096</span>{</div>
<div class="line"><span class="lineno"> 1097</span>  <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a5f49f4486a39f2fab2910b14f717a99d">waiting_updates</a> = u;</div>
<div class="line"><span class="lineno"> 1098</span>  <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a58ce233e25e1e0e9d0dc4b0b4ebf8946">has_waiting_updates</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1099</span>}</div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a58ce233e25e1e0e9d0dc4b0b4ebf8946"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a58ce233e25e1e0e9d0dc4b0b4ebf8946">Slic3r::PresetUpdater::priv::has_waiting_updates</a></div><div class="ttdeci">bool has_waiting_updates</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:171</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_a5f49f4486a39f2fab2910b14f717a99d"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a5f49f4486a39f2fab2910b14f717a99d">Slic3r::PresetUpdater::priv::waiting_updates</a></div><div class="ttdeci">Updates waiting_updates</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:172</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8476c7e87f53c7f14649f21d517f3aab" name="a8476c7e87f53c7f14649f21d517f3aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8476c7e87f53c7f14649f21d517f3aab">&#9670;&#160;</a></span>sync_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PresetUpdater::priv::sync_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../de/db8/namespace_slic3r.html#aa24f0a299fb2753157d671ad042d0910">VendorMap</a>&#160;</td>
          <td class="paramname"><em>vendors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d53/getopt_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> std::string &amp;&#160;</td>
          <td class="paramname"><em>index_archive_url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  349</span>{</div>
<div class="line"><span class="lineno">  350</span>  BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Syncing configuration cache&quot;</span>;</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a255e3e6a853e64eec598429806f9f2c6">enabled_config_update</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>  <span class="comment">// Download profiles archive zip</span></div>
<div class="line"><span class="lineno">  355</span>  <span class="comment">// dk: Do we want to return here on error? Or skip archive dwnld and unzip and work with previous run state cache / vendor? I think return.</span></div>
<div class="line"><span class="lineno">  356</span>  <span class="comment">// Any error here also doesnt show any info in UI. Do we want maybe notification?</span></div>
<div class="line"><span class="lineno">  357</span>  fs::path archive_path(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / <span class="stringliteral">&quot;vendor_indices.zip&quot;</span>);</div>
<div class="line"><span class="lineno">  358</span>  <span class="keywordflow">if</span> (index_archive_url.empty()) {</div>
<div class="line"><span class="lineno">  359</span>    BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Downloading profile archive failed - url has no value.&quot;</span>;</div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  361</span>  }</div>
<div class="line"><span class="lineno">  362</span>  BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Downloading vedor profiles archive zip from &quot;</span> &lt;&lt; index_archive_url;</div>
<div class="line"><span class="lineno">  363</span>  <span class="comment">//check if idx_url is leading to our site </span></div>
<div class="line"><span class="lineno">  364</span>  <span class="keywordflow">if</span> (!boost::starts_with(index_archive_url, <span class="stringliteral">&quot;http://files.prusa3d.com/wp-content/uploads/repository/&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  365</span>    !boost::starts_with(index_archive_url, <span class="stringliteral">&quot;https://files.prusa3d.com/wp-content/uploads/repository/&quot;</span>))</div>
<div class="line"><span class="lineno">  366</span>  {</div>
<div class="line"><span class="lineno">  367</span>    BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Unsafe url path for vedor profiles archive zip. Download is rejected.&quot;</span>;</div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  369</span>  }</div>
<div class="line"><span class="lineno">  370</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a>(index_archive_url, archive_path)) {</div>
<div class="line"><span class="lineno">  371</span>    BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Download of vedor profiles archive zip failed.&quot;</span>;</div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  373</span>  }</div>
<div class="line"><span class="lineno">  374</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>) { </div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">return</span>; </div>
<div class="line"><span class="lineno">  376</span>  }</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>  <span class="keyword">enum class</span> VendorStatus</div>
<div class="line"><span class="lineno">  379</span>  {</div>
<div class="line"><span class="lineno">  380</span>    <a class="code hl_enumvalue" href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a620c394467623bdc537a9816169674a1afcc6df4745c18fbdd1e912aad2d9dec3">IN_ARCHIVE</a>,</div>
<div class="line"><span class="lineno">  381</span>    IN_CACHE,</div>
<div class="line"><span class="lineno">  382</span>    NEW_VERSION,</div>
<div class="line"><span class="lineno">  383</span>    INSTALLED</div>
<div class="line"><span class="lineno">  384</span>  };</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>  std::vector&lt;std::pair&lt;std::string, VendorStatus&gt;&gt; vendors_with_status;</div>
<div class="line"><span class="lineno">  387</span>  <span class="comment">// Unzip archive to cache / vendor</span></div>
<div class="line"><span class="lineno">  388</span>  <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> archive;</div>
<div class="line"><span class="lineno">  389</span>  <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(&amp;archive);</div>
<div class="line"><span class="lineno">  390</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7893425af71793ea712b91d32a8f73f9">open_zip_reader</a>(&amp;archive, archive_path.string())) {</div>
<div class="line"><span class="lineno">  391</span>    BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Couldn&#39;t open zipped bundle.&quot;</span>;</div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  393</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  394</span>    <a class="code hl_typedef" href="../../d0/d1b/miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> num_entries = <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a1cb6b5d48f24b9aef3cb0a3f63793166">mz_zip_reader_get_num_files</a>(&amp;archive);</div>
<div class="line"><span class="lineno">  395</span>    <span class="comment">// loop the entries </span></div>
<div class="line"><span class="lineno">  396</span>    <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#dd/ddc/structmz__zip__archive__file__stat">mz_zip_archive_file_stat</a> <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>;</div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d0/d1b/miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i = 0; i &lt; num_entries; ++i) {</div>
<div class="line"><span class="lineno">  398</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/df6/miniz_8c.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a>(&amp;archive, i, &amp;<a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>)) {</div>
<div class="line"><span class="lineno">  399</span>        std::string name(<a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.m_filename);</div>
<div class="line"><span class="lineno">  400</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.m_uncomp_size &gt; 0) {</div>
<div class="line"><span class="lineno">  401</span>          std::string buffer((<span class="keywordtype">size_t</span>)<a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.m_uncomp_size, 0);</div>
<div class="line"><span class="lineno">  402</span>          <a class="code hl_typedef" href="../../d0/d1b/miniz_8h.html#a896b8bd8958fd11932180d7c9e247986">mz_bool</a> res = <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a9aa631c7bc8147b39b6d8a910682463e">mz_zip_reader_extract_to_mem</a>(&amp;archive, <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.m_file_index, (<span class="keywordtype">void</span>*)buffer.data(), (<span class="keywordtype">size_t</span>)<a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.m_uncomp_size, 0);</div>
<div class="line"><span class="lineno">  403</span>          <span class="keywordflow">if</span> (res == 0) {</div>
<div class="line"><span class="lineno">  404</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to unzip &quot;</span> &lt;&lt; <a class="code hl_define" href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a>.m_filename;</div>
<div class="line"><span class="lineno">  405</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  406</span>          }</div>
<div class="line"><span class="lineno">  407</span>          <span class="comment">// create file from buffer</span></div>
<div class="line"><span class="lineno">  408</span>          fs::path tmp_path(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a> / (name + <span class="stringliteral">&quot;.tmp&quot;</span>));</div>
<div class="line"><span class="lineno">  409</span>          <span class="keywordflow">if</span> (!fs::exists(tmp_path.parent_path())) {</div>
<div class="line"><span class="lineno">  410</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to unzip file &quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;. Directories are not supported. Skipping file.&quot;</span>;</div>
<div class="line"><span class="lineno">  411</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  412</span>          }</div>
<div class="line"><span class="lineno">  413</span>          fs::path target_path(<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a> / name);</div>
<div class="line"><span class="lineno">  414</span>          fs::fstream file(tmp_path, std::ios::out | std::ios::binary | std::ios::trunc);</div>
<div class="line"><span class="lineno">  415</span>          file.write(buffer.c_str(), buffer.size());</div>
<div class="line"><span class="lineno">  416</span>          file.close();</div>
<div class="line"><span class="lineno">  417</span>          boost::system::error_code ec;</div>
<div class="line"><span class="lineno">  418</span>          <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d6/d28/loaddrv_8c.html#af19d271470259b6de6622e4527cb537c">exists</a> = fs::exists(tmp_path, ec);</div>
<div class="line"><span class="lineno">  419</span>          <span class="keywordflow">if</span>(!<a class="code hl_function" href="../../d6/d28/loaddrv_8c.html#af19d271470259b6de6622e4527cb537c">exists</a> || ec) {</div>
<div class="line"><span class="lineno">  420</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to find unzipped file at &quot;</span> &lt;&lt; tmp_path &lt;&lt; <span class="stringliteral">&quot;. Terminating Preset updater synchorinzation.&quot;</span> ;</div>
<div class="line"><span class="lineno">  421</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab09c84872260214dc87647b98f735d0c">close_zip_reader</a>(&amp;archive);</div>
<div class="line"><span class="lineno">  422</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  423</span>          }</div>
<div class="line"><span class="lineno">  424</span>          fs::rename(tmp_path, target_path, ec);</div>
<div class="line"><span class="lineno">  425</span>          <span class="keywordflow">if</span> (ec) {</div>
<div class="line"><span class="lineno">  426</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to rename unzipped file at &quot;</span> &lt;&lt; tmp_path &lt;&lt; <span class="stringliteral">&quot;. Terminating Preset updater synchorinzation. Error message: &quot;</span> &lt;&lt; ec.message();</div>
<div class="line"><span class="lineno">  427</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab09c84872260214dc87647b98f735d0c">close_zip_reader</a>(&amp;archive);</div>
<div class="line"><span class="lineno">  428</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  429</span>          }</div>
<div class="line"><span class="lineno">  430</span>          <span class="comment">// TODO: what if unexpected happens here (folder inside zip) - crash! </span></div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>          <span class="keywordflow">if</span> (name.substr(name.size() - 3) == <span class="stringliteral">&quot;idx&quot;</span>)</div>
<div class="line"><span class="lineno">  433</span>            vendors_with_status.emplace_back(name.substr(0, name.size() - 4), VendorStatus::IN_ARCHIVE); <span class="comment">// asume for now its only in archive - if not, it will change later.</span></div>
<div class="line"><span class="lineno">  434</span>        }</div>
<div class="line"><span class="lineno">  435</span>      }</div>
<div class="line"><span class="lineno">  436</span>    }</div>
<div class="line"><span class="lineno">  437</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab09c84872260214dc87647b98f735d0c">close_zip_reader</a>(&amp;archive);</div>
<div class="line"><span class="lineno">  438</span>  }</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>  <span class="comment">// Update vendor preset bundles if in Vendor</span></div>
<div class="line"><span class="lineno">  441</span>  <span class="comment">// Over all indices from the cache directory:</span></div>
<div class="line"><span class="lineno">  442</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;index : <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a9aa4adf03d64f554268f5d7a361ffc36">index_db</a>) {</div>
<div class="line"><span class="lineno">  443</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>) { </div>
<div class="line"><span class="lineno">  444</span>      <span class="keywordflow">return</span>; </div>
<div class="line"><span class="lineno">  445</span>    }</div>
<div class="line"><span class="lineno">  446</span>    <span class="keyword">auto</span> archive_it = std::find_if(vendors_with_status.begin(), vendors_with_status.end(),</div>
<div class="line"><span class="lineno">  447</span>      [&amp;index](<span class="keyword">const</span> std::pair&lt;std::string, VendorStatus&gt;&amp; element) { return element.first == index.vendor(); });</div>
<div class="line"><span class="lineno">  448</span>    <span class="comment">//assert(archive_it != vendors_with_status.end()); // this would mean there is a index for vendor that is missing in recently downloaded archive</span></div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>    <span class="keyword">const</span> <span class="keyword">auto</span> vendor_it = vendors.find(index.vendor());</div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordflow">if</span> (vendor_it == vendors.end()) {</div>
<div class="line"><span class="lineno">  452</span>      <span class="comment">// Not installed vendor yet we need to check missing thumbnails (of new printers)</span></div>
<div class="line"><span class="lineno">  453</span>      BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;No such vendor: &quot;</span> &lt;&lt; index.vendor();</div>
<div class="line"><span class="lineno">  454</span>      <span class="keywordflow">if</span> (archive_it != vendors_with_status.end())</div>
<div class="line"><span class="lineno">  455</span>        archive_it-&gt;second = VendorStatus::IN_CACHE;</div>
<div class="line"><span class="lineno">  456</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  457</span>    }</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">if</span> (archive_it != vendors_with_status.end())</div>
<div class="line"><span class="lineno">  460</span>      archive_it-&gt;second = VendorStatus::INSTALLED;</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>    <span class="keyword">const</span> VendorProfile &amp;vendor = vendor_it-&gt;second;</div>
<div class="line"><span class="lineno">  463</span>    <span class="keyword">const</span> std::string idx_path = (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / (vendor.id + <span class="stringliteral">&quot;.idx&quot;</span>)).string();</div>
<div class="line"><span class="lineno">  464</span>    <span class="keyword">const</span> std::string idx_path_temp = (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a> / (vendor.id + <span class="stringliteral">&quot;.idx&quot;</span>)).string();</div>
<div class="line"><span class="lineno">  465</span>    </div>
<div class="line"><span class="lineno">  466</span>    <span class="comment">// Load the fresh index up</span></div>
<div class="line"><span class="lineno">  467</span>    {</div>
<div class="line"><span class="lineno">  468</span>      <a class="code hl_class" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a> new_index;</div>
<div class="line"><span class="lineno">  469</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  470</span>        new_index.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">load</a>(idx_path_temp);</div>
<div class="line"><span class="lineno">  471</span>      } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp; <span class="comment">/* err */</span>) {</div>
<div class="line"><span class="lineno">  472</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Could not load downloaded index %1% for vendor %2%: invalid index?&quot;</span>, idx_path_temp, vendor.name);</div>
<div class="line"><span class="lineno">  473</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  474</span>      }</div>
<div class="line"><span class="lineno">  475</span>      <span class="keywordflow">if</span> (new_index.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#afc8ffd7144822ad672f0e6592628555e">version</a>() &lt; index.version()) {</div>
<div class="line"><span class="lineno">  476</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;The downloaded index %1% for vendor %2% is older than the active one. Ignoring the downloaded index.&quot;</span>, idx_path_temp, vendor.name);</div>
<div class="line"><span class="lineno">  477</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  478</span>      }</div>
<div class="line"><span class="lineno">  479</span>      <a class="code hl_function" href="../../d7/d72/namespace_slic3r_1_1anonymous__namespace_02_preset_updater_8cpp_03.html#a891b96f51b3e718f980614354f4e40de">copy_file_fix</a>(idx_path_temp, idx_path);</div>
<div class="line"><span class="lineno">  480</span>      </div>
<div class="line"><span class="lineno">  481</span>      <span class="comment">//if we rename path we need to change it in Index object too or create the object again</span></div>
<div class="line"><span class="lineno">  482</span>      <span class="comment">//index = std::move(new_index);</span></div>
<div class="line"><span class="lineno">  483</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  484</span>        index.load(idx_path);</div>
<div class="line"><span class="lineno">  485</span>      }</div>
<div class="line"><span class="lineno">  486</span>      <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; <span class="comment">/* err */</span>) {</div>
<div class="line"><span class="lineno">  487</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Could not load downloaded index %1% for vendor %2%: invalid index?&quot;</span>, idx_path, vendor.name);</div>
<div class="line"><span class="lineno">  488</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  489</span>      }</div>
<div class="line"><span class="lineno">  490</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>)</div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  492</span>    }</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>    <span class="comment">// See if a there&#39;s a new version to download</span></div>
<div class="line"><span class="lineno">  495</span>    <span class="keyword">const</span> <span class="keyword">auto</span> recommended_it = index.recommended();</div>
<div class="line"><span class="lineno">  496</span>    <span class="keywordflow">if</span> (recommended_it == index.end()) {</div>
<div class="line"><span class="lineno">  497</span>      BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;No recommended version for vendor: %1%, invalid index?&quot;</span>, vendor.name);</div>
<div class="line"><span class="lineno">  498</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  499</span>    }</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    <span class="keyword">const</span> <span class="keyword">auto</span> recommended = recommended_it-&gt;config_version;</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Got index for vendor: %1%: current version: %2%, recommended version: %3%&quot;</span>,</div>
<div class="line"><span class="lineno">  504</span>      vendor.name,</div>
<div class="line"><span class="lineno">  505</span>      vendor.config_version.to_string(),</div>
<div class="line"><span class="lineno">  506</span>      recommended.to_string());</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">if</span> (vendor.config_version &gt;= recommended) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>    <span class="comment">// vendors that are checked here, doesnt need to be checked again later</span></div>
<div class="line"><span class="lineno">  511</span>    <span class="keywordflow">if</span> (archive_it != vendors_with_status.end())</div>
<div class="line"><span class="lineno">  512</span>      archive_it-&gt;second = VendorStatus::NEW_VERSION;</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>    <span class="comment">// Download recomended ini to cache</span></div>
<div class="line"><span class="lineno">  515</span>    <span class="keyword">const</span> <span class="keyword">auto</span> path_in_cache = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / (vendor.id + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  516</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Downloading new bundle for vendor: &quot;</span> &lt;&lt; vendor.name;</div>
<div class="line"><span class="lineno">  517</span>    <span class="keyword">const</span> <span class="keyword">auto</span> bundle_url = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;%1%/%2%.ini&quot;</span>, vendor.config_update_url, recommended.to_string());</div>
<div class="line"><span class="lineno">  518</span>    <span class="keyword">const</span> <span class="keyword">auto</span> bundle_path = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / (vendor.id + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  519</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a>(bundle_url, bundle_path))</div>
<div class="line"><span class="lineno">  520</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>)</div>
<div class="line"><span class="lineno">  522</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  523</span>    <span class="comment">// vp is fully loaded to get all resources</span></div>
<div class="line"><span class="lineno">  524</span>    VendorProfile vp;</div>
<div class="line"><span class="lineno">  525</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  526</span>      vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(bundle_path, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  527</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  528</span>      BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1% at %2%, message: %3%&quot;</span>, vendor.id, bundle_path, e.what());</div>
<div class="line"><span class="lineno">  529</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  530</span>    }</div>
<div class="line"><span class="lineno">  531</span>    <span class="comment">// check the fresh bundle for missing resources</span></div>
<div class="line"><span class="lineno">  532</span>    <span class="comment">// for that, the ini file must be parsed (done above)</span></div>
<div class="line"><span class="lineno">  533</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; model : vp.models) {</div>
<div class="line"><span class="lineno">  534</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; res : { model.bed_texture, model.bed_model, model.thumbnail<span class="comment">/*id +&quot;_thumbnail.png&quot;*/</span>} ) {</div>
<div class="line"><span class="lineno">  535</span>        <span class="keywordflow">if</span> (! res.empty()) {</div>
<div class="line"><span class="lineno">  536</span>          <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  537</span>          {</div>
<div class="line"><span class="lineno">  538</span>            <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af7e4467777ab333009919e967a9eafaf">get_missing_resource</a>(vp.id, res, vendor.config_update_url);</div>
<div class="line"><span class="lineno">  539</span>          }</div>
<div class="line"><span class="lineno">  540</span>          <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e)</div>
<div class="line"><span class="lineno">  541</span>          {</div>
<div class="line"><span class="lineno">  542</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to get &quot;</span> &lt;&lt; res &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; vp.id &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; model.id &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what();</div>
<div class="line"><span class="lineno">  543</span>          }</div>
<div class="line"><span class="lineno">  544</span>          </div>
<div class="line"><span class="lineno">  545</span>        }</div>
<div class="line"><span class="lineno">  546</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>)</div>
<div class="line"><span class="lineno">  547</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  548</span>      }</div>
<div class="line"><span class="lineno">  549</span>    }</div>
<div class="line"><span class="lineno">  550</span>  }</div>
<div class="line"><span class="lineno">  551</span>  <span class="comment">// Download missing thumbnails for not-installed vendors.</span></div>
<div class="line"><span class="lineno">  552</span>  <span class="comment">//for (const std::string&amp; vendor : vendors_only_in_archive) </span></div>
<div class="line"><span class="lineno">  553</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> std::pair&lt;std::string, VendorStatus &gt;&amp; vendor :  vendors_with_status) {</div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">if</span> (vendor.second == VendorStatus::IN_ARCHIVE) {</div>
<div class="line"><span class="lineno">  555</span>      <span class="comment">// index in archive and not in cache and not installed vendor</span></div>
<div class="line"><span class="lineno">  556</span>      </div>
<div class="line"><span class="lineno">  557</span>      <span class="keyword">const</span> <span class="keyword">auto</span> idx_path_in_archive = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a> / (vendor.first + <span class="stringliteral">&quot;.idx&quot;</span>);</div>
<div class="line"><span class="lineno">  558</span>      <span class="keyword">const</span> <span class="keyword">auto</span> ini_path_in_archive = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a> / (vendor.first + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  559</span>      <span class="keywordflow">if</span> (!fs::exists(idx_path_in_archive))</div>
<div class="line"><span class="lineno">  560</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  561</span>      <a class="code hl_class" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a> index;</div>
<div class="line"><span class="lineno">  562</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  563</span>        index.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">load</a>(idx_path_in_archive);</div>
<div class="line"><span class="lineno">  564</span>      }</div>
<div class="line"><span class="lineno">  565</span>      <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; <span class="comment">/* err */</span>) {</div>
<div class="line"><span class="lineno">  566</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Could not load downloaded index %1% for vendor %2%: invalid index?&quot;</span>, idx_path_in_archive, vendor.first);</div>
<div class="line"><span class="lineno">  567</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  568</span>      }</div>
<div class="line"><span class="lineno">  569</span>      <span class="keyword">const</span> <span class="keyword">auto</span> recommended_it = index.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a30a0a5acdd8214d6e803b9e40b77d385">recommended</a>();</div>
<div class="line"><span class="lineno">  570</span>      <span class="keywordflow">if</span> (recommended_it == index.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#ae3ff9e1e88b69494f5052be75793ab68">end</a>()) {</div>
<div class="line"><span class="lineno">  571</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;No recommended version for vendor: %1%, invalid index? (%2%)&quot;</span>, vendor.first, idx_path_in_archive);</div>
<div class="line"><span class="lineno">  572</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  573</span>      }</div>
<div class="line"><span class="lineno">  574</span>      <span class="keyword">const</span> <span class="keyword">auto</span> recommended = recommended_it-&gt;config_version;</div>
<div class="line"><span class="lineno">  575</span>      <span class="keywordflow">if</span> (!fs::exists(ini_path_in_archive)){</div>
<div class="line"><span class="lineno">  576</span>        <span class="comment">// Download recommneded to vendor - we do not have any existing ini file so we have to use hardcoded url.</span></div>
<div class="line"><span class="lineno">  577</span>        <span class="keyword">const</span> std::string fixed_url = GUI::wxGetApp().app_config-&gt;profile_folder_url();</div>
<div class="line"><span class="lineno">  578</span>        <span class="keyword">const</span> <span class="keyword">auto</span> bundle_url = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;%1%/%2%/%3%.ini&quot;</span>, fixed_url, vendor.first, recommended.to_string());</div>
<div class="line"><span class="lineno">  579</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a>(bundle_url, ini_path_in_archive))</div>
<div class="line"><span class="lineno">  580</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  581</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  582</span>        <span class="comment">// check existing ini version</span></div>
<div class="line"><span class="lineno">  583</span>        <span class="comment">// then download recommneded to vendor if needed</span></div>
<div class="line"><span class="lineno">  584</span>        VendorProfile vp;</div>
<div class="line"><span class="lineno">  585</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  586</span>          vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(ini_path_in_archive, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  587</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  588</span>          BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1% at %2%, message: %3%&quot;</span>, vendor.first, ini_path_in_archive, e.what());</div>
<div class="line"><span class="lineno">  589</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  590</span>        }</div>
<div class="line"><span class="lineno">  591</span>        <span class="keywordflow">if</span> (vp.config_version != recommended) {</div>
<div class="line"><span class="lineno">  592</span>          <span class="keyword">const</span> std::string fixed_url = GUI::wxGetApp().app_config-&gt;profile_folder_url();</div>
<div class="line"><span class="lineno">  593</span>          <span class="keyword">const</span> <span class="keyword">auto</span> bundle_url = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;%1%/%2%/%3%.ini&quot;</span>, fixed_url, vendor.first, recommended.to_string());</div>
<div class="line"><span class="lineno">  594</span>          <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a>(bundle_url, ini_path_in_archive))</div>
<div class="line"><span class="lineno">  595</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  596</span>        }</div>
<div class="line"><span class="lineno">  597</span>      }</div>
<div class="line"><span class="lineno">  598</span>      <span class="comment">// check missing thumbnails</span></div>
<div class="line"><span class="lineno">  599</span>      VendorProfile vp;</div>
<div class="line"><span class="lineno">  600</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  601</span>        vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(ini_path_in_archive, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  602</span>      }</div>
<div class="line"><span class="lineno">  603</span>      <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  604</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1% at %2%, message: %3%&quot;</span>, vendor.first, ini_path_in_archive, e.what());</div>
<div class="line"><span class="lineno">  605</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  606</span>      }</div>
<div class="line"><span class="lineno">  607</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; model : vp.models) {</div>
<div class="line"><span class="lineno">  608</span>        <span class="keywordflow">if</span> (!model.thumbnail.empty()) {</div>
<div class="line"><span class="lineno">  609</span>          <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  610</span>          {</div>
<div class="line"><span class="lineno">  611</span>            <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af7e4467777ab333009919e967a9eafaf">get_missing_resource</a>(vp.id, model.thumbnail, vp.config_update_url);</div>
<div class="line"><span class="lineno">  612</span>          }</div>
<div class="line"><span class="lineno">  613</span>          <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e)</div>
<div class="line"><span class="lineno">  614</span>          {</div>
<div class="line"><span class="lineno">  615</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to get &quot;</span> &lt;&lt; model.thumbnail &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; vp.id &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; model.id &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what();</div>
<div class="line"><span class="lineno">  616</span>          }</div>
<div class="line"><span class="lineno">  617</span>        }</div>
<div class="line"><span class="lineno">  618</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>)</div>
<div class="line"><span class="lineno">  619</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  620</span>      }</div>
<div class="line"><span class="lineno">  621</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vendor.second == VendorStatus::IN_CACHE) {</div>
<div class="line"><span class="lineno">  622</span>      <span class="comment">// find those where archive index recommends other version than index in cache and get it if not present</span></div>
<div class="line"><span class="lineno">  623</span>      <span class="keyword">const</span> <span class="keyword">auto</span> idx_path_in_archive = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a> / (vendor.first + <span class="stringliteral">&quot;.idx&quot;</span>);</div>
<div class="line"><span class="lineno">  624</span>      <span class="keyword">const</span> <span class="keyword">auto</span> ini_path_in_archive = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a371c259f91f6c736a4a59a2bb71ca042">cache_vendor_path</a> / (vendor.first + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  625</span>      <span class="keyword">const</span> <span class="keyword">auto</span> idx_path_in_cache = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a88634a7648d871f97108572cd4f47cb2">cache_path</a> / (vendor.first + <span class="stringliteral">&quot;.idx&quot;</span>);</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>      <span class="keywordflow">if</span> (!fs::exists(idx_path_in_archive) || !fs::exists(idx_path_in_cache))</div>
<div class="line"><span class="lineno">  628</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span>      <span class="comment">// Compare index in cache and recetly downloaded one as part of zip archive</span></div>
<div class="line"><span class="lineno">  631</span>      <a class="code hl_class" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a> index_cache;</div>
<div class="line"><span class="lineno">  632</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  633</span>        index_cache.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">load</a>(idx_path_in_cache);</div>
<div class="line"><span class="lineno">  634</span>      }</div>
<div class="line"><span class="lineno">  635</span>      <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; <span class="comment">/* err */</span>) {</div>
<div class="line"><span class="lineno">  636</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Could not load downloaded index %1% for vendor %2%: invalid index?&quot;</span>, idx_path_in_cache, vendor.first);</div>
<div class="line"><span class="lineno">  637</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  638</span>      }</div>
<div class="line"><span class="lineno">  639</span>      <span class="keyword">const</span> <span class="keyword">auto</span> recommended_it_cache = index_cache.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a30a0a5acdd8214d6e803b9e40b77d385">recommended</a>();</div>
<div class="line"><span class="lineno">  640</span>      <span class="keywordflow">if</span> (recommended_it_cache == index_cache.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#ae3ff9e1e88b69494f5052be75793ab68">end</a>()) {</div>
<div class="line"><span class="lineno">  641</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;No recommended version for vendor: %1%, invalid index? (%2%)&quot;</span>, vendor.first, idx_path_in_cache);</div>
<div class="line"><span class="lineno">  642</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  643</span>      }</div>
<div class="line"><span class="lineno">  644</span>      <span class="keyword">const</span> <span class="keyword">auto</span> recommended_cache = recommended_it_cache-&gt;config_version;</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>      <a class="code hl_class" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a> index_archive;</div>
<div class="line"><span class="lineno">  647</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  648</span>        index_archive.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a4e8ac4c8876fd25e06e8b56dc1da660b">load</a>(idx_path_in_archive);</div>
<div class="line"><span class="lineno">  649</span>      }</div>
<div class="line"><span class="lineno">  650</span>      <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; <span class="comment">/* err */</span>) {</div>
<div class="line"><span class="lineno">  651</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Could not load downloaded index %1% for vendor %2%: invalid index?&quot;</span>, idx_path_in_archive, vendor.first);</div>
<div class="line"><span class="lineno">  652</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  653</span>      }</div>
<div class="line"><span class="lineno">  654</span>      <span class="keyword">const</span> <span class="keyword">auto</span> recommended_it_archive = index_archive.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#a30a0a5acdd8214d6e803b9e40b77d385">recommended</a>();</div>
<div class="line"><span class="lineno">  655</span>      <span class="keywordflow">if</span> (recommended_it_archive == index_archive.<a class="code hl_function" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html#ae3ff9e1e88b69494f5052be75793ab68">end</a>()) {</div>
<div class="line"><span class="lineno">  656</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;No recommended version for vendor: %1%, invalid index? (%2%)&quot;</span>, vendor.first, idx_path_in_archive);</div>
<div class="line"><span class="lineno">  657</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  658</span>      }</div>
<div class="line"><span class="lineno">  659</span>      <span class="keyword">const</span> <span class="keyword">auto</span> recommended_archive = recommended_it_archive-&gt;config_version;</div>
<div class="line"><span class="lineno">  660</span>      </div>
<div class="line"><span class="lineno">  661</span>      <span class="keywordflow">if</span> (recommended_archive &lt;= recommended_cache) {</div>
<div class="line"><span class="lineno">  662</span>        <span class="comment">// There isn&#39;t  more recent recomended version online. This vendor is also not istalled.</span></div>
<div class="line"><span class="lineno">  663</span>        <span class="comment">// Thus only .ini is in resources and came with installation.</span></div>
<div class="line"><span class="lineno">  664</span>        <span class="comment">// And we expect all resources are present.</span></div>
<div class="line"><span class="lineno">  665</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  666</span>      }</div>
<div class="line"><span class="lineno">  667</span>      </div>
<div class="line"><span class="lineno">  668</span>      <span class="comment">// Download new .ini if needed. So next time user runs Wizard, most recent profiles are shown &amp; installed.</span></div>
<div class="line"><span class="lineno">  669</span>      <span class="keywordflow">if</span> (!fs::exists(ini_path_in_archive) || fs::is_empty(ini_path_in_archive)) {</div>
<div class="line"><span class="lineno">  670</span>        <span class="comment">// download recommneded to vendor </span></div>
<div class="line"><span class="lineno">  671</span>        <span class="keyword">const</span> fs::path ini_path_in_rsrc = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a12b772e680a5ca2fd88eae6c7ae4e4c6">rsrc_path</a> / (vendor.first + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  672</span>        <span class="keywordflow">if</span> (!fs::exists(ini_path_in_rsrc)) {</div>
<div class="line"><span class="lineno">  673</span>          <span class="comment">// THIS SHOULD NOT HAPPEN</span></div>
<div class="line"><span class="lineno">  674</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  675</span>        }</div>
<div class="line"><span class="lineno">  676</span>        <span class="comment">// Get download path from existing ini.</span></div>
<div class="line"><span class="lineno">  677</span>        VendorProfile vp;</div>
<div class="line"><span class="lineno">  678</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  679</span>          vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(ini_path_in_rsrc, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  680</span>        }</div>
<div class="line"><span class="lineno">  681</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  682</span>          BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1% at %2%, message: %3%&quot;</span>, vendor.first, ini_path_in_rsrc, e.what());</div>
<div class="line"><span class="lineno">  683</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  684</span>        }</div>
<div class="line"><span class="lineno">  685</span>        <span class="keyword">const</span> <span class="keyword">auto</span> bundle_url = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;%1%/%2%.ini&quot;</span>, vp.config_update_url, recommended_archive.to_string());</div>
<div class="line"><span class="lineno">  686</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a>(bundle_url, ini_path_in_archive)) {</div>
<div class="line"><span class="lineno">  687</span>          BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Failed to open vendor .ini file when checking missing resources: %1%&quot;</span>, ini_path_in_rsrc);</div>
<div class="line"><span class="lineno">  688</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  689</span>        }</div>
<div class="line"><span class="lineno">  690</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  691</span>        <span class="comment">// Check existing ini version.</span></div>
<div class="line"><span class="lineno">  692</span>        <span class="comment">// Then download recommneded to vendor if needed.</span></div>
<div class="line"><span class="lineno">  693</span>        VendorProfile vp;</div>
<div class="line"><span class="lineno">  694</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  695</span>          vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(ini_path_in_archive, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  696</span>        }</div>
<div class="line"><span class="lineno">  697</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  698</span>          BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1% at %2%, message: %3%&quot;</span>, vendor.first, ini_path_in_archive, e.what());</div>
<div class="line"><span class="lineno">  699</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  700</span>        }</div>
<div class="line"><span class="lineno">  701</span>        <span class="keywordflow">if</span> (vp.config_version != recommended_archive) {</div>
<div class="line"><span class="lineno">  702</span>          <span class="keyword">const</span> <span class="keyword">auto</span> bundle_url = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;%1%/%2%.ini&quot;</span>, vp.config_update_url, recommended_archive.to_string());</div>
<div class="line"><span class="lineno">  703</span>          <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a941e7a6e74d0bcf93b9c2bb05dbd09c0">get_file</a>(bundle_url, ini_path_in_archive)) {</div>
<div class="line"><span class="lineno">  704</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Failed to open vendor .ini file when checking missing resources: %1%&quot;</span>, ini_path_in_archive);</div>
<div class="line"><span class="lineno">  705</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  706</span>          }</div>
<div class="line"><span class="lineno">  707</span>        }</div>
<div class="line"><span class="lineno">  708</span>      }</div>
<div class="line"><span class="lineno">  709</span> </div>
<div class="line"><span class="lineno">  710</span>      <span class="keywordflow">if</span> (!fs::exists(ini_path_in_archive)) {</div>
<div class="line"><span class="lineno">  711</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Resources check failed to find ini file for vendor: &quot;</span> &lt;&lt; vendor.first;</div>
<div class="line"><span class="lineno">  712</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  713</span>      }</div>
<div class="line"><span class="lineno">  714</span>      <span class="comment">// check missing thumbnails</span></div>
<div class="line"><span class="lineno">  715</span>      VendorProfile vp;</div>
<div class="line"><span class="lineno">  716</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  717</span>        vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(ini_path_in_archive, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  718</span>      }</div>
<div class="line"><span class="lineno">  719</span>      <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  720</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1% at %2%, message: %3%&quot;</span>, vendor.first, ini_path_in_archive, e.what());</div>
<div class="line"><span class="lineno">  721</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  722</span>      }</div>
<div class="line"><span class="lineno">  723</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; model : vp.models) {</div>
<div class="line"><span class="lineno">  724</span>        <span class="keywordflow">if</span> (!model.thumbnail.empty()) {</div>
<div class="line"><span class="lineno">  725</span>          <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  726</span>          {</div>
<div class="line"><span class="lineno">  727</span>            <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af7e4467777ab333009919e967a9eafaf">get_missing_resource</a>(vp.id, model.thumbnail, vp.config_update_url);</div>
<div class="line"><span class="lineno">  728</span>          }</div>
<div class="line"><span class="lineno">  729</span>          <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e)</div>
<div class="line"><span class="lineno">  730</span>          {</div>
<div class="line"><span class="lineno">  731</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to get &quot;</span> &lt;&lt; model.thumbnail &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; vp.id &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; model.id &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what();</div>
<div class="line"><span class="lineno">  732</span>          }</div>
<div class="line"><span class="lineno">  733</span>        }</div>
<div class="line"><span class="lineno">  734</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>)</div>
<div class="line"><span class="lineno">  735</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  736</span>      }</div>
<div class="line"><span class="lineno">  737</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vendor.second == VendorStatus::INSTALLED || vendor.second == VendorStatus::NEW_VERSION) {</div>
<div class="line"><span class="lineno">  738</span>      <span class="comment">// Installed vendors need to check that no resource is missing. Do this only for files in vendor folder (not in resorces)</span></div>
<div class="line"><span class="lineno">  739</span>      <span class="comment">// VendorStatus::NEW_VERSION might seem like a mistake here since files are downloaded when preparing update higher in this function. </span></div>
<div class="line"><span class="lineno">  740</span>      <span class="comment">// But this is a check for ini file in vendor where resources might be still missing since last update.</span></div>
<div class="line"><span class="lineno">  741</span>      <span class="keyword">const</span> <span class="keyword">auto</span> path_in_vendor = <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#adde3af38e04d0285249d847b004c23f4">vendor_path</a> / (vendor.first + <span class="stringliteral">&quot;.ini&quot;</span>);</div>
<div class="line"><span class="lineno">  742</span>      <span class="keywordflow">if</span>(!fs::exists(path_in_vendor))</div>
<div class="line"><span class="lineno">  743</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  744</span>      VendorProfile vp;</div>
<div class="line"><span class="lineno">  745</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  746</span>        vp = <a class="code hl_function" href="../../d2/dbe/class_slic3r_1_1_vendor_profile.html#abe2eace8ff1ce23bff40b7ee23eba162">VendorProfile::from_ini</a>(path_in_vendor, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  747</span>      }</div>
<div class="line"><span class="lineno">  748</span>      <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  749</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;Corrupted profile file for vendor %1% at %2%, message: %3%&quot;</span>, vendor.first, path_in_vendor, e.what());</div>
<div class="line"><span class="lineno">  750</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  751</span>      }</div>
<div class="line"><span class="lineno">  752</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; model : vp.models) {</div>
<div class="line"><span class="lineno">  753</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; res : { model.bed_texture, model.bed_model, model.thumbnail }) {</div>
<div class="line"><span class="lineno">  754</span>          <span class="keywordflow">if</span> (!model.thumbnail.empty()) {</div>
<div class="line"><span class="lineno">  755</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  756</span>            {</div>
<div class="line"><span class="lineno">  757</span>              <a class="code hl_function" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#aa0ab86b21916933d5126eb64004f18b0">get_or_copy_missing_resource</a>(vp.id, res, vp.config_update_url);</div>
<div class="line"><span class="lineno">  758</span>            }</div>
<div class="line"><span class="lineno">  759</span>            <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e)</div>
<div class="line"><span class="lineno">  760</span>            {</div>
<div class="line"><span class="lineno">  761</span>              BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../de/dca/tga_8cpp.html#adbb625a19574e9e39e1d07df31b00b06">error</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to get &quot;</span> &lt;&lt; model.thumbnail &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; vp.id &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; model.id &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what();</div>
<div class="line"><span class="lineno">  762</span>            }</div>
<div class="line"><span class="lineno">  763</span>          }</div>
<div class="line"><span class="lineno">  764</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af00decc3399244b5aca6e99ef79ae3a0">cancel</a>)</div>
<div class="line"><span class="lineno">  765</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  766</span>        }</div>
<div class="line"><span class="lineno">  767</span>      }</div>
<div class="line"><span class="lineno">  768</span>    }</div>
<div class="line"><span class="lineno">  769</span>  }</div>
<div class="line"><span class="lineno">  770</span>}</div>
<div class="ttc" id="aloaddrv_8c_html_af19d271470259b6de6622e4527cb537c"><div class="ttname"><a href="../../d6/d28/loaddrv_8c.html#af19d271470259b6de6622e4527cb537c">exists</a></div><div class="ttdeci">int exists(char *filename)</div><div class="ttdef"><b>Definition</b> loaddrv.c:45</div></div>
<div class="ttc" id="aminiz_8c_html_a1cb6b5d48f24b9aef3cb0a3f63793166"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a1cb6b5d48f24b9aef3cb0a3f63793166">mz_zip_reader_get_num_files</a></div><div class="ttdeci">mz_uint mz_zip_reader_get_num_files(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition</b> miniz.c:7870</div></div>
<div class="ttc" id="aminiz_8c_html_a8c64687454aca17948eb58730dc6f41b"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a></div><div class="ttdeci">void mz_zip_zero_struct(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition</b> miniz.c:3792</div></div>
<div class="ttc" id="aminiz_8c_html_a9aa631c7bc8147b39b6d8a910682463e"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a9aa631c7bc8147b39b6d8a910682463e">mz_zip_reader_extract_to_mem</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_to_mem(mz_zip_archive *pZip, mz_uint file_index, void *pBuf, size_t buf_size, mz_uint flags)</div><div class="ttdef"><b>Definition</b> miniz.c:4528</div></div>
<div class="ttc" id="aminiz_8c_html_aa9d3abc65b4b9b91efc437ec151e9c99"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a></div><div class="ttdeci">mz_bool mz_zip_reader_file_stat(mz_zip_archive *pZip, mz_uint file_index, mz_zip_archive_file_stat *pStat)</div><div class="ttdef"><b>Definition</b> miniz.c:7959</div></div>
<div class="ttc" id="aminiz_8h_html_a4195703cf0ade709ddce7f8777fc0cc2"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a></div><div class="ttdeci">unsigned int mz_uint</div><div class="ttdef"><b>Definition</b> miniz.h:489</div></div>
<div class="ttc" id="aminiz_8h_html_a896b8bd8958fd11932180d7c9e247986"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#a896b8bd8958fd11932180d7c9e247986">mz_bool</a></div><div class="ttdeci">int mz_bool</div><div class="ttdef"><b>Definition</b> miniz.h:492</div></div>
<div class="ttc" id="aminiz_8h_html_da/df0/structmz__zip__archive"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a></div><div class="ttdef"><b>Definition</b> miniz.h:1053</div></div>
<div class="ttc" id="aminiz_8h_html_dd/ddc/structmz__zip__archive__file__stat"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#dd/ddc/structmz__zip__archive__file__stat">mz_zip_archive_file_stat</a></div><div class="ttdef"><b>Definition</b> miniz.h:924</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_g_u_i_html_a620c394467623bdc537a9816169674a1afcc6df4745c18fbdd1e912aad2d9dec3"><div class="ttname"><a href="../../d9/d45/namespace_slic3r_1_1_g_u_i.html#a620c394467623bdc537a9816169674a1afcc6df4745c18fbdd1e912aad2d9dec3">Slic3r::GUI::IN_ARCHIVE</a></div><div class="ttdeci">@ IN_ARCHIVE</div><div class="ttdef"><b>Definition</b> ConfigWizard_private.hpp:63</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7893425af71793ea712b91d32a8f73f9"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7893425af71793ea712b91d32a8f73f9">Slic3r::open_zip_reader</a></div><div class="ttdeci">bool open_zip_reader(mz_zip_archive *zip, const std::string &amp;fname)</div><div class="ttdef"><b>Definition</b> miniz_extension.cpp:62</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab09c84872260214dc87647b98f735d0c"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab09c84872260214dc87647b98f735d0c">Slic3r::close_zip_reader</a></div><div class="ttdeci">bool close_zip_reader(mz_zip_archive *zip)</div><div class="ttdef"><b>Definition</b> miniz_extension.cpp:72</div></div>
<div class="ttc" id="astruct_slic3r_1_1_preset_updater_1_1priv_html_af7e4467777ab333009919e967a9eafaf"><div class="ttname"><a href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#af7e4467777ab333009919e967a9eafaf">Slic3r::PresetUpdater::priv::get_missing_resource</a></div><div class="ttdeci">void get_missing_resource(const std::string &amp;vendor, const std::string &amp;filename, const std::string &amp;url) const</div><div class="ttdef"><b>Definition</b> PresetUpdater.cpp:264</div></div>
<div class="ttc" id="aunistd_8h_html_a149da0702b060478da4d59ffe807adac"><div class="ttname"><a href="../../da/d6f/unistd_8h.html#a149da0702b060478da4d59ffe807adac">stat</a></div><div class="ttdeci">#define stat</div><div class="ttdef"><b>Definition</b> unistd.h:53</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00072">Slic3r::close_zip_reader()</a>, <a class="el" href="../../#l00035">Slic3r::VendorProfile::config_update_url</a>, <a class="el" href="../../#l00034">Slic3r::VendorProfile::config_version</a>, <a class="el" href="../../#l00068">Slic3r::GUI::Config::Index::end()</a>, <a class="el" href="../../#l00050">error</a>, <a class="el" href="../../#l00045">exists()</a>, <a class="el" href="../../#l00044">Slic3r::format()</a>, <a class="el" href="../../#l00076">Slic3r::VendorProfile::from_ini()</a>, <a class="el" href="../../#l00033">Slic3r::VendorProfile::id</a>, <a class="el" href="../../#l00120">Slic3r::GUI::Config::Index::load()</a>, <a class="el" href="../../#l00067">Slic3r::VendorProfile::models</a>, <a class="el" href="../../#l04528">mz_zip_reader_extract_to_mem()</a>, <a class="el" href="../../#l07959">mz_zip_reader_file_stat()</a>, <a class="el" href="../../#l07870">mz_zip_reader_get_num_files()</a>, <a class="el" href="../../#l03792">mz_zip_zero_struct()</a>, <a class="el" href="../../#l00032">Slic3r::VendorProfile::name</a>, <a class="el" href="../../#l00062">Slic3r::open_zip_reader()</a>, <a class="el" href="../../#l00229">Slic3r::GUI::Config::Index::recommended()</a>, <a class="el" href="../../#l00053">stat</a>, <a class="el" href="../../#l00153">Slic3r::Semver::to_string()</a>, and <a class="el" href="../../#l00201">Slic3r::GUI::Config::Index::version()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv_a8476c7e87f53c7f14649f21d517f3aab_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a20ae55e56b85c813b4361ad08fd59f20" name="a20ae55e56b85c813b4361ad08fd59f20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20ae55e56b85c813b4361ad08fd59f20">&#9670;&#160;</a></span>update_index_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PresetUpdater::priv::update_index_db </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  207</span>{</div>
<div class="line"><span class="lineno">  208</span>  <a class="code hl_variable" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html#a9aa4adf03d64f554268f5d7a361ffc36">index_db</a> = Index::load_db();</div>
<div class="line"><span class="lineno">  209</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a88634a7648d871f97108572cd4f47cb2" name="a88634a7648d871f97108572cd4f47cb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88634a7648d871f97108572cd4f47cb2">&#9670;&#160;</a></span>cache_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fs::path Slic3r::PresetUpdater::priv::cache_path</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a371c259f91f6c736a4a59a2bb71ca042" name="a371c259f91f6c736a4a59a2bb71ca042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a371c259f91f6c736a4a59a2bb71ca042">&#9670;&#160;</a></span>cache_vendor_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fs::path Slic3r::PresetUpdater::priv::cache_vendor_path</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af00decc3399244b5aca6e99ef79ae3a0" name="af00decc3399244b5aca6e99ef79ae3a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af00decc3399244b5aca6e99ef79ae3a0">&#9670;&#160;</a></span>cancel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PresetUpdater::priv::cancel</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a255e3e6a853e64eec598429806f9f2c6" name="a255e3e6a853e64eec598429806f9f2c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255e3e6a853e64eec598429806f9f2c6">&#9670;&#160;</a></span>enabled_config_update</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PresetUpdater::priv::enabled_config_update</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad095998a4965d49ef60cd34950cc8015" name="ad095998a4965d49ef60cd34950cc8015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad095998a4965d49ef60cd34950cc8015">&#9670;&#160;</a></span>enabled_version_check</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PresetUpdater::priv::enabled_version_check</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a58ce233e25e1e0e9d0dc4b0b4ebf8946" name="a58ce233e25e1e0e9d0dc4b0b4ebf8946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58ce233e25e1e0e9d0dc4b0b4ebf8946">&#9670;&#160;</a></span>has_waiting_updates</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PresetUpdater::priv::has_waiting_updates { false }</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9aa4adf03d64f554268f5d7a361ffc36" name="a9aa4adf03d64f554268f5d7a361ffc36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aa4adf03d64f554268f5d7a361ffc36">&#9670;&#160;</a></span>index_db</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d8/df0/class_slic3r_1_1_g_u_i_1_1_config_1_1_index.html">Index</a>&gt; Slic3r::PresetUpdater::priv::index_db</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00192">priv()</a>.</p>

</div>
</div>
<a id="a12b772e680a5ca2fd88eae6c7ae4e4c6" name="a12b772e680a5ca2fd88eae6c7ae4e4c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12b772e680a5ca2fd88eae6c7ae4e4c6">&#9670;&#160;</a></span>rsrc_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fs::path Slic3r::PresetUpdater::priv::rsrc_path</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3d3693efa8b964fa904018baa8ef29b9" name="a3d3693efa8b964fa904018baa8ef29b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d3693efa8b964fa904018baa8ef29b9">&#9670;&#160;</a></span>thread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::thread Slic3r::PresetUpdater::priv::thread</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adde3af38e04d0285249d847b004c23f4" name="adde3af38e04d0285249d847b004c23f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adde3af38e04d0285249d847b004c23f4">&#9670;&#160;</a></span>vendor_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fs::path Slic3r::PresetUpdater::priv::vendor_path</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ba85d0a6fd5e6b60876f7d594838e56" name="a3ba85d0a6fd5e6b60876f7d594838e56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ba85d0a6fd5e6b60876f7d594838e56">&#9670;&#160;</a></span>version_check_url</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::PresetUpdater::priv::version_check_url</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5f49f4486a39f2fab2910b14f717a99d" name="a5f49f4486a39f2fab2910b14f717a99d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f49f4486a39f2fab2910b14f717a99d">&#9670;&#160;</a></span>waiting_updates</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/db8/namespace_slic3r.html#d9/df6/struct_slic3r_1_1_updates">Updates</a> Slic3r::PresetUpdater::priv::waiting_updates</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/slic3r/Utils/<a class="el" href="../../">PresetUpdater.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d9/d80/class_slic3r_1_1_preset_updater.html">PresetUpdater</a></li><li class="navelem"><a class="el" href="../../db/d7e/struct_slic3r_1_1_preset_updater_1_1priv.html">priv</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
